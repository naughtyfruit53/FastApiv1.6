"""initial final

Revision ID: 2be0230fa04b
Revises: 
Create Date: 2025-08-26 13:10:46.620087

"""
from alembic import op
import sqlalchemy as sa


# revision identifiers, used by Alembic.
revision = '2be0230fa04b'
down_revision = None
branch_labels = None
depends_on = None


def upgrade() -> None:
    # ### commands auto generated by Alembic - please adjust! ###
    op.create_table('organizations',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('name', sa.String(), nullable=False),
    sa.Column('subdomain', sa.String(), nullable=False),
    sa.Column('status', sa.String(), nullable=False),
    sa.Column('business_type', sa.String(), nullable=True),
    sa.Column('industry', sa.String(), nullable=True),
    sa.Column('website', sa.String(), nullable=True),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('primary_email', sa.String(), nullable=False),
    sa.Column('primary_phone', sa.String(), nullable=False),
    sa.Column('address1', sa.String(), nullable=False),
    sa.Column('address2', sa.String(), nullable=True),
    sa.Column('city', sa.String(), nullable=False),
    sa.Column('state', sa.String(), nullable=False),
    sa.Column('pin_code', sa.String(), nullable=False),
    sa.Column('country', sa.String(), nullable=False),
    sa.Column('state_code', sa.String(), nullable=True),
    sa.Column('gst_number', sa.String(), nullable=True),
    sa.Column('pan_number', sa.String(), nullable=True),
    sa.Column('cin_number', sa.String(), nullable=True),
    sa.Column('plan_type', sa.String(), nullable=False),
    sa.Column('max_users', sa.Integer(), nullable=False),
    sa.Column('storage_limit_gb', sa.Integer(), nullable=False),
    sa.Column('features', sa.JSON(), nullable=True),
    sa.Column('license_type', sa.String(), nullable=False),
    sa.Column('license_issued_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('license_expiry_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('license_duration_months', sa.Integer(), nullable=True),
    sa.Column('timezone', sa.String(), nullable=False),
    sa.Column('currency', sa.String(), nullable=False),
    sa.Column('date_format', sa.String(), nullable=False),
    sa.Column('financial_year_start', sa.String(), nullable=False),
    sa.Column('enabled_modules', sa.JSON(), nullable=True),
    sa.Column('company_details_completed', sa.Boolean(), nullable=False),
    sa.Column('org_code', sa.String(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_org_status_subdomain', 'organizations', ['status', 'subdomain'], unique=False)
    op.create_index(op.f('ix_organizations_id'), 'organizations', ['id'], unique=False)
    op.create_index(op.f('ix_organizations_name'), 'organizations', ['name'], unique=True)
    op.create_index(op.f('ix_organizations_org_code'), 'organizations', ['org_code'], unique=True)
    op.create_index(op.f('ix_organizations_subdomain'), 'organizations', ['subdomain'], unique=True)
    op.create_table('otp_verifications',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('email', sa.String(), nullable=False),
    sa.Column('otp_hash', sa.String(), nullable=False),
    sa.Column('purpose', sa.String(), nullable=False),
    sa.Column('expires_at', sa.DateTime(timezone=True), nullable=False),
    sa.Column('is_used', sa.Boolean(), nullable=False),
    sa.Column('used_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('attempts', sa.Integer(), nullable=False),
    sa.Column('max_attempts', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_otp_email_purpose', 'otp_verifications', ['email', 'purpose'], unique=False)
    op.create_index('idx_otp_expires', 'otp_verifications', ['expires_at'], unique=False)
    op.create_index(op.f('ix_otp_verifications_email'), 'otp_verifications', ['email'], unique=False)
    op.create_index(op.f('ix_otp_verifications_id'), 'otp_verifications', ['id'], unique=False)
    op.create_table('platform_users',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('email', sa.String(), nullable=False),
    sa.Column('hashed_password', sa.String(), nullable=False),
    sa.Column('full_name', sa.String(), nullable=True),
    sa.Column('role', sa.String(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('temp_password_hash', sa.String(), nullable=True),
    sa.Column('temp_password_expires', sa.DateTime(timezone=True), nullable=True),
    sa.Column('force_password_reset', sa.Boolean(), nullable=False),
    sa.Column('failed_login_attempts', sa.Integer(), nullable=False),
    sa.Column('locked_until', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('last_login', sa.DateTime(timezone=True), nullable=True),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_platform_user_active', 'platform_users', ['is_active'], unique=False)
    op.create_index('idx_platform_user_email', 'platform_users', ['email'], unique=False)
    op.create_index(op.f('ix_platform_users_email'), 'platform_users', ['email'], unique=True)
    op.create_index(op.f('ix_platform_users_id'), 'platform_users', ['id'], unique=False)
    op.create_table('service_permissions',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('name', sa.String(), nullable=False),
    sa.Column('display_name', sa.String(), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('module', sa.String(), nullable=False),
    sa.Column('action', sa.String(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_service_permission_module_action', 'service_permissions', ['module', 'action'], unique=False)
    op.create_index(op.f('ix_service_permissions_action'), 'service_permissions', ['action'], unique=False)
    op.create_index(op.f('ix_service_permissions_id'), 'service_permissions', ['id'], unique=False)
    op.create_index(op.f('ix_service_permissions_module'), 'service_permissions', ['module'], unique=False)
    op.create_index(op.f('ix_service_permissions_name'), 'service_permissions', ['name'], unique=True)
    op.create_table('companies',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('name', sa.String(), nullable=False),
    sa.Column('address1', sa.String(), nullable=False),
    sa.Column('address2', sa.String(), nullable=True),
    sa.Column('city', sa.String(), nullable=False),
    sa.Column('state', sa.String(), nullable=False),
    sa.Column('pin_code', sa.String(), nullable=False),
    sa.Column('state_code', sa.String(), nullable=False),
    sa.Column('gst_number', sa.String(), nullable=True),
    sa.Column('pan_number', sa.String(), nullable=True),
    sa.Column('contact_number', sa.String(), nullable=False),
    sa.Column('email', sa.String(), nullable=True),
    sa.Column('business_type', sa.String(), nullable=True),
    sa.Column('industry', sa.String(), nullable=True),
    sa.Column('website', sa.String(), nullable=True),
    sa.Column('logo_path', sa.String(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_company_organization_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', name='uq_company_org')
    )
    op.create_index('idx_company_org_name', 'companies', ['organization_id', 'name'], unique=False)
    op.create_index(op.f('ix_companies_id'), 'companies', ['id'], unique=False)
    op.create_index(op.f('ix_companies_organization_id'), 'companies', ['organization_id'], unique=False)
    op.create_table('customers',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('name', sa.String(), nullable=False),
    sa.Column('contact_number', sa.String(), nullable=False),
    sa.Column('email', sa.String(), nullable=True),
    sa.Column('address1', sa.String(), nullable=False),
    sa.Column('address2', sa.String(), nullable=True),
    sa.Column('city', sa.String(), nullable=False),
    sa.Column('state', sa.String(), nullable=False),
    sa.Column('pin_code', sa.String(), nullable=False),
    sa.Column('state_code', sa.String(), nullable=False),
    sa.Column('gst_number', sa.String(), nullable=True),
    sa.Column('pan_number', sa.String(), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_customer_organization_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'name', name='uq_customer_org_name')
    )
    op.create_index('idx_customer_org_active', 'customers', ['organization_id', 'is_active'], unique=False)
    op.create_index('idx_customer_org_name', 'customers', ['organization_id', 'name'], unique=False)
    op.create_index(op.f('ix_customers_id'), 'customers', ['id'], unique=False)
    op.create_index(op.f('ix_customers_name'), 'customers', ['name'], unique=False)
    op.create_index(op.f('ix_customers_organization_id'), 'customers', ['organization_id'], unique=False)
    op.create_table('email_notifications',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('to_email', sa.String(), nullable=False),
    sa.Column('subject', sa.String(), nullable=False),
    sa.Column('body', sa.Text(), nullable=False),
    sa.Column('voucher_type', sa.String(), nullable=True),
    sa.Column('voucher_id', sa.Integer(), nullable=True),
    sa.Column('status', sa.String(), nullable=False),
    sa.Column('sent_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('error_message', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_email_notification_organization_id'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_email_org_status', 'email_notifications', ['organization_id', 'status'], unique=False)
    op.create_index(op.f('ix_email_notifications_id'), 'email_notifications', ['id'], unique=False)
    op.create_index(op.f('ix_email_notifications_organization_id'), 'email_notifications', ['organization_id'], unique=False)
    op.create_table('notification_preferences',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('subject_type', sa.String(), nullable=False),
    sa.Column('subject_id', sa.Integer(), nullable=False),
    sa.Column('notification_type', sa.String(), nullable=False),
    sa.Column('channel', sa.String(), nullable=False),
    sa.Column('is_enabled', sa.Boolean(), nullable=False),
    sa.Column('settings', sa.JSON(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_notification_preference_organization_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'subject_type', 'subject_id', 'notification_type', 'channel', name='uq_notification_pref_subject_type_channel')
    )
    op.create_index('idx_notification_pref_org_subject', 'notification_preferences', ['organization_id', 'subject_type', 'subject_id'], unique=False)
    op.create_index(op.f('ix_notification_preferences_id'), 'notification_preferences', ['id'], unique=False)
    op.create_index(op.f('ix_notification_preferences_organization_id'), 'notification_preferences', ['organization_id'], unique=False)
    op.create_table('payment_terms',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('name', sa.String(), nullable=False),
    sa.Column('days', sa.Integer(), nullable=False),
    sa.Column('description', sa.String(), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_payment_term_organization_id'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_payment_term_org_name', 'payment_terms', ['organization_id', 'name'], unique=False)
    op.create_index(op.f('ix_payment_terms_id'), 'payment_terms', ['id'], unique=False)
    op.create_index(op.f('ix_payment_terms_organization_id'), 'payment_terms', ['organization_id'], unique=False)
    op.create_table('products',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('name', sa.String(), nullable=False),
    sa.Column('hsn_code', sa.String(), nullable=True),
    sa.Column('part_number', sa.String(), nullable=True),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('unit_price', sa.Float(), nullable=False),
    sa.Column('gst_rate', sa.Float(), nullable=False),
    sa.Column('is_gst_inclusive', sa.Boolean(), nullable=False),
    sa.Column('reorder_level', sa.Integer(), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('is_manufactured', sa.Boolean(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_product_organization_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'name', name='uq_product_org_name'),
    sa.UniqueConstraint('organization_id', 'part_number', name='uq_product_org_part_number')
    )
    op.create_index('idx_product_org_active', 'products', ['organization_id', 'is_active'], unique=False)
    op.create_index('idx_product_org_hsn', 'products', ['organization_id', 'hsn_code'], unique=False)
    op.create_index('idx_product_org_name', 'products', ['organization_id', 'name'], unique=False)
    op.create_index(op.f('ix_products_id'), 'products', ['id'], unique=False)
    op.create_index(op.f('ix_products_name'), 'products', ['name'], unique=False)
    op.create_index(op.f('ix_products_organization_id'), 'products', ['organization_id'], unique=False)
    op.create_table('service_roles',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('name', sa.String(), nullable=False),
    sa.Column('display_name', sa.String(), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_service_role_organization_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'name', name='uq_service_role_org_name')
    )
    op.create_index('idx_service_role_org_active', 'service_roles', ['organization_id', 'is_active'], unique=False)
    op.create_index(op.f('ix_service_roles_id'), 'service_roles', ['id'], unique=False)
    op.create_index(op.f('ix_service_roles_organization_id'), 'service_roles', ['organization_id'], unique=False)
    op.create_table('users',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=True),
    sa.Column('email', sa.String(), nullable=False),
    sa.Column('username', sa.String(), nullable=False),
    sa.Column('hashed_password', sa.String(), nullable=False),
    sa.Column('supabase_uuid', sa.String(), nullable=True),
    sa.Column('full_name', sa.String(), nullable=True),
    sa.Column('role', sa.String(), nullable=False),
    sa.Column('department', sa.String(), nullable=True),
    sa.Column('designation', sa.String(), nullable=True),
    sa.Column('employee_id', sa.String(), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('is_super_admin', sa.Boolean(), nullable=False),
    sa.Column('must_change_password', sa.Boolean(), nullable=False),
    sa.Column('has_stock_access', sa.Boolean(), nullable=False),
    sa.Column('assigned_modules', sa.JSON(), nullable=True),
    sa.Column('temp_password_hash', sa.String(), nullable=True),
    sa.Column('temp_password_expires', sa.DateTime(timezone=True), nullable=True),
    sa.Column('force_password_reset', sa.Boolean(), nullable=False),
    sa.Column('phone', sa.String(), nullable=True),
    sa.Column('avatar_path', sa.String(), nullable=True),
    sa.Column('failed_login_attempts', sa.Integer(), nullable=False),
    sa.Column('locked_until', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('last_login', sa.DateTime(timezone=True), nullable=True),
    sa.Column('permissions', sa.JSON(), nullable=True),
    sa.Column('is_sso_user', sa.Boolean(), nullable=False),
    sa.Column('sso_provider', sa.String(), nullable=True),
    sa.Column('sso_id', sa.String(), nullable=True),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_user_organization_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'email', name='uq_user_org_email'),
    sa.UniqueConstraint('organization_id', 'username', name='uq_user_org_username')
    )
    op.create_index('idx_user_org_active', 'users', ['organization_id', 'is_active'], unique=False)
    op.create_index('idx_user_org_email', 'users', ['organization_id', 'email'], unique=False)
    op.create_index('idx_user_org_username', 'users', ['organization_id', 'username'], unique=False)
    op.create_index(op.f('ix_users_email'), 'users', ['email'], unique=False)
    op.create_index(op.f('ix_users_id'), 'users', ['id'], unique=False)
    op.create_index(op.f('ix_users_organization_id'), 'users', ['organization_id'], unique=False)
    op.create_index(op.f('ix_users_supabase_uuid'), 'users', ['supabase_uuid'], unique=False)
    op.create_table('vendors',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('name', sa.String(), nullable=False),
    sa.Column('contact_number', sa.String(), nullable=False),
    sa.Column('email', sa.String(), nullable=True),
    sa.Column('address1', sa.String(), nullable=False),
    sa.Column('address2', sa.String(), nullable=True),
    sa.Column('city', sa.String(), nullable=False),
    sa.Column('state', sa.String(), nullable=False),
    sa.Column('pin_code', sa.String(), nullable=False),
    sa.Column('state_code', sa.String(), nullable=False),
    sa.Column('gst_number', sa.String(), nullable=True),
    sa.Column('pan_number', sa.String(), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_vendor_organization_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'name', name='uq_vendor_org_name')
    )
    op.create_index('idx_vendor_org_active', 'vendors', ['organization_id', 'is_active'], unique=False)
    op.create_index('idx_vendor_org_name', 'vendors', ['organization_id', 'name'], unique=False)
    op.create_index(op.f('ix_vendors_id'), 'vendors', ['id'], unique=False)
    op.create_index(op.f('ix_vendors_name'), 'vendors', ['name'], unique=False)
    op.create_index(op.f('ix_vendors_organization_id'), 'vendors', ['organization_id'], unique=False)
    op.create_table('analytics_summaries',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('summary_type', sa.String(), nullable=False),
    sa.Column('summary_date', sa.Date(), nullable=False),
    sa.Column('total_jobs', sa.Integer(), nullable=False),
    sa.Column('completed_jobs', sa.Integer(), nullable=False),
    sa.Column('pending_jobs', sa.Integer(), nullable=False),
    sa.Column('cancelled_jobs', sa.Integer(), nullable=False),
    sa.Column('total_completion_time_hours', sa.Float(), nullable=True),
    sa.Column('average_completion_time_hours', sa.Float(), nullable=True),
    sa.Column('total_feedback_received', sa.Integer(), nullable=False),
    sa.Column('average_overall_rating', sa.Float(), nullable=True),
    sa.Column('average_service_quality', sa.Float(), nullable=True),
    sa.Column('average_technician_rating', sa.Float(), nullable=True),
    sa.Column('sla_met_count', sa.Integer(), nullable=False),
    sa.Column('sla_breached_count', sa.Integer(), nullable=False),
    sa.Column('sla_compliance_rate', sa.Float(), nullable=True),
    sa.Column('technician_id', sa.Integer(), nullable=True),
    sa.Column('customer_id', sa.Integer(), nullable=True),
    sa.Column('summary_data', sa.JSON(), nullable=True),
    sa.Column('calculated_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['customer_id'], ['customers.id'], name='fk_analytics_summary_customer_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_analytics_summary_organization_id'),
    sa.ForeignKeyConstraint(['technician_id'], ['users.id'], name='fk_analytics_summary_technician_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'summary_type', 'summary_date', 'technician_id', 'customer_id', name='uq_analytics_summary_org_type_date_entities')
    )
    op.create_index('idx_analytics_summary_customer', 'analytics_summaries', ['customer_id'], unique=False)
    op.create_index('idx_analytics_summary_org_type_date', 'analytics_summaries', ['organization_id', 'summary_type', 'summary_date'], unique=False)
    op.create_index('idx_analytics_summary_technician', 'analytics_summaries', ['technician_id'], unique=False)
    op.create_index(op.f('ix_analytics_summaries_id'), 'analytics_summaries', ['id'], unique=False)
    op.create_index(op.f('ix_analytics_summaries_organization_id'), 'analytics_summaries', ['organization_id'], unique=False)
    op.create_index(op.f('ix_analytics_summaries_summary_date'), 'analytics_summaries', ['summary_date'], unique=False)
    op.create_index(op.f('ix_analytics_summaries_summary_type'), 'analytics_summaries', ['summary_type'], unique=False)
    op.create_table('audit_logs',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=True),
    sa.Column('table_name', sa.String(), nullable=False),
    sa.Column('record_id', sa.Integer(), nullable=True),
    sa.Column('action', sa.String(), nullable=False),
    sa.Column('user_id', sa.Integer(), nullable=True),
    sa.Column('changes', sa.JSON(), nullable=True),
    sa.Column('ip_address', sa.String(), nullable=True),
    sa.Column('user_agent', sa.String(), nullable=True),
    sa.Column('timestamp', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_audit_log_organization_id'),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], name='fk_audit_log_user_id'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_audit_org_table_action', 'audit_logs', ['organization_id', 'table_name', 'action'], unique=False)
    op.create_index('idx_audit_org_timestamp', 'audit_logs', ['organization_id', 'timestamp'], unique=False)
    op.create_index(op.f('ix_audit_logs_id'), 'audit_logs', ['id'], unique=False)
    op.create_index(op.f('ix_audit_logs_organization_id'), 'audit_logs', ['organization_id'], unique=False)
    op.create_table('bill_of_materials',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('bom_name', sa.String(), nullable=False),
    sa.Column('output_item_id', sa.Integer(), nullable=False),
    sa.Column('output_quantity', sa.Float(), nullable=False),
    sa.Column('version', sa.String(), nullable=True),
    sa.Column('validity_start', sa.DateTime(timezone=True), nullable=True),
    sa.Column('validity_end', sa.DateTime(timezone=True), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('material_cost', sa.Float(), nullable=True),
    sa.Column('labor_cost', sa.Float(), nullable=True),
    sa.Column('overhead_cost', sa.Float(), nullable=True),
    sa.Column('total_cost', sa.Float(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['output_item_id'], ['products.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'bom_name', 'version', name='uq_bom_org_name_version')
    )
    op.create_index('idx_bom_org_active', 'bill_of_materials', ['organization_id', 'is_active'], unique=False)
    op.create_index('idx_bom_org_created', 'bill_of_materials', ['organization_id', 'created_at'], unique=False)
    op.create_index('idx_bom_org_output', 'bill_of_materials', ['organization_id', 'output_item_id'], unique=False)
    op.create_index(op.f('ix_bill_of_materials_id'), 'bill_of_materials', ['id'], unique=False)
    op.create_index(op.f('ix_bill_of_materials_organization_id'), 'bill_of_materials', ['organization_id'], unique=False)
    op.create_table('contra_vouchers',
    sa.Column('from_account', sa.String(), nullable=False),
    sa.Column('to_account', sa.String(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('voucher_number', sa.String(), nullable=False),
    sa.Column('date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'voucher_number', name='uq_contra_org_voucher_number')
    )
    op.create_index('idx_contra_org_date', 'contra_vouchers', ['organization_id', 'date'], unique=False)
    op.create_index('idx_contra_org_from_account', 'contra_vouchers', ['organization_id', 'from_account'], unique=False)
    op.create_index('idx_contra_org_to_account', 'contra_vouchers', ['organization_id', 'to_account'], unique=False)
    op.create_index(op.f('ix_contra_vouchers_id'), 'contra_vouchers', ['id'], unique=False)
    op.create_index(op.f('ix_contra_vouchers_organization_id'), 'contra_vouchers', ['organization_id'], unique=False)
    op.create_index(op.f('ix_contra_vouchers_voucher_number'), 'contra_vouchers', ['voucher_number'], unique=False)
    op.create_table('credit_notes',
    sa.Column('customer_id', sa.Integer(), nullable=True),
    sa.Column('vendor_id', sa.Integer(), nullable=True),
    sa.Column('reference_voucher_type', sa.String(), nullable=True),
    sa.Column('reference_voucher_id', sa.Integer(), nullable=True),
    sa.Column('reason', sa.String(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('voucher_number', sa.String(), nullable=False),
    sa.Column('date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['customer_id'], ['customers.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['vendor_id'], ['vendors.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'voucher_number', name='uq_cn_org_voucher_number')
    )
    op.create_index('idx_cn_org_customer', 'credit_notes', ['organization_id', 'customer_id'], unique=False)
    op.create_index('idx_cn_org_date', 'credit_notes', ['organization_id', 'date'], unique=False)
    op.create_index('idx_cn_org_vendor', 'credit_notes', ['organization_id', 'vendor_id'], unique=False)
    op.create_index(op.f('ix_credit_notes_id'), 'credit_notes', ['id'], unique=False)
    op.create_index(op.f('ix_credit_notes_organization_id'), 'credit_notes', ['organization_id'], unique=False)
    op.create_index(op.f('ix_credit_notes_voucher_number'), 'credit_notes', ['voucher_number'], unique=False)
    op.create_table('customer_files',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('customer_id', sa.Integer(), nullable=False),
    sa.Column('filename', sa.String(), nullable=False),
    sa.Column('original_filename', sa.String(), nullable=False),
    sa.Column('file_path', sa.String(), nullable=False),
    sa.Column('file_size', sa.Integer(), nullable=False),
    sa.Column('content_type', sa.String(), nullable=False),
    sa.Column('file_type', sa.String(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['customer_id'], ['customers.id'], name='fk_customer_file_customer_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_customer_file_organization_id'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_customer_file_org_customer', 'customer_files', ['organization_id', 'customer_id'], unique=False)
    op.create_index(op.f('ix_customer_files_id'), 'customer_files', ['id'], unique=False)
    op.create_index(op.f('ix_customer_files_organization_id'), 'customer_files', ['organization_id'], unique=False)
    op.create_table('customer_interactions',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('customer_id', sa.Integer(), nullable=False),
    sa.Column('interaction_type', sa.String(), nullable=False),
    sa.Column('subject', sa.String(), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('status', sa.String(), nullable=False),
    sa.Column('interaction_date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], name='fk_customer_interaction_created_by'),
    sa.ForeignKeyConstraint(['customer_id'], ['customers.id'], name='fk_customer_interaction_customer_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_customer_interaction_organization_id'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_customer_interaction_date', 'customer_interactions', ['interaction_date'], unique=False)
    op.create_index('idx_customer_interaction_org_customer', 'customer_interactions', ['organization_id', 'customer_id'], unique=False)
    op.create_index('idx_customer_interaction_type_status', 'customer_interactions', ['interaction_type', 'status'], unique=False)
    op.create_index(op.f('ix_customer_interactions_id'), 'customer_interactions', ['id'], unique=False)
    op.create_index(op.f('ix_customer_interactions_organization_id'), 'customer_interactions', ['organization_id'], unique=False)
    op.create_table('customer_segments',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('customer_id', sa.Integer(), nullable=False),
    sa.Column('segment_name', sa.String(), nullable=False),
    sa.Column('segment_value', sa.Float(), nullable=True),
    sa.Column('segment_description', sa.Text(), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('assigned_date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('assigned_by', sa.Integer(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['assigned_by'], ['users.id'], name='fk_customer_segment_assigned_by'),
    sa.ForeignKeyConstraint(['customer_id'], ['customers.id'], name='fk_customer_segment_customer_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_customer_segment_organization_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'customer_id', 'segment_name', name='uq_customer_segment_org_customer_name')
    )
    op.create_index('idx_customer_segment_assigned_date', 'customer_segments', ['assigned_date'], unique=False)
    op.create_index('idx_customer_segment_name_active', 'customer_segments', ['segment_name', 'is_active'], unique=False)
    op.create_index('idx_customer_segment_org_customer', 'customer_segments', ['organization_id', 'customer_id'], unique=False)
    op.create_index(op.f('ix_customer_segments_id'), 'customer_segments', ['id'], unique=False)
    op.create_index(op.f('ix_customer_segments_organization_id'), 'customer_segments', ['organization_id'], unique=False)
    op.create_table('debit_notes',
    sa.Column('customer_id', sa.Integer(), nullable=True),
    sa.Column('vendor_id', sa.Integer(), nullable=True),
    sa.Column('reference_voucher_type', sa.String(), nullable=True),
    sa.Column('reference_voucher_id', sa.Integer(), nullable=True),
    sa.Column('reason', sa.String(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('voucher_number', sa.String(), nullable=False),
    sa.Column('date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['customer_id'], ['customers.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['vendor_id'], ['vendors.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'voucher_number', name='uq_dn_org_voucher_number')
    )
    op.create_index('idx_dn_org_customer', 'debit_notes', ['organization_id', 'customer_id'], unique=False)
    op.create_index('idx_dn_org_date', 'debit_notes', ['organization_id', 'date'], unique=False)
    op.create_index('idx_dn_org_vendor', 'debit_notes', ['organization_id', 'vendor_id'], unique=False)
    op.create_index(op.f('ix_debit_notes_id'), 'debit_notes', ['id'], unique=False)
    op.create_index(op.f('ix_debit_notes_organization_id'), 'debit_notes', ['organization_id'], unique=False)
    op.create_index(op.f('ix_debit_notes_voucher_number'), 'debit_notes', ['voucher_number'], unique=False)
    op.create_table('inter_department_vouchers',
    sa.Column('from_department', sa.String(), nullable=False),
    sa.Column('to_department', sa.String(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('voucher_number', sa.String(), nullable=False),
    sa.Column('date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'voucher_number', name='uq_idv_org_voucher_number')
    )
    op.create_index('idx_idv_org_date', 'inter_department_vouchers', ['organization_id', 'date'], unique=False)
    op.create_index('idx_idv_org_from_dept', 'inter_department_vouchers', ['organization_id', 'from_department'], unique=False)
    op.create_index('idx_idv_org_to_dept', 'inter_department_vouchers', ['organization_id', 'to_department'], unique=False)
    op.create_index(op.f('ix_inter_department_vouchers_id'), 'inter_department_vouchers', ['id'], unique=False)
    op.create_index(op.f('ix_inter_department_vouchers_organization_id'), 'inter_department_vouchers', ['organization_id'], unique=False)
    op.create_index(op.f('ix_inter_department_vouchers_voucher_number'), 'inter_department_vouchers', ['voucher_number'], unique=False)
    op.create_table('inventory_alerts',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('alert_type', sa.String(), nullable=False),
    sa.Column('current_stock', sa.Float(), nullable=False),
    sa.Column('reorder_level', sa.Float(), nullable=False),
    sa.Column('location', sa.String(), nullable=True),
    sa.Column('status', sa.String(), nullable=False),
    sa.Column('priority', sa.String(), nullable=False),
    sa.Column('acknowledged_by_id', sa.Integer(), nullable=True),
    sa.Column('acknowledged_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('resolved_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('message', sa.Text(), nullable=True),
    sa.Column('suggested_order_quantity', sa.Float(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['acknowledged_by_id'], ['users.id'], name='fk_inventory_alert_acknowledged_by_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_inventory_alert_organization_id'),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], name='fk_inventory_alert_product_id'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_inventory_alert_created_at', 'inventory_alerts', ['created_at'], unique=False)
    op.create_index('idx_inventory_alert_org_priority', 'inventory_alerts', ['organization_id', 'priority'], unique=False)
    op.create_index('idx_inventory_alert_org_product', 'inventory_alerts', ['organization_id', 'product_id'], unique=False)
    op.create_index('idx_inventory_alert_org_status', 'inventory_alerts', ['organization_id', 'status'], unique=False)
    op.create_index('idx_inventory_alert_type', 'inventory_alerts', ['alert_type'], unique=False)
    op.create_index(op.f('ix_inventory_alerts_id'), 'inventory_alerts', ['id'], unique=False)
    op.create_index(op.f('ix_inventory_alerts_organization_id'), 'inventory_alerts', ['organization_id'], unique=False)
    op.create_table('inventory_transactions',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('transaction_type', sa.String(), nullable=False),
    sa.Column('quantity', sa.Float(), nullable=False),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('location', sa.String(), nullable=True),
    sa.Column('reference_type', sa.String(), nullable=True),
    sa.Column('reference_id', sa.Integer(), nullable=True),
    sa.Column('reference_number', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('unit_cost', sa.Float(), nullable=True),
    sa.Column('total_cost', sa.Float(), nullable=True),
    sa.Column('stock_before', sa.Float(), nullable=False),
    sa.Column('stock_after', sa.Float(), nullable=False),
    sa.Column('created_by_id', sa.Integer(), nullable=True),
    sa.Column('transaction_date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.ForeignKeyConstraint(['created_by_id'], ['users.id'], name='fk_inventory_transaction_created_by_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_inventory_transaction_organization_id'),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], name='fk_inventory_transaction_product_id'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_inventory_transaction_created_at', 'inventory_transactions', ['created_at'], unique=False)
    op.create_index('idx_inventory_transaction_org_date', 'inventory_transactions', ['organization_id', 'transaction_date'], unique=False)
    op.create_index('idx_inventory_transaction_org_product', 'inventory_transactions', ['organization_id', 'product_id'], unique=False)
    op.create_index('idx_inventory_transaction_org_type', 'inventory_transactions', ['organization_id', 'transaction_type'], unique=False)
    op.create_index('idx_inventory_transaction_reference', 'inventory_transactions', ['reference_type', 'reference_id'], unique=False)
    op.create_index(op.f('ix_inventory_transactions_id'), 'inventory_transactions', ['id'], unique=False)
    op.create_index(op.f('ix_inventory_transactions_organization_id'), 'inventory_transactions', ['organization_id'], unique=False)
    op.create_table('journal_vouchers',
    sa.Column('entries', sa.Text(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('voucher_number', sa.String(), nullable=False),
    sa.Column('date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'voucher_number', name='uq_journal_org_voucher_number')
    )
    op.create_index('idx_journal_org_date', 'journal_vouchers', ['organization_id', 'date'], unique=False)
    op.create_index(op.f('ix_journal_vouchers_id'), 'journal_vouchers', ['id'], unique=False)
    op.create_index(op.f('ix_journal_vouchers_organization_id'), 'journal_vouchers', ['organization_id'], unique=False)
    op.create_index(op.f('ix_journal_vouchers_voucher_number'), 'journal_vouchers', ['voucher_number'], unique=False)
    op.create_table('notification_templates',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('name', sa.String(), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('template_type', sa.String(), nullable=False),
    sa.Column('channel', sa.String(), nullable=False),
    sa.Column('subject', sa.String(), nullable=True),
    sa.Column('body', sa.Text(), nullable=False),
    sa.Column('html_body', sa.Text(), nullable=True),
    sa.Column('trigger_event', sa.String(), nullable=True),
    sa.Column('trigger_conditions', sa.JSON(), nullable=True),
    sa.Column('variables', sa.JSON(), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], name='fk_notification_template_created_by'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_notification_template_organization_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'name', name='uq_notification_template_org_name')
    )
    op.create_index('idx_notification_template_org_channel', 'notification_templates', ['organization_id', 'channel'], unique=False)
    op.create_index('idx_notification_template_org_type', 'notification_templates', ['organization_id', 'template_type'], unique=False)
    op.create_index(op.f('ix_notification_templates_id'), 'notification_templates', ['id'], unique=False)
    op.create_index(op.f('ix_notification_templates_name'), 'notification_templates', ['name'], unique=False)
    op.create_index(op.f('ix_notification_templates_organization_id'), 'notification_templates', ['organization_id'], unique=False)
    op.create_table('payment_vouchers',
    sa.Column('vendor_id', sa.Integer(), nullable=False),
    sa.Column('payment_method', sa.String(), nullable=True),
    sa.Column('reference', sa.String(), nullable=True),
    sa.Column('bank_account', sa.String(), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('voucher_number', sa.String(), nullable=False),
    sa.Column('date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['vendor_id'], ['vendors.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'voucher_number', name='uq_pv_payment_org_voucher_number')
    )
    op.create_index('idx_pv_payment_org_date', 'payment_vouchers', ['organization_id', 'date'], unique=False)
    op.create_index('idx_pv_payment_org_vendor', 'payment_vouchers', ['organization_id', 'vendor_id'], unique=False)
    op.create_index(op.f('ix_payment_vouchers_id'), 'payment_vouchers', ['id'], unique=False)
    op.create_index(op.f('ix_payment_vouchers_organization_id'), 'payment_vouchers', ['organization_id'], unique=False)
    op.create_index(op.f('ix_payment_vouchers_voucher_number'), 'payment_vouchers', ['voucher_number'], unique=False)
    op.create_table('product_files',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('filename', sa.String(), nullable=False),
    sa.Column('original_filename', sa.String(), nullable=False),
    sa.Column('file_path', sa.String(), nullable=False),
    sa.Column('file_size', sa.Integer(), nullable=False),
    sa.Column('content_type', sa.String(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_product_file_organization_id'),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], name='fk_product_file_product_id'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_product_file_org_product', 'product_files', ['organization_id', 'product_id'], unique=False)
    op.create_index(op.f('ix_product_files_id'), 'product_files', ['id'], unique=False)
    op.create_index(op.f('ix_product_files_organization_id'), 'product_files', ['organization_id'], unique=False)
    op.create_table('proforma_invoices',
    sa.Column('customer_id', sa.Integer(), nullable=False),
    sa.Column('valid_until', sa.DateTime(timezone=True), nullable=True),
    sa.Column('payment_terms', sa.String(), nullable=True),
    sa.Column('terms_conditions', sa.Text(), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('voucher_number', sa.String(), nullable=False),
    sa.Column('date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['customer_id'], ['customers.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'voucher_number', name='uq_pi_org_voucher_number')
    )
    op.create_index('idx_pi_org_customer', 'proforma_invoices', ['organization_id', 'customer_id'], unique=False)
    op.create_index('idx_pi_org_date', 'proforma_invoices', ['organization_id', 'date'], unique=False)
    op.create_index(op.f('ix_proforma_invoices_id'), 'proforma_invoices', ['id'], unique=False)
    op.create_index(op.f('ix_proforma_invoices_organization_id'), 'proforma_invoices', ['organization_id'], unique=False)
    op.create_index(op.f('ix_proforma_invoices_voucher_number'), 'proforma_invoices', ['voucher_number'], unique=False)
    op.create_table('purchase_orders',
    sa.Column('vendor_id', sa.Integer(), nullable=False),
    sa.Column('delivery_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('payment_terms', sa.String(), nullable=True),
    sa.Column('terms_conditions', sa.Text(), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('voucher_number', sa.String(), nullable=False),
    sa.Column('date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['vendor_id'], ['vendors.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'voucher_number', name='uq_po_org_voucher_number')
    )
    op.create_index('idx_po_org_date', 'purchase_orders', ['organization_id', 'date'], unique=False)
    op.create_index('idx_po_org_status', 'purchase_orders', ['organization_id', 'status'], unique=False)
    op.create_index('idx_po_org_vendor', 'purchase_orders', ['organization_id', 'vendor_id'], unique=False)
    op.create_index(op.f('ix_purchase_orders_id'), 'purchase_orders', ['id'], unique=False)
    op.create_index(op.f('ix_purchase_orders_organization_id'), 'purchase_orders', ['organization_id'], unique=False)
    op.create_index(op.f('ix_purchase_orders_voucher_number'), 'purchase_orders', ['voucher_number'], unique=False)
    op.create_table('quotations',
    sa.Column('customer_id', sa.Integer(), nullable=False),
    sa.Column('valid_until', sa.DateTime(timezone=True), nullable=True),
    sa.Column('payment_terms', sa.String(), nullable=True),
    sa.Column('terms_conditions', sa.Text(), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('voucher_number', sa.String(), nullable=False),
    sa.Column('date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['customer_id'], ['customers.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'voucher_number', name='uq_quotation_org_voucher_number')
    )
    op.create_index('idx_quotation_org_customer', 'quotations', ['organization_id', 'customer_id'], unique=False)
    op.create_index('idx_quotation_org_date', 'quotations', ['organization_id', 'date'], unique=False)
    op.create_index(op.f('ix_quotations_id'), 'quotations', ['id'], unique=False)
    op.create_index(op.f('ix_quotations_organization_id'), 'quotations', ['organization_id'], unique=False)
    op.create_index(op.f('ix_quotations_voucher_number'), 'quotations', ['voucher_number'], unique=False)
    op.create_table('receipt_vouchers',
    sa.Column('customer_id', sa.Integer(), nullable=False),
    sa.Column('receipt_method', sa.String(), nullable=True),
    sa.Column('reference', sa.String(), nullable=True),
    sa.Column('bank_account', sa.String(), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('voucher_number', sa.String(), nullable=False),
    sa.Column('date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['customer_id'], ['customers.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'voucher_number', name='uq_rv_org_voucher_number')
    )
    op.create_index('idx_rv_org_customer', 'receipt_vouchers', ['organization_id', 'customer_id'], unique=False)
    op.create_index('idx_rv_org_date', 'receipt_vouchers', ['organization_id', 'date'], unique=False)
    op.create_index(op.f('ix_receipt_vouchers_id'), 'receipt_vouchers', ['id'], unique=False)
    op.create_index(op.f('ix_receipt_vouchers_organization_id'), 'receipt_vouchers', ['organization_id'], unique=False)
    op.create_index(op.f('ix_receipt_vouchers_voucher_number'), 'receipt_vouchers', ['voucher_number'], unique=False)
    op.create_table('report_configurations',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('name', sa.String(), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('metric_types', sa.JSON(), nullable=False),
    sa.Column('default_filters', sa.JSON(), nullable=True),
    sa.Column('schedule_enabled', sa.Boolean(), nullable=False),
    sa.Column('schedule_frequency', sa.String(), nullable=True),
    sa.Column('schedule_time', sa.String(), nullable=True),
    sa.Column('schedule_day_of_week', sa.Integer(), nullable=True),
    sa.Column('schedule_day_of_month', sa.Integer(), nullable=True),
    sa.Column('email_recipients', sa.JSON(), nullable=True),
    sa.Column('email_subject_template', sa.String(), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('last_generated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('next_generation_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by_id', sa.Integer(), nullable=False),
    sa.Column('updated_by_id', sa.Integer(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['created_by_id'], ['users.id'], name='fk_report_configuration_created_by_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_report_configuration_organization_id'),
    sa.ForeignKeyConstraint(['updated_by_id'], ['users.id'], name='fk_report_configuration_updated_by_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'name', name='uq_report_configuration_org_name')
    )
    op.create_index('idx_report_configuration_org_active', 'report_configurations', ['organization_id', 'is_active'], unique=False)
    op.create_index('idx_report_configuration_schedule', 'report_configurations', ['schedule_enabled', 'next_generation_at'], unique=False)
    op.create_index(op.f('ix_report_configurations_id'), 'report_configurations', ['id'], unique=False)
    op.create_index(op.f('ix_report_configurations_organization_id'), 'report_configurations', ['organization_id'], unique=False)
    op.create_table('sales_orders',
    sa.Column('customer_id', sa.Integer(), nullable=False),
    sa.Column('delivery_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('payment_terms', sa.String(), nullable=True),
    sa.Column('terms_conditions', sa.Text(), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('voucher_number', sa.String(), nullable=False),
    sa.Column('date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['customer_id'], ['customers.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'voucher_number', name='uq_so_org_voucher_number')
    )
    op.create_index('idx_so_org_customer', 'sales_orders', ['organization_id', 'customer_id'], unique=False)
    op.create_index('idx_so_org_date', 'sales_orders', ['organization_id', 'date'], unique=False)
    op.create_index('idx_so_org_status', 'sales_orders', ['organization_id', 'status'], unique=False)
    op.create_index(op.f('ix_sales_orders_id'), 'sales_orders', ['id'], unique=False)
    op.create_index(op.f('ix_sales_orders_organization_id'), 'sales_orders', ['organization_id'], unique=False)
    op.create_index(op.f('ix_sales_orders_voucher_number'), 'sales_orders', ['voucher_number'], unique=False)
    op.create_table('service_role_permissions',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('role_id', sa.Integer(), nullable=False),
    sa.Column('permission_id', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_service_role_permission_organization_id'),
    sa.ForeignKeyConstraint(['permission_id'], ['service_permissions.id'], name='fk_service_role_permission_permission_id'),
    sa.ForeignKeyConstraint(['role_id'], ['service_roles.id'], name='fk_service_role_permission_role_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('role_id', 'permission_id', name='uq_service_role_permission')
    )
    op.create_index('idx_service_role_permission_permission', 'service_role_permissions', ['permission_id'], unique=False)
    op.create_index('idx_service_role_permission_role', 'service_role_permissions', ['role_id'], unique=False)
    op.create_index(op.f('ix_service_role_permissions_id'), 'service_role_permissions', ['id'], unique=False)
    op.create_index(op.f('ix_service_role_permissions_organization_id'), 'service_role_permissions', ['organization_id'], unique=False)
    op.create_table('sla_policies',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('name', sa.String(), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('priority', sa.String(), nullable=True),
    sa.Column('ticket_type', sa.String(), nullable=True),
    sa.Column('customer_tier', sa.String(), nullable=True),
    sa.Column('response_time_hours', sa.Float(), nullable=False),
    sa.Column('resolution_time_hours', sa.Float(), nullable=False),
    sa.Column('escalation_enabled', sa.Boolean(), nullable=False),
    sa.Column('escalation_threshold_percent', sa.Float(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('is_default', sa.Boolean(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by_id', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by_id'], ['users.id'], name='fk_sla_policy_created_by_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_sla_policy_organization_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'name', name='uq_sla_policy_org_name')
    )
    op.create_index('idx_sla_policy_default', 'sla_policies', ['is_default'], unique=False)
    op.create_index('idx_sla_policy_org_active', 'sla_policies', ['organization_id', 'is_active'], unique=False)
    op.create_index('idx_sla_policy_priority', 'sla_policies', ['priority'], unique=False)
    op.create_index('idx_sla_policy_ticket_type', 'sla_policies', ['ticket_type'], unique=False)
    op.create_index(op.f('ix_sla_policies_id'), 'sla_policies', ['id'], unique=False)
    op.create_index(op.f('ix_sla_policies_organization_id'), 'sla_policies', ['organization_id'], unique=False)
    op.create_table('stock',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('quantity', sa.Float(), nullable=False),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('location', sa.String(), nullable=True),
    sa.Column('last_updated', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_stock_organization_id'),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], name='fk_stock_product_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'product_id', 'location', name='uq_stock_org_product_location')
    )
    op.create_index('idx_stock_org_location', 'stock', ['organization_id', 'location'], unique=False)
    op.create_index('idx_stock_org_product', 'stock', ['organization_id', 'product_id'], unique=False)
    op.create_index(op.f('ix_stock_id'), 'stock', ['id'], unique=False)
    op.create_index(op.f('ix_stock_organization_id'), 'stock', ['organization_id'], unique=False)
    op.create_table('tickets',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('ticket_number', sa.String(), nullable=False),
    sa.Column('customer_id', sa.Integer(), nullable=False),
    sa.Column('assigned_to_id', sa.Integer(), nullable=True),
    sa.Column('created_by_id', sa.Integer(), nullable=True),
    sa.Column('title', sa.String(), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('status', sa.String(), nullable=False),
    sa.Column('priority', sa.String(), nullable=False),
    sa.Column('ticket_type', sa.String(), nullable=False),
    sa.Column('resolution', sa.Text(), nullable=True),
    sa.Column('resolved_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('closed_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('due_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('estimated_hours', sa.Float(), nullable=True),
    sa.Column('actual_hours', sa.Float(), nullable=True),
    sa.Column('customer_rating', sa.Integer(), nullable=True),
    sa.Column('customer_feedback', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['assigned_to_id'], ['users.id'], name='fk_ticket_assigned_to_id'),
    sa.ForeignKeyConstraint(['created_by_id'], ['users.id'], name='fk_ticket_created_by_id'),
    sa.ForeignKeyConstraint(['customer_id'], ['customers.id'], name='fk_ticket_customer_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_ticket_organization_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'ticket_number', name='uq_ticket_org_number')
    )
    op.create_index('idx_ticket_created_at', 'tickets', ['created_at'], unique=False)
    op.create_index('idx_ticket_due_date', 'tickets', ['due_date'], unique=False)
    op.create_index('idx_ticket_org_assigned', 'tickets', ['organization_id', 'assigned_to_id'], unique=False)
    op.create_index('idx_ticket_org_customer', 'tickets', ['organization_id', 'customer_id'], unique=False)
    op.create_index('idx_ticket_org_priority', 'tickets', ['organization_id', 'priority'], unique=False)
    op.create_index('idx_ticket_org_status', 'tickets', ['organization_id', 'status'], unique=False)
    op.create_index('idx_ticket_org_type', 'tickets', ['organization_id', 'ticket_type'], unique=False)
    op.create_index(op.f('ix_tickets_id'), 'tickets', ['id'], unique=False)
    op.create_index(op.f('ix_tickets_organization_id'), 'tickets', ['organization_id'], unique=False)
    op.create_index(op.f('ix_tickets_ticket_number'), 'tickets', ['ticket_number'], unique=False)
    op.create_table('user_service_roles',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('user_id', sa.Integer(), nullable=False),
    sa.Column('role_id', sa.Integer(), nullable=False),
    sa.Column('assigned_by_id', sa.Integer(), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('assigned_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['assigned_by_id'], ['users.id'], name='fk_user_service_role_assigned_by_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_user_service_role_organization_id'),
    sa.ForeignKeyConstraint(['role_id'], ['service_roles.id'], name='fk_user_service_role_role_id'),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], name='fk_user_service_role_user_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('user_id', 'role_id', name='uq_user_service_role')
    )
    op.create_index('idx_user_service_role_active', 'user_service_roles', ['is_active'], unique=False)
    op.create_index('idx_user_service_role_role', 'user_service_roles', ['role_id'], unique=False)
    op.create_index('idx_user_service_role_user', 'user_service_roles', ['user_id'], unique=False)
    op.create_index(op.f('ix_user_service_roles_id'), 'user_service_roles', ['id'], unique=False)
    op.create_index(op.f('ix_user_service_roles_organization_id'), 'user_service_roles', ['organization_id'], unique=False)
    op.create_table('vendor_files',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('vendor_id', sa.Integer(), nullable=False),
    sa.Column('filename', sa.String(), nullable=False),
    sa.Column('original_filename', sa.String(), nullable=False),
    sa.Column('file_path', sa.String(), nullable=False),
    sa.Column('file_size', sa.Integer(), nullable=False),
    sa.Column('content_type', sa.String(), nullable=False),
    sa.Column('file_type', sa.String(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_vendor_file_organization_id'),
    sa.ForeignKeyConstraint(['vendor_id'], ['vendors.id'], name='fk_vendor_file_vendor_id'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_vendor_file_org_vendor', 'vendor_files', ['organization_id', 'vendor_id'], unique=False)
    op.create_index(op.f('ix_vendor_files_id'), 'vendor_files', ['id'], unique=False)
    op.create_index(op.f('ix_vendor_files_organization_id'), 'vendor_files', ['organization_id'], unique=False)
    op.create_table('bom_components',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('bom_id', sa.Integer(), nullable=False),
    sa.Column('component_item_id', sa.Integer(), nullable=False),
    sa.Column('quantity_required', sa.Float(), nullable=False),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('unit_cost', sa.Float(), nullable=True),
    sa.Column('total_cost', sa.Float(), nullable=True),
    sa.Column('wastage_percentage', sa.Float(), nullable=True),
    sa.Column('is_optional', sa.Boolean(), nullable=True),
    sa.Column('sequence', sa.Integer(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.ForeignKeyConstraint(['bom_id'], ['bill_of_materials.id'], ),
    sa.ForeignKeyConstraint(['component_item_id'], ['products.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('bom_id', 'component_item_id', name='uq_bom_component_item')
    )
    op.create_index('idx_bom_comp_org_bom', 'bom_components', ['organization_id', 'bom_id'], unique=False)
    op.create_index('idx_bom_comp_org_item', 'bom_components', ['organization_id', 'component_item_id'], unique=False)
    op.create_index(op.f('ix_bom_components_id'), 'bom_components', ['id'], unique=False)
    op.create_index(op.f('ix_bom_components_organization_id'), 'bom_components', ['organization_id'], unique=False)
    op.create_table('credit_note_items',
    sa.Column('credit_note_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('quantity', sa.Float(), nullable=False),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('unit_price', sa.Float(), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.ForeignKeyConstraint(['credit_note_id'], ['credit_notes.id'], ),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_credit_note_items_id'), 'credit_note_items', ['id'], unique=False)
    op.create_table('debit_note_items',
    sa.Column('debit_note_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('quantity', sa.Float(), nullable=False),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('unit_price', sa.Float(), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.ForeignKeyConstraint(['debit_note_id'], ['debit_notes.id'], ),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_debit_note_items_id'), 'debit_note_items', ['id'], unique=False)
    op.create_table('delivery_challans',
    sa.Column('customer_id', sa.Integer(), nullable=False),
    sa.Column('sales_order_id', sa.Integer(), nullable=True),
    sa.Column('delivery_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('transport_mode', sa.String(), nullable=True),
    sa.Column('vehicle_number', sa.String(), nullable=True),
    sa.Column('lr_rr_number', sa.String(), nullable=True),
    sa.Column('destination', sa.String(), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('voucher_number', sa.String(), nullable=False),
    sa.Column('date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['customer_id'], ['customers.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['sales_order_id'], ['sales_orders.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'voucher_number', name='uq_dc_org_voucher_number')
    )
    op.create_index('idx_dc_org_customer', 'delivery_challans', ['organization_id', 'customer_id'], unique=False)
    op.create_index('idx_dc_org_date', 'delivery_challans', ['organization_id', 'delivery_date'], unique=False)
    op.create_index('idx_dc_org_so', 'delivery_challans', ['organization_id', 'sales_order_id'], unique=False)
    op.create_index(op.f('ix_delivery_challans_id'), 'delivery_challans', ['id'], unique=False)
    op.create_index(op.f('ix_delivery_challans_organization_id'), 'delivery_challans', ['organization_id'], unique=False)
    op.create_index(op.f('ix_delivery_challans_voucher_number'), 'delivery_challans', ['voucher_number'], unique=False)
    op.create_table('dispatch_orders',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('order_number', sa.String(), nullable=False),
    sa.Column('customer_id', sa.Integer(), nullable=False),
    sa.Column('ticket_id', sa.Integer(), nullable=True),
    sa.Column('status', sa.String(), nullable=False),
    sa.Column('dispatch_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('expected_delivery_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('actual_delivery_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('delivery_address', sa.Text(), nullable=False),
    sa.Column('delivery_contact_person', sa.String(), nullable=True),
    sa.Column('delivery_contact_number', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('tracking_number', sa.String(), nullable=True),
    sa.Column('courier_name', sa.String(), nullable=True),
    sa.Column('created_by_id', sa.Integer(), nullable=True),
    sa.Column('updated_by_id', sa.Integer(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['created_by_id'], ['users.id'], name='fk_dispatch_order_created_by_id'),
    sa.ForeignKeyConstraint(['customer_id'], ['customers.id'], name='fk_dispatch_order_customer_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_dispatch_order_organization_id'),
    sa.ForeignKeyConstraint(['ticket_id'], ['tickets.id'], name='fk_dispatch_order_ticket_id'),
    sa.ForeignKeyConstraint(['updated_by_id'], ['users.id'], name='fk_dispatch_order_updated_by_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'order_number', name='uq_dispatch_order_org_number')
    )
    op.create_index('idx_dispatch_order_created_at', 'dispatch_orders', ['created_at'], unique=False)
    op.create_index('idx_dispatch_order_delivery_date', 'dispatch_orders', ['expected_delivery_date'], unique=False)
    op.create_index('idx_dispatch_order_dispatch_date', 'dispatch_orders', ['dispatch_date'], unique=False)
    op.create_index('idx_dispatch_order_org_customer', 'dispatch_orders', ['organization_id', 'customer_id'], unique=False)
    op.create_index('idx_dispatch_order_org_status', 'dispatch_orders', ['organization_id', 'status'], unique=False)
    op.create_index('idx_dispatch_order_org_ticket', 'dispatch_orders', ['organization_id', 'ticket_id'], unique=False)
    op.create_index(op.f('ix_dispatch_orders_id'), 'dispatch_orders', ['id'], unique=False)
    op.create_index(op.f('ix_dispatch_orders_order_number'), 'dispatch_orders', ['order_number'], unique=False)
    op.create_index(op.f('ix_dispatch_orders_organization_id'), 'dispatch_orders', ['organization_id'], unique=False)
    op.create_table('goods_receipt_notes',
    sa.Column('purchase_order_id', sa.Integer(), nullable=False),
    sa.Column('vendor_id', sa.Integer(), nullable=False),
    sa.Column('grn_date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('challan_number', sa.String(), nullable=True),
    sa.Column('challan_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('transport_mode', sa.String(), nullable=True),
    sa.Column('vehicle_number', sa.String(), nullable=True),
    sa.Column('lr_rr_number', sa.String(), nullable=True),
    sa.Column('inspection_status', sa.String(), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('voucher_number', sa.String(), nullable=False),
    sa.Column('date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['purchase_order_id'], ['purchase_orders.id'], ),
    sa.ForeignKeyConstraint(['vendor_id'], ['vendors.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'voucher_number', name='uq_grn_org_voucher_number')
    )
    op.create_index('idx_grn_org_date', 'goods_receipt_notes', ['organization_id', 'grn_date'], unique=False)
    op.create_index('idx_grn_org_po', 'goods_receipt_notes', ['organization_id', 'purchase_order_id'], unique=False)
    op.create_index('idx_grn_org_vendor', 'goods_receipt_notes', ['organization_id', 'vendor_id'], unique=False)
    op.create_index(op.f('ix_goods_receipt_notes_id'), 'goods_receipt_notes', ['id'], unique=False)
    op.create_index(op.f('ix_goods_receipt_notes_organization_id'), 'goods_receipt_notes', ['organization_id'], unique=False)
    op.create_index(op.f('ix_goods_receipt_notes_voucher_number'), 'goods_receipt_notes', ['voucher_number'], unique=False)
    op.create_table('inter_department_voucher_items',
    sa.Column('inter_department_voucher_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('quantity', sa.Float(), nullable=False),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('unit_price', sa.Float(), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.ForeignKeyConstraint(['inter_department_voucher_id'], ['inter_department_vouchers.id'], ),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_inter_department_voucher_items_id'), 'inter_department_voucher_items', ['id'], unique=False)
    op.create_table('manufacturing_orders',
    sa.Column('bom_id', sa.Integer(), nullable=False),
    sa.Column('planned_quantity', sa.Float(), nullable=False),
    sa.Column('produced_quantity', sa.Float(), nullable=True),
    sa.Column('scrap_quantity', sa.Float(), nullable=True),
    sa.Column('planned_start_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('planned_end_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('actual_start_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('actual_end_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('production_status', sa.String(), nullable=True),
    sa.Column('priority', sa.String(), nullable=True),
    sa.Column('production_department', sa.String(), nullable=True),
    sa.Column('production_location', sa.String(), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('voucher_number', sa.String(), nullable=False),
    sa.Column('date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['bom_id'], ['bill_of_materials.id'], ),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'voucher_number', name='uq_mo_org_voucher_number')
    )
    op.create_index('idx_mo_org_bom', 'manufacturing_orders', ['organization_id', 'bom_id'], unique=False)
    op.create_index('idx_mo_org_date', 'manufacturing_orders', ['organization_id', 'date'], unique=False)
    op.create_index('idx_mo_org_status', 'manufacturing_orders', ['organization_id', 'production_status'], unique=False)
    op.create_index(op.f('ix_manufacturing_orders_id'), 'manufacturing_orders', ['id'], unique=False)
    op.create_index(op.f('ix_manufacturing_orders_organization_id'), 'manufacturing_orders', ['organization_id'], unique=False)
    op.create_index(op.f('ix_manufacturing_orders_voucher_number'), 'manufacturing_orders', ['voucher_number'], unique=False)
    op.create_table('notification_logs',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('template_id', sa.Integer(), nullable=True),
    sa.Column('recipient_type', sa.String(), nullable=False),
    sa.Column('recipient_id', sa.Integer(), nullable=True),
    sa.Column('recipient_identifier', sa.String(), nullable=False),
    sa.Column('channel', sa.String(), nullable=False),
    sa.Column('subject', sa.String(), nullable=True),
    sa.Column('content', sa.Text(), nullable=False),
    sa.Column('status', sa.String(), nullable=False),
    sa.Column('sent_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('delivered_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('opened_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('clicked_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('error_message', sa.Text(), nullable=True),
    sa.Column('retry_count', sa.Integer(), nullable=False),
    sa.Column('max_retries', sa.Integer(), nullable=False),
    sa.Column('trigger_event', sa.String(), nullable=True),
    sa.Column('context_data', sa.JSON(), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], name='fk_notification_log_created_by'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_notification_log_organization_id'),
    sa.ForeignKeyConstraint(['template_id'], ['notification_templates.id'], name='fk_notification_log_template_id'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_notification_log_org_channel', 'notification_logs', ['organization_id', 'channel'], unique=False)
    op.create_index('idx_notification_log_org_status', 'notification_logs', ['organization_id', 'status'], unique=False)
    op.create_index('idx_notification_log_recipient', 'notification_logs', ['recipient_type', 'recipient_id'], unique=False)
    op.create_index('idx_notification_log_sent_at', 'notification_logs', ['sent_at'], unique=False)
    op.create_index(op.f('ix_notification_logs_id'), 'notification_logs', ['id'], unique=False)
    op.create_index(op.f('ix_notification_logs_organization_id'), 'notification_logs', ['organization_id'], unique=False)
    op.create_table('proforma_invoice_items',
    sa.Column('proforma_invoice_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('quantity', sa.Float(), nullable=False),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('unit_price', sa.Float(), nullable=False),
    sa.Column('discount_percentage', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('taxable_amount', sa.Float(), nullable=False),
    sa.Column('gst_rate', sa.Float(), nullable=True),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], ),
    sa.ForeignKeyConstraint(['proforma_invoice_id'], ['proforma_invoices.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_proforma_invoice_items_id'), 'proforma_invoice_items', ['id'], unique=False)
    op.create_table('purchase_order_items',
    sa.Column('purchase_order_id', sa.Integer(), nullable=False),
    sa.Column('delivered_quantity', sa.Float(), nullable=True),
    sa.Column('pending_quantity', sa.Float(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('quantity', sa.Float(), nullable=False),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('unit_price', sa.Float(), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], ),
    sa.ForeignKeyConstraint(['purchase_order_id'], ['purchase_orders.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_purchase_order_items_id'), 'purchase_order_items', ['id'], unique=False)
    op.create_table('quotation_items',
    sa.Column('quotation_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('quantity', sa.Float(), nullable=False),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('unit_price', sa.Float(), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], ),
    sa.ForeignKeyConstraint(['quotation_id'], ['quotations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_quotation_items_id'), 'quotation_items', ['id'], unique=False)
    op.create_table('sales_order_items',
    sa.Column('sales_order_id', sa.Integer(), nullable=False),
    sa.Column('delivered_quantity', sa.Float(), nullable=True),
    sa.Column('pending_quantity', sa.Float(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('quantity', sa.Float(), nullable=False),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('unit_price', sa.Float(), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], ),
    sa.ForeignKeyConstraint(['sales_order_id'], ['sales_orders.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_sales_order_items_id'), 'sales_order_items', ['id'], unique=False)
    op.create_table('sla_tracking',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('ticket_id', sa.Integer(), nullable=False),
    sa.Column('policy_id', sa.Integer(), nullable=False),
    sa.Column('response_deadline', sa.DateTime(timezone=True), nullable=False),
    sa.Column('resolution_deadline', sa.DateTime(timezone=True), nullable=False),
    sa.Column('first_response_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('resolved_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('response_status', sa.String(), nullable=False),
    sa.Column('resolution_status', sa.String(), nullable=False),
    sa.Column('escalation_triggered', sa.Boolean(), nullable=False),
    sa.Column('escalation_triggered_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('escalation_level', sa.Integer(), nullable=False),
    sa.Column('response_breach_hours', sa.Float(), nullable=True),
    sa.Column('resolution_breach_hours', sa.Float(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_sla_tracking_organization_id'),
    sa.ForeignKeyConstraint(['policy_id'], ['sla_policies.id'], name='fk_sla_tracking_policy_id'),
    sa.ForeignKeyConstraint(['ticket_id'], ['tickets.id'], name='fk_sla_tracking_ticket_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('ticket_id')
    )
    op.create_index('idx_sla_tracking_escalation', 'sla_tracking', ['escalation_triggered'], unique=False)
    op.create_index('idx_sla_tracking_org_ticket', 'sla_tracking', ['organization_id', 'ticket_id'], unique=False)
    op.create_index('idx_sla_tracking_policy', 'sla_tracking', ['policy_id'], unique=False)
    op.create_index('idx_sla_tracking_resolution_deadline', 'sla_tracking', ['resolution_deadline'], unique=False)
    op.create_index('idx_sla_tracking_resolution_status', 'sla_tracking', ['resolution_status'], unique=False)
    op.create_index('idx_sla_tracking_response_deadline', 'sla_tracking', ['response_deadline'], unique=False)
    op.create_index('idx_sla_tracking_response_status', 'sla_tracking', ['response_status'], unique=False)
    op.create_index(op.f('ix_sla_tracking_id'), 'sla_tracking', ['id'], unique=False)
    op.create_index(op.f('ix_sla_tracking_organization_id'), 'sla_tracking', ['organization_id'], unique=False)
    op.create_table('ticket_attachments',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('ticket_id', sa.Integer(), nullable=False),
    sa.Column('filename', sa.String(), nullable=False),
    sa.Column('original_filename', sa.String(), nullable=False),
    sa.Column('file_path', sa.String(), nullable=False),
    sa.Column('file_size', sa.Integer(), nullable=False),
    sa.Column('content_type', sa.String(), nullable=False),
    sa.Column('file_type', sa.String(), nullable=False),
    sa.Column('uploaded_by_id', sa.Integer(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_ticket_attachment_organization_id'),
    sa.ForeignKeyConstraint(['ticket_id'], ['tickets.id'], name='fk_ticket_attachment_ticket_id'),
    sa.ForeignKeyConstraint(['uploaded_by_id'], ['users.id'], name='fk_ticket_attachment_uploaded_by_id'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_ticket_attachment_org_ticket', 'ticket_attachments', ['organization_id', 'ticket_id'], unique=False)
    op.create_index('idx_ticket_attachment_type', 'ticket_attachments', ['file_type'], unique=False)
    op.create_index('idx_ticket_attachment_uploaded_by', 'ticket_attachments', ['uploaded_by_id'], unique=False)
    op.create_index(op.f('ix_ticket_attachments_id'), 'ticket_attachments', ['id'], unique=False)
    op.create_index(op.f('ix_ticket_attachments_organization_id'), 'ticket_attachments', ['organization_id'], unique=False)
    op.create_table('ticket_history',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('ticket_id', sa.Integer(), nullable=False),
    sa.Column('action', sa.String(), nullable=False),
    sa.Column('field_changed', sa.String(), nullable=True),
    sa.Column('old_value', sa.Text(), nullable=True),
    sa.Column('new_value', sa.Text(), nullable=True),
    sa.Column('comment', sa.Text(), nullable=True),
    sa.Column('changed_by_id', sa.Integer(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.ForeignKeyConstraint(['changed_by_id'], ['users.id'], name='fk_ticket_history_changed_by_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_ticket_history_organization_id'),
    sa.ForeignKeyConstraint(['ticket_id'], ['tickets.id'], name='fk_ticket_history_ticket_id'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_ticket_history_action', 'ticket_history', ['action'], unique=False)
    op.create_index('idx_ticket_history_created_at', 'ticket_history', ['created_at'], unique=False)
    op.create_index('idx_ticket_history_org_ticket', 'ticket_history', ['organization_id', 'ticket_id'], unique=False)
    op.create_index('idx_ticket_history_user', 'ticket_history', ['changed_by_id'], unique=False)
    op.create_index(op.f('ix_ticket_history_id'), 'ticket_history', ['id'], unique=False)
    op.create_index(op.f('ix_ticket_history_organization_id'), 'ticket_history', ['organization_id'], unique=False)
    op.create_table('delivery_challan_items',
    sa.Column('delivery_challan_id', sa.Integer(), nullable=False),
    sa.Column('so_item_id', sa.Integer(), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('quantity', sa.Float(), nullable=False),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('unit_price', sa.Float(), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.ForeignKeyConstraint(['delivery_challan_id'], ['delivery_challans.id'], ),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], ),
    sa.ForeignKeyConstraint(['so_item_id'], ['sales_order_items.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_delivery_challan_items_id'), 'delivery_challan_items', ['id'], unique=False)
    op.create_table('dispatch_items',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('dispatch_order_id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('quantity', sa.Float(), nullable=False),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('serial_numbers', sa.Text(), nullable=True),
    sa.Column('batch_numbers', sa.Text(), nullable=True),
    sa.Column('status', sa.String(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['dispatch_order_id'], ['dispatch_orders.id'], name='fk_dispatch_item_dispatch_order_id'),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], name='fk_dispatch_item_product_id'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_dispatch_item_order', 'dispatch_items', ['dispatch_order_id'], unique=False)
    op.create_index('idx_dispatch_item_product', 'dispatch_items', ['product_id'], unique=False)
    op.create_index('idx_dispatch_item_status', 'dispatch_items', ['status'], unique=False)
    op.create_index(op.f('ix_dispatch_items_id'), 'dispatch_items', ['id'], unique=False)
    op.create_table('goods_receipt_note_items',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('grn_id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('po_item_id', sa.Integer(), nullable=True),
    sa.Column('ordered_quantity', sa.Float(), nullable=False),
    sa.Column('received_quantity', sa.Float(), nullable=False),
    sa.Column('accepted_quantity', sa.Float(), nullable=False),
    sa.Column('rejected_quantity', sa.Float(), nullable=True),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('unit_price', sa.Float(), nullable=False),
    sa.Column('total_cost', sa.Float(), nullable=False),
    sa.Column('remarks', sa.Text(), nullable=True),
    sa.Column('batch_number', sa.String(), nullable=True),
    sa.Column('expiry_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('quality_status', sa.String(), nullable=True),
    sa.ForeignKeyConstraint(['grn_id'], ['goods_receipt_notes.id'], ),
    sa.ForeignKeyConstraint(['po_item_id'], ['purchase_order_items.id'], ),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_goods_receipt_note_items_id'), 'goods_receipt_note_items', ['id'], unique=False)
    op.create_table('installation_jobs',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('job_number', sa.String(), nullable=False),
    sa.Column('dispatch_order_id', sa.Integer(), nullable=False),
    sa.Column('customer_id', sa.Integer(), nullable=False),
    sa.Column('ticket_id', sa.Integer(), nullable=True),
    sa.Column('status', sa.String(), nullable=False),
    sa.Column('priority', sa.String(), nullable=False),
    sa.Column('scheduled_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('estimated_duration_hours', sa.Float(), nullable=True),
    sa.Column('actual_start_time', sa.DateTime(timezone=True), nullable=True),
    sa.Column('actual_end_time', sa.DateTime(timezone=True), nullable=True),
    sa.Column('assigned_technician_id', sa.Integer(), nullable=True),
    sa.Column('installation_address', sa.Text(), nullable=False),
    sa.Column('contact_person', sa.String(), nullable=True),
    sa.Column('contact_number', sa.String(), nullable=True),
    sa.Column('installation_notes', sa.Text(), nullable=True),
    sa.Column('completion_notes', sa.Text(), nullable=True),
    sa.Column('customer_feedback', sa.Text(), nullable=True),
    sa.Column('customer_rating', sa.Integer(), nullable=True),
    sa.Column('created_by_id', sa.Integer(), nullable=True),
    sa.Column('updated_by_id', sa.Integer(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['assigned_technician_id'], ['users.id'], name='fk_installation_job_assigned_technician_id'),
    sa.ForeignKeyConstraint(['created_by_id'], ['users.id'], name='fk_installation_job_created_by_id'),
    sa.ForeignKeyConstraint(['customer_id'], ['customers.id'], name='fk_installation_job_customer_id'),
    sa.ForeignKeyConstraint(['dispatch_order_id'], ['dispatch_orders.id'], name='fk_installation_job_dispatch_order_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_installation_job_organization_id'),
    sa.ForeignKeyConstraint(['ticket_id'], ['tickets.id'], name='fk_installation_job_ticket_id'),
    sa.ForeignKeyConstraint(['updated_by_id'], ['users.id'], name='fk_installation_job_updated_by_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'job_number', name='uq_installation_job_org_number')
    )
    op.create_index('idx_installation_job_created_at', 'installation_jobs', ['created_at'], unique=False)
    op.create_index('idx_installation_job_dispatch_order', 'installation_jobs', ['dispatch_order_id'], unique=False)
    op.create_index('idx_installation_job_org_customer', 'installation_jobs', ['organization_id', 'customer_id'], unique=False)
    op.create_index('idx_installation_job_org_status', 'installation_jobs', ['organization_id', 'status'], unique=False)
    op.create_index('idx_installation_job_org_technician', 'installation_jobs', ['organization_id', 'assigned_technician_id'], unique=False)
    op.create_index('idx_installation_job_priority', 'installation_jobs', ['priority'], unique=False)
    op.create_index('idx_installation_job_scheduled_date', 'installation_jobs', ['scheduled_date'], unique=False)
    op.create_index(op.f('ix_installation_jobs_id'), 'installation_jobs', ['id'], unique=False)
    op.create_index(op.f('ix_installation_jobs_job_number'), 'installation_jobs', ['job_number'], unique=False)
    op.create_index(op.f('ix_installation_jobs_organization_id'), 'installation_jobs', ['organization_id'], unique=False)
    op.create_table('job_card_vouchers',
    sa.Column('job_type', sa.String(), nullable=False),
    sa.Column('vendor_id', sa.Integer(), nullable=False),
    sa.Column('manufacturing_order_id', sa.Integer(), nullable=True),
    sa.Column('job_description', sa.Text(), nullable=False),
    sa.Column('job_category', sa.String(), nullable=True),
    sa.Column('expected_completion_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('actual_completion_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('materials_supplied_by', sa.String(), nullable=True),
    sa.Column('delivery_address', sa.Text(), nullable=True),
    sa.Column('transport_mode', sa.String(), nullable=True),
    sa.Column('job_status', sa.String(), nullable=True),
    sa.Column('quality_specifications', sa.Text(), nullable=True),
    sa.Column('quality_check_required', sa.Boolean(), nullable=True),
    sa.Column('approved_by', sa.Integer(), nullable=True),
    sa.Column('approval_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('voucher_number', sa.String(), nullable=False),
    sa.Column('date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['approved_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['manufacturing_order_id'], ['manufacturing_orders.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['vendor_id'], ['vendors.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'voucher_number', name='uq_jcv_org_voucher_number')
    )
    op.create_index('idx_jcv_org_date', 'job_card_vouchers', ['organization_id', 'date'], unique=False)
    op.create_index('idx_jcv_org_mo', 'job_card_vouchers', ['organization_id', 'manufacturing_order_id'], unique=False)
    op.create_index('idx_jcv_org_status', 'job_card_vouchers', ['organization_id', 'job_status'], unique=False)
    op.create_index('idx_jcv_org_vendor', 'job_card_vouchers', ['organization_id', 'vendor_id'], unique=False)
    op.create_index(op.f('ix_job_card_vouchers_id'), 'job_card_vouchers', ['id'], unique=False)
    op.create_index(op.f('ix_job_card_vouchers_organization_id'), 'job_card_vouchers', ['organization_id'], unique=False)
    op.create_index(op.f('ix_job_card_vouchers_voucher_number'), 'job_card_vouchers', ['voucher_number'], unique=False)
    op.create_table('manufacturing_journal_vouchers',
    sa.Column('manufacturing_order_id', sa.Integer(), nullable=False),
    sa.Column('bom_id', sa.Integer(), nullable=False),
    sa.Column('date_of_manufacture', sa.DateTime(timezone=True), nullable=False),
    sa.Column('shift', sa.String(), nullable=True),
    sa.Column('operator', sa.String(), nullable=True),
    sa.Column('supervisor', sa.String(), nullable=True),
    sa.Column('machine_used', sa.String(), nullable=True),
    sa.Column('finished_quantity', sa.Float(), nullable=True),
    sa.Column('scrap_quantity', sa.Float(), nullable=True),
    sa.Column('rework_quantity', sa.Float(), nullable=True),
    sa.Column('byproduct_quantity', sa.Float(), nullable=True),
    sa.Column('material_cost', sa.Float(), nullable=True),
    sa.Column('labor_cost', sa.Float(), nullable=True),
    sa.Column('overhead_cost', sa.Float(), nullable=True),
    sa.Column('total_manufacturing_cost', sa.Float(), nullable=True),
    sa.Column('quality_grade', sa.String(), nullable=True),
    sa.Column('quality_remarks', sa.Text(), nullable=True),
    sa.Column('narration', sa.Text(), nullable=True),
    sa.Column('attachment_path', sa.String(), nullable=True),
    sa.Column('approved_by', sa.Integer(), nullable=True),
    sa.Column('approval_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('voucher_number', sa.String(), nullable=False),
    sa.Column('date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['approved_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['bom_id'], ['bill_of_materials.id'], ),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['manufacturing_order_id'], ['manufacturing_orders.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'voucher_number', name='uq_mjv_org_voucher_number')
    )
    op.create_index('idx_mjv_org_bom', 'manufacturing_journal_vouchers', ['organization_id', 'bom_id'], unique=False)
    op.create_index('idx_mjv_org_date', 'manufacturing_journal_vouchers', ['organization_id', 'date_of_manufacture'], unique=False)
    op.create_index('idx_mjv_org_mo', 'manufacturing_journal_vouchers', ['organization_id', 'manufacturing_order_id'], unique=False)
    op.create_index(op.f('ix_manufacturing_journal_vouchers_id'), 'manufacturing_journal_vouchers', ['id'], unique=False)
    op.create_index(op.f('ix_manufacturing_journal_vouchers_organization_id'), 'manufacturing_journal_vouchers', ['organization_id'], unique=False)
    op.create_index(op.f('ix_manufacturing_journal_vouchers_voucher_number'), 'manufacturing_journal_vouchers', ['voucher_number'], unique=False)
    op.create_table('material_issues',
    sa.Column('manufacturing_order_id', sa.Integer(), nullable=True),
    sa.Column('issued_to_department', sa.String(), nullable=True),
    sa.Column('issued_to_employee', sa.String(), nullable=True),
    sa.Column('purpose', sa.String(), nullable=True),
    sa.Column('destination', sa.String(), nullable=True),
    sa.Column('issue_time', sa.DateTime(timezone=True), nullable=True),
    sa.Column('expected_return_time', sa.DateTime(timezone=True), nullable=True),
    sa.Column('approved_by', sa.Integer(), nullable=True),
    sa.Column('approval_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('voucher_number', sa.String(), nullable=False),
    sa.Column('date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['approved_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['manufacturing_order_id'], ['manufacturing_orders.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'voucher_number', name='uq_mi_org_voucher_number')
    )
    op.create_index('idx_mi_org_date', 'material_issues', ['organization_id', 'date'], unique=False)
    op.create_index('idx_mi_org_dept', 'material_issues', ['organization_id', 'issued_to_department'], unique=False)
    op.create_index('idx_mi_org_mo', 'material_issues', ['organization_id', 'manufacturing_order_id'], unique=False)
    op.create_index(op.f('ix_material_issues_id'), 'material_issues', ['id'], unique=False)
    op.create_index(op.f('ix_material_issues_organization_id'), 'material_issues', ['organization_id'], unique=False)
    op.create_index(op.f('ix_material_issues_voucher_number'), 'material_issues', ['voucher_number'], unique=False)
    op.create_table('material_receipt_vouchers',
    sa.Column('manufacturing_order_id', sa.Integer(), nullable=True),
    sa.Column('source_type', sa.String(), nullable=False),
    sa.Column('source_reference', sa.String(), nullable=True),
    sa.Column('received_from_department', sa.String(), nullable=True),
    sa.Column('received_from_employee', sa.String(), nullable=True),
    sa.Column('received_by_employee', sa.String(), nullable=True),
    sa.Column('receipt_time', sa.DateTime(timezone=True), nullable=True),
    sa.Column('inspection_required', sa.Boolean(), nullable=True),
    sa.Column('inspection_status', sa.String(), nullable=True),
    sa.Column('inspector_name', sa.String(), nullable=True),
    sa.Column('inspection_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('inspection_remarks', sa.Text(), nullable=True),
    sa.Column('condition_on_receipt', sa.String(), nullable=True),
    sa.Column('approved_by', sa.Integer(), nullable=True),
    sa.Column('approval_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('voucher_number', sa.String(), nullable=False),
    sa.Column('date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['approved_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['manufacturing_order_id'], ['manufacturing_orders.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'voucher_number', name='uq_mrv_org_voucher_number')
    )
    op.create_index('idx_mrv_org_date', 'material_receipt_vouchers', ['organization_id', 'date'], unique=False)
    op.create_index('idx_mrv_org_mo', 'material_receipt_vouchers', ['organization_id', 'manufacturing_order_id'], unique=False)
    op.create_index('idx_mrv_org_source', 'material_receipt_vouchers', ['organization_id', 'source_type'], unique=False)
    op.create_index(op.f('ix_material_receipt_vouchers_id'), 'material_receipt_vouchers', ['id'], unique=False)
    op.create_index(op.f('ix_material_receipt_vouchers_organization_id'), 'material_receipt_vouchers', ['organization_id'], unique=False)
    op.create_index(op.f('ix_material_receipt_vouchers_voucher_number'), 'material_receipt_vouchers', ['voucher_number'], unique=False)
    op.create_table('production_entries',
    sa.Column('manufacturing_order_id', sa.Integer(), nullable=False),
    sa.Column('shift', sa.String(), nullable=True),
    sa.Column('operator', sa.String(), nullable=True),
    sa.Column('machine_used', sa.String(), nullable=True),
    sa.Column('good_quantity', sa.Float(), nullable=True),
    sa.Column('rejected_quantity', sa.Float(), nullable=True),
    sa.Column('rework_quantity', sa.Float(), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('voucher_number', sa.String(), nullable=False),
    sa.Column('date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['manufacturing_order_id'], ['manufacturing_orders.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'voucher_number', name='uq_pe_org_voucher_number')
    )
    op.create_index('idx_pe_org_date', 'production_entries', ['organization_id', 'date'], unique=False)
    op.create_index('idx_pe_org_mo', 'production_entries', ['organization_id', 'manufacturing_order_id'], unique=False)
    op.create_index(op.f('ix_production_entries_id'), 'production_entries', ['id'], unique=False)
    op.create_index(op.f('ix_production_entries_organization_id'), 'production_entries', ['organization_id'], unique=False)
    op.create_index(op.f('ix_production_entries_voucher_number'), 'production_entries', ['voucher_number'], unique=False)
    op.create_table('purchase_vouchers',
    sa.Column('vendor_id', sa.Integer(), nullable=False),
    sa.Column('purchase_order_id', sa.Integer(), nullable=True),
    sa.Column('grn_id', sa.Integer(), nullable=True),
    sa.Column('invoice_number', sa.String(), nullable=True),
    sa.Column('invoice_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('due_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('payment_terms', sa.String(), nullable=True),
    sa.Column('transport_mode', sa.String(), nullable=True),
    sa.Column('vehicle_number', sa.String(), nullable=True),
    sa.Column('lr_rr_number', sa.String(), nullable=True),
    sa.Column('e_way_bill_number', sa.String(), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('voucher_number', sa.String(), nullable=False),
    sa.Column('date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['grn_id'], ['goods_receipt_notes.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['purchase_order_id'], ['purchase_orders.id'], ),
    sa.ForeignKeyConstraint(['vendor_id'], ['vendors.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'voucher_number', name='uq_pv_org_voucher_number')
    )
    op.create_index('idx_pv_org_date', 'purchase_vouchers', ['organization_id', 'date'], unique=False)
    op.create_index('idx_pv_org_grn', 'purchase_vouchers', ['organization_id', 'grn_id'], unique=False)
    op.create_index('idx_pv_org_po', 'purchase_vouchers', ['organization_id', 'purchase_order_id'], unique=False)
    op.create_index('idx_pv_org_vendor', 'purchase_vouchers', ['organization_id', 'vendor_id'], unique=False)
    op.create_index(op.f('ix_purchase_vouchers_id'), 'purchase_vouchers', ['id'], unique=False)
    op.create_index(op.f('ix_purchase_vouchers_organization_id'), 'purchase_vouchers', ['organization_id'], unique=False)
    op.create_index(op.f('ix_purchase_vouchers_voucher_number'), 'purchase_vouchers', ['voucher_number'], unique=False)
    op.create_table('sales_vouchers',
    sa.Column('customer_id', sa.Integer(), nullable=False),
    sa.Column('sales_order_id', sa.Integer(), nullable=True),
    sa.Column('delivery_challan_id', sa.Integer(), nullable=True),
    sa.Column('invoice_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('due_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('payment_terms', sa.String(), nullable=True),
    sa.Column('place_of_supply', sa.String(), nullable=True),
    sa.Column('transport_mode', sa.String(), nullable=True),
    sa.Column('vehicle_number', sa.String(), nullable=True),
    sa.Column('lr_rr_number', sa.String(), nullable=True),
    sa.Column('e_way_bill_number', sa.String(), nullable=True),
    sa.Column('voucher_type', sa.String(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('voucher_number', sa.String(), nullable=False),
    sa.Column('date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['customer_id'], ['customers.id'], ),
    sa.ForeignKeyConstraint(['delivery_challan_id'], ['delivery_challans.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['sales_order_id'], ['sales_orders.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'voucher_number', name='uq_sv_org_voucher_number')
    )
    op.create_index('idx_sv_org_challan', 'sales_vouchers', ['organization_id', 'delivery_challan_id'], unique=False)
    op.create_index('idx_sv_org_customer', 'sales_vouchers', ['organization_id', 'customer_id'], unique=False)
    op.create_index('idx_sv_org_date', 'sales_vouchers', ['organization_id', 'date'], unique=False)
    op.create_index('idx_sv_org_so', 'sales_vouchers', ['organization_id', 'sales_order_id'], unique=False)
    op.create_index(op.f('ix_sales_vouchers_id'), 'sales_vouchers', ['id'], unique=False)
    op.create_index(op.f('ix_sales_vouchers_organization_id'), 'sales_vouchers', ['organization_id'], unique=False)
    op.create_index(op.f('ix_sales_vouchers_voucher_number'), 'sales_vouchers', ['voucher_number'], unique=False)
    op.create_index(op.f('ix_sales_vouchers_voucher_type'), 'sales_vouchers', ['voucher_type'], unique=False)
    op.create_table('stock_journals',
    sa.Column('journal_type', sa.String(), nullable=False),
    sa.Column('from_location', sa.String(), nullable=True),
    sa.Column('to_location', sa.String(), nullable=True),
    sa.Column('from_warehouse', sa.String(), nullable=True),
    sa.Column('to_warehouse', sa.String(), nullable=True),
    sa.Column('manufacturing_order_id', sa.Integer(), nullable=True),
    sa.Column('bom_id', sa.Integer(), nullable=True),
    sa.Column('transfer_reason', sa.String(), nullable=True),
    sa.Column('assembly_product_id', sa.Integer(), nullable=True),
    sa.Column('assembly_quantity', sa.Float(), nullable=True),
    sa.Column('physical_verification_done', sa.Boolean(), nullable=True),
    sa.Column('verified_by', sa.String(), nullable=True),
    sa.Column('verification_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('approved_by', sa.Integer(), nullable=True),
    sa.Column('approval_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('voucher_number', sa.String(), nullable=False),
    sa.Column('date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['approved_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['assembly_product_id'], ['products.id'], ),
    sa.ForeignKeyConstraint(['bom_id'], ['bill_of_materials.id'], ),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['manufacturing_order_id'], ['manufacturing_orders.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'voucher_number', name='uq_sj_org_voucher_number')
    )
    op.create_index('idx_sj_org_date', 'stock_journals', ['organization_id', 'date'], unique=False)
    op.create_index('idx_sj_org_from_loc', 'stock_journals', ['organization_id', 'from_location'], unique=False)
    op.create_index('idx_sj_org_mo', 'stock_journals', ['organization_id', 'manufacturing_order_id'], unique=False)
    op.create_index('idx_sj_org_to_loc', 'stock_journals', ['organization_id', 'to_location'], unique=False)
    op.create_index('idx_sj_org_type', 'stock_journals', ['organization_id', 'journal_type'], unique=False)
    op.create_index(op.f('ix_stock_journals_id'), 'stock_journals', ['id'], unique=False)
    op.create_index(op.f('ix_stock_journals_organization_id'), 'stock_journals', ['organization_id'], unique=False)
    op.create_index(op.f('ix_stock_journals_voucher_number'), 'stock_journals', ['voucher_number'], unique=False)
    op.create_table('completion_records',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('installation_job_id', sa.Integer(), nullable=False),
    sa.Column('completion_status', sa.String(), nullable=False),
    sa.Column('completed_by_id', sa.Integer(), nullable=False),
    sa.Column('completion_date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('actual_start_time', sa.DateTime(timezone=True), nullable=True),
    sa.Column('actual_end_time', sa.DateTime(timezone=True), nullable=True),
    sa.Column('total_duration_minutes', sa.Integer(), nullable=True),
    sa.Column('work_performed', sa.Text(), nullable=False),
    sa.Column('issues_encountered', sa.Text(), nullable=True),
    sa.Column('resolution_notes', sa.Text(), nullable=True),
    sa.Column('materials_used', sa.Text(), nullable=True),
    sa.Column('parts_replaced', sa.Text(), nullable=True),
    sa.Column('quality_check_passed', sa.Boolean(), nullable=False),
    sa.Column('verification_notes', sa.Text(), nullable=True),
    sa.Column('photos_attached', sa.Boolean(), nullable=False),
    sa.Column('customer_present', sa.Boolean(), nullable=False),
    sa.Column('customer_signature_received', sa.Boolean(), nullable=False),
    sa.Column('customer_feedback_notes', sa.Text(), nullable=True),
    sa.Column('customer_rating', sa.Integer(), nullable=True),
    sa.Column('follow_up_required', sa.Boolean(), nullable=False),
    sa.Column('follow_up_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('follow_up_notes', sa.Text(), nullable=True),
    sa.Column('feedback_request_sent', sa.Boolean(), nullable=False),
    sa.Column('feedback_request_sent_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['completed_by_id'], ['users.id'], name='fk_completion_record_completed_by_id'),
    sa.ForeignKeyConstraint(['installation_job_id'], ['installation_jobs.id'], name='fk_completion_record_installation_job_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_completion_record_organization_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('installation_job_id')
    )
    op.create_index('idx_completion_record_completed_by', 'completion_records', ['completed_by_id'], unique=False)
    op.create_index('idx_completion_record_completion_date', 'completion_records', ['completion_date'], unique=False)
    op.create_index('idx_completion_record_feedback_sent', 'completion_records', ['feedback_request_sent'], unique=False)
    op.create_index('idx_completion_record_follow_up', 'completion_records', ['follow_up_required', 'follow_up_date'], unique=False)
    op.create_index('idx_completion_record_org_job', 'completion_records', ['organization_id', 'installation_job_id'], unique=False)
    op.create_index('idx_completion_record_status', 'completion_records', ['completion_status'], unique=False)
    op.create_index(op.f('ix_completion_records_id'), 'completion_records', ['id'], unique=False)
    op.create_index(op.f('ix_completion_records_organization_id'), 'completion_records', ['organization_id'], unique=False)
    op.create_table('installation_tasks',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('installation_job_id', sa.Integer(), nullable=False),
    sa.Column('task_number', sa.String(), nullable=False),
    sa.Column('title', sa.String(), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('status', sa.String(), nullable=False),
    sa.Column('priority', sa.String(), nullable=False),
    sa.Column('estimated_duration_minutes', sa.Integer(), nullable=True),
    sa.Column('sequence_order', sa.Integer(), nullable=False),
    sa.Column('assigned_technician_id', sa.Integer(), nullable=True),
    sa.Column('started_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('completed_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('work_notes', sa.Text(), nullable=True),
    sa.Column('completion_notes', sa.Text(), nullable=True),
    sa.Column('depends_on_task_id', sa.Integer(), nullable=True),
    sa.Column('created_by_id', sa.Integer(), nullable=True),
    sa.Column('updated_by_id', sa.Integer(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['assigned_technician_id'], ['users.id'], name='fk_installation_task_assigned_technician_id'),
    sa.ForeignKeyConstraint(['created_by_id'], ['users.id'], name='fk_installation_task_created_by_id'),
    sa.ForeignKeyConstraint(['depends_on_task_id'], ['installation_tasks.id'], name='fk_installation_task_depends_on_task_id'),
    sa.ForeignKeyConstraint(['installation_job_id'], ['installation_jobs.id'], name='fk_installation_task_installation_job_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_installation_task_organization_id'),
    sa.ForeignKeyConstraint(['updated_by_id'], ['users.id'], name='fk_installation_task_updated_by_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'task_number', name='uq_installation_task_org_number')
    )
    op.create_index('idx_installation_task_created_at', 'installation_tasks', ['created_at'], unique=False)
    op.create_index('idx_installation_task_org_job', 'installation_tasks', ['organization_id', 'installation_job_id'], unique=False)
    op.create_index('idx_installation_task_sequence', 'installation_tasks', ['installation_job_id', 'sequence_order'], unique=False)
    op.create_index('idx_installation_task_status', 'installation_tasks', ['status'], unique=False)
    op.create_index('idx_installation_task_technician', 'installation_tasks', ['assigned_technician_id'], unique=False)
    op.create_index(op.f('ix_installation_tasks_id'), 'installation_tasks', ['id'], unique=False)
    op.create_index(op.f('ix_installation_tasks_organization_id'), 'installation_tasks', ['organization_id'], unique=False)
    op.create_index(op.f('ix_installation_tasks_task_number'), 'installation_tasks', ['task_number'], unique=False)
    op.create_table('job_card_received_outputs',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('job_card_id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('quantity_received', sa.Float(), nullable=False),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('unit_rate', sa.Float(), nullable=True),
    sa.Column('total_value', sa.Float(), nullable=True),
    sa.Column('quality_status', sa.String(), nullable=True),
    sa.Column('inspection_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('inspection_remarks', sa.Text(), nullable=True),
    sa.Column('batch_number', sa.String(), nullable=True),
    sa.Column('receipt_date', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['job_card_id'], ['job_card_vouchers.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_job_card_received_outputs_id'), 'job_card_received_outputs', ['id'], unique=False)
    op.create_index(op.f('ix_job_card_received_outputs_organization_id'), 'job_card_received_outputs', ['organization_id'], unique=False)
    op.create_table('job_card_supplied_materials',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('job_card_id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('quantity_supplied', sa.Float(), nullable=False),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('unit_rate', sa.Float(), nullable=True),
    sa.Column('total_value', sa.Float(), nullable=True),
    sa.Column('batch_number', sa.String(), nullable=True),
    sa.Column('lot_number', sa.String(), nullable=True),
    sa.Column('supply_date', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['job_card_id'], ['job_card_vouchers.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_job_card_supplied_materials_id'), 'job_card_supplied_materials', ['id'], unique=False)
    op.create_index(op.f('ix_job_card_supplied_materials_organization_id'), 'job_card_supplied_materials', ['organization_id'], unique=False)
    op.create_table('job_parts',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('job_id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('quantity_required', sa.Float(), nullable=False),
    sa.Column('quantity_used', sa.Float(), nullable=False),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('status', sa.String(), nullable=False),
    sa.Column('location_used', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('unit_cost', sa.Float(), nullable=True),
    sa.Column('total_cost', sa.Float(), nullable=True),
    sa.Column('allocated_by_id', sa.Integer(), nullable=True),
    sa.Column('used_by_id', sa.Integer(), nullable=True),
    sa.Column('allocated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('used_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['allocated_by_id'], ['users.id'], name='fk_job_parts_allocated_by_id'),
    sa.ForeignKeyConstraint(['job_id'], ['installation_jobs.id'], name='fk_job_parts_job_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_job_parts_organization_id'),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], name='fk_job_parts_product_id'),
    sa.ForeignKeyConstraint(['used_by_id'], ['users.id'], name='fk_job_parts_used_by_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('job_id', 'product_id', name='uq_job_parts_job_product')
    )
    op.create_index('idx_job_parts_org_product', 'job_parts', ['organization_id', 'product_id'], unique=False)
    op.create_index('idx_job_parts_org_status', 'job_parts', ['organization_id', 'status'], unique=False)
    op.create_index('idx_job_parts_used_at', 'job_parts', ['used_at'], unique=False)
    op.create_index(op.f('ix_job_parts_id'), 'job_parts', ['id'], unique=False)
    op.create_index(op.f('ix_job_parts_organization_id'), 'job_parts', ['organization_id'], unique=False)
    op.create_table('manufacturing_journal_byproducts',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('journal_id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('quantity', sa.Float(), nullable=False),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('unit_value', sa.Float(), nullable=True),
    sa.Column('total_value', sa.Float(), nullable=True),
    sa.Column('batch_number', sa.String(), nullable=True),
    sa.Column('condition', sa.String(), nullable=True),
    sa.ForeignKeyConstraint(['journal_id'], ['manufacturing_journal_vouchers.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_manufacturing_journal_byproducts_id'), 'manufacturing_journal_byproducts', ['id'], unique=False)
    op.create_index(op.f('ix_manufacturing_journal_byproducts_organization_id'), 'manufacturing_journal_byproducts', ['organization_id'], unique=False)
    op.create_table('manufacturing_journal_finished_products',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('journal_id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('quantity', sa.Float(), nullable=False),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('unit_cost', sa.Float(), nullable=True),
    sa.Column('total_cost', sa.Float(), nullable=True),
    sa.Column('quality_grade', sa.String(), nullable=True),
    sa.Column('batch_number', sa.String(), nullable=True),
    sa.Column('lot_number', sa.String(), nullable=True),
    sa.ForeignKeyConstraint(['journal_id'], ['manufacturing_journal_vouchers.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_manufacturing_journal_finished_products_id'), 'manufacturing_journal_finished_products', ['id'], unique=False)
    op.create_index(op.f('ix_manufacturing_journal_finished_products_organization_id'), 'manufacturing_journal_finished_products', ['organization_id'], unique=False)
    op.create_table('manufacturing_journal_materials',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('journal_id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('quantity_consumed', sa.Float(), nullable=False),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('unit_cost', sa.Float(), nullable=True),
    sa.Column('total_cost', sa.Float(), nullable=True),
    sa.Column('batch_number', sa.String(), nullable=True),
    sa.Column('lot_number', sa.String(), nullable=True),
    sa.ForeignKeyConstraint(['journal_id'], ['manufacturing_journal_vouchers.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_manufacturing_journal_materials_id'), 'manufacturing_journal_materials', ['id'], unique=False)
    op.create_index(op.f('ix_manufacturing_journal_materials_organization_id'), 'manufacturing_journal_materials', ['organization_id'], unique=False)
    op.create_table('material_issue_items',
    sa.Column('material_issue_id', sa.Integer(), nullable=False),
    sa.Column('batch_number', sa.String(), nullable=True),
    sa.Column('lot_number', sa.String(), nullable=True),
    sa.Column('expiry_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('warehouse_location', sa.String(), nullable=True),
    sa.Column('bin_location', sa.String(), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('quantity', sa.Float(), nullable=False),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('unit_price', sa.Float(), nullable=False),
    sa.Column('discount_percentage', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('taxable_amount', sa.Float(), nullable=False),
    sa.Column('gst_rate', sa.Float(), nullable=True),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.ForeignKeyConstraint(['material_issue_id'], ['material_issues.id'], ),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_material_issue_items_id'), 'material_issue_items', ['id'], unique=False)
    op.create_table('material_receipt_items',
    sa.Column('receipt_id', sa.Integer(), nullable=False),
    sa.Column('batch_number', sa.String(), nullable=True),
    sa.Column('lot_number', sa.String(), nullable=True),
    sa.Column('expiry_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('warehouse_location', sa.String(), nullable=True),
    sa.Column('bin_location', sa.String(), nullable=True),
    sa.Column('quality_status', sa.String(), nullable=True),
    sa.Column('inspection_remarks', sa.Text(), nullable=True),
    sa.Column('received_quantity', sa.Float(), nullable=True),
    sa.Column('accepted_quantity', sa.Float(), nullable=True),
    sa.Column('rejected_quantity', sa.Float(), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('quantity', sa.Float(), nullable=False),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('unit_price', sa.Float(), nullable=False),
    sa.Column('discount_percentage', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('taxable_amount', sa.Float(), nullable=False),
    sa.Column('gst_rate', sa.Float(), nullable=True),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], ),
    sa.ForeignKeyConstraint(['receipt_id'], ['material_receipt_vouchers.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_material_receipt_items_id'), 'material_receipt_items', ['id'], unique=False)
    op.create_table('production_entry_items',
    sa.Column('production_entry_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('quantity', sa.Float(), nullable=False),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('unit_price', sa.Float(), nullable=False),
    sa.Column('discount_percentage', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('taxable_amount', sa.Float(), nullable=False),
    sa.Column('gst_rate', sa.Float(), nullable=True),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], ),
    sa.ForeignKeyConstraint(['production_entry_id'], ['production_entries.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_production_entry_items_id'), 'production_entry_items', ['id'], unique=False)
    op.create_table('purchase_returns',
    sa.Column('vendor_id', sa.Integer(), nullable=False),
    sa.Column('reference_voucher_id', sa.Integer(), nullable=True),
    sa.Column('reason', sa.Text(), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('voucher_number', sa.String(), nullable=False),
    sa.Column('date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['reference_voucher_id'], ['purchase_vouchers.id'], ),
    sa.ForeignKeyConstraint(['vendor_id'], ['vendors.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'voucher_number', name='uq_pr_org_voucher_number')
    )
    op.create_index('idx_pr_org_date', 'purchase_returns', ['organization_id', 'date'], unique=False)
    op.create_index('idx_pr_org_vendor', 'purchase_returns', ['organization_id', 'vendor_id'], unique=False)
    op.create_index(op.f('ix_purchase_returns_id'), 'purchase_returns', ['id'], unique=False)
    op.create_index(op.f('ix_purchase_returns_organization_id'), 'purchase_returns', ['organization_id'], unique=False)
    op.create_index(op.f('ix_purchase_returns_voucher_number'), 'purchase_returns', ['voucher_number'], unique=False)
    op.create_table('purchase_voucher_items',
    sa.Column('purchase_voucher_id', sa.Integer(), nullable=False),
    sa.Column('grn_item_id', sa.Integer(), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('quantity', sa.Float(), nullable=False),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('unit_price', sa.Float(), nullable=False),
    sa.Column('discount_percentage', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('taxable_amount', sa.Float(), nullable=False),
    sa.Column('gst_rate', sa.Float(), nullable=True),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.ForeignKeyConstraint(['grn_item_id'], ['goods_receipt_note_items.id'], ),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], ),
    sa.ForeignKeyConstraint(['purchase_voucher_id'], ['purchase_vouchers.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_purchase_voucher_items_id'), 'purchase_voucher_items', ['id'], unique=False)
    op.create_table('sales_returns',
    sa.Column('customer_id', sa.Integer(), nullable=False),
    sa.Column('reference_voucher_id', sa.Integer(), nullable=True),
    sa.Column('reason', sa.Text(), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('voucher_number', sa.String(), nullable=False),
    sa.Column('date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['customer_id'], ['customers.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['reference_voucher_id'], ['sales_vouchers.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'voucher_number', name='uq_sr_org_voucher_number')
    )
    op.create_index('idx_sr_org_customer', 'sales_returns', ['organization_id', 'customer_id'], unique=False)
    op.create_index('idx_sr_org_date', 'sales_returns', ['organization_id', 'date'], unique=False)
    op.create_index(op.f('ix_sales_returns_id'), 'sales_returns', ['id'], unique=False)
    op.create_index(op.f('ix_sales_returns_organization_id'), 'sales_returns', ['organization_id'], unique=False)
    op.create_index(op.f('ix_sales_returns_voucher_number'), 'sales_returns', ['voucher_number'], unique=False)
    op.create_table('sales_voucher_items',
    sa.Column('sales_voucher_id', sa.Integer(), nullable=False),
    sa.Column('delivery_challan_item_id', sa.Integer(), nullable=True),
    sa.Column('hsn_code', sa.String(), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('quantity', sa.Float(), nullable=False),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('unit_price', sa.Float(), nullable=False),
    sa.Column('discount_percentage', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('taxable_amount', sa.Float(), nullable=False),
    sa.Column('gst_rate', sa.Float(), nullable=True),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.ForeignKeyConstraint(['delivery_challan_item_id'], ['delivery_challan_items.id'], ),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], ),
    sa.ForeignKeyConstraint(['sales_voucher_id'], ['sales_vouchers.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_sales_voucher_items_id'), 'sales_voucher_items', ['id'], unique=False)
    op.create_table('stock_journal_entries',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('stock_journal_id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('debit_quantity', sa.Float(), nullable=True),
    sa.Column('credit_quantity', sa.Float(), nullable=True),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('unit_rate', sa.Float(), nullable=True),
    sa.Column('debit_value', sa.Float(), nullable=True),
    sa.Column('credit_value', sa.Float(), nullable=True),
    sa.Column('from_location', sa.String(), nullable=True),
    sa.Column('to_location', sa.String(), nullable=True),
    sa.Column('from_warehouse', sa.String(), nullable=True),
    sa.Column('to_warehouse', sa.String(), nullable=True),
    sa.Column('from_bin', sa.String(), nullable=True),
    sa.Column('to_bin', sa.String(), nullable=True),
    sa.Column('batch_number', sa.String(), nullable=True),
    sa.Column('lot_number', sa.String(), nullable=True),
    sa.Column('expiry_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('transformation_type', sa.String(), nullable=True),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], ),
    sa.ForeignKeyConstraint(['stock_journal_id'], ['stock_journals.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_stock_journal_entries_id'), 'stock_journal_entries', ['id'], unique=False)
    op.create_index(op.f('ix_stock_journal_entries_organization_id'), 'stock_journal_entries', ['organization_id'], unique=False)
    op.create_table('customer_feedback',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('installation_job_id', sa.Integer(), nullable=False),
    sa.Column('customer_id', sa.Integer(), nullable=False),
    sa.Column('completion_record_id', sa.Integer(), nullable=True),
    sa.Column('overall_rating', sa.Integer(), nullable=False),
    sa.Column('service_quality_rating', sa.Integer(), nullable=True),
    sa.Column('technician_rating', sa.Integer(), nullable=True),
    sa.Column('timeliness_rating', sa.Integer(), nullable=True),
    sa.Column('communication_rating', sa.Integer(), nullable=True),
    sa.Column('feedback_comments', sa.Text(), nullable=True),
    sa.Column('improvement_suggestions', sa.Text(), nullable=True),
    sa.Column('survey_responses', sa.Text(), nullable=True),
    sa.Column('would_recommend', sa.Boolean(), nullable=True),
    sa.Column('satisfaction_level', sa.String(), nullable=True),
    sa.Column('follow_up_preferred', sa.Boolean(), nullable=False),
    sa.Column('preferred_contact_method', sa.String(), nullable=True),
    sa.Column('feedback_status', sa.String(), nullable=False),
    sa.Column('reviewed_by_id', sa.Integer(), nullable=True),
    sa.Column('reviewed_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('response_notes', sa.Text(), nullable=True),
    sa.Column('submitted_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['completion_record_id'], ['completion_records.id'], name='fk_customer_feedback_completion_record_id'),
    sa.ForeignKeyConstraint(['customer_id'], ['customers.id'], name='fk_customer_feedback_customer_id'),
    sa.ForeignKeyConstraint(['installation_job_id'], ['installation_jobs.id'], name='fk_customer_feedback_installation_job_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_customer_feedback_organization_id'),
    sa.ForeignKeyConstraint(['reviewed_by_id'], ['users.id'], name='fk_customer_feedback_reviewed_by_id'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_customer_feedback_completion', 'customer_feedback', ['completion_record_id'], unique=False)
    op.create_index('idx_customer_feedback_customer', 'customer_feedback', ['customer_id'], unique=False)
    op.create_index('idx_customer_feedback_org_job', 'customer_feedback', ['organization_id', 'installation_job_id'], unique=False)
    op.create_index('idx_customer_feedback_rating', 'customer_feedback', ['overall_rating'], unique=False)
    op.create_index('idx_customer_feedback_status', 'customer_feedback', ['feedback_status'], unique=False)
    op.create_index('idx_customer_feedback_submitted', 'customer_feedback', ['submitted_at'], unique=False)
    op.create_index(op.f('ix_customer_feedback_id'), 'customer_feedback', ['id'], unique=False)
    op.create_index(op.f('ix_customer_feedback_organization_id'), 'customer_feedback', ['organization_id'], unique=False)
    op.create_table('purchase_return_items',
    sa.Column('purchase_return_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('quantity', sa.Float(), nullable=False),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('unit_price', sa.Float(), nullable=False),
    sa.Column('discount_percentage', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('taxable_amount', sa.Float(), nullable=False),
    sa.Column('gst_rate', sa.Float(), nullable=True),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], ),
    sa.ForeignKeyConstraint(['purchase_return_id'], ['purchase_returns.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_purchase_return_items_id'), 'purchase_return_items', ['id'], unique=False)
    op.create_table('sales_return_items',
    sa.Column('sales_return_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('quantity', sa.Float(), nullable=False),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('unit_price', sa.Float(), nullable=False),
    sa.Column('discount_percentage', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('taxable_amount', sa.Float(), nullable=False),
    sa.Column('gst_rate', sa.Float(), nullable=True),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], ),
    sa.ForeignKeyConstraint(['sales_return_id'], ['sales_returns.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_sales_return_items_id'), 'sales_return_items', ['id'], unique=False)
    op.create_table('service_analytics_events',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('event_type', sa.String(), nullable=False),
    sa.Column('event_category', sa.String(), nullable=False),
    sa.Column('installation_job_id', sa.Integer(), nullable=True),
    sa.Column('technician_id', sa.Integer(), nullable=True),
    sa.Column('customer_id', sa.Integer(), nullable=True),
    sa.Column('completion_record_id', sa.Integer(), nullable=True),
    sa.Column('feedback_id', sa.Integer(), nullable=True),
    sa.Column('event_data', sa.JSON(), nullable=True),
    sa.Column('metric_value', sa.Float(), nullable=True),
    sa.Column('event_timestamp', sa.DateTime(timezone=True), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.ForeignKeyConstraint(['completion_record_id'], ['completion_records.id'], name='fk_service_analytics_event_completion_record_id'),
    sa.ForeignKeyConstraint(['customer_id'], ['customers.id'], name='fk_service_analytics_event_customer_id'),
    sa.ForeignKeyConstraint(['feedback_id'], ['customer_feedback.id'], name='fk_service_analytics_event_feedback_id'),
    sa.ForeignKeyConstraint(['installation_job_id'], ['installation_jobs.id'], name='fk_service_analytics_event_installation_job_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_service_analytics_event_organization_id'),
    sa.ForeignKeyConstraint(['technician_id'], ['users.id'], name='fk_service_analytics_event_technician_id'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_service_analytics_event_customer', 'service_analytics_events', ['customer_id'], unique=False)
    op.create_index('idx_service_analytics_event_job', 'service_analytics_events', ['installation_job_id'], unique=False)
    op.create_index('idx_service_analytics_event_org_category', 'service_analytics_events', ['organization_id', 'event_category'], unique=False)
    op.create_index('idx_service_analytics_event_org_timestamp', 'service_analytics_events', ['organization_id', 'event_timestamp'], unique=False)
    op.create_index('idx_service_analytics_event_org_type', 'service_analytics_events', ['organization_id', 'event_type'], unique=False)
    op.create_index('idx_service_analytics_event_technician', 'service_analytics_events', ['technician_id'], unique=False)
    op.create_index(op.f('ix_service_analytics_events_event_category'), 'service_analytics_events', ['event_category'], unique=False)
    op.create_index(op.f('ix_service_analytics_events_event_timestamp'), 'service_analytics_events', ['event_timestamp'], unique=False)
    op.create_index(op.f('ix_service_analytics_events_event_type'), 'service_analytics_events', ['event_type'], unique=False)
    op.create_index(op.f('ix_service_analytics_events_id'), 'service_analytics_events', ['id'], unique=False)
    op.create_index(op.f('ix_service_analytics_events_organization_id'), 'service_analytics_events', ['organization_id'], unique=False)
    op.create_table('service_closures',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('installation_job_id', sa.Integer(), nullable=False),
    sa.Column('completion_record_id', sa.Integer(), nullable=True),
    sa.Column('customer_feedback_id', sa.Integer(), nullable=True),
    sa.Column('closure_status', sa.String(), nullable=False),
    sa.Column('closure_reason', sa.String(), nullable=True),
    sa.Column('closure_notes', sa.Text(), nullable=True),
    sa.Column('requires_manager_approval', sa.Boolean(), nullable=False),
    sa.Column('approved_by_id', sa.Integer(), nullable=True),
    sa.Column('approved_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('approval_notes', sa.Text(), nullable=True),
    sa.Column('closed_by_id', sa.Integer(), nullable=True),
    sa.Column('closed_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('final_closure_notes', sa.Text(), nullable=True),
    sa.Column('feedback_received', sa.Boolean(), nullable=False),
    sa.Column('minimum_rating_met', sa.Boolean(), nullable=False),
    sa.Column('escalation_required', sa.Boolean(), nullable=False),
    sa.Column('escalation_reason', sa.Text(), nullable=True),
    sa.Column('reopened_count', sa.Integer(), nullable=False),
    sa.Column('last_reopened_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('last_reopened_by_id', sa.Integer(), nullable=True),
    sa.Column('reopening_reason', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['approved_by_id'], ['users.id'], name='fk_service_closure_approved_by_id'),
    sa.ForeignKeyConstraint(['closed_by_id'], ['users.id'], name='fk_service_closure_closed_by_id'),
    sa.ForeignKeyConstraint(['completion_record_id'], ['completion_records.id'], name='fk_service_closure_completion_record_id'),
    sa.ForeignKeyConstraint(['customer_feedback_id'], ['customer_feedback.id'], name='fk_service_closure_customer_feedback_id'),
    sa.ForeignKeyConstraint(['installation_job_id'], ['installation_jobs.id'], name='fk_service_closure_installation_job_id'),
    sa.ForeignKeyConstraint(['last_reopened_by_id'], ['users.id'], name='fk_service_closure_last_reopened_by_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_service_closure_organization_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('installation_job_id')
    )
    op.create_index('idx_service_closure_approval_required', 'service_closures', ['requires_manager_approval'], unique=False)
    op.create_index('idx_service_closure_approved_by', 'service_closures', ['approved_by_id'], unique=False)
    op.create_index('idx_service_closure_closed_by', 'service_closures', ['closed_by_id'], unique=False)
    op.create_index('idx_service_closure_completion', 'service_closures', ['completion_record_id'], unique=False)
    op.create_index('idx_service_closure_escalation', 'service_closures', ['escalation_required'], unique=False)
    op.create_index('idx_service_closure_feedback', 'service_closures', ['customer_feedback_id'], unique=False)
    op.create_index('idx_service_closure_feedback_received', 'service_closures', ['feedback_received'], unique=False)
    op.create_index('idx_service_closure_org_job', 'service_closures', ['organization_id', 'installation_job_id'], unique=False)
    op.create_index('idx_service_closure_status', 'service_closures', ['closure_status'], unique=False)
    op.create_index(op.f('ix_service_closures_id'), 'service_closures', ['id'], unique=False)
    op.create_index(op.f('ix_service_closures_organization_id'), 'service_closures', ['organization_id'], unique=False)
    # ### end Alembic commands ###


def downgrade() -> None:
    # ### commands auto generated by Alembic - please adjust! ###
    op.drop_index(op.f('ix_service_closures_organization_id'), table_name='service_closures')
    op.drop_index(op.f('ix_service_closures_id'), table_name='service_closures')
    op.drop_index('idx_service_closure_status', table_name='service_closures')
    op.drop_index('idx_service_closure_org_job', table_name='service_closures')
    op.drop_index('idx_service_closure_feedback_received', table_name='service_closures')
    op.drop_index('idx_service_closure_feedback', table_name='service_closures')
    op.drop_index('idx_service_closure_escalation', table_name='service_closures')
    op.drop_index('idx_service_closure_completion', table_name='service_closures')
    op.drop_index('idx_service_closure_closed_by', table_name='service_closures')
    op.drop_index('idx_service_closure_approved_by', table_name='service_closures')
    op.drop_index('idx_service_closure_approval_required', table_name='service_closures')
    op.drop_table('service_closures')
    op.drop_index(op.f('ix_service_analytics_events_organization_id'), table_name='service_analytics_events')
    op.drop_index(op.f('ix_service_analytics_events_id'), table_name='service_analytics_events')
    op.drop_index(op.f('ix_service_analytics_events_event_type'), table_name='service_analytics_events')
    op.drop_index(op.f('ix_service_analytics_events_event_timestamp'), table_name='service_analytics_events')
    op.drop_index(op.f('ix_service_analytics_events_event_category'), table_name='service_analytics_events')
    op.drop_index('idx_service_analytics_event_technician', table_name='service_analytics_events')
    op.drop_index('idx_service_analytics_event_org_type', table_name='service_analytics_events')
    op.drop_index('idx_service_analytics_event_org_timestamp', table_name='service_analytics_events')
    op.drop_index('idx_service_analytics_event_org_category', table_name='service_analytics_events')
    op.drop_index('idx_service_analytics_event_job', table_name='service_analytics_events')
    op.drop_index('idx_service_analytics_event_customer', table_name='service_analytics_events')
    op.drop_table('service_analytics_events')
    op.drop_index(op.f('ix_sales_return_items_id'), table_name='sales_return_items')
    op.drop_table('sales_return_items')
    op.drop_index(op.f('ix_purchase_return_items_id'), table_name='purchase_return_items')
    op.drop_table('purchase_return_items')
    op.drop_index(op.f('ix_customer_feedback_organization_id'), table_name='customer_feedback')
    op.drop_index(op.f('ix_customer_feedback_id'), table_name='customer_feedback')
    op.drop_index('idx_customer_feedback_submitted', table_name='customer_feedback')
    op.drop_index('idx_customer_feedback_status', table_name='customer_feedback')
    op.drop_index('idx_customer_feedback_rating', table_name='customer_feedback')
    op.drop_index('idx_customer_feedback_org_job', table_name='customer_feedback')
    op.drop_index('idx_customer_feedback_customer', table_name='customer_feedback')
    op.drop_index('idx_customer_feedback_completion', table_name='customer_feedback')
    op.drop_table('customer_feedback')
    op.drop_index(op.f('ix_stock_journal_entries_organization_id'), table_name='stock_journal_entries')
    op.drop_index(op.f('ix_stock_journal_entries_id'), table_name='stock_journal_entries')
    op.drop_table('stock_journal_entries')
    op.drop_index(op.f('ix_sales_voucher_items_id'), table_name='sales_voucher_items')
    op.drop_table('sales_voucher_items')
    op.drop_index(op.f('ix_sales_returns_voucher_number'), table_name='sales_returns')
    op.drop_index(op.f('ix_sales_returns_organization_id'), table_name='sales_returns')
    op.drop_index(op.f('ix_sales_returns_id'), table_name='sales_returns')
    op.drop_index('idx_sr_org_date', table_name='sales_returns')
    op.drop_index('idx_sr_org_customer', table_name='sales_returns')
    op.drop_table('sales_returns')
    op.drop_index(op.f('ix_purchase_voucher_items_id'), table_name='purchase_voucher_items')
    op.drop_table('purchase_voucher_items')
    op.drop_index(op.f('ix_purchase_returns_voucher_number'), table_name='purchase_returns')
    op.drop_index(op.f('ix_purchase_returns_organization_id'), table_name='purchase_returns')
    op.drop_index(op.f('ix_purchase_returns_id'), table_name='purchase_returns')
    op.drop_index('idx_pr_org_vendor', table_name='purchase_returns')
    op.drop_index('idx_pr_org_date', table_name='purchase_returns')
    op.drop_table('purchase_returns')
    op.drop_index(op.f('ix_production_entry_items_id'), table_name='production_entry_items')
    op.drop_table('production_entry_items')
    op.drop_index(op.f('ix_material_receipt_items_id'), table_name='material_receipt_items')
    op.drop_table('material_receipt_items')
    op.drop_index(op.f('ix_material_issue_items_id'), table_name='material_issue_items')
    op.drop_table('material_issue_items')
    op.drop_index(op.f('ix_manufacturing_journal_materials_organization_id'), table_name='manufacturing_journal_materials')
    op.drop_index(op.f('ix_manufacturing_journal_materials_id'), table_name='manufacturing_journal_materials')
    op.drop_table('manufacturing_journal_materials')
    op.drop_index(op.f('ix_manufacturing_journal_finished_products_organization_id'), table_name='manufacturing_journal_finished_products')
    op.drop_index(op.f('ix_manufacturing_journal_finished_products_id'), table_name='manufacturing_journal_finished_products')
    op.drop_table('manufacturing_journal_finished_products')
    op.drop_index(op.f('ix_manufacturing_journal_byproducts_organization_id'), table_name='manufacturing_journal_byproducts')
    op.drop_index(op.f('ix_manufacturing_journal_byproducts_id'), table_name='manufacturing_journal_byproducts')
    op.drop_table('manufacturing_journal_byproducts')
    op.drop_index(op.f('ix_job_parts_organization_id'), table_name='job_parts')
    op.drop_index(op.f('ix_job_parts_id'), table_name='job_parts')
    op.drop_index('idx_job_parts_used_at', table_name='job_parts')
    op.drop_index('idx_job_parts_org_status', table_name='job_parts')
    op.drop_index('idx_job_parts_org_product', table_name='job_parts')
    op.drop_table('job_parts')
    op.drop_index(op.f('ix_job_card_supplied_materials_organization_id'), table_name='job_card_supplied_materials')
    op.drop_index(op.f('ix_job_card_supplied_materials_id'), table_name='job_card_supplied_materials')
    op.drop_table('job_card_supplied_materials')
    op.drop_index(op.f('ix_job_card_received_outputs_organization_id'), table_name='job_card_received_outputs')
    op.drop_index(op.f('ix_job_card_received_outputs_id'), table_name='job_card_received_outputs')
    op.drop_table('job_card_received_outputs')
    op.drop_index(op.f('ix_installation_tasks_task_number'), table_name='installation_tasks')
    op.drop_index(op.f('ix_installation_tasks_organization_id'), table_name='installation_tasks')
    op.drop_index(op.f('ix_installation_tasks_id'), table_name='installation_tasks')
    op.drop_index('idx_installation_task_technician', table_name='installation_tasks')
    op.drop_index('idx_installation_task_status', table_name='installation_tasks')
    op.drop_index('idx_installation_task_sequence', table_name='installation_tasks')
    op.drop_index('idx_installation_task_org_job', table_name='installation_tasks')
    op.drop_index('idx_installation_task_created_at', table_name='installation_tasks')
    op.drop_table('installation_tasks')
    op.drop_index(op.f('ix_completion_records_organization_id'), table_name='completion_records')
    op.drop_index(op.f('ix_completion_records_id'), table_name='completion_records')
    op.drop_index('idx_completion_record_status', table_name='completion_records')
    op.drop_index('idx_completion_record_org_job', table_name='completion_records')
    op.drop_index('idx_completion_record_follow_up', table_name='completion_records')
    op.drop_index('idx_completion_record_feedback_sent', table_name='completion_records')
    op.drop_index('idx_completion_record_completion_date', table_name='completion_records')
    op.drop_index('idx_completion_record_completed_by', table_name='completion_records')
    op.drop_table('completion_records')
    op.drop_index(op.f('ix_stock_journals_voucher_number'), table_name='stock_journals')
    op.drop_index(op.f('ix_stock_journals_organization_id'), table_name='stock_journals')
    op.drop_index(op.f('ix_stock_journals_id'), table_name='stock_journals')
    op.drop_index('idx_sj_org_type', table_name='stock_journals')
    op.drop_index('idx_sj_org_to_loc', table_name='stock_journals')
    op.drop_index('idx_sj_org_mo', table_name='stock_journals')
    op.drop_index('idx_sj_org_from_loc', table_name='stock_journals')
    op.drop_index('idx_sj_org_date', table_name='stock_journals')
    op.drop_table('stock_journals')
    op.drop_index(op.f('ix_sales_vouchers_voucher_type'), table_name='sales_vouchers')
    op.drop_index(op.f('ix_sales_vouchers_voucher_number'), table_name='sales_vouchers')
    op.drop_index(op.f('ix_sales_vouchers_organization_id'), table_name='sales_vouchers')
    op.drop_index(op.f('ix_sales_vouchers_id'), table_name='sales_vouchers')
    op.drop_index('idx_sv_org_so', table_name='sales_vouchers')
    op.drop_index('idx_sv_org_date', table_name='sales_vouchers')
    op.drop_index('idx_sv_org_customer', table_name='sales_vouchers')
    op.drop_index('idx_sv_org_challan', table_name='sales_vouchers')
    op.drop_table('sales_vouchers')
    op.drop_index(op.f('ix_purchase_vouchers_voucher_number'), table_name='purchase_vouchers')
    op.drop_index(op.f('ix_purchase_vouchers_organization_id'), table_name='purchase_vouchers')
    op.drop_index(op.f('ix_purchase_vouchers_id'), table_name='purchase_vouchers')
    op.drop_index('idx_pv_org_vendor', table_name='purchase_vouchers')
    op.drop_index('idx_pv_org_po', table_name='purchase_vouchers')
    op.drop_index('idx_pv_org_grn', table_name='purchase_vouchers')
    op.drop_index('idx_pv_org_date', table_name='purchase_vouchers')
    op.drop_table('purchase_vouchers')
    op.drop_index(op.f('ix_production_entries_voucher_number'), table_name='production_entries')
    op.drop_index(op.f('ix_production_entries_organization_id'), table_name='production_entries')
    op.drop_index(op.f('ix_production_entries_id'), table_name='production_entries')
    op.drop_index('idx_pe_org_mo', table_name='production_entries')
    op.drop_index('idx_pe_org_date', table_name='production_entries')
    op.drop_table('production_entries')
    op.drop_index(op.f('ix_material_receipt_vouchers_voucher_number'), table_name='material_receipt_vouchers')
    op.drop_index(op.f('ix_material_receipt_vouchers_organization_id'), table_name='material_receipt_vouchers')
    op.drop_index(op.f('ix_material_receipt_vouchers_id'), table_name='material_receipt_vouchers')
    op.drop_index('idx_mrv_org_source', table_name='material_receipt_vouchers')
    op.drop_index('idx_mrv_org_mo', table_name='material_receipt_vouchers')
    op.drop_index('idx_mrv_org_date', table_name='material_receipt_vouchers')
    op.drop_table('material_receipt_vouchers')
    op.drop_index(op.f('ix_material_issues_voucher_number'), table_name='material_issues')
    op.drop_index(op.f('ix_material_issues_organization_id'), table_name='material_issues')
    op.drop_index(op.f('ix_material_issues_id'), table_name='material_issues')
    op.drop_index('idx_mi_org_mo', table_name='material_issues')
    op.drop_index('idx_mi_org_dept', table_name='material_issues')
    op.drop_index('idx_mi_org_date', table_name='material_issues')
    op.drop_table('material_issues')
    op.drop_index(op.f('ix_manufacturing_journal_vouchers_voucher_number'), table_name='manufacturing_journal_vouchers')
    op.drop_index(op.f('ix_manufacturing_journal_vouchers_organization_id'), table_name='manufacturing_journal_vouchers')
    op.drop_index(op.f('ix_manufacturing_journal_vouchers_id'), table_name='manufacturing_journal_vouchers')
    op.drop_index('idx_mjv_org_mo', table_name='manufacturing_journal_vouchers')
    op.drop_index('idx_mjv_org_date', table_name='manufacturing_journal_vouchers')
    op.drop_index('idx_mjv_org_bom', table_name='manufacturing_journal_vouchers')
    op.drop_table('manufacturing_journal_vouchers')
    op.drop_index(op.f('ix_job_card_vouchers_voucher_number'), table_name='job_card_vouchers')
    op.drop_index(op.f('ix_job_card_vouchers_organization_id'), table_name='job_card_vouchers')
    op.drop_index(op.f('ix_job_card_vouchers_id'), table_name='job_card_vouchers')
    op.drop_index('idx_jcv_org_vendor', table_name='job_card_vouchers')
    op.drop_index('idx_jcv_org_status', table_name='job_card_vouchers')
    op.drop_index('idx_jcv_org_mo', table_name='job_card_vouchers')
    op.drop_index('idx_jcv_org_date', table_name='job_card_vouchers')
    op.drop_table('job_card_vouchers')
    op.drop_index(op.f('ix_installation_jobs_organization_id'), table_name='installation_jobs')
    op.drop_index(op.f('ix_installation_jobs_job_number'), table_name='installation_jobs')
    op.drop_index(op.f('ix_installation_jobs_id'), table_name='installation_jobs')
    op.drop_index('idx_installation_job_scheduled_date', table_name='installation_jobs')
    op.drop_index('idx_installation_job_priority', table_name='installation_jobs')
    op.drop_index('idx_installation_job_org_technician', table_name='installation_jobs')
    op.drop_index('idx_installation_job_org_status', table_name='installation_jobs')
    op.drop_index('idx_installation_job_org_customer', table_name='installation_jobs')
    op.drop_index('idx_installation_job_dispatch_order', table_name='installation_jobs')
    op.drop_index('idx_installation_job_created_at', table_name='installation_jobs')
    op.drop_table('installation_jobs')
    op.drop_index(op.f('ix_goods_receipt_note_items_id'), table_name='goods_receipt_note_items')
    op.drop_table('goods_receipt_note_items')
    op.drop_index(op.f('ix_dispatch_items_id'), table_name='dispatch_items')
    op.drop_index('idx_dispatch_item_status', table_name='dispatch_items')
    op.drop_index('idx_dispatch_item_product', table_name='dispatch_items')
    op.drop_index('idx_dispatch_item_order', table_name='dispatch_items')
    op.drop_table('dispatch_items')
    op.drop_index(op.f('ix_delivery_challan_items_id'), table_name='delivery_challan_items')
    op.drop_table('delivery_challan_items')
    op.drop_index(op.f('ix_ticket_history_organization_id'), table_name='ticket_history')
    op.drop_index(op.f('ix_ticket_history_id'), table_name='ticket_history')
    op.drop_index('idx_ticket_history_user', table_name='ticket_history')
    op.drop_index('idx_ticket_history_org_ticket', table_name='ticket_history')
    op.drop_index('idx_ticket_history_created_at', table_name='ticket_history')
    op.drop_index('idx_ticket_history_action', table_name='ticket_history')
    op.drop_table('ticket_history')
    op.drop_index(op.f('ix_ticket_attachments_organization_id'), table_name='ticket_attachments')
    op.drop_index(op.f('ix_ticket_attachments_id'), table_name='ticket_attachments')
    op.drop_index('idx_ticket_attachment_uploaded_by', table_name='ticket_attachments')
    op.drop_index('idx_ticket_attachment_type', table_name='ticket_attachments')
    op.drop_index('idx_ticket_attachment_org_ticket', table_name='ticket_attachments')
    op.drop_table('ticket_attachments')
    op.drop_index(op.f('ix_sla_tracking_organization_id'), table_name='sla_tracking')
    op.drop_index(op.f('ix_sla_tracking_id'), table_name='sla_tracking')
    op.drop_index('idx_sla_tracking_response_status', table_name='sla_tracking')
    op.drop_index('idx_sla_tracking_response_deadline', table_name='sla_tracking')
    op.drop_index('idx_sla_tracking_resolution_status', table_name='sla_tracking')
    op.drop_index('idx_sla_tracking_resolution_deadline', table_name='sla_tracking')
    op.drop_index('idx_sla_tracking_policy', table_name='sla_tracking')
    op.drop_index('idx_sla_tracking_org_ticket', table_name='sla_tracking')
    op.drop_index('idx_sla_tracking_escalation', table_name='sla_tracking')
    op.drop_table('sla_tracking')
    op.drop_index(op.f('ix_sales_order_items_id'), table_name='sales_order_items')
    op.drop_table('sales_order_items')
    op.drop_index(op.f('ix_quotation_items_id'), table_name='quotation_items')
    op.drop_table('quotation_items')
    op.drop_index(op.f('ix_purchase_order_items_id'), table_name='purchase_order_items')
    op.drop_table('purchase_order_items')
    op.drop_index(op.f('ix_proforma_invoice_items_id'), table_name='proforma_invoice_items')
    op.drop_table('proforma_invoice_items')
    op.drop_index(op.f('ix_notification_logs_organization_id'), table_name='notification_logs')
    op.drop_index(op.f('ix_notification_logs_id'), table_name='notification_logs')
    op.drop_index('idx_notification_log_sent_at', table_name='notification_logs')
    op.drop_index('idx_notification_log_recipient', table_name='notification_logs')
    op.drop_index('idx_notification_log_org_status', table_name='notification_logs')
    op.drop_index('idx_notification_log_org_channel', table_name='notification_logs')
    op.drop_table('notification_logs')
    op.drop_index(op.f('ix_manufacturing_orders_voucher_number'), table_name='manufacturing_orders')
    op.drop_index(op.f('ix_manufacturing_orders_organization_id'), table_name='manufacturing_orders')
    op.drop_index(op.f('ix_manufacturing_orders_id'), table_name='manufacturing_orders')
    op.drop_index('idx_mo_org_status', table_name='manufacturing_orders')
    op.drop_index('idx_mo_org_date', table_name='manufacturing_orders')
    op.drop_index('idx_mo_org_bom', table_name='manufacturing_orders')
    op.drop_table('manufacturing_orders')
    op.drop_index(op.f('ix_inter_department_voucher_items_id'), table_name='inter_department_voucher_items')
    op.drop_table('inter_department_voucher_items')
    op.drop_index(op.f('ix_goods_receipt_notes_voucher_number'), table_name='goods_receipt_notes')
    op.drop_index(op.f('ix_goods_receipt_notes_organization_id'), table_name='goods_receipt_notes')
    op.drop_index(op.f('ix_goods_receipt_notes_id'), table_name='goods_receipt_notes')
    op.drop_index('idx_grn_org_vendor', table_name='goods_receipt_notes')
    op.drop_index('idx_grn_org_po', table_name='goods_receipt_notes')
    op.drop_index('idx_grn_org_date', table_name='goods_receipt_notes')
    op.drop_table('goods_receipt_notes')
    op.drop_index(op.f('ix_dispatch_orders_organization_id'), table_name='dispatch_orders')
    op.drop_index(op.f('ix_dispatch_orders_order_number'), table_name='dispatch_orders')
    op.drop_index(op.f('ix_dispatch_orders_id'), table_name='dispatch_orders')
    op.drop_index('idx_dispatch_order_org_ticket', table_name='dispatch_orders')
    op.drop_index('idx_dispatch_order_org_status', table_name='dispatch_orders')
    op.drop_index('idx_dispatch_order_org_customer', table_name='dispatch_orders')
    op.drop_index('idx_dispatch_order_dispatch_date', table_name='dispatch_orders')
    op.drop_index('idx_dispatch_order_delivery_date', table_name='dispatch_orders')
    op.drop_index('idx_dispatch_order_created_at', table_name='dispatch_orders')
    op.drop_table('dispatch_orders')
    op.drop_index(op.f('ix_delivery_challans_voucher_number'), table_name='delivery_challans')
    op.drop_index(op.f('ix_delivery_challans_organization_id'), table_name='delivery_challans')
    op.drop_index(op.f('ix_delivery_challans_id'), table_name='delivery_challans')
    op.drop_index('idx_dc_org_so', table_name='delivery_challans')
    op.drop_index('idx_dc_org_date', table_name='delivery_challans')
    op.drop_index('idx_dc_org_customer', table_name='delivery_challans')
    op.drop_table('delivery_challans')
    op.drop_index(op.f('ix_debit_note_items_id'), table_name='debit_note_items')
    op.drop_table('debit_note_items')
    op.drop_index(op.f('ix_credit_note_items_id'), table_name='credit_note_items')
    op.drop_table('credit_note_items')
    op.drop_index(op.f('ix_bom_components_organization_id'), table_name='bom_components')
    op.drop_index(op.f('ix_bom_components_id'), table_name='bom_components')
    op.drop_index('idx_bom_comp_org_item', table_name='bom_components')
    op.drop_index('idx_bom_comp_org_bom', table_name='bom_components')
    op.drop_table('bom_components')
    op.drop_index(op.f('ix_vendor_files_organization_id'), table_name='vendor_files')
    op.drop_index(op.f('ix_vendor_files_id'), table_name='vendor_files')
    op.drop_index('idx_vendor_file_org_vendor', table_name='vendor_files')
    op.drop_table('vendor_files')
    op.drop_index(op.f('ix_user_service_roles_organization_id'), table_name='user_service_roles')
    op.drop_index(op.f('ix_user_service_roles_id'), table_name='user_service_roles')
    op.drop_index('idx_user_service_role_user', table_name='user_service_roles')
    op.drop_index('idx_user_service_role_role', table_name='user_service_roles')
    op.drop_index('idx_user_service_role_active', table_name='user_service_roles')
    op.drop_table('user_service_roles')
    op.drop_index(op.f('ix_tickets_ticket_number'), table_name='tickets')
    op.drop_index(op.f('ix_tickets_organization_id'), table_name='tickets')
    op.drop_index(op.f('ix_tickets_id'), table_name='tickets')
    op.drop_index('idx_ticket_org_type', table_name='tickets')
    op.drop_index('idx_ticket_org_status', table_name='tickets')
    op.drop_index('idx_ticket_org_priority', table_name='tickets')
    op.drop_index('idx_ticket_org_customer', table_name='tickets')
    op.drop_index('idx_ticket_org_assigned', table_name='tickets')
    op.drop_index('idx_ticket_due_date', table_name='tickets')
    op.drop_index('idx_ticket_created_at', table_name='tickets')
    op.drop_table('tickets')
    op.drop_index(op.f('ix_stock_organization_id'), table_name='stock')
    op.drop_index(op.f('ix_stock_id'), table_name='stock')
    op.drop_index('idx_stock_org_product', table_name='stock')
    op.drop_index('idx_stock_org_location', table_name='stock')
    op.drop_table('stock')
    op.drop_index(op.f('ix_sla_policies_organization_id'), table_name='sla_policies')
    op.drop_index(op.f('ix_sla_policies_id'), table_name='sla_policies')
    op.drop_index('idx_sla_policy_ticket_type', table_name='sla_policies')
    op.drop_index('idx_sla_policy_priority', table_name='sla_policies')
    op.drop_index('idx_sla_policy_org_active', table_name='sla_policies')
    op.drop_index('idx_sla_policy_default', table_name='sla_policies')
    op.drop_table('sla_policies')
    op.drop_index(op.f('ix_service_role_permissions_organization_id'), table_name='service_role_permissions')
    op.drop_index(op.f('ix_service_role_permissions_id'), table_name='service_role_permissions')
    op.drop_index('idx_service_role_permission_role', table_name='service_role_permissions')
    op.drop_index('idx_service_role_permission_permission', table_name='service_role_permissions')
    op.drop_table('service_role_permissions')
    op.drop_index(op.f('ix_sales_orders_voucher_number'), table_name='sales_orders')
    op.drop_index(op.f('ix_sales_orders_organization_id'), table_name='sales_orders')
    op.drop_index(op.f('ix_sales_orders_id'), table_name='sales_orders')
    op.drop_index('idx_so_org_status', table_name='sales_orders')
    op.drop_index('idx_so_org_date', table_name='sales_orders')
    op.drop_index('idx_so_org_customer', table_name='sales_orders')
    op.drop_table('sales_orders')
    op.drop_index(op.f('ix_report_configurations_organization_id'), table_name='report_configurations')
    op.drop_index(op.f('ix_report_configurations_id'), table_name='report_configurations')
    op.drop_index('idx_report_configuration_schedule', table_name='report_configurations')
    op.drop_index('idx_report_configuration_org_active', table_name='report_configurations')
    op.drop_table('report_configurations')
    op.drop_index(op.f('ix_receipt_vouchers_voucher_number'), table_name='receipt_vouchers')
    op.drop_index(op.f('ix_receipt_vouchers_organization_id'), table_name='receipt_vouchers')
    op.drop_index(op.f('ix_receipt_vouchers_id'), table_name='receipt_vouchers')
    op.drop_index('idx_rv_org_date', table_name='receipt_vouchers')
    op.drop_index('idx_rv_org_customer', table_name='receipt_vouchers')
    op.drop_table('receipt_vouchers')
    op.drop_index(op.f('ix_quotations_voucher_number'), table_name='quotations')
    op.drop_index(op.f('ix_quotations_organization_id'), table_name='quotations')
    op.drop_index(op.f('ix_quotations_id'), table_name='quotations')
    op.drop_index('idx_quotation_org_date', table_name='quotations')
    op.drop_index('idx_quotation_org_customer', table_name='quotations')
    op.drop_table('quotations')
    op.drop_index(op.f('ix_purchase_orders_voucher_number'), table_name='purchase_orders')
    op.drop_index(op.f('ix_purchase_orders_organization_id'), table_name='purchase_orders')
    op.drop_index(op.f('ix_purchase_orders_id'), table_name='purchase_orders')
    op.drop_index('idx_po_org_vendor', table_name='purchase_orders')
    op.drop_index('idx_po_org_status', table_name='purchase_orders')
    op.drop_index('idx_po_org_date', table_name='purchase_orders')
    op.drop_table('purchase_orders')
    op.drop_index(op.f('ix_proforma_invoices_voucher_number'), table_name='proforma_invoices')
    op.drop_index(op.f('ix_proforma_invoices_organization_id'), table_name='proforma_invoices')
    op.drop_index(op.f('ix_proforma_invoices_id'), table_name='proforma_invoices')
    op.drop_index('idx_pi_org_date', table_name='proforma_invoices')
    op.drop_index('idx_pi_org_customer', table_name='proforma_invoices')
    op.drop_table('proforma_invoices')
    op.drop_index(op.f('ix_product_files_organization_id'), table_name='product_files')
    op.drop_index(op.f('ix_product_files_id'), table_name='product_files')
    op.drop_index('idx_product_file_org_product', table_name='product_files')
    op.drop_table('product_files')
    op.drop_index(op.f('ix_payment_vouchers_voucher_number'), table_name='payment_vouchers')
    op.drop_index(op.f('ix_payment_vouchers_organization_id'), table_name='payment_vouchers')
    op.drop_index(op.f('ix_payment_vouchers_id'), table_name='payment_vouchers')
    op.drop_index('idx_pv_payment_org_vendor', table_name='payment_vouchers')
    op.drop_index('idx_pv_payment_org_date', table_name='payment_vouchers')
    op.drop_table('payment_vouchers')
    op.drop_index(op.f('ix_notification_templates_organization_id'), table_name='notification_templates')
    op.drop_index(op.f('ix_notification_templates_name'), table_name='notification_templates')
    op.drop_index(op.f('ix_notification_templates_id'), table_name='notification_templates')
    op.drop_index('idx_notification_template_org_type', table_name='notification_templates')
    op.drop_index('idx_notification_template_org_channel', table_name='notification_templates')
    op.drop_table('notification_templates')
    op.drop_index(op.f('ix_journal_vouchers_voucher_number'), table_name='journal_vouchers')
    op.drop_index(op.f('ix_journal_vouchers_organization_id'), table_name='journal_vouchers')
    op.drop_index(op.f('ix_journal_vouchers_id'), table_name='journal_vouchers')
    op.drop_index('idx_journal_org_date', table_name='journal_vouchers')
    op.drop_table('journal_vouchers')
    op.drop_index(op.f('ix_inventory_transactions_organization_id'), table_name='inventory_transactions')
    op.drop_index(op.f('ix_inventory_transactions_id'), table_name='inventory_transactions')
    op.drop_index('idx_inventory_transaction_reference', table_name='inventory_transactions')
    op.drop_index('idx_inventory_transaction_org_type', table_name='inventory_transactions')
    op.drop_index('idx_inventory_transaction_org_product', table_name='inventory_transactions')
    op.drop_index('idx_inventory_transaction_org_date', table_name='inventory_transactions')
    op.drop_index('idx_inventory_transaction_created_at', table_name='inventory_transactions')
    op.drop_table('inventory_transactions')
    op.drop_index(op.f('ix_inventory_alerts_organization_id'), table_name='inventory_alerts')
    op.drop_index(op.f('ix_inventory_alerts_id'), table_name='inventory_alerts')
    op.drop_index('idx_inventory_alert_type', table_name='inventory_alerts')
    op.drop_index('idx_inventory_alert_org_status', table_name='inventory_alerts')
    op.drop_index('idx_inventory_alert_org_product', table_name='inventory_alerts')
    op.drop_index('idx_inventory_alert_org_priority', table_name='inventory_alerts')
    op.drop_index('idx_inventory_alert_created_at', table_name='inventory_alerts')
    op.drop_table('inventory_alerts')
    op.drop_index(op.f('ix_inter_department_vouchers_voucher_number'), table_name='inter_department_vouchers')
    op.drop_index(op.f('ix_inter_department_vouchers_organization_id'), table_name='inter_department_vouchers')
    op.drop_index(op.f('ix_inter_department_vouchers_id'), table_name='inter_department_vouchers')
    op.drop_index('idx_idv_org_to_dept', table_name='inter_department_vouchers')
    op.drop_index('idx_idv_org_from_dept', table_name='inter_department_vouchers')
    op.drop_index('idx_idv_org_date', table_name='inter_department_vouchers')
    op.drop_table('inter_department_vouchers')
    op.drop_index(op.f('ix_debit_notes_voucher_number'), table_name='debit_notes')
    op.drop_index(op.f('ix_debit_notes_organization_id'), table_name='debit_notes')
    op.drop_index(op.f('ix_debit_notes_id'), table_name='debit_notes')
    op.drop_index('idx_dn_org_vendor', table_name='debit_notes')
    op.drop_index('idx_dn_org_date', table_name='debit_notes')
    op.drop_index('idx_dn_org_customer', table_name='debit_notes')
    op.drop_table('debit_notes')
    op.drop_index(op.f('ix_customer_segments_organization_id'), table_name='customer_segments')
    op.drop_index(op.f('ix_customer_segments_id'), table_name='customer_segments')
    op.drop_index('idx_customer_segment_org_customer', table_name='customer_segments')
    op.drop_index('idx_customer_segment_name_active', table_name='customer_segments')
    op.drop_index('idx_customer_segment_assigned_date', table_name='customer_segments')
    op.drop_table('customer_segments')
    op.drop_index(op.f('ix_customer_interactions_organization_id'), table_name='customer_interactions')
    op.drop_index(op.f('ix_customer_interactions_id'), table_name='customer_interactions')
    op.drop_index('idx_customer_interaction_type_status', table_name='customer_interactions')
    op.drop_index('idx_customer_interaction_org_customer', table_name='customer_interactions')
    op.drop_index('idx_customer_interaction_date', table_name='customer_interactions')
    op.drop_table('customer_interactions')
    op.drop_index(op.f('ix_customer_files_organization_id'), table_name='customer_files')
    op.drop_index(op.f('ix_customer_files_id'), table_name='customer_files')
    op.drop_index('idx_customer_file_org_customer', table_name='customer_files')
    op.drop_table('customer_files')
    op.drop_index(op.f('ix_credit_notes_voucher_number'), table_name='credit_notes')
    op.drop_index(op.f('ix_credit_notes_organization_id'), table_name='credit_notes')
    op.drop_index(op.f('ix_credit_notes_id'), table_name='credit_notes')
    op.drop_index('idx_cn_org_vendor', table_name='credit_notes')
    op.drop_index('idx_cn_org_date', table_name='credit_notes')
    op.drop_index('idx_cn_org_customer', table_name='credit_notes')
    op.drop_table('credit_notes')
    op.drop_index(op.f('ix_contra_vouchers_voucher_number'), table_name='contra_vouchers')
    op.drop_index(op.f('ix_contra_vouchers_organization_id'), table_name='contra_vouchers')
    op.drop_index(op.f('ix_contra_vouchers_id'), table_name='contra_vouchers')
    op.drop_index('idx_contra_org_to_account', table_name='contra_vouchers')
    op.drop_index('idx_contra_org_from_account', table_name='contra_vouchers')
    op.drop_index('idx_contra_org_date', table_name='contra_vouchers')
    op.drop_table('contra_vouchers')
    op.drop_index(op.f('ix_bill_of_materials_organization_id'), table_name='bill_of_materials')
    op.drop_index(op.f('ix_bill_of_materials_id'), table_name='bill_of_materials')
    op.drop_index('idx_bom_org_output', table_name='bill_of_materials')
    op.drop_index('idx_bom_org_created', table_name='bill_of_materials')
    op.drop_index('idx_bom_org_active', table_name='bill_of_materials')
    op.drop_table('bill_of_materials')
    op.drop_index(op.f('ix_audit_logs_organization_id'), table_name='audit_logs')
    op.drop_index(op.f('ix_audit_logs_id'), table_name='audit_logs')
    op.drop_index('idx_audit_org_timestamp', table_name='audit_logs')
    op.drop_index('idx_audit_org_table_action', table_name='audit_logs')
    op.drop_table('audit_logs')
    op.drop_index(op.f('ix_analytics_summaries_summary_type'), table_name='analytics_summaries')
    op.drop_index(op.f('ix_analytics_summaries_summary_date'), table_name='analytics_summaries')
    op.drop_index(op.f('ix_analytics_summaries_organization_id'), table_name='analytics_summaries')
    op.drop_index(op.f('ix_analytics_summaries_id'), table_name='analytics_summaries')
    op.drop_index('idx_analytics_summary_technician', table_name='analytics_summaries')
    op.drop_index('idx_analytics_summary_org_type_date', table_name='analytics_summaries')
    op.drop_index('idx_analytics_summary_customer', table_name='analytics_summaries')
    op.drop_table('analytics_summaries')
    op.drop_index(op.f('ix_vendors_organization_id'), table_name='vendors')
    op.drop_index(op.f('ix_vendors_name'), table_name='vendors')
    op.drop_index(op.f('ix_vendors_id'), table_name='vendors')
    op.drop_index('idx_vendor_org_name', table_name='vendors')
    op.drop_index('idx_vendor_org_active', table_name='vendors')
    op.drop_table('vendors')
    op.drop_index(op.f('ix_users_supabase_uuid'), table_name='users')
    op.drop_index(op.f('ix_users_organization_id'), table_name='users')
    op.drop_index(op.f('ix_users_id'), table_name='users')
    op.drop_index(op.f('ix_users_email'), table_name='users')
    op.drop_index('idx_user_org_username', table_name='users')
    op.drop_index('idx_user_org_email', table_name='users')
    op.drop_index('idx_user_org_active', table_name='users')
    op.drop_table('users')
    op.drop_index(op.f('ix_service_roles_organization_id'), table_name='service_roles')
    op.drop_index(op.f('ix_service_roles_id'), table_name='service_roles')
    op.drop_index('idx_service_role_org_active', table_name='service_roles')
    op.drop_table('service_roles')
    op.drop_index(op.f('ix_products_organization_id'), table_name='products')
    op.drop_index(op.f('ix_products_name'), table_name='products')
    op.drop_index(op.f('ix_products_id'), table_name='products')
    op.drop_index('idx_product_org_name', table_name='products')
    op.drop_index('idx_product_org_hsn', table_name='products')
    op.drop_index('idx_product_org_active', table_name='products')
    op.drop_table('products')
    op.drop_index(op.f('ix_payment_terms_organization_id'), table_name='payment_terms')
    op.drop_index(op.f('ix_payment_terms_id'), table_name='payment_terms')
    op.drop_index('idx_payment_term_org_name', table_name='payment_terms')
    op.drop_table('payment_terms')
    op.drop_index(op.f('ix_notification_preferences_organization_id'), table_name='notification_preferences')
    op.drop_index(op.f('ix_notification_preferences_id'), table_name='notification_preferences')
    op.drop_index('idx_notification_pref_org_subject', table_name='notification_preferences')
    op.drop_table('notification_preferences')
    op.drop_index(op.f('ix_email_notifications_organization_id'), table_name='email_notifications')
    op.drop_index(op.f('ix_email_notifications_id'), table_name='email_notifications')
    op.drop_index('idx_email_org_status', table_name='email_notifications')
    op.drop_table('email_notifications')
    op.drop_index(op.f('ix_customers_organization_id'), table_name='customers')
    op.drop_index(op.f('ix_customers_name'), table_name='customers')
    op.drop_index(op.f('ix_customers_id'), table_name='customers')
    op.drop_index('idx_customer_org_name', table_name='customers')
    op.drop_index('idx_customer_org_active', table_name='customers')
    op.drop_table('customers')
    op.drop_index(op.f('ix_companies_organization_id'), table_name='companies')
    op.drop_index(op.f('ix_companies_id'), table_name='companies')
    op.drop_index('idx_company_org_name', table_name='companies')
    op.drop_table('companies')
    op.drop_index(op.f('ix_service_permissions_name'), table_name='service_permissions')
    op.drop_index(op.f('ix_service_permissions_module'), table_name='service_permissions')
    op.drop_index(op.f('ix_service_permissions_id'), table_name='service_permissions')
    op.drop_index(op.f('ix_service_permissions_action'), table_name='service_permissions')
    op.drop_index('idx_service_permission_module_action', table_name='service_permissions')
    op.drop_table('service_permissions')
    op.drop_index(op.f('ix_platform_users_id'), table_name='platform_users')
    op.drop_index(op.f('ix_platform_users_email'), table_name='platform_users')
    op.drop_index('idx_platform_user_email', table_name='platform_users')
    op.drop_index('idx_platform_user_active', table_name='platform_users')
    op.drop_table('platform_users')
    op.drop_index(op.f('ix_otp_verifications_id'), table_name='otp_verifications')
    op.drop_index(op.f('ix_otp_verifications_email'), table_name='otp_verifications')
    op.drop_index('idx_otp_expires', table_name='otp_verifications')
    op.drop_index('idx_otp_email_purpose', table_name='otp_verifications')
    op.drop_table('otp_verifications')
    op.drop_index(op.f('ix_organizations_subdomain'), table_name='organizations')
    op.drop_index(op.f('ix_organizations_org_code'), table_name='organizations')
    op.drop_index(op.f('ix_organizations_name'), table_name='organizations')
    op.drop_index(op.f('ix_organizations_id'), table_name='organizations')
    op.drop_index('idx_org_status_subdomain', table_name='organizations')
    op.drop_table('organizations')
    # ### end Alembic commands ###