"""initial final

Revision ID: 447e4092b5d5
Revises: 
Create Date: 2025-09-19 20:42:49.981037

"""
from alembic import op
import sqlalchemy as sa
from app.models.encrypted_fields import EncryptedPII, EncryptedCustomerData, EncryptedFinancial

# revision identifiers, used by Alembic.
revision = '447e4092b5d5'
down_revision = None
branch_labels = None
depends_on = None


def upgrade() -> None:
    # ### commands auto generated by Alembic - please adjust! ###
    op.create_table('migration_templates',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('name', sa.String(length=200), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('source_type', sa.Enum('TALLY', 'ZOHO', 'CSV', 'JSON', 'EXCEL', 'MANUAL', name='migrationsourcetype'), nullable=False),
    sa.Column('data_type', sa.Enum('LEDGERS', 'VOUCHERS', 'CONTACTS', 'PRODUCTS', 'CUSTOMERS', 'VENDORS', 'STOCK', 'CHART_OF_ACCOUNTS', 'COMPANY_INFO', name='migrationdatatype'), nullable=False),
    sa.Column('field_mappings', sa.JSON(), nullable=False),
    sa.Column('validation_rules', sa.JSON(), nullable=True),
    sa.Column('transformation_rules', sa.JSON(), nullable=True),
    sa.Column('sample_data', sa.JSON(), nullable=True),
    sa.Column('is_system_template', sa.Boolean(), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=True),
    sa.Column('version', sa.String(length=20), nullable=True),
    sa.Column('usage_count', sa.Integer(), nullable=True),
    sa.Column('last_used_at', sa.DateTime(), nullable=True),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_migration_template_active', 'migration_templates', ['is_active'], unique=False)
    op.create_index('idx_migration_template_source_data', 'migration_templates', ['source_type', 'data_type'], unique=False)
    op.create_index(op.f('ix_migration_templates_id'), 'migration_templates', ['id'], unique=False)
    op.create_table('organizations',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('name', sa.String(), nullable=False),
    sa.Column('subdomain', sa.String(), nullable=False),
    sa.Column('status', sa.String(), nullable=False),
    sa.Column('business_type', sa.String(), nullable=True),
    sa.Column('industry', sa.String(), nullable=True),
    sa.Column('website', sa.String(), nullable=True),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('primary_email', sa.String(), nullable=False),
    sa.Column('primary_phone', sa.String(), nullable=False),
    sa.Column('address1', sa.String(), nullable=False),
    sa.Column('address2', sa.String(), nullable=True),
    sa.Column('city', sa.String(), nullable=False),
    sa.Column('state', sa.String(), nullable=False),
    sa.Column('pin_code', sa.String(), nullable=False),
    sa.Column('country', sa.String(), nullable=False),
    sa.Column('state_code', sa.String(), nullable=True),
    sa.Column('gst_number', sa.String(), nullable=True),
    sa.Column('pan_number', sa.String(), nullable=True),
    sa.Column('cin_number', sa.String(), nullable=True),
    sa.Column('plan_type', sa.String(), nullable=False),
    sa.Column('max_users', sa.Integer(), nullable=False),
    sa.Column('max_companies', sa.Integer(), nullable=False),
    sa.Column('storage_limit_gb', sa.Integer(), nullable=False),
    sa.Column('features', sa.JSON(), nullable=True),
    sa.Column('license_type', sa.String(), nullable=False),
    sa.Column('license_issued_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('license_expiry_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('license_duration_months', sa.Integer(), nullable=True),
    sa.Column('timezone', sa.String(), nullable=False),
    sa.Column('currency', sa.String(), nullable=False),
    sa.Column('date_format', sa.String(), nullable=False),
    sa.Column('financial_year_start', sa.String(), nullable=False),
    sa.Column('enabled_modules', sa.JSON(), nullable=True),
    sa.Column('company_details_completed', sa.Boolean(), nullable=False),
    sa.Column('org_code', sa.String(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_org_status_subdomain', 'organizations', ['status', 'subdomain'], unique=False)
    op.create_index(op.f('ix_organizations_id'), 'organizations', ['id'], unique=False)
    op.create_index(op.f('ix_organizations_name'), 'organizations', ['name'], unique=True)
    op.create_index(op.f('ix_organizations_org_code'), 'organizations', ['org_code'], unique=True)
    op.create_index(op.f('ix_organizations_subdomain'), 'organizations', ['subdomain'], unique=True)
    op.create_table('platform_users',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('email', sa.String(), nullable=False),
    sa.Column('hashed_password', sa.String(), nullable=False),
    sa.Column('full_name', sa.String(), nullable=True),
    sa.Column('role', sa.String(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('temp_password_hash', sa.String(), nullable=True),
    sa.Column('temp_password_expires', sa.DateTime(timezone=True), nullable=True),
    sa.Column('force_password_reset', sa.Boolean(), nullable=False),
    sa.Column('failed_login_attempts', sa.Integer(), nullable=False),
    sa.Column('locked_until', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('last_login', sa.DateTime(timezone=True), nullable=True),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_platform_user_active', 'platform_users', ['is_active'], unique=False)
    op.create_index('idx_platform_user_email', 'platform_users', ['email'], unique=False)
    op.create_index(op.f('ix_platform_users_email'), 'platform_users', ['email'], unique=True)
    op.create_index(op.f('ix_platform_users_id'), 'platform_users', ['id'], unique=False)
    op.create_table('service_permissions',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('name', sa.String(), nullable=False),
    sa.Column('display_name', sa.String(), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('module', sa.String(), nullable=False),
    sa.Column('action', sa.String(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_service_permission_module_action', 'service_permissions', ['module', 'action'], unique=False)
    op.create_index(op.f('ix_service_permissions_action'), 'service_permissions', ['action'], unique=False)
    op.create_index(op.f('ix_service_permissions_id'), 'service_permissions', ['id'], unique=False)
    op.create_index(op.f('ix_service_permissions_module'), 'service_permissions', ['module'], unique=False)
    op.create_index(op.f('ix_service_permissions_name'), 'service_permissions', ['name'], unique=True)
    op.create_table('api_endpoints',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('path', sa.String(length=500), nullable=False),
    sa.Column('method', sa.String(length=10), nullable=False),
    sa.Column('name', sa.String(length=255), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('is_public', sa.Boolean(), nullable=True),
    sa.Column('requires_auth', sa.Boolean(), nullable=True),
    sa.Column('is_deprecated', sa.Boolean(), nullable=True),
    sa.Column('rate_limit_requests', sa.Integer(), nullable=True),
    sa.Column('rate_limit_type', sa.Enum('PER_MINUTE', 'PER_HOUR', 'PER_DAY', 'PER_MONTH', name='ratelimittype'), nullable=True),
    sa.Column('version', sa.String(length=20), nullable=True),
    sa.Column('documentation_url', sa.String(length=500), nullable=True),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'path', 'method', name='uq_api_endpoint_org_path_method')
    )
    op.create_index('idx_api_endpoint_org_deprecated', 'api_endpoints', ['organization_id', 'is_deprecated'], unique=False)
    op.create_index('idx_api_endpoint_org_public', 'api_endpoints', ['organization_id', 'is_public'], unique=False)
    op.create_index('idx_api_endpoint_org_version', 'api_endpoints', ['organization_id', 'version'], unique=False)
    op.create_index(op.f('ix_api_endpoints_id'), 'api_endpoints', ['id'], unique=False)
    op.create_index(op.f('ix_api_endpoints_organization_id'), 'api_endpoints', ['organization_id'], unique=False)
    op.create_index(op.f('ix_api_endpoints_path'), 'api_endpoints', ['path'], unique=False)
    op.create_table('chart_of_accounts',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('account_code', sa.String(length=50), nullable=False),
    sa.Column('account_name', sa.String(length=200), nullable=False),
    sa.Column('account_type', sa.Enum('ASSET', 'LIABILITY', 'EQUITY', 'INCOME', 'EXPENSE', 'BANK', 'CASH', name='accounttype'), nullable=False),
    sa.Column('parent_account_id', sa.Integer(), nullable=True),
    sa.Column('level', sa.Integer(), nullable=False),
    sa.Column('is_group', sa.Boolean(), nullable=False),
    sa.Column('opening_balance', sa.Numeric(precision=15, scale=2), nullable=False),
    sa.Column('current_balance', sa.Numeric(precision=15, scale=2), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('can_post', sa.Boolean(), nullable=False),
    sa.Column('is_reconcilable', sa.Boolean(), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.Column('updated_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['platform_users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['parent_account_id'], ['chart_of_accounts.id'], ),
    sa.ForeignKeyConstraint(['updated_by'], ['platform_users.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'account_code', name='uq_org_account_code')
    )
    op.create_index('idx_coa_org_type', 'chart_of_accounts', ['organization_id', 'account_type'], unique=False)
    op.create_index('idx_coa_parent', 'chart_of_accounts', ['parent_account_id'], unique=False)
    op.create_index(op.f('ix_chart_of_accounts_account_code'), 'chart_of_accounts', ['account_code'], unique=False)
    op.create_index(op.f('ix_chart_of_accounts_account_name'), 'chart_of_accounts', ['account_name'], unique=False)
    op.create_index(op.f('ix_chart_of_accounts_account_type'), 'chart_of_accounts', ['account_type'], unique=False)
    op.create_index(op.f('ix_chart_of_accounts_id'), 'chart_of_accounts', ['id'], unique=False)
    op.create_index(op.f('ix_chart_of_accounts_organization_id'), 'chart_of_accounts', ['organization_id'], unique=False)
    op.create_index(op.f('ix_chart_of_accounts_parent_account_id'), 'chart_of_accounts', ['parent_account_id'], unique=False)
    op.create_table('companies',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('name', sa.String(), nullable=False),
    sa.Column('address1', sa.String(), nullable=False),
    sa.Column('address2', sa.String(), nullable=True),
    sa.Column('city', sa.String(), nullable=False),
    sa.Column('state', sa.String(), nullable=False),
    sa.Column('pin_code', sa.String(), nullable=False),
    sa.Column('state_code', sa.String(), nullable=False),
    sa.Column('gst_number', sa.String(), nullable=True),
    sa.Column('pan_number', sa.String(), nullable=True),
    sa.Column('contact_number', sa.String(), nullable=False),
    sa.Column('email', sa.String(), nullable=True),
    sa.Column('business_type', sa.String(), nullable=True),
    sa.Column('industry', sa.String(), nullable=True),
    sa.Column('website', sa.String(), nullable=True),
    sa.Column('logo_path', sa.String(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_company_organization_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'name', name='uq_company_org_name')
    )
    op.create_index('idx_company_org_name', 'companies', ['organization_id', 'name'], unique=False)
    op.create_index(op.f('ix_companies_id'), 'companies', ['id'], unique=False)
    op.create_index(op.f('ix_companies_organization_id'), 'companies', ['organization_id'], unique=False)
    op.create_table('cost_centers',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('cost_center_code', sa.String(length=50), nullable=False),
    sa.Column('cost_center_name', sa.String(length=200), nullable=False),
    sa.Column('parent_cost_center_id', sa.Integer(), nullable=True),
    sa.Column('level', sa.Integer(), nullable=False),
    sa.Column('budget_amount', sa.Numeric(precision=15, scale=2), nullable=False),
    sa.Column('actual_amount', sa.Numeric(precision=15, scale=2), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('department', sa.String(length=100), nullable=True),
    sa.Column('manager_id', sa.Integer(), nullable=True),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['platform_users.id'], ),
    sa.ForeignKeyConstraint(['manager_id'], ['platform_users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['parent_cost_center_id'], ['cost_centers.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'cost_center_code', name='uq_org_cost_center_code')
    )
    op.create_index('idx_cc_org_active', 'cost_centers', ['organization_id', 'is_active'], unique=False)
    op.create_index(op.f('ix_cost_centers_cost_center_code'), 'cost_centers', ['cost_center_code'], unique=False)
    op.create_index(op.f('ix_cost_centers_id'), 'cost_centers', ['id'], unique=False)
    op.create_index(op.f('ix_cost_centers_organization_id'), 'cost_centers', ['organization_id'], unique=False)
    op.create_index(op.f('ix_cost_centers_parent_cost_center_id'), 'cost_centers', ['parent_cost_center_id'], unique=False)
    op.create_table('email_notifications',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('to_email', sa.String(), nullable=False),
    sa.Column('subject', sa.String(), nullable=False),
    sa.Column('body', sa.Text(), nullable=False),
    sa.Column('voucher_type', sa.String(), nullable=True),
    sa.Column('voucher_id', sa.Integer(), nullable=True),
    sa.Column('status', sa.String(), nullable=False),
    sa.Column('sent_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('error_message', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_email_notification_organization_id'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_email_org_status', 'email_notifications', ['organization_id', 'status'], unique=False)
    op.create_index(op.f('ix_email_notifications_id'), 'email_notifications', ['id'], unique=False)
    op.create_index(op.f('ix_email_notifications_organization_id'), 'email_notifications', ['organization_id'], unique=False)
    op.create_table('encrypted_customer_profiles',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('customer_id', sa.String(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('customer_type', sa.String(), nullable=False),
    sa.Column('name_encrypted', EncryptedPII(), nullable=False),
    sa.Column('email_encrypted', EncryptedPII(), nullable=True),
    sa.Column('phone_encrypted', EncryptedPII(), nullable=False),
    sa.Column('address_line1_encrypted', EncryptedCustomerData(), nullable=False),
    sa.Column('address_line2_encrypted', EncryptedCustomerData(), nullable=True),
    sa.Column('city_encrypted', EncryptedCustomerData(), nullable=False),
    sa.Column('state_encrypted', EncryptedCustomerData(), nullable=False),
    sa.Column('zip_code_encrypted', EncryptedCustomerData(), nullable=False),
    sa.Column('payment_terms_encrypted', EncryptedFinancial(), nullable=True),
    sa.Column('credit_limit_encrypted', EncryptedFinancial(), nullable=True),
    sa.Column('tax_id_encrypted', EncryptedFinancial(), nullable=True),
    sa.Column('bank_details_encrypted', EncryptedFinancial(), nullable=True),
    sa.Column('consent_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('data_retention_until', sa.DateTime(timezone=True), nullable=True),
    sa.Column('gdpr_consent', sa.Boolean(), nullable=False),
    sa.Column('marketing_consent', sa.Boolean(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('last_accessed', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_encrypted_customer_profiles_customer_id'), 'encrypted_customer_profiles', ['customer_id'], unique=False)
    op.create_index(op.f('ix_encrypted_customer_profiles_id'), 'encrypted_customer_profiles', ['id'], unique=False)
    op.create_index(op.f('ix_encrypted_customer_profiles_organization_id'), 'encrypted_customer_profiles', ['organization_id'], unique=False)
    op.create_table('financial_kpis',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('kpi_code', sa.String(length=50), nullable=False),
    sa.Column('kpi_name', sa.String(length=200), nullable=False),
    sa.Column('kpi_category', sa.String(length=100), nullable=False),
    sa.Column('kpi_value', sa.Numeric(precision=15, scale=4), nullable=False),
    sa.Column('calculation_method', sa.Text(), nullable=True),
    sa.Column('period_start', sa.Date(), nullable=False),
    sa.Column('period_end', sa.Date(), nullable=False),
    sa.Column('target_value', sa.Numeric(precision=15, scale=4), nullable=True),
    sa.Column('variance_percentage', sa.Numeric(precision=8, scale=2), nullable=True),
    sa.Column('calculated_at', sa.DateTime(), nullable=False),
    sa.Column('calculated_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['calculated_by'], ['platform_users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_kpi_code_period', 'financial_kpis', ['kpi_code', 'period_end'], unique=False)
    op.create_index('idx_kpi_org_category_period', 'financial_kpis', ['organization_id', 'kpi_category', 'period_end'], unique=False)
    op.create_index(op.f('ix_financial_kpis_id'), 'financial_kpis', ['id'], unique=False)
    op.create_index(op.f('ix_financial_kpis_kpi_category'), 'financial_kpis', ['kpi_category'], unique=False)
    op.create_index(op.f('ix_financial_kpis_kpi_code'), 'financial_kpis', ['kpi_code'], unique=False)
    op.create_index(op.f('ix_financial_kpis_organization_id'), 'financial_kpis', ['organization_id'], unique=False)
    op.create_index(op.f('ix_financial_kpis_period_end'), 'financial_kpis', ['period_end'], unique=False)
    op.create_index(op.f('ix_financial_kpis_period_start'), 'financial_kpis', ['period_start'], unique=False)
    op.create_table('financial_statements',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('statement_type', sa.String(length=50), nullable=False),
    sa.Column('statement_name', sa.String(length=200), nullable=False),
    sa.Column('period_start', sa.Date(), nullable=False),
    sa.Column('period_end', sa.Date(), nullable=False),
    sa.Column('statement_data', sa.JSON(), nullable=False),
    sa.Column('summary_data', sa.JSON(), nullable=True),
    sa.Column('is_final', sa.Boolean(), nullable=False),
    sa.Column('is_audited', sa.Boolean(), nullable=False),
    sa.Column('generated_at', sa.DateTime(), nullable=False),
    sa.Column('generated_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['generated_by'], ['platform_users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_fs_org_type_period', 'financial_statements', ['organization_id', 'statement_type', 'period_end'], unique=False)
    op.create_index('idx_fs_period', 'financial_statements', ['period_start', 'period_end'], unique=False)
    op.create_index(op.f('ix_financial_statements_id'), 'financial_statements', ['id'], unique=False)
    op.create_index(op.f('ix_financial_statements_organization_id'), 'financial_statements', ['organization_id'], unique=False)
    op.create_index(op.f('ix_financial_statements_period_end'), 'financial_statements', ['period_end'], unique=False)
    op.create_index(op.f('ix_financial_statements_period_start'), 'financial_statements', ['period_start'], unique=False)
    op.create_index(op.f('ix_financial_statements_statement_type'), 'financial_statements', ['statement_type'], unique=False)
    op.create_table('gst_configuration',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('gstin', sa.String(length=15), nullable=False),
    sa.Column('trade_name', sa.String(length=200), nullable=False),
    sa.Column('legal_name', sa.String(length=200), nullable=False),
    sa.Column('registration_date', sa.Date(), nullable=False),
    sa.Column('constitution', sa.String(length=100), nullable=False),
    sa.Column('business_type', sa.String(length=100), nullable=False),
    sa.Column('address_line1', sa.String(length=200), nullable=False),
    sa.Column('address_line2', sa.String(length=200), nullable=True),
    sa.Column('city', sa.String(length=100), nullable=False),
    sa.Column('state', sa.String(length=100), nullable=False),
    sa.Column('pincode', sa.String(length=10), nullable=False),
    sa.Column('is_composition_scheme', sa.Boolean(), nullable=False),
    sa.Column('composition_tax_rate', sa.Numeric(precision=5, scale=2), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_gst_configuration_gstin'), 'gst_configuration', ['gstin'], unique=True)
    op.create_index(op.f('ix_gst_configuration_id'), 'gst_configuration', ['id'], unique=False)
    op.create_index(op.f('ix_gst_configuration_organization_id'), 'gst_configuration', ['organization_id'], unique=False)
    op.create_table('leave_types',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('name', sa.String(), nullable=False),
    sa.Column('code', sa.String(), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('annual_allocation', sa.Integer(), nullable=True),
    sa.Column('carry_forward_allowed', sa.Boolean(), nullable=False),
    sa.Column('max_carry_forward_days', sa.Integer(), nullable=True),
    sa.Column('cash_conversion_allowed', sa.Boolean(), nullable=False),
    sa.Column('min_days_per_application', sa.Integer(), nullable=True),
    sa.Column('max_days_per_application', sa.Integer(), nullable=True),
    sa.Column('advance_notice_days', sa.Integer(), nullable=True),
    sa.Column('requires_approval', sa.Boolean(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_leave_type_organization_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'code', name='uq_leave_type_org_code')
    )
    op.create_index('idx_leave_type_org_active', 'leave_types', ['organization_id', 'is_active'], unique=False)
    op.create_index(op.f('ix_leave_types_id'), 'leave_types', ['id'], unique=False)
    op.create_index(op.f('ix_leave_types_organization_id'), 'leave_types', ['organization_id'], unique=False)
    op.create_table('notification_preferences',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('subject_type', sa.String(), nullable=False),
    sa.Column('subject_id', sa.Integer(), nullable=False),
    sa.Column('notification_type', sa.String(), nullable=False),
    sa.Column('channel', sa.String(), nullable=False),
    sa.Column('is_enabled', sa.Boolean(), nullable=False),
    sa.Column('settings', sa.JSON(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_notification_preference_organization_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'subject_type', 'subject_id', 'notification_type', 'channel', name='uq_notification_pref_subject_type_channel')
    )
    op.create_index('idx_notification_pref_org_subject', 'notification_preferences', ['organization_id', 'subject_type', 'subject_id'], unique=False)
    op.create_index(op.f('ix_notification_preferences_id'), 'notification_preferences', ['id'], unique=False)
    op.create_index(op.f('ix_notification_preferences_organization_id'), 'notification_preferences', ['organization_id'], unique=False)
    op.create_table('otp_verifications',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=True),
    sa.Column('email', sa.String(), nullable=False),
    sa.Column('otp_hash', sa.String(), nullable=False),
    sa.Column('purpose', sa.String(), nullable=False),
    sa.Column('expires_at', sa.DateTime(timezone=True), nullable=False),
    sa.Column('is_used', sa.Boolean(), nullable=False),
    sa.Column('used_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('attempts', sa.Integer(), nullable=False),
    sa.Column('max_attempts', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_otp_organization_id'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_otp_email_purpose', 'otp_verifications', ['email', 'purpose'], unique=False)
    op.create_index('idx_otp_expires', 'otp_verifications', ['expires_at'], unique=False)
    op.create_index(op.f('ix_otp_verifications_email'), 'otp_verifications', ['email'], unique=False)
    op.create_index(op.f('ix_otp_verifications_id'), 'otp_verifications', ['id'], unique=False)
    op.create_index(op.f('ix_otp_verifications_organization_id'), 'otp_verifications', ['organization_id'], unique=False)
    op.create_table('payment_terms',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('name', sa.String(), nullable=False),
    sa.Column('days', sa.Integer(), nullable=False),
    sa.Column('description', sa.String(), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_payment_term_organization_id'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_payment_term_org_name', 'payment_terms', ['organization_id', 'name'], unique=False)
    op.create_index(op.f('ix_payment_terms_id'), 'payment_terms', ['id'], unique=False)
    op.create_index(op.f('ix_payment_terms_organization_id'), 'payment_terms', ['organization_id'], unique=False)
    op.create_table('purchase_analytics',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('period', sa.String(), nullable=False),
    sa.Column('total_purchases', sa.Float(), nullable=False),
    sa.Column('total_orders', sa.Integer(), nullable=False),
    sa.Column('average_purchase_value', sa.Float(), nullable=False),
    sa.Column('summary_date', sa.Date(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_purchase_analytics_organization_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'period', 'summary_date', name='uq_purchase_analytics_org_period_date')
    )
    op.create_index('idx_purchase_analytics_org_date', 'purchase_analytics', ['organization_id', 'summary_date'], unique=False)
    op.create_index(op.f('ix_purchase_analytics_id'), 'purchase_analytics', ['id'], unique=False)
    op.create_index(op.f('ix_purchase_analytics_organization_id'), 'purchase_analytics', ['organization_id'], unique=False)
    op.create_index(op.f('ix_purchase_analytics_summary_date'), 'purchase_analytics', ['summary_date'], unique=False)
    op.create_table('recruitment_pipelines',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('pipeline_name', sa.String(), nullable=False),
    sa.Column('stage_name', sa.String(), nullable=False),
    sa.Column('stage_order', sa.Integer(), nullable=False),
    sa.Column('stage_type', sa.String(), nullable=False),
    sa.Column('is_mandatory', sa.Boolean(), nullable=False),
    sa.Column('auto_progress', sa.Boolean(), nullable=False),
    sa.Column('requires_approval', sa.Boolean(), nullable=False),
    sa.Column('default_duration_days', sa.Integer(), nullable=True),
    sa.Column('stage_description', sa.Text(), nullable=True),
    sa.Column('stage_instructions', sa.Text(), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_recruitment_pipeline_organization_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'pipeline_name', 'stage_order', name='uq_recruitment_pipeline_org_stage')
    )
    op.create_index('idx_recruitment_pipeline_order', 'recruitment_pipelines', ['stage_order'], unique=False)
    op.create_index('idx_recruitment_pipeline_org_active', 'recruitment_pipelines', ['organization_id', 'is_active'], unique=False)
    op.create_index(op.f('ix_recruitment_pipelines_id'), 'recruitment_pipelines', ['id'], unique=False)
    op.create_index(op.f('ix_recruitment_pipelines_organization_id'), 'recruitment_pipelines', ['organization_id'], unique=False)
    op.create_table('request_for_quotations',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('rfq_number', sa.String(length=50), nullable=False),
    sa.Column('rfq_title', sa.String(length=200), nullable=False),
    sa.Column('rfq_description', sa.Text(), nullable=True),
    sa.Column('issue_date', sa.Date(), nullable=False),
    sa.Column('submission_deadline', sa.Date(), nullable=False),
    sa.Column('validity_period', sa.Integer(), nullable=True),
    sa.Column('terms_and_conditions', sa.Text(), nullable=True),
    sa.Column('delivery_requirements', sa.Text(), nullable=True),
    sa.Column('payment_terms', sa.String(length=100), nullable=True),
    sa.Column('status', sa.Enum('DRAFT', 'SENT', 'RESPONDED', 'EVALUATED', 'AWARDED', 'CANCELLED', name='rfqstatus'), nullable=False),
    sa.Column('is_public', sa.Boolean(), nullable=False),
    sa.Column('requires_samples', sa.Boolean(), nullable=False),
    sa.Column('allow_partial_quotes', sa.Boolean(), nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.Column('updated_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['platform_users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['updated_by'], ['platform_users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_rfq_deadline', 'request_for_quotations', ['submission_deadline'], unique=False)
    op.create_index('idx_rfq_org_status', 'request_for_quotations', ['organization_id', 'status'], unique=False)
    op.create_index(op.f('ix_request_for_quotations_id'), 'request_for_quotations', ['id'], unique=False)
    op.create_index(op.f('ix_request_for_quotations_issue_date'), 'request_for_quotations', ['issue_date'], unique=False)
    op.create_index(op.f('ix_request_for_quotations_organization_id'), 'request_for_quotations', ['organization_id'], unique=False)
    op.create_index(op.f('ix_request_for_quotations_rfq_number'), 'request_for_quotations', ['rfq_number'], unique=True)
    op.create_index(op.f('ix_request_for_quotations_status'), 'request_for_quotations', ['status'], unique=False)
    op.create_index(op.f('ix_request_for_quotations_submission_deadline'), 'request_for_quotations', ['submission_deadline'], unique=False)
    op.create_table('sales_analytics',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('period', sa.String(), nullable=False),
    sa.Column('total_sales', sa.Float(), nullable=False),
    sa.Column('total_orders', sa.Integer(), nullable=False),
    sa.Column('average_sale_value', sa.Float(), nullable=False),
    sa.Column('summary_date', sa.Date(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_sales_analytics_organization_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'period', 'summary_date', name='uq_sales_analytics_org_period_date')
    )
    op.create_index('idx_sales_analytics_org_date', 'sales_analytics', ['organization_id', 'summary_date'], unique=False)
    op.create_index(op.f('ix_sales_analytics_id'), 'sales_analytics', ['id'], unique=False)
    op.create_index(op.f('ix_sales_analytics_organization_id'), 'sales_analytics', ['organization_id'], unique=False)
    op.create_index(op.f('ix_sales_analytics_summary_date'), 'sales_analytics', ['summary_date'], unique=False)
    op.create_table('service_analytics',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('period', sa.String(), nullable=False),
    sa.Column('total_jobs', sa.Integer(), nullable=False),
    sa.Column('completed_jobs', sa.Integer(), nullable=False),
    sa.Column('average_completion_time', sa.Float(), nullable=False),
    sa.Column('summary_date', sa.Date(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_service_analytics_organization_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'period', 'summary_date', name='uq_service_analytics_org_period_date')
    )
    op.create_index('idx_service_analytics_org_date', 'service_analytics', ['organization_id', 'summary_date'], unique=False)
    op.create_index(op.f('ix_service_analytics_id'), 'service_analytics', ['id'], unique=False)
    op.create_index(op.f('ix_service_analytics_organization_id'), 'service_analytics', ['organization_id'], unique=False)
    op.create_index(op.f('ix_service_analytics_summary_date'), 'service_analytics', ['summary_date'], unique=False)
    op.create_table('service_roles',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('name', sa.String(), nullable=False),
    sa.Column('display_name', sa.String(), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_service_role_organization_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'name', name='uq_service_role_org_name')
    )
    op.create_index('idx_service_role_org_active', 'service_roles', ['organization_id', 'is_active'], unique=False)
    op.create_index(op.f('ix_service_roles_id'), 'service_roles', ['id'], unique=False)
    op.create_index(op.f('ix_service_roles_organization_id'), 'service_roles', ['organization_id'], unique=False)
    op.create_table('sitemap_entries',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('url', sa.String(), nullable=False),
    sa.Column('priority', sa.Float(), nullable=False),
    sa.Column('change_frequency', sa.String(), nullable=False),
    sa.Column('last_modified', sa.DateTime(timezone=True), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('auto_generated', sa.Boolean(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_sitemap_active', 'sitemap_entries', ['is_active'], unique=False)
    op.create_index('idx_sitemap_org_url', 'sitemap_entries', ['organization_id', 'url'], unique=False)
    op.create_index(op.f('ix_sitemap_entries_id'), 'sitemap_entries', ['id'], unique=False)
    op.create_index(op.f('ix_sitemap_entries_organization_id'), 'sitemap_entries', ['organization_id'], unique=False)
    op.create_index(op.f('ix_sitemap_entries_url'), 'sitemap_entries', ['url'], unique=False)
    op.create_table('skill_categories',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('name', sa.String(), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('color', sa.String(), nullable=True),
    sa.Column('parent_category_id', sa.Integer(), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_skill_category_organization_id'),
    sa.ForeignKeyConstraint(['parent_category_id'], ['skill_categories.id'], name='fk_skill_category_parent_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'name', name='uq_skill_category_org_name')
    )
    op.create_index('idx_skill_category_org_active', 'skill_categories', ['organization_id', 'is_active'], unique=False)
    op.create_index(op.f('ix_skill_categories_id'), 'skill_categories', ['id'], unique=False)
    op.create_index(op.f('ix_skill_categories_organization_id'), 'skill_categories', ['organization_id'], unique=False)
    op.create_table('stock_adjustments',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('adjustment_number', sa.String(length=50), nullable=False),
    sa.Column('adjustment_date', sa.Date(), nullable=False),
    sa.Column('adjustment_type', sa.String(length=50), nullable=False),
    sa.Column('status', sa.String(length=20), nullable=False),
    sa.Column('approved_by', sa.Integer(), nullable=True),
    sa.Column('approved_date', sa.Date(), nullable=True),
    sa.Column('reason', sa.Text(), nullable=False),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.ForeignKeyConstraint(['approved_by'], ['platform_users.id'], ),
    sa.ForeignKeyConstraint(['created_by'], ['platform_users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_stock_adj_org_status', 'stock_adjustments', ['organization_id', 'status'], unique=False)
    op.create_index(op.f('ix_stock_adjustments_adjustment_date'), 'stock_adjustments', ['adjustment_date'], unique=False)
    op.create_index(op.f('ix_stock_adjustments_adjustment_number'), 'stock_adjustments', ['adjustment_number'], unique=True)
    op.create_index(op.f('ix_stock_adjustments_adjustment_type'), 'stock_adjustments', ['adjustment_type'], unique=False)
    op.create_index(op.f('ix_stock_adjustments_id'), 'stock_adjustments', ['id'], unique=False)
    op.create_index(op.f('ix_stock_adjustments_organization_id'), 'stock_adjustments', ['organization_id'], unique=False)
    op.create_index(op.f('ix_stock_adjustments_status'), 'stock_adjustments', ['status'], unique=False)
    op.create_table('tally_configuration',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('tally_server_host', sa.String(length=100), nullable=False),
    sa.Column('tally_server_port', sa.Integer(), nullable=False),
    sa.Column('company_name_in_tally', sa.String(length=200), nullable=False),
    sa.Column('username', sa.String(length=100), nullable=True),
    sa.Column('password', sa.String(length=255), nullable=True),
    sa.Column('sync_direction', sa.Enum('BIDIRECTIONAL', 'TO_TALLY', 'FROM_TALLY', name='syncdirection'), nullable=False),
    sa.Column('auto_sync_enabled', sa.Boolean(), nullable=False),
    sa.Column('sync_interval_minutes', sa.Integer(), nullable=False),
    sa.Column('sync_masters', sa.Boolean(), nullable=False),
    sa.Column('sync_vouchers', sa.Boolean(), nullable=False),
    sa.Column('sync_reports', sa.Boolean(), nullable=False),
    sa.Column('field_mappings', sa.JSON(), nullable=True),
    sa.Column('ledger_mappings', sa.JSON(), nullable=True),
    sa.Column('voucher_type_mappings', sa.JSON(), nullable=True),
    sa.Column('connection_status', sa.Enum('CONNECTED', 'DISCONNECTED', 'ERROR', 'SYNCING', name='tallyconnectionstatus'), nullable=False),
    sa.Column('last_connection_test', sa.DateTime(), nullable=True),
    sa.Column('connection_error_message', sa.Text(), nullable=True),
    sa.Column('last_sync_datetime', sa.DateTime(), nullable=True),
    sa.Column('last_successful_sync', sa.DateTime(), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('configured_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['configured_by'], ['platform_users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_tally_configuration_id'), 'tally_configuration', ['id'], unique=False)
    op.create_index(op.f('ix_tally_configuration_organization_id'), 'tally_configuration', ['organization_id'], unique=True)
    op.create_table('tally_data_cache',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('data_type', sa.String(length=50), nullable=False),
    sa.Column('data_key', sa.String(length=200), nullable=False),
    sa.Column('data_content', sa.JSON(), nullable=False),
    sa.Column('data_hash', sa.String(length=64), nullable=True),
    sa.Column('cached_at', sa.DateTime(), nullable=False),
    sa.Column('expires_at', sa.DateTime(), nullable=True),
    sa.Column('access_count', sa.Integer(), nullable=False),
    sa.Column('last_accessed', sa.DateTime(), nullable=True),
    sa.Column('tally_last_modified', sa.DateTime(), nullable=True),
    sa.Column('tally_version', sa.String(length=50), nullable=True),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'data_type', 'data_key', name='uq_tally_cache')
    )
    op.create_index('idx_tally_cache_expires', 'tally_data_cache', ['expires_at'], unique=False)
    op.create_index('idx_tally_cache_hash', 'tally_data_cache', ['data_hash'], unique=False)
    op.create_index(op.f('ix_tally_data_cache_cached_at'), 'tally_data_cache', ['cached_at'], unique=False)
    op.create_index(op.f('ix_tally_data_cache_data_hash'), 'tally_data_cache', ['data_hash'], unique=False)
    op.create_index(op.f('ix_tally_data_cache_data_key'), 'tally_data_cache', ['data_key'], unique=False)
    op.create_index(op.f('ix_tally_data_cache_data_type'), 'tally_data_cache', ['data_type'], unique=False)
    op.create_index(op.f('ix_tally_data_cache_expires_at'), 'tally_data_cache', ['expires_at'], unique=False)
    op.create_index(op.f('ix_tally_data_cache_id'), 'tally_data_cache', ['id'], unique=False)
    op.create_index(op.f('ix_tally_data_cache_organization_id'), 'tally_data_cache', ['organization_id'], unique=False)
    op.create_table('tally_error_logs',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('error_type', sa.String(length=50), nullable=False),
    sa.Column('error_code', sa.String(length=20), nullable=True),
    sa.Column('error_message', sa.Text(), nullable=False),
    sa.Column('operation', sa.String(length=100), nullable=True),
    sa.Column('entity_type', sa.String(length=50), nullable=True),
    sa.Column('entity_reference', sa.String(length=100), nullable=True),
    sa.Column('stack_trace', sa.Text(), nullable=True),
    sa.Column('request_data', sa.JSON(), nullable=True),
    sa.Column('response_data', sa.JSON(), nullable=True),
    sa.Column('is_resolved', sa.Boolean(), nullable=False),
    sa.Column('resolution_notes', sa.Text(), nullable=True),
    sa.Column('resolved_by', sa.Integer(), nullable=True),
    sa.Column('resolved_at', sa.DateTime(), nullable=True),
    sa.Column('occurred_at', sa.DateTime(), nullable=False),
    sa.Column('severity', sa.String(length=20), nullable=False),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['resolved_by'], ['platform_users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_tally_error_resolved', 'tally_error_logs', ['is_resolved'], unique=False)
    op.create_index('idx_tally_error_type_severity', 'tally_error_logs', ['error_type', 'severity'], unique=False)
    op.create_index(op.f('ix_tally_error_logs_error_code'), 'tally_error_logs', ['error_code'], unique=False)
    op.create_index(op.f('ix_tally_error_logs_error_type'), 'tally_error_logs', ['error_type'], unique=False)
    op.create_index(op.f('ix_tally_error_logs_id'), 'tally_error_logs', ['id'], unique=False)
    op.create_index(op.f('ix_tally_error_logs_occurred_at'), 'tally_error_logs', ['occurred_at'], unique=False)
    op.create_index(op.f('ix_tally_error_logs_organization_id'), 'tally_error_logs', ['organization_id'], unique=False)
    op.create_index(op.f('ix_tally_error_logs_severity'), 'tally_error_logs', ['severity'], unique=False)
    op.create_table('tax_slabs',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('slab_name', sa.String(), nullable=False),
    sa.Column('financial_year', sa.String(), nullable=False),
    sa.Column('min_amount', sa.Numeric(precision=15, scale=2), nullable=False),
    sa.Column('max_amount', sa.Numeric(precision=15, scale=2), nullable=True),
    sa.Column('tax_rate', sa.Numeric(precision=5, scale=2), nullable=False),
    sa.Column('tax_regime', sa.String(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_tax_slab_organization_id'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_tax_slab_org_year', 'tax_slabs', ['organization_id', 'financial_year'], unique=False)
    op.create_index('idx_tax_slab_regime', 'tax_slabs', ['tax_regime'], unique=False)
    op.create_index(op.f('ix_tax_slabs_id'), 'tax_slabs', ['id'], unique=False)
    op.create_index(op.f('ix_tax_slabs_organization_id'), 'tax_slabs', ['organization_id'], unique=False)
    op.create_table('users',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=True),
    sa.Column('email', sa.String(), nullable=False),
    sa.Column('hashed_password', sa.String(), nullable=False),
    sa.Column('supabase_uuid', sa.String(), nullable=True),
    sa.Column('full_name', sa.String(), nullable=True),
    sa.Column('role', sa.String(), nullable=False),
    sa.Column('department', sa.String(), nullable=True),
    sa.Column('designation', sa.String(), nullable=True),
    sa.Column('employee_id', sa.String(), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('is_super_admin', sa.Boolean(), nullable=False),
    sa.Column('must_change_password', sa.Boolean(), nullable=False),
    sa.Column('has_stock_access', sa.Boolean(), nullable=False),
    sa.Column('assigned_modules', sa.JSON(), nullable=True),
    sa.Column('reporting_manager_id', sa.Integer(), nullable=True),
    sa.Column('sub_module_permissions', sa.JSON(), nullable=True),
    sa.Column('temp_password_hash', sa.String(), nullable=True),
    sa.Column('temp_password_expires', sa.DateTime(timezone=True), nullable=True),
    sa.Column('force_password_reset', sa.Boolean(), nullable=False),
    sa.Column('phone', sa.String(), nullable=True),
    sa.Column('avatar_path', sa.String(), nullable=True),
    sa.Column('failed_login_attempts', sa.Integer(), nullable=False),
    sa.Column('locked_until', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('last_login', sa.DateTime(timezone=True), nullable=True),
    sa.Column('permissions', sa.JSON(), nullable=True),
    sa.Column('is_sso_user', sa.Boolean(), nullable=False),
    sa.Column('sso_provider', sa.String(), nullable=True),
    sa.Column('sso_id', sa.String(), nullable=True),
    sa.Column('user_settings', sa.JSON(), nullable=True),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_user_organization_id'),
    sa.ForeignKeyConstraint(['reporting_manager_id'], ['users.id'], name='fk_user_reporting_manager_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'email', name='uq_user_org_email')
    )
    op.create_index('idx_user_org_active', 'users', ['organization_id', 'is_active'], unique=False)
    op.create_index('idx_user_org_email', 'users', ['organization_id', 'email'], unique=False)
    op.create_index('idx_user_reporting_manager', 'users', ['reporting_manager_id'], unique=False)
    op.create_index(op.f('ix_users_email'), 'users', ['email'], unique=False)
    op.create_index(op.f('ix_users_id'), 'users', ['id'], unique=False)
    op.create_index(op.f('ix_users_organization_id'), 'users', ['organization_id'], unique=False)
    op.create_index(op.f('ix_users_reporting_manager_id'), 'users', ['reporting_manager_id'], unique=False)
    op.create_index(op.f('ix_users_supabase_uuid'), 'users', ['supabase_uuid'], unique=False)
    op.create_table('warehouses',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('warehouse_code', sa.String(length=50), nullable=False),
    sa.Column('warehouse_name', sa.String(length=200), nullable=False),
    sa.Column('warehouse_type', sa.Enum('MAIN', 'BRANCH', 'VIRTUAL', 'TRANSIT', 'QUARANTINE', name='warehousetype'), nullable=False),
    sa.Column('address_line1', sa.String(length=200), nullable=True),
    sa.Column('address_line2', sa.String(length=200), nullable=True),
    sa.Column('city', sa.String(length=100), nullable=True),
    sa.Column('state', sa.String(length=100), nullable=True),
    sa.Column('pincode', sa.String(length=10), nullable=True),
    sa.Column('country', sa.String(length=100), nullable=False),
    sa.Column('contact_person', sa.String(length=100), nullable=True),
    sa.Column('phone_number', sa.String(length=20), nullable=True),
    sa.Column('email', sa.String(length=100), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('allow_negative_stock', sa.Boolean(), nullable=False),
    sa.Column('is_main_warehouse', sa.Boolean(), nullable=False),
    sa.Column('total_area_sqft', sa.Numeric(precision=10, scale=2), nullable=True),
    sa.Column('storage_capacity_units', sa.Numeric(precision=15, scale=3), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['platform_users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'warehouse_code', name='uq_org_warehouse_code')
    )
    op.create_index('idx_warehouse_type', 'warehouses', ['warehouse_type'], unique=False)
    op.create_index(op.f('ix_warehouses_id'), 'warehouses', ['id'], unique=False)
    op.create_index(op.f('ix_warehouses_organization_id'), 'warehouses', ['organization_id'], unique=False)
    op.create_index(op.f('ix_warehouses_warehouse_code'), 'warehouses', ['warehouse_code'], unique=False)
    op.create_table('ai_models',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('model_name', sa.String(), nullable=False),
    sa.Column('model_type', sa.Enum('CLASSIFICATION', 'REGRESSION', 'FORECASTING', 'ANOMALY_DETECTION', 'CLUSTERING', 'RECOMMENDATION', name='predictiontype'), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('version', sa.String(), nullable=False),
    sa.Column('algorithm', sa.String(), nullable=False),
    sa.Column('hyperparameters', sa.JSON(), nullable=True),
    sa.Column('feature_columns', sa.JSON(), nullable=False),
    sa.Column('target_column', sa.String(), nullable=True),
    sa.Column('status', sa.Enum('DRAFT', 'TRAINING', 'TRAINED', 'DEPLOYED', 'DEPRECATED', 'FAILED', name='modelstatus'), nullable=False),
    sa.Column('accuracy_score', sa.Float(), nullable=True),
    sa.Column('performance_metrics', sa.JSON(), nullable=True),
    sa.Column('training_data_source', sa.String(), nullable=True),
    sa.Column('training_data_filters', sa.JSON(), nullable=True),
    sa.Column('training_started_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('training_completed_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('training_duration_seconds', sa.Float(), nullable=True),
    sa.Column('deployed_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('model_file_path', sa.String(), nullable=True),
    sa.Column('model_size_bytes', sa.Integer(), nullable=True),
    sa.Column('prediction_count', sa.Integer(), nullable=False),
    sa.Column('last_prediction_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('retraining_frequency_days', sa.Integer(), nullable=True),
    sa.Column('next_retraining_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by_id', sa.Integer(), nullable=False),
    sa.Column('updated_by_id', sa.Integer(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['created_by_id'], ['users.id'], name='fk_ai_model_created_by_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_ai_model_organization_id'),
    sa.ForeignKeyConstraint(['updated_by_id'], ['users.id'], name='fk_ai_model_updated_by_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'model_name', 'version', name='uq_ai_model_org_name_version')
    )
    op.create_index('idx_ai_model_org_status', 'ai_models', ['organization_id', 'status'], unique=False)
    op.create_index('idx_ai_model_org_type', 'ai_models', ['organization_id', 'model_type'], unique=False)
    op.create_index(op.f('ix_ai_models_id'), 'ai_models', ['id'], unique=False)
    op.create_index(op.f('ix_ai_models_model_name'), 'ai_models', ['model_name'], unique=False)
    op.create_index(op.f('ix_ai_models_model_type'), 'ai_models', ['model_type'], unique=False)
    op.create_index(op.f('ix_ai_models_organization_id'), 'ai_models', ['organization_id'], unique=False)
    op.create_table('analytics_integrations',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('provider', sa.String(), nullable=False),
    sa.Column('tracking_id', sa.String(), nullable=False),
    sa.Column('configuration', sa.JSON(), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by_id', sa.Integer(), nullable=False),
    sa.ForeignKeyConstraint(['created_by_id'], ['users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_analytics_active', 'analytics_integrations', ['is_active'], unique=False)
    op.create_index('idx_analytics_org_provider', 'analytics_integrations', ['organization_id', 'provider'], unique=False)
    op.create_index(op.f('ix_analytics_integrations_id'), 'analytics_integrations', ['id'], unique=False)
    op.create_index(op.f('ix_analytics_integrations_organization_id'), 'analytics_integrations', ['organization_id'], unique=False)
    op.create_table('api_keys',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('company_id', sa.Integer(), nullable=True),
    sa.Column('key_name', sa.String(length=255), nullable=False),
    sa.Column('api_key', sa.String(length=500), nullable=False),
    sa.Column('key_prefix', sa.String(length=20), nullable=False),
    sa.Column('status', sa.Enum('ACTIVE', 'INACTIVE', 'REVOKED', 'EXPIRED', name='apikeystatus'), nullable=False),
    sa.Column('access_level', sa.Enum('READ_ONLY', 'READ_WRITE', 'ADMIN', 'FULL_ACCESS', name='accesslevel'), nullable=False),
    sa.Column('allowed_endpoints', sa.JSON(), nullable=True),
    sa.Column('restricted_endpoints', sa.JSON(), nullable=True),
    sa.Column('allowed_methods', sa.JSON(), nullable=True),
    sa.Column('rate_limit_requests', sa.Integer(), nullable=True),
    sa.Column('rate_limit_type', sa.Enum('PER_MINUTE', 'PER_HOUR', 'PER_DAY', 'PER_MONTH', name='ratelimittype'), nullable=False),
    sa.Column('current_usage', sa.Integer(), nullable=False),
    sa.Column('allowed_ips', sa.JSON(), nullable=True),
    sa.Column('expires_at', sa.DateTime(), nullable=True),
    sa.Column('last_used_at', sa.DateTime(), nullable=True),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.ForeignKeyConstraint(['company_id'], ['companies.id'], ),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'key_name', name='uq_api_key_org_name')
    )
    op.create_index('idx_api_key_org_access_level', 'api_keys', ['organization_id', 'access_level'], unique=False)
    op.create_index('idx_api_key_org_status', 'api_keys', ['organization_id', 'status'], unique=False)
    op.create_index('idx_api_key_prefix', 'api_keys', ['key_prefix'], unique=False)
    op.create_index(op.f('ix_api_keys_api_key'), 'api_keys', ['api_key'], unique=True)
    op.create_index(op.f('ix_api_keys_company_id'), 'api_keys', ['company_id'], unique=False)
    op.create_index(op.f('ix_api_keys_id'), 'api_keys', ['id'], unique=False)
    op.create_index(op.f('ix_api_keys_key_name'), 'api_keys', ['key_name'], unique=False)
    op.create_index(op.f('ix_api_keys_key_prefix'), 'api_keys', ['key_prefix'], unique=False)
    op.create_index(op.f('ix_api_keys_organization_id'), 'api_keys', ['organization_id'], unique=False)
    op.create_table('audit_logs',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=True),
    sa.Column('table_name', sa.String(), nullable=False),
    sa.Column('record_id', sa.Integer(), nullable=True),
    sa.Column('action', sa.String(), nullable=False),
    sa.Column('user_id', sa.Integer(), nullable=True),
    sa.Column('changes', sa.JSON(), nullable=True),
    sa.Column('ip_address', sa.String(), nullable=True),
    sa.Column('user_agent', sa.String(), nullable=True),
    sa.Column('timestamp', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_audit_log_organization_id'),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], name='fk_audit_log_user_id'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_audit_org_table_action', 'audit_logs', ['organization_id', 'table_name', 'action'], unique=False)
    op.create_index('idx_audit_org_timestamp', 'audit_logs', ['organization_id', 'timestamp'], unique=False)
    op.create_index(op.f('ix_audit_logs_id'), 'audit_logs', ['id'], unique=False)
    op.create_index(op.f('ix_audit_logs_organization_id'), 'audit_logs', ['organization_id'], unique=False)
    op.create_table('automated_insights',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('insight_type', sa.String(length=100), nullable=False),
    sa.Column('insight_category', sa.String(length=100), nullable=False),
    sa.Column('title', sa.String(length=200), nullable=False),
    sa.Column('description', sa.Text(), nullable=False),
    sa.Column('data_sources', sa.JSON(), nullable=False),
    sa.Column('analysis_method', sa.String(length=100), nullable=False),
    sa.Column('confidence_score', sa.Numeric(precision=5, scale=2), nullable=False),
    sa.Column('importance_score', sa.Numeric(precision=5, scale=2), nullable=False),
    sa.Column('potential_impact', sa.Text(), nullable=True),
    sa.Column('recommended_actions', sa.Text(), nullable=True),
    sa.Column('supporting_metrics', sa.JSON(), nullable=True),
    sa.Column('visualization_data', sa.JSON(), nullable=True),
    sa.Column('status', sa.String(length=20), nullable=False),
    sa.Column('user_feedback', sa.Text(), nullable=True),
    sa.Column('usefulness_rating', sa.Integer(), nullable=True),
    sa.Column('generated_at', sa.DateTime(), nullable=False),
    sa.Column('expires_at', sa.DateTime(), nullable=True),
    sa.Column('reviewed_by_id', sa.Integer(), nullable=True),
    sa.Column('reviewed_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['reviewed_by_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_insight_importance', 'automated_insights', ['importance_score', 'confidence_score'], unique=False)
    op.create_index('idx_insight_org_type', 'automated_insights', ['organization_id', 'insight_type'], unique=False)
    op.create_index('idx_insight_status_generated', 'automated_insights', ['status', 'generated_at'], unique=False)
    op.create_index(op.f('ix_automated_insights_generated_at'), 'automated_insights', ['generated_at'], unique=False)
    op.create_index(op.f('ix_automated_insights_id'), 'automated_insights', ['id'], unique=False)
    op.create_index(op.f('ix_automated_insights_insight_type'), 'automated_insights', ['insight_type'], unique=False)
    op.create_index(op.f('ix_automated_insights_organization_id'), 'automated_insights', ['organization_id'], unique=False)
    op.create_table('automation_workflows',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('workflow_name', sa.String(), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('workflow_type', sa.String(), nullable=False),
    sa.Column('category', sa.String(), nullable=False),
    sa.Column('trigger_conditions', sa.JSON(), nullable=False),
    sa.Column('trigger_schedule', sa.String(), nullable=True),
    sa.Column('workflow_steps', sa.JSON(), nullable=False),
    sa.Column('ai_models_used', sa.JSON(), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('auto_approve', sa.Boolean(), nullable=False),
    sa.Column('requires_human_approval', sa.Boolean(), nullable=False),
    sa.Column('execution_count', sa.Integer(), nullable=False),
    sa.Column('success_count', sa.Integer(), nullable=False),
    sa.Column('last_execution_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('last_execution_status', sa.String(), nullable=True),
    sa.Column('created_by_id', sa.Integer(), nullable=False),
    sa.Column('updated_by_id', sa.Integer(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['created_by_id'], ['users.id'], name='fk_automation_workflow_created_by_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_automation_workflow_organization_id'),
    sa.ForeignKeyConstraint(['updated_by_id'], ['users.id'], name='fk_automation_workflow_updated_by_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'workflow_name', name='uq_automation_workflow_org_name')
    )
    op.create_index('idx_automation_workflow_org_active', 'automation_workflows', ['organization_id', 'is_active'], unique=False)
    op.create_index('idx_automation_workflow_org_category', 'automation_workflows', ['organization_id', 'category'], unique=False)
    op.create_index('idx_automation_workflow_org_type', 'automation_workflows', ['organization_id', 'workflow_type'], unique=False)
    op.create_index(op.f('ix_automation_workflows_category'), 'automation_workflows', ['category'], unique=False)
    op.create_index(op.f('ix_automation_workflows_id'), 'automation_workflows', ['id'], unique=False)
    op.create_index(op.f('ix_automation_workflows_organization_id'), 'automation_workflows', ['organization_id'], unique=False)
    op.create_index(op.f('ix_automation_workflows_workflow_name'), 'automation_workflows', ['workflow_name'], unique=False)
    op.create_index(op.f('ix_automation_workflows_workflow_type'), 'automation_workflows', ['workflow_type'], unique=False)
    op.create_table('bank_accounts',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('chart_account_id', sa.Integer(), nullable=False),
    sa.Column('bank_name', sa.String(length=200), nullable=False),
    sa.Column('branch_name', sa.String(length=200), nullable=True),
    sa.Column('account_number', sa.String(length=50), nullable=False),
    sa.Column('ifsc_code', sa.String(length=20), nullable=True),
    sa.Column('swift_code', sa.String(length=20), nullable=True),
    sa.Column('account_type', sa.String(length=50), nullable=False),
    sa.Column('currency', sa.String(length=3), nullable=False),
    sa.Column('opening_balance', sa.Numeric(precision=15, scale=2), nullable=False),
    sa.Column('current_balance', sa.Numeric(precision=15, scale=2), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('is_default', sa.Boolean(), nullable=False),
    sa.Column('auto_reconcile', sa.Boolean(), nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.ForeignKeyConstraint(['chart_account_id'], ['chart_of_accounts.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'account_number', name='uq_org_account_number')
    )
    op.create_index('idx_bank_org_active', 'bank_accounts', ['organization_id', 'is_active'], unique=False)
    op.create_index(op.f('ix_bank_accounts_account_number'), 'bank_accounts', ['account_number'], unique=False)
    op.create_index(op.f('ix_bank_accounts_chart_account_id'), 'bank_accounts', ['chart_account_id'], unique=False)
    op.create_index(op.f('ix_bank_accounts_id'), 'bank_accounts', ['id'], unique=False)
    op.create_index(op.f('ix_bank_accounts_organization_id'), 'bank_accounts', ['organization_id'], unique=False)
    op.create_table('business_rules',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('company_id', sa.Integer(), nullable=True),
    sa.Column('name', sa.String(length=200), nullable=False),
    sa.Column('code', sa.String(length=50), nullable=True),
    sa.Column('category', sa.String(length=100), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('rule_expression', sa.Text(), nullable=False),
    sa.Column('rule_type', sa.String(length=50), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('priority', sa.Integer(), nullable=False),
    sa.Column('execution_order', sa.Integer(), nullable=False),
    sa.Column('applicable_entities', sa.JSON(), nullable=True),
    sa.Column('conditions', sa.JSON(), nullable=True),
    sa.Column('actions', sa.JSON(), nullable=True),
    sa.Column('error_action', sa.String(length=50), nullable=False),
    sa.Column('error_message_template', sa.Text(), nullable=True),
    sa.Column('execution_count', sa.Integer(), nullable=False),
    sa.Column('last_executed_at', sa.DateTime(), nullable=True),
    sa.Column('average_execution_time', sa.Float(), nullable=False),
    sa.Column('created_at', sa.DateTime(), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.Column('updated_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['company_id'], ['companies.id'], ),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['updated_by'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'code', name='uq_business_rule_org_code')
    )
    op.create_index('idx_business_rule_active', 'business_rules', ['is_active'], unique=False)
    op.create_index('idx_business_rule_org_category', 'business_rules', ['organization_id', 'category'], unique=False)
    op.create_index(op.f('ix_business_rules_category'), 'business_rules', ['category'], unique=False)
    op.create_index(op.f('ix_business_rules_code'), 'business_rules', ['code'], unique=False)
    op.create_index(op.f('ix_business_rules_company_id'), 'business_rules', ['company_id'], unique=False)
    op.create_index(op.f('ix_business_rules_id'), 'business_rules', ['id'], unique=False)
    op.create_index(op.f('ix_business_rules_name'), 'business_rules', ['name'], unique=False)
    op.create_index(op.f('ix_business_rules_organization_id'), 'business_rules', ['organization_id'], unique=False)
    op.create_table('calendars',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('name', sa.String(length=255), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('color', sa.String(length=7), nullable=True),
    sa.Column('is_default', sa.Boolean(), nullable=False),
    sa.Column('is_shared', sa.Boolean(), nullable=False),
    sa.Column('is_visible', sa.Boolean(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('owner_id', sa.Integer(), nullable=False),
    sa.Column('google_calendar_id', sa.String(length=255), nullable=True),
    sa.Column('is_google_calendar', sa.Boolean(), nullable=False),
    sa.Column('google_sync_enabled', sa.Boolean(), nullable=False),
    sa.Column('last_google_sync', sa.DateTime(), nullable=True),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['owner_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('google_calendar_id')
    )
    op.create_index(op.f('ix_calendars_id'), 'calendars', ['id'], unique=False)
    op.create_index(op.f('ix_calendars_name'), 'calendars', ['name'], unique=False)
    op.create_table('campaigns',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('campaign_number', sa.String(), nullable=False),
    sa.Column('name', sa.String(), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('campaign_type', sa.Enum('EMAIL', 'SMS', 'SOCIAL_MEDIA', 'DIGITAL_ADS', 'PRINT', 'EVENT', 'WEBINAR', 'CONTENT_MARKETING', 'REFERRAL', 'OTHER', name='campaigntype'), nullable=False),
    sa.Column('status', sa.Enum('DRAFT', 'SCHEDULED', 'ACTIVE', 'PAUSED', 'COMPLETED', 'CANCELLED', name='campaignstatus'), nullable=False),
    sa.Column('start_date', sa.Date(), nullable=False),
    sa.Column('end_date', sa.Date(), nullable=True),
    sa.Column('scheduled_send_time', sa.DateTime(timezone=True), nullable=True),
    sa.Column('budget', sa.Float(), nullable=True),
    sa.Column('target_audience_size', sa.Integer(), nullable=True),
    sa.Column('objective', sa.String(), nullable=True),
    sa.Column('subject_line', sa.String(), nullable=True),
    sa.Column('content', sa.Text(), nullable=True),
    sa.Column('creative_assets', sa.JSON(), nullable=True),
    sa.Column('target_criteria', sa.JSON(), nullable=True),
    sa.Column('sent_count', sa.Integer(), nullable=False),
    sa.Column('delivered_count', sa.Integer(), nullable=False),
    sa.Column('opened_count', sa.Integer(), nullable=False),
    sa.Column('clicked_count', sa.Integer(), nullable=False),
    sa.Column('converted_count', sa.Integer(), nullable=False),
    sa.Column('unsubscribed_count', sa.Integer(), nullable=False),
    sa.Column('revenue_generated', sa.Float(), nullable=False),
    sa.Column('cost_per_acquisition', sa.Float(), nullable=True),
    sa.Column('return_on_investment', sa.Float(), nullable=True),
    sa.Column('assigned_to_id', sa.Integer(), nullable=True),
    sa.Column('created_by_id', sa.Integer(), nullable=True),
    sa.Column('integration_settings', sa.JSON(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('launched_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('completed_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['assigned_to_id'], ['users.id'], name='fk_campaign_assigned_to_id'),
    sa.ForeignKeyConstraint(['created_by_id'], ['users.id'], name='fk_campaign_created_by_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_campaign_organization_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'campaign_number', name='uq_campaign_org_number')
    )
    op.create_index('idx_campaign_dates', 'campaigns', ['start_date', 'end_date'], unique=False)
    op.create_index('idx_campaign_org_status', 'campaigns', ['organization_id', 'status'], unique=False)
    op.create_index('idx_campaign_org_type', 'campaigns', ['organization_id', 'campaign_type'], unique=False)
    op.create_index(op.f('ix_campaigns_campaign_number'), 'campaigns', ['campaign_number'], unique=True)
    op.create_index(op.f('ix_campaigns_campaign_type'), 'campaigns', ['campaign_type'], unique=False)
    op.create_index(op.f('ix_campaigns_id'), 'campaigns', ['id'], unique=False)
    op.create_index(op.f('ix_campaigns_name'), 'campaigns', ['name'], unique=False)
    op.create_index(op.f('ix_campaigns_organization_id'), 'campaigns', ['organization_id'], unique=False)
    op.create_index(op.f('ix_campaigns_status'), 'campaigns', ['status'], unique=False)
    op.create_table('candidates',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('first_name', sa.String(), nullable=False),
    sa.Column('last_name', sa.String(), nullable=False),
    sa.Column('email', sa.String(), nullable=False),
    sa.Column('phone', sa.String(), nullable=False),
    sa.Column('current_designation', sa.String(), nullable=True),
    sa.Column('current_company', sa.String(), nullable=True),
    sa.Column('total_experience', sa.Numeric(precision=4, scale=1), nullable=True),
    sa.Column('relevant_experience', sa.Numeric(precision=4, scale=1), nullable=True),
    sa.Column('highest_qualification', sa.String(), nullable=True),
    sa.Column('educational_details', sa.JSON(), nullable=True),
    sa.Column('current_salary', sa.Numeric(precision=15, scale=2), nullable=True),
    sa.Column('expected_salary', sa.Numeric(precision=15, scale=2), nullable=True),
    sa.Column('salary_currency', sa.String(), nullable=False),
    sa.Column('notice_period', sa.Integer(), nullable=True),
    sa.Column('preferred_location', sa.String(), nullable=True),
    sa.Column('willing_to_relocate', sa.Boolean(), nullable=False),
    sa.Column('resume_path', sa.String(), nullable=True),
    sa.Column('cover_letter_path', sa.String(), nullable=True),
    sa.Column('portfolio_url', sa.String(), nullable=True),
    sa.Column('linkedin_url', sa.String(), nullable=True),
    sa.Column('skills', sa.JSON(), nullable=True),
    sa.Column('assessment_scores', sa.JSON(), nullable=True),
    sa.Column('source', sa.String(), nullable=False),
    sa.Column('referral_source', sa.String(), nullable=True),
    sa.Column('source_details', sa.JSON(), nullable=True),
    sa.Column('status', sa.String(), nullable=False),
    sa.Column('tags', sa.JSON(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by_id', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by_id'], ['users.id'], name='fk_candidate_created_by_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_candidate_organization_id'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_candidate_name', 'candidates', ['first_name', 'last_name'], unique=False)
    op.create_index('idx_candidate_org_email', 'candidates', ['organization_id', 'email'], unique=False)
    op.create_index('idx_candidate_status', 'candidates', ['status'], unique=False)
    op.create_index(op.f('ix_candidates_email'), 'candidates', ['email'], unique=False)
    op.create_index(op.f('ix_candidates_id'), 'candidates', ['id'], unique=False)
    op.create_index(op.f('ix_candidates_organization_id'), 'candidates', ['organization_id'], unique=False)
    op.create_table('carriers',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('carrier_code', sa.String(), nullable=False),
    sa.Column('carrier_name', sa.String(), nullable=False),
    sa.Column('carrier_type', sa.Enum('ROAD', 'RAIL', 'AIR', 'SEA', 'COURIER', 'MULTIMODAL', name='carriertype'), nullable=False),
    sa.Column('contact_person', sa.String(), nullable=True),
    sa.Column('phone', sa.String(), nullable=True),
    sa.Column('email', sa.String(), nullable=True),
    sa.Column('website', sa.String(), nullable=True),
    sa.Column('address_line1', sa.String(), nullable=True),
    sa.Column('address_line2', sa.String(), nullable=True),
    sa.Column('city', sa.String(), nullable=True),
    sa.Column('state', sa.String(), nullable=True),
    sa.Column('postal_code', sa.String(), nullable=True),
    sa.Column('country', sa.String(), nullable=True),
    sa.Column('license_number', sa.String(), nullable=True),
    sa.Column('license_expiry_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('insurance_number', sa.String(), nullable=True),
    sa.Column('insurance_expiry_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('service_areas', sa.JSON(), nullable=True),
    sa.Column('vehicle_types', sa.JSON(), nullable=True),
    sa.Column('special_handling', sa.JSON(), nullable=True),
    sa.Column('rating', sa.Float(), nullable=True),
    sa.Column('on_time_percentage', sa.Float(), nullable=True),
    sa.Column('damage_rate', sa.Float(), nullable=True),
    sa.Column('transit_time_reliability', sa.String(), nullable=True),
    sa.Column('tracking_capability', sa.Boolean(), nullable=True),
    sa.Column('real_time_updates', sa.Boolean(), nullable=True),
    sa.Column('payment_terms', sa.String(), nullable=True),
    sa.Column('credit_limit', sa.Float(), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=True),
    sa.Column('is_preferred', sa.Boolean(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'carrier_code', name='uq_carrier_org_code')
    )
    op.create_index('idx_carrier_org_active', 'carriers', ['organization_id', 'is_active'], unique=False)
    op.create_index('idx_carrier_org_name', 'carriers', ['organization_id', 'carrier_name'], unique=False)
    op.create_index('idx_carrier_org_type', 'carriers', ['organization_id', 'carrier_type'], unique=False)
    op.create_index(op.f('ix_carriers_id'), 'carriers', ['id'], unique=False)
    op.create_index(op.f('ix_carriers_organization_id'), 'carriers', ['organization_id'], unique=False)
    op.create_table('channel_configurations',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('channel_type', sa.String(), nullable=False),
    sa.Column('channel_name', sa.String(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('configuration', sa.JSON(), nullable=False),
    sa.Column('bot_enabled', sa.Boolean(), nullable=False),
    sa.Column('auto_escalation_enabled', sa.Boolean(), nullable=False),
    sa.Column('escalation_threshold_minutes', sa.Integer(), nullable=False),
    sa.Column('business_hours', sa.JSON(), nullable=True),
    sa.Column('timezone', sa.String(), nullable=False),
    sa.Column('created_by_id', sa.Integer(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['created_by_id'], ['users.id'], name='fk_channel_config_created_by_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_channel_config_organization_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'channel_type', 'channel_name', name='uq_channel_config_org_type_name')
    )
    op.create_index('idx_channel_config_active', 'channel_configurations', ['is_active'], unique=False)
    op.create_index('idx_channel_config_org_type', 'channel_configurations', ['organization_id', 'channel_type'], unique=False)
    op.create_index(op.f('ix_channel_configurations_id'), 'channel_configurations', ['id'], unique=False)
    op.create_index(op.f('ix_channel_configurations_organization_id'), 'channel_configurations', ['organization_id'], unique=False)
    op.create_table('competitor_analysis',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('competitor_name', sa.String(), nullable=False),
    sa.Column('competitor_domain', sa.String(), nullable=False),
    sa.Column('domain_authority', sa.Float(), nullable=True),
    sa.Column('organic_traffic', sa.Integer(), nullable=True),
    sa.Column('organic_keywords', sa.Integer(), nullable=True),
    sa.Column('backlinks', sa.Integer(), nullable=True),
    sa.Column('content_gaps', sa.JSON(), nullable=True),
    sa.Column('top_keywords', sa.JSON(), nullable=True),
    sa.Column('content_strategy', sa.JSON(), nullable=True),
    sa.Column('site_speed', sa.Float(), nullable=True),
    sa.Column('mobile_friendly', sa.Boolean(), nullable=True),
    sa.Column('technical_issues', sa.JSON(), nullable=True),
    sa.Column('analysis_date', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('data_source', sa.String(), nullable=True),
    sa.Column('is_active_competitor', sa.Boolean(), nullable=False),
    sa.Column('monitoring_frequency', sa.String(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by_id', sa.Integer(), nullable=False),
    sa.ForeignKeyConstraint(['created_by_id'], ['users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_competitor_active', 'competitor_analysis', ['is_active_competitor'], unique=False)
    op.create_index('idx_competitor_org_domain', 'competitor_analysis', ['organization_id', 'competitor_domain'], unique=False)
    op.create_index(op.f('ix_competitor_analysis_competitor_domain'), 'competitor_analysis', ['competitor_domain'], unique=False)
    op.create_index(op.f('ix_competitor_analysis_id'), 'competitor_analysis', ['id'], unique=False)
    op.create_index(op.f('ix_competitor_analysis_organization_id'), 'competitor_analysis', ['organization_id'], unique=False)
    op.create_table('contra_vouchers',
    sa.Column('from_account', sa.String(), nullable=False),
    sa.Column('to_account', sa.String(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('voucher_number', sa.String(), nullable=False),
    sa.Column('date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'voucher_number', name='uq_contra_org_voucher_number')
    )
    op.create_index('idx_contra_org_date', 'contra_vouchers', ['organization_id', 'date'], unique=False)
    op.create_index('idx_contra_org_from_account', 'contra_vouchers', ['organization_id', 'from_account'], unique=False)
    op.create_index('idx_contra_org_to_account', 'contra_vouchers', ['organization_id', 'to_account'], unique=False)
    op.create_index(op.f('ix_contra_vouchers_id'), 'contra_vouchers', ['id'], unique=False)
    op.create_index(op.f('ix_contra_vouchers_organization_id'), 'contra_vouchers', ['organization_id'], unique=False)
    op.create_index(op.f('ix_contra_vouchers_voucher_number'), 'contra_vouchers', ['voucher_number'], unique=False)
    op.create_table('customers',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('company_id', sa.Integer(), nullable=True),
    sa.Column('name', sa.String(), nullable=False),
    sa.Column('contact_number', sa.String(), nullable=False),
    sa.Column('email', sa.String(), nullable=True),
    sa.Column('address1', sa.String(), nullable=False),
    sa.Column('address2', sa.String(), nullable=True),
    sa.Column('city', sa.String(), nullable=False),
    sa.Column('state', sa.String(), nullable=False),
    sa.Column('pin_code', sa.String(), nullable=False),
    sa.Column('state_code', sa.String(), nullable=False),
    sa.Column('gst_number', sa.String(), nullable=True),
    sa.Column('pan_number', sa.String(), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['company_id'], ['companies.id'], name='fk_customer_company_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_customer_organization_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'name', name='uq_customer_org_name')
    )
    op.create_index('idx_customer_org_active', 'customers', ['organization_id', 'is_active'], unique=False)
    op.create_index('idx_customer_org_name', 'customers', ['organization_id', 'name'], unique=False)
    op.create_index(op.f('ix_customers_company_id'), 'customers', ['company_id'], unique=False)
    op.create_index(op.f('ix_customers_id'), 'customers', ['id'], unique=False)
    op.create_index(op.f('ix_customers_name'), 'customers', ['name'], unique=False)
    op.create_index(op.f('ix_customers_organization_id'), 'customers', ['organization_id'], unique=False)
    op.create_table('email_accounts',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('name', sa.String(length=255), nullable=False),
    sa.Column('email_address', sa.String(length=255), nullable=False),
    sa.Column('account_type', sa.Enum('IMAP', 'POP3', 'EXCHANGE', 'GMAIL', 'OUTLOOK', name='emailaccounttype'), nullable=False),
    sa.Column('incoming_server', sa.String(length=255), nullable=True),
    sa.Column('incoming_port', sa.Integer(), nullable=True),
    sa.Column('incoming_ssl', sa.Boolean(), nullable=False),
    sa.Column('outgoing_server', sa.String(length=255), nullable=True),
    sa.Column('outgoing_port', sa.Integer(), nullable=True),
    sa.Column('outgoing_ssl', sa.Boolean(), nullable=False),
    sa.Column('username', sa.String(length=255), nullable=True),
    sa.Column('password_encrypted', sa.Text(), nullable=True),
    sa.Column('oauth_token', sa.Text(), nullable=True),
    sa.Column('oauth_refresh_token', sa.Text(), nullable=True),
    sa.Column('oauth_expires_at', sa.DateTime(), nullable=True),
    sa.Column('sync_enabled', sa.Boolean(), nullable=False),
    sa.Column('sync_frequency_minutes', sa.Integer(), nullable=False),
    sa.Column('sync_folders', sa.JSON(), nullable=True),
    sa.Column('auto_link_to_tasks', sa.Boolean(), nullable=False),
    sa.Column('auto_link_to_calendar', sa.Boolean(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('user_id', sa.Integer(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('last_sync_at', sa.DateTime(), nullable=True),
    sa.Column('last_sync_status', sa.String(length=20), nullable=False),
    sa.Column('last_sync_error', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_email_accounts_email_address'), 'email_accounts', ['email_address'], unique=False)
    op.create_index(op.f('ix_email_accounts_id'), 'email_accounts', ['id'], unique=False)
    op.create_table('email_rules',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('name', sa.String(length=255), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('conditions', sa.JSON(), nullable=False),
    sa.Column('actions', sa.JSON(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('user_id', sa.Integer(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('priority', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_email_rules_id'), 'email_rules', ['id'], unique=False)
    op.create_table('email_templates',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('name', sa.String(length=255), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('subject_template', sa.String(length=500), nullable=False),
    sa.Column('body_text_template', sa.Text(), nullable=True),
    sa.Column('body_html_template', sa.Text(), nullable=True),
    sa.Column('variables', sa.JSON(), nullable=True),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('created_by', sa.Integer(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('is_shared', sa.Boolean(), nullable=False),
    sa.Column('category', sa.String(length=100), nullable=True),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_email_templates_id'), 'email_templates', ['id'], unique=False)
    op.create_index(op.f('ix_email_templates_name'), 'email_templates', ['name'], unique=False)
    op.create_table('employee_profiles',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('user_id', sa.Integer(), nullable=False),
    sa.Column('employee_code', sa.String(), nullable=False),
    sa.Column('employee_type', sa.String(), nullable=False),
    sa.Column('date_of_birth', sa.Date(), nullable=True),
    sa.Column('gender', sa.String(), nullable=True),
    sa.Column('marital_status', sa.String(), nullable=True),
    sa.Column('blood_group', sa.String(), nullable=True),
    sa.Column('nationality', sa.String(), nullable=False),
    sa.Column('personal_email', sa.String(), nullable=True),
    sa.Column('personal_phone', sa.String(), nullable=True),
    sa.Column('emergency_contact_name', sa.String(), nullable=True),
    sa.Column('emergency_contact_phone', sa.String(), nullable=True),
    sa.Column('emergency_contact_relation', sa.String(), nullable=True),
    sa.Column('address_line1', sa.Text(), nullable=True),
    sa.Column('address_line2', sa.Text(), nullable=True),
    sa.Column('city', sa.String(), nullable=True),
    sa.Column('state', sa.String(), nullable=True),
    sa.Column('pin_code', sa.String(), nullable=True),
    sa.Column('country', sa.String(), nullable=True),
    sa.Column('hire_date', sa.Date(), nullable=True),
    sa.Column('confirmation_date', sa.Date(), nullable=True),
    sa.Column('probation_period_months', sa.Integer(), nullable=True),
    sa.Column('reporting_manager_id', sa.Integer(), nullable=True),
    sa.Column('job_title', sa.String(), nullable=True),
    sa.Column('job_level', sa.String(), nullable=True),
    sa.Column('work_location', sa.String(), nullable=True),
    sa.Column('work_type', sa.String(), nullable=False),
    sa.Column('salary_currency', sa.String(), nullable=False),
    sa.Column('pan_number', sa.String(), nullable=True),
    sa.Column('aadhaar_number', sa.String(), nullable=True),
    sa.Column('passport_number', sa.String(), nullable=True),
    sa.Column('driving_license', sa.String(), nullable=True),
    sa.Column('bank_account_number', sa.String(), nullable=True),
    sa.Column('bank_name', sa.String(), nullable=True),
    sa.Column('bank_ifsc', sa.String(), nullable=True),
    sa.Column('bank_branch', sa.String(), nullable=True),
    sa.Column('employment_status', sa.String(), nullable=False),
    sa.Column('resignation_date', sa.Date(), nullable=True),
    sa.Column('last_working_date', sa.Date(), nullable=True),
    sa.Column('resignation_reason', sa.Text(), nullable=True),
    sa.Column('skills', sa.JSON(), nullable=True),
    sa.Column('certifications', sa.JSON(), nullable=True),
    sa.Column('documents', sa.JSON(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by_id', sa.Integer(), nullable=True),
    sa.Column('updated_by_id', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by_id'], ['users.id'], name='fk_employee_profile_created_by_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_employee_profile_organization_id'),
    sa.ForeignKeyConstraint(['reporting_manager_id'], ['users.id'], name='fk_employee_profile_reporting_manager_id'),
    sa.ForeignKeyConstraint(['updated_by_id'], ['users.id'], name='fk_employee_profile_updated_by_id'),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], name='fk_employee_profile_user_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'employee_code', name='uq_employee_profile_org_code')
    )
    op.create_index('idx_employee_profile_employment_status', 'employee_profiles', ['employment_status'], unique=False)
    op.create_index('idx_employee_profile_hire_date', 'employee_profiles', ['hire_date'], unique=False)
    op.create_index('idx_employee_profile_org_user', 'employee_profiles', ['organization_id', 'user_id'], unique=False)
    op.create_index(op.f('ix_employee_profiles_employee_code'), 'employee_profiles', ['employee_code'], unique=False)
    op.create_index(op.f('ix_employee_profiles_id'), 'employee_profiles', ['id'], unique=False)
    op.create_index(op.f('ix_employee_profiles_organization_id'), 'employee_profiles', ['organization_id'], unique=False)
    op.create_index(op.f('ix_employee_profiles_user_id'), 'employee_profiles', ['user_id'], unique=True)
    op.create_table('erp_tax_codes',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('gst_configuration_id', sa.Integer(), nullable=True),
    sa.Column('tax_code', sa.String(length=50), nullable=False),
    sa.Column('tax_name', sa.String(length=200), nullable=False),
    sa.Column('tax_type', sa.Enum('CGST', 'SGST', 'IGST', 'CESS', 'TCS', 'TDS', name='taxtype'), nullable=False),
    sa.Column('tax_rate', sa.Numeric(precision=5, scale=2), nullable=False),
    sa.Column('is_inclusive', sa.Boolean(), nullable=False),
    sa.Column('hsn_sac_code', sa.String(length=20), nullable=True),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('is_default', sa.Boolean(), nullable=False),
    sa.Column('tax_payable_account_id', sa.Integer(), nullable=True),
    sa.Column('tax_input_account_id', sa.Integer(), nullable=True),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.ForeignKeyConstraint(['gst_configuration_id'], ['gst_configuration.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['tax_input_account_id'], ['chart_of_accounts.id'], ),
    sa.ForeignKeyConstraint(['tax_payable_account_id'], ['chart_of_accounts.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'tax_code', name='uq_org_tax_code')
    )
    op.create_index('idx_tax_org_type', 'erp_tax_codes', ['organization_id', 'tax_type'], unique=False)
    op.create_index(op.f('ix_erp_tax_codes_gst_configuration_id'), 'erp_tax_codes', ['gst_configuration_id'], unique=False)
    op.create_index(op.f('ix_erp_tax_codes_hsn_sac_code'), 'erp_tax_codes', ['hsn_sac_code'], unique=False)
    op.create_index(op.f('ix_erp_tax_codes_id'), 'erp_tax_codes', ['id'], unique=False)
    op.create_index(op.f('ix_erp_tax_codes_organization_id'), 'erp_tax_codes', ['organization_id'], unique=False)
    op.create_index(op.f('ix_erp_tax_codes_tax_code'), 'erp_tax_codes', ['tax_code'], unique=False)
    op.create_index(op.f('ix_erp_tax_codes_tax_type'), 'erp_tax_codes', ['tax_type'], unique=False)
    op.create_table('external_integrations',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('company_id', sa.Integer(), nullable=True),
    sa.Column('name', sa.String(length=255), nullable=False),
    sa.Column('provider', sa.String(length=100), nullable=False),
    sa.Column('integration_type', sa.Enum('ERP', 'CRM', 'ECOMMERCE', 'PAYMENT', 'SHIPPING', 'ACCOUNTING', 'EMAIL', 'SMS', 'SOCIAL_MEDIA', 'ANALYTICS', 'STORAGE', 'COMMUNICATION', 'HR', 'MARKETING', name='integrationtype'), nullable=False),
    sa.Column('version', sa.String(length=50), nullable=True),
    sa.Column('status', sa.Enum('ACTIVE', 'INACTIVE', 'FAILED', 'TESTING', 'MAINTENANCE', name='integrationstatus'), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('endpoint_url', sa.String(length=1000), nullable=True),
    sa.Column('auth_type', sa.Enum('API_KEY', 'OAUTH2', 'OAUTH1', 'BASIC_AUTH', 'BEARER_TOKEN', 'CUSTOM', name='authtype'), nullable=False),
    sa.Column('auth_config', sa.JSON(), nullable=True),
    sa.Column('sync_direction', sa.Enum('INBOUND', 'OUTBOUND', 'BIDIRECTIONAL', name='syncdirection'), nullable=False),
    sa.Column('auto_sync_enabled', sa.Boolean(), nullable=False),
    sa.Column('sync_interval_minutes', sa.Integer(), nullable=True),
    sa.Column('rate_limit_per_minute', sa.Integer(), nullable=True),
    sa.Column('batch_size', sa.Integer(), nullable=False),
    sa.Column('retry_count', sa.Integer(), nullable=False),
    sa.Column('timeout_seconds', sa.Integer(), nullable=False),
    sa.Column('last_sync_at', sa.DateTime(), nullable=True),
    sa.Column('next_sync_at', sa.DateTime(), nullable=True),
    sa.Column('total_syncs', sa.Integer(), nullable=False),
    sa.Column('successful_syncs', sa.Integer(), nullable=False),
    sa.Column('created_by', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.ForeignKeyConstraint(['company_id'], ['companies.id'], ),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'name', name='uq_integration_org_name')
    )
    op.create_index('idx_integration_org_provider', 'external_integrations', ['organization_id', 'provider'], unique=False)
    op.create_index('idx_integration_org_status', 'external_integrations', ['organization_id', 'status'], unique=False)
    op.create_index('idx_integration_org_type', 'external_integrations', ['organization_id', 'integration_type'], unique=False)
    op.create_index(op.f('ix_external_integrations_company_id'), 'external_integrations', ['company_id'], unique=False)
    op.create_index(op.f('ix_external_integrations_id'), 'external_integrations', ['id'], unique=False)
    op.create_index(op.f('ix_external_integrations_name'), 'external_integrations', ['name'], unique=False)
    op.create_index(op.f('ix_external_integrations_organization_id'), 'external_integrations', ['organization_id'], unique=False)
    op.create_index(op.f('ix_external_integrations_provider'), 'external_integrations', ['provider'], unique=False)
    op.create_table('financial_forecasts',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('forecast_name', sa.String(length=200), nullable=False),
    sa.Column('forecast_type', sa.String(length=50), nullable=False),
    sa.Column('forecast_method', sa.Enum('HISTORICAL_TREND', 'LINEAR_REGRESSION', 'TIME_SERIES', 'ARIMA', 'DRIVER_BASED', 'ML_ENSEMBLE', 'MANUAL', name='forecastmethodtype'), nullable=False),
    sa.Column('base_period_start', sa.Date(), nullable=False),
    sa.Column('base_period_end', sa.Date(), nullable=False),
    sa.Column('forecast_start', sa.Date(), nullable=False),
    sa.Column('forecast_end', sa.Date(), nullable=False),
    sa.Column('frequency', sa.Enum('MONTHLY', 'QUARTERLY', 'ANNUALLY', name='forecastfrequency'), nullable=False),
    sa.Column('model_parameters', sa.JSON(), nullable=False),
    sa.Column('business_drivers', sa.JSON(), nullable=False),
    sa.Column('historical_data', sa.JSON(), nullable=False),
    sa.Column('forecast_data', sa.JSON(), nullable=False),
    sa.Column('confidence_intervals', sa.JSON(), nullable=True),
    sa.Column('accuracy_metrics', sa.JSON(), nullable=True),
    sa.Column('last_validation_date', sa.Date(), nullable=True),
    sa.Column('validation_period_accuracy', sa.Numeric(precision=5, scale=2), nullable=True),
    sa.Column('status', sa.Enum('DRAFT', 'IN_REVIEW', 'APPROVED', 'PUBLISHED', 'ARCHIVED', name='forecaststatus'), nullable=False),
    sa.Column('is_baseline', sa.Boolean(), nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('created_by_id', sa.Integer(), nullable=True),
    sa.Column('approved_by_id', sa.Integer(), nullable=True),
    sa.Column('approved_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['approved_by_id'], ['users.id'], ),
    sa.ForeignKeyConstraint(['created_by_id'], ['users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_forecast_method_status', 'financial_forecasts', ['forecast_method', 'status'], unique=False)
    op.create_index('idx_forecast_org_type', 'financial_forecasts', ['organization_id', 'forecast_type'], unique=False)
    op.create_index(op.f('ix_financial_forecasts_forecast_method'), 'financial_forecasts', ['forecast_method'], unique=False)
    op.create_index(op.f('ix_financial_forecasts_forecast_type'), 'financial_forecasts', ['forecast_type'], unique=False)
    op.create_index(op.f('ix_financial_forecasts_id'), 'financial_forecasts', ['id'], unique=False)
    op.create_index(op.f('ix_financial_forecasts_organization_id'), 'financial_forecasts', ['organization_id'], unique=False)
    op.create_table('financial_model_templates',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('template_name', sa.String(length=200), nullable=False),
    sa.Column('template_category', sa.String(length=100), nullable=False),
    sa.Column('industry', sa.String(length=100), nullable=True),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('model_type', sa.Enum('DCF', 'TRADING_COMPS', 'TRANSACTION_COMPS', 'ASSET_BASED', 'REVENUE_MULTIPLE', 'EBITDA_MULTIPLE', name='valuationmethodtype'), nullable=False),
    sa.Column('default_assumptions', sa.JSON(), nullable=False),
    sa.Column('projection_structure', sa.JSON(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('is_public', sa.Boolean(), nullable=False),
    sa.Column('complexity_level', sa.String(length=20), nullable=False),
    sa.Column('usage_count', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('created_by_id', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_template_active_public', 'financial_model_templates', ['is_active', 'is_public'], unique=False)
    op.create_index('idx_template_category_industry', 'financial_model_templates', ['template_category', 'industry'], unique=False)
    op.create_index(op.f('ix_financial_model_templates_id'), 'financial_model_templates', ['id'], unique=False)
    op.create_index(op.f('ix_financial_model_templates_industry'), 'financial_model_templates', ['industry'], unique=False)
    op.create_index(op.f('ix_financial_model_templates_template_category'), 'financial_model_templates', ['template_category'], unique=False)
    op.create_index(op.f('ix_financial_model_templates_template_name'), 'financial_model_templates', ['template_name'], unique=False)
    op.create_table('financial_models',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('model_name', sa.String(length=200), nullable=False),
    sa.Column('model_type', sa.Enum('DCF', 'TRADING_COMPS', 'TRANSACTION_COMPS', 'ASSET_BASED', 'REVENUE_MULTIPLE', 'EBITDA_MULTIPLE', name='valuationmethodtype'), nullable=False),
    sa.Column('model_version', sa.String(length=50), nullable=False),
    sa.Column('analysis_start_date', sa.Date(), nullable=False),
    sa.Column('analysis_end_date', sa.Date(), nullable=False),
    sa.Column('forecast_years', sa.Integer(), nullable=False),
    sa.Column('assumptions', sa.JSON(), nullable=False),
    sa.Column('projections', sa.JSON(), nullable=False),
    sa.Column('valuation_results', sa.JSON(), nullable=False),
    sa.Column('is_approved', sa.Boolean(), nullable=False),
    sa.Column('is_template', sa.Boolean(), nullable=False),
    sa.Column('template_category', sa.String(length=100), nullable=True),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('created_by_id', sa.Integer(), nullable=True),
    sa.Column('approved_by_id', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['approved_by_id'], ['users.id'], ),
    sa.ForeignKeyConstraint(['created_by_id'], ['users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_fin_model_org_type', 'financial_models', ['organization_id', 'model_type'], unique=False)
    op.create_index('idx_fin_model_template', 'financial_models', ['is_template', 'template_category'], unique=False)
    op.create_index(op.f('ix_financial_models_id'), 'financial_models', ['id'], unique=False)
    op.create_index(op.f('ix_financial_models_model_type'), 'financial_models', ['model_type'], unique=False)
    op.create_index(op.f('ix_financial_models_organization_id'), 'financial_models', ['organization_id'], unique=False)
    op.create_table('general_ledger',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('transaction_number', sa.String(length=50), nullable=False),
    sa.Column('transaction_date', sa.Date(), nullable=False),
    sa.Column('debit_amount', sa.Numeric(precision=15, scale=2), nullable=False),
    sa.Column('credit_amount', sa.Numeric(precision=15, scale=2), nullable=False),
    sa.Column('account_id', sa.Integer(), nullable=False),
    sa.Column('reference_type', sa.String(length=50), nullable=False),
    sa.Column('reference_id', sa.Integer(), nullable=False),
    sa.Column('cost_center_id', sa.Integer(), nullable=True),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['account_id'], ['chart_of_accounts.id'], ),
    sa.ForeignKeyConstraint(['cost_center_id'], ['cost_centers.id'], ),
    sa.ForeignKeyConstraint(['created_by'], ['platform_users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_gl_org_account_date', 'general_ledger', ['organization_id', 'account_id', 'transaction_date'], unique=False)
    op.create_index('idx_gl_reference', 'general_ledger', ['reference_type', 'reference_id'], unique=False)
    op.create_index('idx_gl_transaction_number', 'general_ledger', ['transaction_number'], unique=False)
    op.create_index(op.f('ix_general_ledger_account_id'), 'general_ledger', ['account_id'], unique=False)
    op.create_index(op.f('ix_general_ledger_id'), 'general_ledger', ['id'], unique=False)
    op.create_index(op.f('ix_general_ledger_organization_id'), 'general_ledger', ['organization_id'], unique=False)
    op.create_index(op.f('ix_general_ledger_reference_id'), 'general_ledger', ['reference_id'], unique=False)
    op.create_index(op.f('ix_general_ledger_transaction_date'), 'general_ledger', ['transaction_date'], unique=False)
    op.create_index(op.f('ix_general_ledger_transaction_number'), 'general_ledger', ['transaction_number'], unique=False)
    op.create_table('google_calendar_integrations',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('user_id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('google_email', sa.String(length=255), nullable=False),
    sa.Column('access_token', sa.Text(), nullable=True),
    sa.Column('refresh_token', sa.Text(), nullable=True),
    sa.Column('token_expires_at', sa.DateTime(), nullable=True),
    sa.Column('sync_enabled', sa.Boolean(), nullable=False),
    sa.Column('sync_direction', sa.String(length=20), nullable=False),
    sa.Column('sync_calendar_ids', sa.JSON(), nullable=True),
    sa.Column('last_sync_at', sa.DateTime(), nullable=True),
    sa.Column('last_sync_status', sa.String(length=20), nullable=False),
    sa.Column('last_sync_error', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_google_calendar_integrations_id'), 'google_calendar_integrations', ['id'], unique=False)
    op.create_table('inter_department_vouchers',
    sa.Column('from_department', sa.String(), nullable=False),
    sa.Column('to_department', sa.String(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('voucher_number', sa.String(), nullable=False),
    sa.Column('date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'voucher_number', name='uq_idv_org_voucher_number')
    )
    op.create_index('idx_idv_org_date', 'inter_department_vouchers', ['organization_id', 'date'], unique=False)
    op.create_index('idx_idv_org_from_dept', 'inter_department_vouchers', ['organization_id', 'from_department'], unique=False)
    op.create_index('idx_idv_org_to_dept', 'inter_department_vouchers', ['organization_id', 'to_department'], unique=False)
    op.create_index(op.f('ix_inter_department_vouchers_id'), 'inter_department_vouchers', ['id'], unique=False)
    op.create_index(op.f('ix_inter_department_vouchers_organization_id'), 'inter_department_vouchers', ['organization_id'], unique=False)
    op.create_index(op.f('ix_inter_department_vouchers_voucher_number'), 'inter_department_vouchers', ['voucher_number'], unique=False)
    op.create_table('job_postings',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('job_title', sa.String(), nullable=False),
    sa.Column('job_code', sa.String(), nullable=False),
    sa.Column('department', sa.String(), nullable=False),
    sa.Column('location', sa.String(), nullable=False),
    sa.Column('employment_type', sa.String(), nullable=False),
    sa.Column('job_description', sa.Text(), nullable=False),
    sa.Column('responsibilities', sa.Text(), nullable=False),
    sa.Column('requirements', sa.Text(), nullable=False),
    sa.Column('qualifications', sa.Text(), nullable=False),
    sa.Column('min_experience', sa.Integer(), nullable=True),
    sa.Column('max_experience', sa.Integer(), nullable=True),
    sa.Column('required_skills', sa.JSON(), nullable=True),
    sa.Column('preferred_skills', sa.JSON(), nullable=True),
    sa.Column('min_salary', sa.Numeric(precision=15, scale=2), nullable=True),
    sa.Column('max_salary', sa.Numeric(precision=15, scale=2), nullable=True),
    sa.Column('salary_currency', sa.String(), nullable=False),
    sa.Column('benefits', sa.Text(), nullable=True),
    sa.Column('posted_date', sa.Date(), nullable=False),
    sa.Column('application_deadline', sa.Date(), nullable=True),
    sa.Column('positions_available', sa.Integer(), nullable=False),
    sa.Column('positions_filled', sa.Integer(), nullable=False),
    sa.Column('status', sa.String(), nullable=False),
    sa.Column('is_internal', sa.Boolean(), nullable=False),
    sa.Column('is_remote', sa.Boolean(), nullable=False),
    sa.Column('hiring_manager_id', sa.Integer(), nullable=False),
    sa.Column('posted_by_id', sa.Integer(), nullable=False),
    sa.Column('external_posting_url', sa.String(), nullable=True),
    sa.Column('posting_platforms', sa.JSON(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['hiring_manager_id'], ['users.id'], name='fk_job_posting_hiring_manager_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_job_posting_organization_id'),
    sa.ForeignKeyConstraint(['posted_by_id'], ['users.id'], name='fk_job_posting_posted_by_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'job_code', name='uq_job_posting_org_code')
    )
    op.create_index('idx_job_posting_deadline', 'job_postings', ['application_deadline'], unique=False)
    op.create_index('idx_job_posting_org_status', 'job_postings', ['organization_id', 'status'], unique=False)
    op.create_index(op.f('ix_job_postings_id'), 'job_postings', ['id'], unique=False)
    op.create_index(op.f('ix_job_postings_job_code'), 'job_postings', ['job_code'], unique=False)
    op.create_index(op.f('ix_job_postings_job_title'), 'job_postings', ['job_title'], unique=False)
    op.create_index(op.f('ix_job_postings_organization_id'), 'job_postings', ['organization_id'], unique=False)
    op.create_table('journal_entries',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('account_id', sa.Integer(), nullable=False),
    sa.Column('entry_number', sa.String(length=50), nullable=False),
    sa.Column('entry_date', sa.Date(), nullable=False),
    sa.Column('debit_amount', sa.Numeric(precision=15, scale=2), nullable=False),
    sa.Column('credit_amount', sa.Numeric(precision=15, scale=2), nullable=False),
    sa.Column('transaction_type', sa.String(length=50), nullable=False),
    sa.Column('transaction_id', sa.Integer(), nullable=False),
    sa.Column('cost_center_id', sa.Integer(), nullable=True),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('reference_number', sa.String(length=50), nullable=True),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['account_id'], ['chart_of_accounts.id'], ),
    sa.ForeignKeyConstraint(['cost_center_id'], ['cost_centers.id'], ),
    sa.ForeignKeyConstraint(['created_by'], ['platform_users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_je_org_date', 'journal_entries', ['organization_id', 'entry_date'], unique=False)
    op.create_index('idx_je_transaction', 'journal_entries', ['transaction_type', 'transaction_id'], unique=False)
    op.create_index(op.f('ix_journal_entries_account_id'), 'journal_entries', ['account_id'], unique=False)
    op.create_index(op.f('ix_journal_entries_entry_date'), 'journal_entries', ['entry_date'], unique=False)
    op.create_index(op.f('ix_journal_entries_entry_number'), 'journal_entries', ['entry_number'], unique=False)
    op.create_index(op.f('ix_journal_entries_id'), 'journal_entries', ['id'], unique=False)
    op.create_index(op.f('ix_journal_entries_organization_id'), 'journal_entries', ['organization_id'], unique=False)
    op.create_index(op.f('ix_journal_entries_reference_number'), 'journal_entries', ['reference_number'], unique=False)
    op.create_index(op.f('ix_journal_entries_transaction_id'), 'journal_entries', ['transaction_id'], unique=False)
    op.create_table('journal_vouchers',
    sa.Column('entries', sa.Text(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('voucher_number', sa.String(), nullable=False),
    sa.Column('date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'voucher_number', name='uq_journal_org_voucher_number')
    )
    op.create_index('idx_journal_org_date', 'journal_vouchers', ['organization_id', 'date'], unique=False)
    op.create_index(op.f('ix_journal_vouchers_id'), 'journal_vouchers', ['id'], unique=False)
    op.create_index(op.f('ix_journal_vouchers_organization_id'), 'journal_vouchers', ['organization_id'], unique=False)
    op.create_index(op.f('ix_journal_vouchers_voucher_number'), 'journal_vouchers', ['voucher_number'], unique=False)
    op.create_table('keyword_analysis',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('keyword', sa.String(), nullable=False),
    sa.Column('search_volume', sa.Integer(), nullable=True),
    sa.Column('competition', sa.String(), nullable=True),
    sa.Column('difficulty', sa.Float(), nullable=True),
    sa.Column('cpc', sa.Float(), nullable=True),
    sa.Column('commercial_intent', sa.String(), nullable=True),
    sa.Column('current_ranking', sa.Integer(), nullable=True),
    sa.Column('target_ranking', sa.Integer(), nullable=True),
    sa.Column('target_page', sa.String(), nullable=True),
    sa.Column('content_gaps', sa.JSON(), nullable=True),
    sa.Column('analysis_date', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('data_source', sa.String(), nullable=True),
    sa.Column('is_target_keyword', sa.Boolean(), nullable=False),
    sa.Column('priority', sa.String(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by_id', sa.Integer(), nullable=False),
    sa.ForeignKeyConstraint(['created_by_id'], ['users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_keyword_org_keyword', 'keyword_analysis', ['organization_id', 'keyword'], unique=False)
    op.create_index('idx_keyword_priority', 'keyword_analysis', ['priority'], unique=False)
    op.create_index('idx_keyword_target', 'keyword_analysis', ['is_target_keyword'], unique=False)
    op.create_index(op.f('ix_keyword_analysis_id'), 'keyword_analysis', ['id'], unique=False)
    op.create_index(op.f('ix_keyword_analysis_keyword'), 'keyword_analysis', ['keyword'], unique=False)
    op.create_index(op.f('ix_keyword_analysis_organization_id'), 'keyword_analysis', ['organization_id'], unique=False)
    op.create_table('learning_paths',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('path_name', sa.String(), nullable=False),
    sa.Column('description', sa.Text(), nullable=False),
    sa.Column('target_role', sa.String(), nullable=True),
    sa.Column('career_level', sa.String(), nullable=False),
    sa.Column('estimated_duration_months', sa.Integer(), nullable=False),
    sa.Column('difficulty_level', sa.String(), nullable=False),
    sa.Column('prerequisites', sa.Text(), nullable=True),
    sa.Column('target_skills', sa.JSON(), nullable=True),
    sa.Column('milestone_skills', sa.JSON(), nullable=True),
    sa.Column('is_mandatory', sa.Boolean(), nullable=False),
    sa.Column('is_self_paced', sa.Boolean(), nullable=False),
    sa.Column('requires_approval', sa.Boolean(), nullable=False),
    sa.Column('status', sa.String(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by_id', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by_id'], ['users.id'], name='fk_learning_path_created_by_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_learning_path_organization_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'path_name', name='uq_learning_path_org_name')
    )
    op.create_index('idx_learning_path_level', 'learning_paths', ['career_level'], unique=False)
    op.create_index('idx_learning_path_org_status', 'learning_paths', ['organization_id', 'status'], unique=False)
    op.create_index(op.f('ix_learning_paths_id'), 'learning_paths', ['id'], unique=False)
    op.create_index(op.f('ix_learning_paths_organization_id'), 'learning_paths', ['organization_id'], unique=False)
    op.create_index(op.f('ix_learning_paths_path_name'), 'learning_paths', ['path_name'], unique=False)
    op.create_table('marketing_lists',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('name', sa.String(), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('list_type', sa.String(), nullable=False),
    sa.Column('segmentation_criteria', sa.JSON(), nullable=True),
    sa.Column('total_contacts', sa.Integer(), nullable=False),
    sa.Column('active_contacts', sa.Integer(), nullable=False),
    sa.Column('opted_out_contacts', sa.Integer(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('last_updated', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by_id', sa.Integer(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['created_by_id'], ['users.id'], name='fk_marketing_list_created_by_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_marketing_list_organization_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'name', name='uq_marketing_list_org_name')
    )
    op.create_index('idx_marketing_list_active', 'marketing_lists', ['is_active'], unique=False)
    op.create_index('idx_marketing_list_org_type', 'marketing_lists', ['organization_id', 'list_type'], unique=False)
    op.create_index(op.f('ix_marketing_lists_id'), 'marketing_lists', ['id'], unique=False)
    op.create_index(op.f('ix_marketing_lists_name'), 'marketing_lists', ['name'], unique=False)
    op.create_index(op.f('ix_marketing_lists_organization_id'), 'marketing_lists', ['organization_id'], unique=False)
    op.create_table('master_tax_codes',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('company_id', sa.Integer(), nullable=True),
    sa.Column('name', sa.String(length=200), nullable=False),
    sa.Column('code', sa.String(length=50), nullable=False),
    sa.Column('tax_type', sa.String(length=50), nullable=False),
    sa.Column('tax_rate', sa.Numeric(precision=5, scale=2), nullable=False),
    sa.Column('is_compound', sa.Boolean(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('components', sa.JSON(), nullable=True),
    sa.Column('tax_account_id', sa.Integer(), nullable=True),
    sa.Column('effective_from', sa.DateTime(), nullable=True),
    sa.Column('effective_to', sa.DateTime(), nullable=True),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('hsn_sac_codes', sa.JSON(), nullable=True),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.Column('updated_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['company_id'], ['companies.id'], ),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['tax_account_id'], ['chart_of_accounts.id'], ),
    sa.ForeignKeyConstraint(['updated_by'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'code', name='uq_tax_code_org_code')
    )
    op.create_index('idx_tax_code_org_type_active', 'master_tax_codes', ['organization_id', 'tax_type', 'is_active'], unique=False)
    op.create_index('idx_tax_code_rate', 'master_tax_codes', ['tax_rate'], unique=False)
    op.create_index(op.f('ix_master_tax_codes_code'), 'master_tax_codes', ['code'], unique=False)
    op.create_index(op.f('ix_master_tax_codes_company_id'), 'master_tax_codes', ['company_id'], unique=False)
    op.create_index(op.f('ix_master_tax_codes_id'), 'master_tax_codes', ['id'], unique=False)
    op.create_index(op.f('ix_master_tax_codes_name'), 'master_tax_codes', ['name'], unique=False)
    op.create_index(op.f('ix_master_tax_codes_organization_id'), 'master_tax_codes', ['organization_id'], unique=False)
    op.create_index(op.f('ix_master_tax_codes_tax_type'), 'master_tax_codes', ['tax_type'], unique=False)
    op.create_table('migration_jobs',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('created_by', sa.Integer(), nullable=False),
    sa.Column('job_name', sa.String(length=200), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('source_type', sa.Enum('TALLY', 'ZOHO', 'CSV', 'JSON', 'EXCEL', 'MANUAL', name='migrationsourcetype'), nullable=False),
    sa.Column('data_types', sa.JSON(), nullable=False),
    sa.Column('source_file_name', sa.String(length=500), nullable=True),
    sa.Column('source_file_path', sa.String(length=1000), nullable=True),
    sa.Column('source_file_size', sa.Integer(), nullable=True),
    sa.Column('source_metadata', sa.JSON(), nullable=True),
    sa.Column('import_config', sa.JSON(), nullable=True),
    sa.Column('conflict_resolution_strategy', sa.String(length=50), nullable=True),
    sa.Column('status', sa.Enum('DRAFT', 'MAPPING', 'VALIDATION', 'APPROVED', 'RUNNING', 'COMPLETED', 'FAILED', 'CANCELLED', 'ROLLED_BACK', name='migrationjobstatus'), nullable=False),
    sa.Column('progress_percentage', sa.Float(), nullable=True),
    sa.Column('total_records', sa.Integer(), nullable=True),
    sa.Column('processed_records', sa.Integer(), nullable=True),
    sa.Column('success_records', sa.Integer(), nullable=True),
    sa.Column('failed_records', sa.Integer(), nullable=True),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('started_at', sa.DateTime(), nullable=True),
    sa.Column('completed_at', sa.DateTime(), nullable=True),
    sa.Column('can_rollback', sa.Boolean(), nullable=True),
    sa.Column('rollback_data', sa.JSON(), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_migration_job_created_by', 'migration_jobs', ['created_by'], unique=False)
    op.create_index('idx_migration_job_org_status', 'migration_jobs', ['organization_id', 'status'], unique=False)
    op.create_index(op.f('ix_migration_jobs_created_by'), 'migration_jobs', ['created_by'], unique=False)
    op.create_index(op.f('ix_migration_jobs_id'), 'migration_jobs', ['id'], unique=False)
    op.create_index(op.f('ix_migration_jobs_organization_id'), 'migration_jobs', ['organization_id'], unique=False)
    op.create_table('ml_forecast_models',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('model_name', sa.String(length=200), nullable=False),
    sa.Column('model_type', sa.String(length=100), nullable=False),
    sa.Column('target_variable', sa.String(length=100), nullable=False),
    sa.Column('features', sa.JSON(), nullable=False),
    sa.Column('hyperparameters', sa.JSON(), nullable=False),
    sa.Column('preprocessing_steps', sa.JSON(), nullable=False),
    sa.Column('training_period_start', sa.Date(), nullable=False),
    sa.Column('training_period_end', sa.Date(), nullable=False),
    sa.Column('training_data_size', sa.Integer(), nullable=False),
    sa.Column('training_accuracy', sa.Numeric(precision=5, scale=2), nullable=True),
    sa.Column('validation_accuracy', sa.Numeric(precision=5, scale=2), nullable=True),
    sa.Column('test_accuracy', sa.Numeric(precision=5, scale=2), nullable=True),
    sa.Column('mae', sa.Numeric(precision=15, scale=2), nullable=True),
    sa.Column('rmse', sa.Numeric(precision=15, scale=2), nullable=True),
    sa.Column('mape', sa.Numeric(precision=5, scale=2), nullable=True),
    sa.Column('feature_importance', sa.JSON(), nullable=True),
    sa.Column('model_file_path', sa.String(length=500), nullable=True),
    sa.Column('model_version', sa.String(length=20), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('is_production', sa.Boolean(), nullable=False),
    sa.Column('trained_at', sa.DateTime(), nullable=False),
    sa.Column('created_by_id', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by_id'], ['users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_ml_model_active_prod', 'ml_forecast_models', ['is_active', 'is_production'], unique=False)
    op.create_index('idx_ml_model_org_type', 'ml_forecast_models', ['organization_id', 'model_type'], unique=False)
    op.create_index(op.f('ix_ml_forecast_models_id'), 'ml_forecast_models', ['id'], unique=False)
    op.create_index(op.f('ix_ml_forecast_models_model_type'), 'ml_forecast_models', ['model_type'], unique=False)
    op.create_index(op.f('ix_ml_forecast_models_organization_id'), 'ml_forecast_models', ['organization_id'], unique=False)
    op.create_table('notification_templates',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('name', sa.String(), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('template_type', sa.String(), nullable=False),
    sa.Column('channel', sa.String(), nullable=False),
    sa.Column('subject', sa.String(), nullable=True),
    sa.Column('body', sa.Text(), nullable=False),
    sa.Column('html_body', sa.Text(), nullable=True),
    sa.Column('trigger_event', sa.String(), nullable=True),
    sa.Column('trigger_conditions', sa.JSON(), nullable=True),
    sa.Column('variables', sa.JSON(), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], name='fk_notification_template_created_by'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_notification_template_organization_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'name', name='uq_notification_template_org_name')
    )
    op.create_index('idx_notification_template_org_channel', 'notification_templates', ['organization_id', 'channel'], unique=False)
    op.create_index('idx_notification_template_org_type', 'notification_templates', ['organization_id', 'template_type'], unique=False)
    op.create_index(op.f('ix_notification_templates_id'), 'notification_templates', ['id'], unique=False)
    op.create_index(op.f('ix_notification_templates_name'), 'notification_templates', ['name'], unique=False)
    op.create_index(op.f('ix_notification_templates_organization_id'), 'notification_templates', ['organization_id'], unique=False)
    op.create_table('oauth_states',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('state', sa.String(length=255), nullable=False),
    sa.Column('provider', sa.Enum('GOOGLE', 'MICROSOFT', 'OUTLOOK', 'GMAIL', name='oauthprovider'), nullable=False),
    sa.Column('user_id', sa.Integer(), nullable=True),
    sa.Column('organization_id', sa.Integer(), nullable=True),
    sa.Column('redirect_uri', sa.String(length=500), nullable=True),
    sa.Column('scope', sa.Text(), nullable=True),
    sa.Column('code_verifier', sa.String(length=255), nullable=True),
    sa.Column('nonce', sa.String(length=255), nullable=True),
    sa.Column('expires_at', sa.DateTime(), nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_oauth_states_id'), 'oauth_states', ['id'], unique=False)
    op.create_index(op.f('ix_oauth_states_organization_id'), 'oauth_states', ['organization_id'], unique=False)
    op.create_index(op.f('ix_oauth_states_state'), 'oauth_states', ['state'], unique=True)
    op.create_index(op.f('ix_oauth_states_user_id'), 'oauth_states', ['user_id'], unique=False)
    op.create_table('organization_approval_settings',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('approval_model', sa.String(), nullable=False),
    sa.Column('level_2_approvers', sa.JSON(), nullable=True),
    sa.Column('auto_approve_threshold', sa.Float(), nullable=True),
    sa.Column('escalation_timeout_hours', sa.Integer(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('updated_by_id', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_approval_settings_organization_id'),
    sa.ForeignKeyConstraint(['updated_by_id'], ['users.id'], name='fk_approval_settings_updated_by_id'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_approval_settings_model', 'organization_approval_settings', ['approval_model'], unique=False)
    op.create_index(op.f('ix_organization_approval_settings_id'), 'organization_approval_settings', ['id'], unique=False)
    op.create_index(op.f('ix_organization_approval_settings_organization_id'), 'organization_approval_settings', ['organization_id'], unique=True)
    op.create_table('organization_roles',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('name', sa.String(), nullable=False),
    sa.Column('display_name', sa.String(), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('hierarchy_level', sa.Integer(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by_id', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by_id'], ['users.id'], name='fk_org_role_created_by_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_org_role_organization_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'name', name='uq_org_role_org_name')
    )
    op.create_index('idx_org_role_hierarchy', 'organization_roles', ['hierarchy_level'], unique=False)
    op.create_index('idx_org_role_org_active', 'organization_roles', ['organization_id', 'is_active'], unique=False)
    op.create_index(op.f('ix_organization_roles_id'), 'organization_roles', ['id'], unique=False)
    op.create_index(op.f('ix_organization_roles_organization_id'), 'organization_roles', ['organization_id'], unique=False)
    op.create_table('payment_terms_extended',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('company_id', sa.Integer(), nullable=True),
    sa.Column('name', sa.String(length=200), nullable=False),
    sa.Column('code', sa.String(length=50), nullable=True),
    sa.Column('payment_days', sa.Integer(), nullable=False),
    sa.Column('is_default', sa.Boolean(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('early_payment_discount_days', sa.Integer(), nullable=True),
    sa.Column('early_payment_discount_rate', sa.Numeric(precision=5, scale=2), nullable=True),
    sa.Column('late_payment_penalty_days', sa.Integer(), nullable=True),
    sa.Column('late_payment_penalty_rate', sa.Numeric(precision=5, scale=2), nullable=True),
    sa.Column('payment_schedule', sa.JSON(), nullable=True),
    sa.Column('credit_limit_amount', sa.Numeric(precision=15, scale=2), nullable=True),
    sa.Column('requires_approval', sa.Boolean(), nullable=False),
    sa.Column('discount_account_id', sa.Integer(), nullable=True),
    sa.Column('penalty_account_id', sa.Integer(), nullable=True),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('terms_conditions', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.Column('updated_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['company_id'], ['companies.id'], ),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['discount_account_id'], ['chart_of_accounts.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['penalty_account_id'], ['chart_of_accounts.id'], ),
    sa.ForeignKeyConstraint(['updated_by'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'code', name='uq_payment_terms_ext_org_code'),
    sa.UniqueConstraint('organization_id', 'name', name='uq_payment_terms_ext_org_name')
    )
    op.create_index('idx_payment_terms_ext_default', 'payment_terms_extended', ['is_default'], unique=False)
    op.create_index('idx_payment_terms_ext_org_active', 'payment_terms_extended', ['organization_id', 'is_active'], unique=False)
    op.create_index(op.f('ix_payment_terms_extended_code'), 'payment_terms_extended', ['code'], unique=False)
    op.create_index(op.f('ix_payment_terms_extended_company_id'), 'payment_terms_extended', ['company_id'], unique=False)
    op.create_index(op.f('ix_payment_terms_extended_id'), 'payment_terms_extended', ['id'], unique=False)
    op.create_index(op.f('ix_payment_terms_extended_name'), 'payment_terms_extended', ['name'], unique=False)
    op.create_index(op.f('ix_payment_terms_extended_organization_id'), 'payment_terms_extended', ['organization_id'], unique=False)
    op.create_table('payment_vouchers',
    sa.Column('entity_id', sa.Integer(), nullable=False),
    sa.Column('entity_type', sa.String(length=50), nullable=False),
    sa.Column('payment_method', sa.String(), nullable=True),
    sa.Column('reference', sa.String(), nullable=True),
    sa.Column('bank_account', sa.String(), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('voucher_number', sa.String(), nullable=False),
    sa.Column('date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'voucher_number', name='uq_pv_payment_org_voucher_number')
    )
    op.create_index('idx_pv_payment_org_date', 'payment_vouchers', ['organization_id', 'date'], unique=False)
    op.create_index('idx_pv_payment_org_entity', 'payment_vouchers', ['organization_id', 'entity_id'], unique=False)
    op.create_index(op.f('ix_payment_vouchers_id'), 'payment_vouchers', ['id'], unique=False)
    op.create_index(op.f('ix_payment_vouchers_organization_id'), 'payment_vouchers', ['organization_id'], unique=False)
    op.create_index(op.f('ix_payment_vouchers_voucher_number'), 'payment_vouchers', ['voucher_number'], unique=False)
    op.create_table('payroll_periods',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('period_name', sa.String(), nullable=False),
    sa.Column('period_start', sa.Date(), nullable=False),
    sa.Column('period_end', sa.Date(), nullable=False),
    sa.Column('payroll_date', sa.Date(), nullable=False),
    sa.Column('status', sa.String(), nullable=False),
    sa.Column('total_employees', sa.Integer(), nullable=False),
    sa.Column('processed_employees', sa.Integer(), nullable=False),
    sa.Column('total_gross_amount', sa.Numeric(precision=15, scale=2), nullable=False),
    sa.Column('total_deductions', sa.Numeric(precision=15, scale=2), nullable=False),
    sa.Column('total_net_amount', sa.Numeric(precision=15, scale=2), nullable=False),
    sa.Column('processed_by_id', sa.Integer(), nullable=True),
    sa.Column('processed_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('finalized_by_id', sa.Integer(), nullable=True),
    sa.Column('finalized_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['finalized_by_id'], ['users.id'], name='fk_payroll_period_finalized_by_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_payroll_period_organization_id'),
    sa.ForeignKeyConstraint(['processed_by_id'], ['users.id'], name='fk_payroll_period_processed_by_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'period_start', 'period_end', name='uq_payroll_period_org_dates')
    )
    op.create_index('idx_payroll_period_dates', 'payroll_periods', ['period_start', 'period_end'], unique=False)
    op.create_index('idx_payroll_period_org_status', 'payroll_periods', ['organization_id', 'status'], unique=False)
    op.create_index(op.f('ix_payroll_periods_id'), 'payroll_periods', ['id'], unique=False)
    op.create_index(op.f('ix_payroll_periods_organization_id'), 'payroll_periods', ['organization_id'], unique=False)
    op.create_table('payroll_settings',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('pay_frequency', sa.String(), nullable=False),
    sa.Column('payroll_start_day', sa.Integer(), nullable=False),
    sa.Column('payroll_cut_off_day', sa.Integer(), nullable=False),
    sa.Column('working_days_per_month', sa.Integer(), nullable=False),
    sa.Column('working_hours_per_day', sa.Numeric(precision=4, scale=2), nullable=False),
    sa.Column('overtime_multiplier', sa.Numeric(precision=3, scale=2), nullable=False),
    sa.Column('pf_enabled', sa.Boolean(), nullable=False),
    sa.Column('employee_pf_rate', sa.Numeric(precision=5, scale=2), nullable=False),
    sa.Column('employer_pf_rate', sa.Numeric(precision=5, scale=2), nullable=False),
    sa.Column('pf_ceiling', sa.Numeric(precision=15, scale=2), nullable=False),
    sa.Column('pt_enabled', sa.Boolean(), nullable=False),
    sa.Column('pt_amount', sa.Numeric(precision=10, scale=2), nullable=False),
    sa.Column('pt_state', sa.String(), nullable=False),
    sa.Column('hra_enabled', sa.Boolean(), nullable=False),
    sa.Column('hra_percentage', sa.Numeric(precision=5, scale=2), nullable=False),
    sa.Column('metro_hra_percentage', sa.Numeric(precision=5, scale=2), nullable=False),
    sa.Column('auto_send_payslips', sa.Boolean(), nullable=False),
    sa.Column('payslip_email_template', sa.Text(), nullable=True),
    sa.Column('custom_settings', sa.JSON(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('updated_by_id', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_payroll_settings_organization_id'),
    sa.ForeignKeyConstraint(['updated_by_id'], ['users.id'], name='fk_payroll_settings_updated_by_id'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_payroll_settings_id'), 'payroll_settings', ['id'], unique=False)
    op.create_index(op.f('ix_payroll_settings_organization_id'), 'payroll_settings', ['organization_id'], unique=True)
    op.create_table('products',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('company_id', sa.Integer(), nullable=True),
    sa.Column('name', sa.String(), nullable=False),
    sa.Column('hsn_code', sa.String(), nullable=True),
    sa.Column('part_number', sa.String(), nullable=True),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('unit_price', sa.Float(), nullable=False),
    sa.Column('gst_rate', sa.Float(), nullable=False),
    sa.Column('is_gst_inclusive', sa.Boolean(), nullable=False),
    sa.Column('reorder_level', sa.Integer(), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('is_manufactured', sa.Boolean(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['company_id'], ['companies.id'], name='fk_product_company_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_product_organization_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'name', name='uq_product_org_name'),
    sa.UniqueConstraint('organization_id', 'part_number', name='uq_product_org_part_number')
    )
    op.create_index('idx_product_org_active', 'products', ['organization_id', 'is_active'], unique=False)
    op.create_index('idx_product_org_hsn', 'products', ['organization_id', 'hsn_code'], unique=False)
    op.create_index('idx_product_org_name', 'products', ['organization_id', 'name'], unique=False)
    op.create_index(op.f('ix_products_company_id'), 'products', ['company_id'], unique=False)
    op.create_index(op.f('ix_products_id'), 'products', ['id'], unique=False)
    op.create_index(op.f('ix_products_name'), 'products', ['name'], unique=False)
    op.create_index(op.f('ix_products_organization_id'), 'products', ['organization_id'], unique=False)
    op.create_table('receipt_vouchers',
    sa.Column('entity_id', sa.Integer(), nullable=False),
    sa.Column('entity_type', sa.String(length=50), nullable=False),
    sa.Column('receipt_method', sa.String(), nullable=True),
    sa.Column('reference', sa.String(), nullable=True),
    sa.Column('bank_account', sa.String(), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('voucher_number', sa.String(), nullable=False),
    sa.Column('date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'voucher_number', name='uq_rv_org_voucher_number')
    )
    op.create_index('idx_rv_org_date', 'receipt_vouchers', ['organization_id', 'date'], unique=False)
    op.create_index('idx_rv_org_entity', 'receipt_vouchers', ['organization_id', 'entity_id'], unique=False)
    op.create_index(op.f('ix_receipt_vouchers_id'), 'receipt_vouchers', ['id'], unique=False)
    op.create_index(op.f('ix_receipt_vouchers_organization_id'), 'receipt_vouchers', ['organization_id'], unique=False)
    op.create_index(op.f('ix_receipt_vouchers_voucher_number'), 'receipt_vouchers', ['voucher_number'], unique=False)
    op.create_table('report_configurations',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('name', sa.String(), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('metric_types', sa.JSON(), nullable=False),
    sa.Column('default_filters', sa.JSON(), nullable=True),
    sa.Column('schedule_enabled', sa.Boolean(), nullable=False),
    sa.Column('schedule_frequency', sa.String(), nullable=True),
    sa.Column('schedule_time', sa.String(), nullable=True),
    sa.Column('schedule_day_of_week', sa.Integer(), nullable=True),
    sa.Column('schedule_day_of_month', sa.Integer(), nullable=True),
    sa.Column('email_recipients', sa.JSON(), nullable=True),
    sa.Column('email_subject_template', sa.String(), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('last_generated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('next_generation_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by_id', sa.Integer(), nullable=False),
    sa.Column('updated_by_id', sa.Integer(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['created_by_id'], ['users.id'], name='fk_report_configuration_created_by_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_report_configuration_organization_id'),
    sa.ForeignKeyConstraint(['updated_by_id'], ['users.id'], name='fk_report_configuration_updated_by_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'name', name='uq_report_configuration_org_name')
    )
    op.create_index('idx_report_configuration_org_active', 'report_configurations', ['organization_id', 'is_active'], unique=False)
    op.create_index('idx_report_configuration_schedule', 'report_configurations', ['schedule_enabled', 'next_generation_at'], unique=False)
    op.create_index(op.f('ix_report_configurations_id'), 'report_configurations', ['id'], unique=False)
    op.create_index(op.f('ix_report_configurations_organization_id'), 'report_configurations', ['organization_id'], unique=False)
    op.create_table('rfq_items',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('rfq_id', sa.Integer(), nullable=False),
    sa.Column('item_code', sa.String(length=100), nullable=False),
    sa.Column('item_name', sa.String(length=200), nullable=False),
    sa.Column('item_description', sa.Text(), nullable=True),
    sa.Column('quantity', sa.Numeric(precision=12, scale=3), nullable=False),
    sa.Column('unit', sa.String(length=20), nullable=False),
    sa.Column('specifications', sa.JSON(), nullable=True),
    sa.Column('required_delivery_date', sa.Date(), nullable=True),
    sa.Column('delivery_location', sa.String(length=200), nullable=True),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.ForeignKeyConstraint(['rfq_id'], ['request_for_quotations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_rfq_items_id'), 'rfq_items', ['id'], unique=False)
    op.create_index(op.f('ix_rfq_items_item_code'), 'rfq_items', ['item_code'], unique=False)
    op.create_index(op.f('ix_rfq_items_rfq_id'), 'rfq_items', ['rfq_id'], unique=False)
    op.create_table('risk_analysis',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('risk_category', sa.String(length=100), nullable=False),
    sa.Column('risk_name', sa.String(length=200), nullable=False),
    sa.Column('risk_description', sa.Text(), nullable=True),
    sa.Column('probability', sa.Numeric(precision=5, scale=2), nullable=False),
    sa.Column('impact_score', sa.Numeric(precision=5, scale=2), nullable=False),
    sa.Column('risk_score', sa.Numeric(precision=5, scale=2), nullable=False),
    sa.Column('potential_financial_impact', sa.Numeric(precision=15, scale=2), nullable=True),
    sa.Column('key_indicators', sa.JSON(), nullable=False),
    sa.Column('threshold_values', sa.JSON(), nullable=False),
    sa.Column('current_indicator_values', sa.JSON(), nullable=True),
    sa.Column('alert_level', sa.String(length=20), nullable=False),
    sa.Column('is_active_alert', sa.Boolean(), nullable=False),
    sa.Column('mitigation_strategies', sa.Text(), nullable=True),
    sa.Column('mitigation_status', sa.String(length=50), nullable=True),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('last_assessed_at', sa.DateTime(), nullable=True),
    sa.Column('created_by_id', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by_id'], ['users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_risk_alert_level', 'risk_analysis', ['alert_level', 'is_active_alert'], unique=False)
    op.create_index('idx_risk_org_category', 'risk_analysis', ['organization_id', 'risk_category'], unique=False)
    op.create_index(op.f('ix_risk_analysis_id'), 'risk_analysis', ['id'], unique=False)
    op.create_index(op.f('ix_risk_analysis_organization_id'), 'risk_analysis', ['organization_id'], unique=False)
    op.create_index(op.f('ix_risk_analysis_risk_category'), 'risk_analysis', ['risk_category'], unique=False)
    op.create_table('sales_forecasts',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('forecast_period', sa.String(), nullable=False),
    sa.Column('period_start', sa.Date(), nullable=False),
    sa.Column('period_end', sa.Date(), nullable=False),
    sa.Column('predicted_revenue', sa.Float(), nullable=False),
    sa.Column('weighted_revenue', sa.Float(), nullable=False),
    sa.Column('committed_revenue', sa.Float(), nullable=False),
    sa.Column('best_case_revenue', sa.Float(), nullable=False),
    sa.Column('worst_case_revenue', sa.Float(), nullable=False),
    sa.Column('total_opportunities', sa.Integer(), nullable=False),
    sa.Column('opportunities_by_stage', sa.JSON(), nullable=False),
    sa.Column('model_version', sa.String(), nullable=False),
    sa.Column('confidence_score', sa.Float(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('created_by_id', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by_id'], ['users.id'], name='fk_sales_forecast_created_by_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_sales_forecast_organization_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'forecast_period', 'period_start', 'period_end', name='uq_sales_forecast_period')
    )
    op.create_index('idx_sales_forecast_org_period', 'sales_forecasts', ['organization_id', 'forecast_period', 'period_start'], unique=False)
    op.create_index(op.f('ix_sales_forecasts_id'), 'sales_forecasts', ['id'], unique=False)
    op.create_index(op.f('ix_sales_forecasts_organization_id'), 'sales_forecasts', ['organization_id'], unique=False)
    op.create_table('sales_pipelines',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('name', sa.String(), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('is_default', sa.Boolean(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('stages', sa.JSON(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by_id', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by_id'], ['users.id'], name='fk_sales_pipeline_created_by_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_sales_pipeline_organization_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'name', name='uq_sales_pipeline_org_name')
    )
    op.create_index('idx_sales_pipeline_org_default', 'sales_pipelines', ['organization_id', 'is_default'], unique=False)
    op.create_index(op.f('ix_sales_pipelines_id'), 'sales_pipelines', ['id'], unique=False)
    op.create_index(op.f('ix_sales_pipelines_organization_id'), 'sales_pipelines', ['organization_id'], unique=False)
    op.create_table('seo_meta_tags',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('page_path', sa.String(), nullable=False),
    sa.Column('page_title', sa.String(), nullable=False),
    sa.Column('title', sa.String(), nullable=False),
    sa.Column('meta_description', sa.Text(), nullable=True),
    sa.Column('meta_keywords', sa.Text(), nullable=True),
    sa.Column('og_title', sa.String(), nullable=True),
    sa.Column('og_description', sa.Text(), nullable=True),
    sa.Column('og_image', sa.String(), nullable=True),
    sa.Column('og_type', sa.String(), nullable=True),
    sa.Column('og_url', sa.String(), nullable=True),
    sa.Column('twitter_card', sa.String(), nullable=True),
    sa.Column('twitter_title', sa.String(), nullable=True),
    sa.Column('twitter_description', sa.Text(), nullable=True),
    sa.Column('twitter_image', sa.String(), nullable=True),
    sa.Column('twitter_site', sa.String(), nullable=True),
    sa.Column('canonical_url', sa.String(), nullable=True),
    sa.Column('robots', sa.String(), nullable=True),
    sa.Column('lang', sa.String(), nullable=False),
    sa.Column('additional_meta', sa.JSON(), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('priority', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by_id', sa.Integer(), nullable=False),
    sa.ForeignKeyConstraint(['created_by_id'], ['users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_seo_meta_active', 'seo_meta_tags', ['is_active'], unique=False)
    op.create_index('idx_seo_meta_org_path', 'seo_meta_tags', ['organization_id', 'page_path'], unique=False)
    op.create_index(op.f('ix_seo_meta_tags_id'), 'seo_meta_tags', ['id'], unique=False)
    op.create_index(op.f('ix_seo_meta_tags_organization_id'), 'seo_meta_tags', ['organization_id'], unique=False)
    op.create_index(op.f('ix_seo_meta_tags_page_path'), 'seo_meta_tags', ['page_path'], unique=False)
    op.create_table('service_role_permissions',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('role_id', sa.Integer(), nullable=False),
    sa.Column('permission_id', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_service_role_permission_organization_id'),
    sa.ForeignKeyConstraint(['permission_id'], ['service_permissions.id'], name='fk_service_role_permission_permission_id'),
    sa.ForeignKeyConstraint(['role_id'], ['service_roles.id'], name='fk_service_role_permission_role_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('role_id', 'permission_id', name='uq_service_role_permission')
    )
    op.create_index('idx_service_role_permission_permission', 'service_role_permissions', ['permission_id'], unique=False)
    op.create_index('idx_service_role_permission_role', 'service_role_permissions', ['role_id'], unique=False)
    op.create_index(op.f('ix_service_role_permissions_id'), 'service_role_permissions', ['id'], unique=False)
    op.create_index(op.f('ix_service_role_permissions_organization_id'), 'service_role_permissions', ['organization_id'], unique=False)
    op.create_table('skills',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('name', sa.String(), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('skill_type', sa.String(), nullable=False),
    sa.Column('category_id', sa.Integer(), nullable=True),
    sa.Column('proficiency_levels', sa.JSON(), nullable=True),
    sa.Column('assessment_criteria', sa.Text(), nullable=True),
    sa.Column('is_certifiable', sa.Boolean(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['category_id'], ['skill_categories.id'], name='fk_skill_category_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_skill_organization_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'name', name='uq_skill_org_name')
    )
    op.create_index('idx_skill_active', 'skills', ['is_active'], unique=False)
    op.create_index('idx_skill_org_type', 'skills', ['organization_id', 'skill_type'], unique=False)
    op.create_index(op.f('ix_skills_id'), 'skills', ['id'], unique=False)
    op.create_index(op.f('ix_skills_name'), 'skills', ['name'], unique=False)
    op.create_index(op.f('ix_skills_organization_id'), 'skills', ['organization_id'], unique=False)
    op.create_table('sla_policies',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('name', sa.String(), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('priority', sa.String(), nullable=True),
    sa.Column('ticket_type', sa.String(), nullable=True),
    sa.Column('customer_tier', sa.String(), nullable=True),
    sa.Column('response_time_hours', sa.Float(), nullable=False),
    sa.Column('resolution_time_hours', sa.Float(), nullable=False),
    sa.Column('escalation_enabled', sa.Boolean(), nullable=False),
    sa.Column('escalation_threshold_percent', sa.Float(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('is_default', sa.Boolean(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by_id', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by_id'], ['users.id'], name='fk_sla_policy_created_by_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_sla_policy_organization_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'name', name='uq_sla_policy_org_name')
    )
    op.create_index('idx_sla_policy_default', 'sla_policies', ['is_default'], unique=False)
    op.create_index('idx_sla_policy_org_active', 'sla_policies', ['organization_id', 'is_active'], unique=False)
    op.create_index('idx_sla_policy_priority', 'sla_policies', ['priority'], unique=False)
    op.create_index('idx_sla_policy_ticket_type', 'sla_policies', ['ticket_type'], unique=False)
    op.create_index(op.f('ix_sla_policies_id'), 'sla_policies', ['id'], unique=False)
    op.create_index(op.f('ix_sla_policies_organization_id'), 'sla_policies', ['organization_id'], unique=False)
    op.create_table('sticky_notes',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('user_id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('title', sa.String(length=200), nullable=False),
    sa.Column('content', sa.Text(), nullable=False),
    sa.Column('color', sa.String(length=20), nullable=False),
    sa.Column('position', sa.JSON(), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_sticky_note_organization_id'),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], name='fk_sticky_note_user_id'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_sticky_notes_id'), 'sticky_notes', ['id'], unique=False)
    op.create_index(op.f('ix_sticky_notes_organization_id'), 'sticky_notes', ['organization_id'], unique=False)
    op.create_index(op.f('ix_sticky_notes_user_id'), 'sticky_notes', ['user_id'], unique=False)
    op.create_table('stock_locations',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('warehouse_id', sa.Integer(), nullable=False),
    sa.Column('location_code', sa.String(length=50), nullable=False),
    sa.Column('location_name', sa.String(length=200), nullable=False),
    sa.Column('location_type', sa.String(length=50), nullable=True),
    sa.Column('parent_location_id', sa.Integer(), nullable=True),
    sa.Column('row_number', sa.String(length=10), nullable=True),
    sa.Column('column_number', sa.String(length=10), nullable=True),
    sa.Column('level_number', sa.String(length=10), nullable=True),
    sa.Column('max_capacity_units', sa.Numeric(precision=12, scale=3), nullable=True),
    sa.Column('max_weight_kg', sa.Numeric(precision=10, scale=2), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('is_pickable', sa.Boolean(), nullable=False),
    sa.Column('is_receivable', sa.Boolean(), nullable=False),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.ForeignKeyConstraint(['parent_location_id'], ['stock_locations.id'], ),
    sa.ForeignKeyConstraint(['warehouse_id'], ['warehouses.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('warehouse_id', 'location_code', name='uq_warehouse_location_code')
    )
    op.create_index(op.f('ix_stock_locations_id'), 'stock_locations', ['id'], unique=False)
    op.create_index(op.f('ix_stock_locations_location_code'), 'stock_locations', ['location_code'], unique=False)
    op.create_index(op.f('ix_stock_locations_parent_location_id'), 'stock_locations', ['parent_location_id'], unique=False)
    op.create_index(op.f('ix_stock_locations_warehouse_id'), 'stock_locations', ['warehouse_id'], unique=False)
    op.create_table('survey_templates',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('name', sa.String(), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('template_type', sa.String(), nullable=False),
    sa.Column('questions', sa.JSON(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('trigger_event', sa.String(), nullable=False),
    sa.Column('trigger_delay_hours', sa.Integer(), nullable=False),
    sa.Column('created_by_id', sa.Integer(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['created_by_id'], ['users.id'], name='fk_survey_template_created_by_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_survey_template_organization_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'name', name='uq_survey_template_org_name')
    )
    op.create_index('idx_survey_template_active', 'survey_templates', ['is_active'], unique=False)
    op.create_index('idx_survey_template_org_type', 'survey_templates', ['organization_id', 'template_type'], unique=False)
    op.create_index('idx_survey_template_trigger', 'survey_templates', ['trigger_event'], unique=False)
    op.create_index(op.f('ix_survey_templates_id'), 'survey_templates', ['id'], unique=False)
    op.create_index(op.f('ix_survey_templates_name'), 'survey_templates', ['name'], unique=False)
    op.create_index(op.f('ix_survey_templates_organization_id'), 'survey_templates', ['organization_id'], unique=False)
    op.create_table('tally_ledger_mappings',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('tally_configuration_id', sa.Integer(), nullable=False),
    sa.Column('chart_of_accounts_id', sa.Integer(), nullable=False),
    sa.Column('tally_ledger_name', sa.String(length=200), nullable=False),
    sa.Column('tally_ledger_guid', sa.String(length=100), nullable=True),
    sa.Column('tally_parent_ledger', sa.String(length=200), nullable=True),
    sa.Column('is_bidirectional', sa.Boolean(), nullable=False),
    sa.Column('erp_to_tally_only', sa.Boolean(), nullable=False),
    sa.Column('tally_to_erp_only', sa.Boolean(), nullable=False),
    sa.Column('last_synced', sa.DateTime(), nullable=True),
    sa.Column('sync_status', sa.Enum('PENDING', 'IN_PROGRESS', 'COMPLETED', 'FAILED', 'PARTIAL', name='syncstatus'), nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.ForeignKeyConstraint(['chart_of_accounts_id'], ['chart_of_accounts.id'], ),
    sa.ForeignKeyConstraint(['tally_configuration_id'], ['tally_configuration.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('tally_configuration_id', 'chart_of_accounts_id', name='uq_tally_ledger_mapping')
    )
    op.create_index('idx_tally_ledger_name', 'tally_ledger_mappings', ['tally_ledger_name'], unique=False)
    op.create_index(op.f('ix_tally_ledger_mappings_chart_of_accounts_id'), 'tally_ledger_mappings', ['chart_of_accounts_id'], unique=False)
    op.create_index(op.f('ix_tally_ledger_mappings_id'), 'tally_ledger_mappings', ['id'], unique=False)
    op.create_index(op.f('ix_tally_ledger_mappings_tally_configuration_id'), 'tally_ledger_mappings', ['tally_configuration_id'], unique=False)
    op.create_index(op.f('ix_tally_ledger_mappings_tally_ledger_guid'), 'tally_ledger_mappings', ['tally_ledger_guid'], unique=False)
    op.create_index(op.f('ix_tally_ledger_mappings_tally_ledger_name'), 'tally_ledger_mappings', ['tally_ledger_name'], unique=False)
    op.create_table('tally_sync_logs',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('tally_configuration_id', sa.Integer(), nullable=False),
    sa.Column('sync_type', sa.String(length=50), nullable=False),
    sa.Column('sync_direction', sa.String(length=20), nullable=False),
    sa.Column('started_at', sa.DateTime(), nullable=False),
    sa.Column('completed_at', sa.DateTime(), nullable=True),
    sa.Column('duration_seconds', sa.Integer(), nullable=True),
    sa.Column('sync_status', sa.Enum('PENDING', 'IN_PROGRESS', 'COMPLETED', 'FAILED', 'PARTIAL', name='syncstatus'), nullable=False),
    sa.Column('records_processed', sa.Integer(), nullable=False),
    sa.Column('records_successful', sa.Integer(), nullable=False),
    sa.Column('records_failed', sa.Integer(), nullable=False),
    sa.Column('error_message', sa.Text(), nullable=True),
    sa.Column('error_details', sa.JSON(), nullable=True),
    sa.Column('sync_summary', sa.JSON(), nullable=True),
    sa.Column('triggered_by', sa.String(length=50), nullable=False),
    sa.Column('user_id', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['tally_configuration_id'], ['tally_configuration.id'], ),
    sa.ForeignKeyConstraint(['user_id'], ['platform_users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_sync_log_started', 'tally_sync_logs', ['started_at'], unique=False)
    op.create_index('idx_sync_log_type_status', 'tally_sync_logs', ['sync_type', 'sync_status'], unique=False)
    op.create_index(op.f('ix_tally_sync_logs_id'), 'tally_sync_logs', ['id'], unique=False)
    op.create_index(op.f('ix_tally_sync_logs_started_at'), 'tally_sync_logs', ['started_at'], unique=False)
    op.create_index(op.f('ix_tally_sync_logs_sync_direction'), 'tally_sync_logs', ['sync_direction'], unique=False)
    op.create_index(op.f('ix_tally_sync_logs_sync_status'), 'tally_sync_logs', ['sync_status'], unique=False)
    op.create_index(op.f('ix_tally_sync_logs_sync_type'), 'tally_sync_logs', ['sync_type'], unique=False)
    op.create_index(op.f('ix_tally_sync_logs_tally_configuration_id'), 'tally_sync_logs', ['tally_configuration_id'], unique=False)
    op.create_index(op.f('ix_tally_sync_logs_triggered_by'), 'tally_sync_logs', ['triggered_by'], unique=False)
    op.create_table('tally_voucher_mappings',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('tally_configuration_id', sa.Integer(), nullable=False),
    sa.Column('erp_voucher_type', sa.String(length=50), nullable=False),
    sa.Column('tally_voucher_type', sa.String(length=100), nullable=False),
    sa.Column('tally_voucher_type_guid', sa.String(length=100), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('field_mappings', sa.JSON(), nullable=True),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.ForeignKeyConstraint(['tally_configuration_id'], ['tally_configuration.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('tally_configuration_id', 'erp_voucher_type', name='uq_tally_voucher_mapping')
    )
    op.create_index('idx_tally_voucher_type', 'tally_voucher_mappings', ['tally_voucher_type'], unique=False)
    op.create_index(op.f('ix_tally_voucher_mappings_erp_voucher_type'), 'tally_voucher_mappings', ['erp_voucher_type'], unique=False)
    op.create_index(op.f('ix_tally_voucher_mappings_id'), 'tally_voucher_mappings', ['id'], unique=False)
    op.create_index(op.f('ix_tally_voucher_mappings_tally_configuration_id'), 'tally_voucher_mappings', ['tally_configuration_id'], unique=False)
    op.create_index(op.f('ix_tally_voucher_mappings_tally_voucher_type'), 'tally_voucher_mappings', ['tally_voucher_type'], unique=False)
    op.create_table('task_projects',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('name', sa.String(length=255), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('color', sa.String(length=7), nullable=True),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('company_id', sa.Integer(), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=False),
    sa.ForeignKeyConstraint(['company_id'], ['companies.id'], ),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_task_projects_id'), 'task_projects', ['id'], unique=False)
    op.create_index(op.f('ix_task_projects_name'), 'task_projects', ['name'], unique=False)
    op.create_table('trading_comparables',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('company_name', sa.String(length=200), nullable=False),
    sa.Column('ticker_symbol', sa.String(length=20), nullable=True),
    sa.Column('industry', sa.String(length=100), nullable=False),
    sa.Column('market_cap', sa.Numeric(precision=15, scale=2), nullable=True),
    sa.Column('revenue_ttm', sa.Numeric(precision=15, scale=2), nullable=True),
    sa.Column('ebitda_ttm', sa.Numeric(precision=15, scale=2), nullable=True),
    sa.Column('net_income_ttm', sa.Numeric(precision=15, scale=2), nullable=True),
    sa.Column('ev_revenue_multiple', sa.Numeric(precision=8, scale=2), nullable=True),
    sa.Column('ev_ebitda_multiple', sa.Numeric(precision=8, scale=2), nullable=True),
    sa.Column('pe_ratio', sa.Numeric(precision=8, scale=2), nullable=True),
    sa.Column('additional_metrics', sa.JSON(), nullable=True),
    sa.Column('data_source', sa.String(length=100), nullable=False),
    sa.Column('as_of_date', sa.Date(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('created_by_id', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by_id'], ['users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_trading_comps_date', 'trading_comparables', ['as_of_date'], unique=False)
    op.create_index('idx_trading_comps_industry', 'trading_comparables', ['industry', 'is_active'], unique=False)
    op.create_index(op.f('ix_trading_comparables_as_of_date'), 'trading_comparables', ['as_of_date'], unique=False)
    op.create_index(op.f('ix_trading_comparables_id'), 'trading_comparables', ['id'], unique=False)
    op.create_index(op.f('ix_trading_comparables_organization_id'), 'trading_comparables', ['organization_id'], unique=False)
    op.create_index(op.f('ix_trading_comparables_ticker_symbol'), 'trading_comparables', ['ticker_symbol'], unique=False)
    op.create_table('training_programs',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('program_name', sa.String(), nullable=False),
    sa.Column('program_code', sa.String(), nullable=False),
    sa.Column('description', sa.Text(), nullable=False),
    sa.Column('objectives', sa.Text(), nullable=False),
    sa.Column('category', sa.String(), nullable=False),
    sa.Column('level', sa.String(), nullable=False),
    sa.Column('delivery_method', sa.String(), nullable=False),
    sa.Column('duration_hours', sa.Integer(), nullable=False),
    sa.Column('duration_days', sa.Integer(), nullable=True),
    sa.Column('max_participants', sa.Integer(), nullable=True),
    sa.Column('min_participants', sa.Integer(), nullable=True),
    sa.Column('prerequisites', sa.Text(), nullable=True),
    sa.Column('target_audience', sa.Text(), nullable=True),
    sa.Column('required_skills', sa.JSON(), nullable=True),
    sa.Column('target_skills', sa.JSON(), nullable=True),
    sa.Column('curriculum', sa.JSON(), nullable=True),
    sa.Column('materials', sa.JSON(), nullable=True),
    sa.Column('assessment_criteria', sa.Text(), nullable=True),
    sa.Column('provider_type', sa.String(), nullable=False),
    sa.Column('provider_name', sa.String(), nullable=True),
    sa.Column('provider_contact', sa.String(), nullable=True),
    sa.Column('cost_per_participant', sa.Numeric(precision=15, scale=2), nullable=True),
    sa.Column('currency', sa.String(), nullable=False),
    sa.Column('provides_certification', sa.Boolean(), nullable=False),
    sa.Column('certification_name', sa.String(), nullable=True),
    sa.Column('certification_validity_months', sa.Integer(), nullable=True),
    sa.Column('status', sa.String(), nullable=False),
    sa.Column('approved_by_id', sa.Integer(), nullable=True),
    sa.Column('approved_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('overall_rating', sa.Numeric(precision=3, scale=2), nullable=True),
    sa.Column('completion_rate', sa.Numeric(precision=5, scale=2), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by_id', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['approved_by_id'], ['users.id'], name='fk_training_program_approved_by_id'),
    sa.ForeignKeyConstraint(['created_by_id'], ['users.id'], name='fk_training_program_created_by_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_training_program_organization_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'program_code', name='uq_training_program_org_code')
    )
    op.create_index('idx_training_program_category', 'training_programs', ['category'], unique=False)
    op.create_index('idx_training_program_org_status', 'training_programs', ['organization_id', 'status'], unique=False)
    op.create_index(op.f('ix_training_programs_id'), 'training_programs', ['id'], unique=False)
    op.create_index(op.f('ix_training_programs_organization_id'), 'training_programs', ['organization_id'], unique=False)
    op.create_index(op.f('ix_training_programs_program_code'), 'training_programs', ['program_code'], unique=False)
    op.create_index(op.f('ix_training_programs_program_name'), 'training_programs', ['program_name'], unique=False)
    op.create_table('transaction_comparables',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('target_company', sa.String(length=200), nullable=False),
    sa.Column('acquirer_company', sa.String(length=200), nullable=False),
    sa.Column('transaction_date', sa.Date(), nullable=False),
    sa.Column('transaction_value', sa.Numeric(precision=15, scale=2), nullable=True),
    sa.Column('industry', sa.String(length=100), nullable=False),
    sa.Column('target_revenue', sa.Numeric(precision=15, scale=2), nullable=True),
    sa.Column('target_ebitda', sa.Numeric(precision=15, scale=2), nullable=True),
    sa.Column('ev_revenue_multiple', sa.Numeric(precision=8, scale=2), nullable=True),
    sa.Column('ev_ebitda_multiple', sa.Numeric(precision=8, scale=2), nullable=True),
    sa.Column('transaction_type', sa.String(length=50), nullable=False),
    sa.Column('control_premium', sa.Numeric(precision=8, scale=2), nullable=True),
    sa.Column('synergies_value', sa.Numeric(precision=15, scale=2), nullable=True),
    sa.Column('transaction_details', sa.JSON(), nullable=True),
    sa.Column('data_source', sa.String(length=100), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('created_by_id', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by_id'], ['users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_transaction_comps_date', 'transaction_comparables', ['transaction_date'], unique=False)
    op.create_index('idx_transaction_comps_industry', 'transaction_comparables', ['industry', 'is_active'], unique=False)
    op.create_index(op.f('ix_transaction_comparables_id'), 'transaction_comparables', ['id'], unique=False)
    op.create_index(op.f('ix_transaction_comparables_organization_id'), 'transaction_comparables', ['organization_id'], unique=False)
    op.create_index(op.f('ix_transaction_comparables_transaction_date'), 'transaction_comparables', ['transaction_date'], unique=False)
    op.create_table('units',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('company_id', sa.Integer(), nullable=True),
    sa.Column('name', sa.String(length=100), nullable=False),
    sa.Column('symbol', sa.String(length=20), nullable=False),
    sa.Column('unit_type', sa.String(length=50), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('is_base_unit', sa.Boolean(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('base_unit_id', sa.Integer(), nullable=True),
    sa.Column('conversion_factor', sa.Numeric(precision=15, scale=6), nullable=False),
    sa.Column('conversion_formula', sa.String(length=500), nullable=True),
    sa.Column('decimal_places', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.Column('updated_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['base_unit_id'], ['units.id'], ),
    sa.ForeignKeyConstraint(['company_id'], ['companies.id'], ),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['updated_by'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'name', name='uq_unit_org_name'),
    sa.UniqueConstraint('organization_id', 'symbol', name='uq_unit_org_symbol')
    )
    op.create_index('idx_unit_base', 'units', ['base_unit_id'], unique=False)
    op.create_index('idx_unit_org_type_active', 'units', ['organization_id', 'unit_type', 'is_active'], unique=False)
    op.create_index(op.f('ix_units_base_unit_id'), 'units', ['base_unit_id'], unique=False)
    op.create_index(op.f('ix_units_company_id'), 'units', ['company_id'], unique=False)
    op.create_index(op.f('ix_units_id'), 'units', ['id'], unique=False)
    op.create_index(op.f('ix_units_name'), 'units', ['name'], unique=False)
    op.create_index(op.f('ix_units_organization_id'), 'units', ['organization_id'], unique=False)
    op.create_index(op.f('ix_units_symbol'), 'units', ['symbol'], unique=False)
    op.create_index(op.f('ix_units_unit_type'), 'units', ['unit_type'], unique=False)
    op.create_table('user_companies',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('user_id', sa.Integer(), nullable=False),
    sa.Column('company_id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('assigned_by_id', sa.Integer(), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('is_company_admin', sa.Boolean(), nullable=False),
    sa.Column('assigned_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['assigned_by_id'], ['users.id'], name='fk_user_company_assigned_by_id'),
    sa.ForeignKeyConstraint(['company_id'], ['companies.id'], name='fk_user_company_company_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_user_company_organization_id'),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], name='fk_user_company_user_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('user_id', 'company_id', name='uq_user_company')
    )
    op.create_index('idx_user_company_active', 'user_companies', ['is_active'], unique=False)
    op.create_index('idx_user_company_admin', 'user_companies', ['is_company_admin'], unique=False)
    op.create_index('idx_user_company_company', 'user_companies', ['company_id'], unique=False)
    op.create_index('idx_user_company_org', 'user_companies', ['organization_id'], unique=False)
    op.create_index('idx_user_company_user', 'user_companies', ['user_id'], unique=False)
    op.create_index(op.f('ix_user_companies_id'), 'user_companies', ['id'], unique=False)
    op.create_index(op.f('ix_user_companies_organization_id'), 'user_companies', ['organization_id'], unique=False)
    op.create_table('user_email_tokens',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('user_id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=True),
    sa.Column('provider', sa.Enum('GOOGLE', 'MICROSOFT', 'OUTLOOK', 'GMAIL', name='oauthprovider'), nullable=False),
    sa.Column('email_address', sa.String(length=255), nullable=False),
    sa.Column('display_name', sa.String(length=255), nullable=True),
    sa.Column('access_token_encrypted', EncryptedPII(), nullable=False),
    sa.Column('refresh_token_encrypted', EncryptedPII(), nullable=True),
    sa.Column('id_token_encrypted', EncryptedPII(), nullable=True),
    sa.Column('scope', sa.Text(), nullable=True),
    sa.Column('token_type', sa.String(length=50), nullable=False),
    sa.Column('expires_at', sa.DateTime(), nullable=True),
    sa.Column('status', sa.Enum('ACTIVE', 'EXPIRED', 'REVOKED', 'REFRESH_FAILED', name='tokenstatus'), nullable=False),
    sa.Column('provider_metadata', sa.JSON(), nullable=True),
    sa.Column('sync_enabled', sa.Boolean(), nullable=False),
    sa.Column('sync_folders', sa.JSON(), nullable=True),
    sa.Column('last_sync_at', sa.DateTime(), nullable=True),
    sa.Column('last_sync_status', sa.String(length=50), nullable=True),
    sa.Column('last_sync_error', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('last_used_at', sa.DateTime(), nullable=True),
    sa.Column('refresh_count', sa.Integer(), nullable=False),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_user_email_tokens_email_address'), 'user_email_tokens', ['email_address'], unique=False)
    op.create_index(op.f('ix_user_email_tokens_id'), 'user_email_tokens', ['id'], unique=False)
    op.create_index(op.f('ix_user_email_tokens_organization_id'), 'user_email_tokens', ['organization_id'], unique=False)
    op.create_index(op.f('ix_user_email_tokens_user_id'), 'user_email_tokens', ['user_id'], unique=False)
    op.create_table('user_service_roles',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('user_id', sa.Integer(), nullable=False),
    sa.Column('role_id', sa.Integer(), nullable=False),
    sa.Column('assigned_by_id', sa.Integer(), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('assigned_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['assigned_by_id'], ['users.id'], name='fk_user_service_role_assigned_by_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_user_service_role_organization_id'),
    sa.ForeignKeyConstraint(['role_id'], ['service_roles.id'], name='fk_user_service_role_role_id'),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], name='fk_user_service_role_user_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('user_id', 'role_id', name='uq_user_service_role')
    )
    op.create_index('idx_user_service_role_active', 'user_service_roles', ['is_active'], unique=False)
    op.create_index('idx_user_service_role_role', 'user_service_roles', ['role_id'], unique=False)
    op.create_index('idx_user_service_role_user', 'user_service_roles', ['user_id'], unique=False)
    op.create_index(op.f('ix_user_service_roles_id'), 'user_service_roles', ['id'], unique=False)
    op.create_index(op.f('ix_user_service_roles_organization_id'), 'user_service_roles', ['organization_id'], unique=False)
    op.create_table('vendors',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('company_id', sa.Integer(), nullable=True),
    sa.Column('name', sa.String(), nullable=False),
    sa.Column('contact_number', sa.String(), nullable=False),
    sa.Column('email', sa.String(), nullable=True),
    sa.Column('address1', sa.String(), nullable=False),
    sa.Column('address2', sa.String(), nullable=True),
    sa.Column('city', sa.String(), nullable=False),
    sa.Column('state', sa.String(), nullable=False),
    sa.Column('pin_code', sa.String(), nullable=False),
    sa.Column('state_code', sa.String(), nullable=False),
    sa.Column('gst_number', sa.String(), nullable=True),
    sa.Column('pan_number', sa.String(), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['company_id'], ['companies.id'], name='fk_vendor_company_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_vendor_organization_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'name', name='uq_vendor_org_name')
    )
    op.create_index('idx_vendor_org_active', 'vendors', ['organization_id', 'is_active'], unique=False)
    op.create_index('idx_vendor_org_name', 'vendors', ['organization_id', 'name'], unique=False)
    op.create_index(op.f('ix_vendors_company_id'), 'vendors', ['company_id'], unique=False)
    op.create_index(op.f('ix_vendors_id'), 'vendors', ['id'], unique=False)
    op.create_index(op.f('ix_vendors_name'), 'vendors', ['name'], unique=False)
    op.create_index(op.f('ix_vendors_organization_id'), 'vendors', ['organization_id'], unique=False)
    op.create_table('webhooks',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('company_id', sa.Integer(), nullable=True),
    sa.Column('name', sa.String(length=255), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('url', sa.String(length=1000), nullable=False),
    sa.Column('status', sa.Enum('ACTIVE', 'INACTIVE', 'FAILED', name='webhookstatus'), nullable=False),
    sa.Column('secret_key', sa.String(length=255), nullable=True),
    sa.Column('events', sa.JSON(), nullable=False),
    sa.Column('entity_types', sa.JSON(), nullable=True),
    sa.Column('headers', sa.JSON(), nullable=True),
    sa.Column('auth_type', sa.String(length=50), nullable=True),
    sa.Column('auth_config', sa.JSON(), nullable=True),
    sa.Column('max_retries', sa.Integer(), nullable=False),
    sa.Column('retry_delay_seconds', sa.Integer(), nullable=False),
    sa.Column('timeout_seconds', sa.Integer(), nullable=False),
    sa.Column('success_status_codes', sa.JSON(), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('last_triggered_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['company_id'], ['companies.id'], ),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'name', name='uq_webhook_org_name')
    )
    op.create_index('idx_webhook_org_events', 'webhooks', ['organization_id'], unique=False)
    op.create_index('idx_webhook_org_status', 'webhooks', ['organization_id', 'status'], unique=False)
    op.create_index(op.f('ix_webhooks_company_id'), 'webhooks', ['company_id'], unique=False)
    op.create_index(op.f('ix_webhooks_id'), 'webhooks', ['id'], unique=False)
    op.create_index(op.f('ix_webhooks_name'), 'webhooks', ['name'], unique=False)
    op.create_index(op.f('ix_webhooks_organization_id'), 'webhooks', ['organization_id'], unique=False)
    op.create_table('workflow_templates',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('company_id', sa.Integer(), nullable=True),
    sa.Column('name', sa.String(length=255), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('category', sa.String(length=100), nullable=True),
    sa.Column('status', sa.Enum('ACTIVE', 'INACTIVE', 'DRAFT', 'ARCHIVED', name='workflowstatus'), nullable=False),
    sa.Column('trigger_type', sa.Enum('MANUAL', 'AUTOMATIC', 'SCHEDULED', 'EVENT_BASED', name='workflowtriggertype'), nullable=False),
    sa.Column('version', sa.String(length=20), nullable=True),
    sa.Column('is_default', sa.Boolean(), nullable=True),
    sa.Column('allow_parallel_execution', sa.Boolean(), nullable=True),
    sa.Column('auto_complete', sa.Boolean(), nullable=True),
    sa.Column('entity_type', sa.String(length=100), nullable=True),
    sa.Column('entity_conditions', sa.JSON(), nullable=True),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('created_by', sa.Integer(), nullable=False),
    sa.ForeignKeyConstraint(['company_id'], ['companies.id'], ),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'name', 'version', name='uq_workflow_template_org_name_version')
    )
    op.create_index('idx_workflow_template_org_category', 'workflow_templates', ['organization_id', 'category'], unique=False)
    op.create_index('idx_workflow_template_org_entity', 'workflow_templates', ['organization_id', 'entity_type'], unique=False)
    op.create_index('idx_workflow_template_org_status', 'workflow_templates', ['organization_id', 'status'], unique=False)
    op.create_index(op.f('ix_workflow_templates_category'), 'workflow_templates', ['category'], unique=False)
    op.create_index(op.f('ix_workflow_templates_company_id'), 'workflow_templates', ['company_id'], unique=False)
    op.create_index(op.f('ix_workflow_templates_id'), 'workflow_templates', ['id'], unique=False)
    op.create_index(op.f('ix_workflow_templates_name'), 'workflow_templates', ['name'], unique=False)
    op.create_index(op.f('ix_workflow_templates_organization_id'), 'workflow_templates', ['organization_id'], unique=False)
    op.create_table('workflow_templates_advanced',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('company_id', sa.Integer(), nullable=True),
    sa.Column('name', sa.String(length=200), nullable=False),
    sa.Column('code', sa.String(length=50), nullable=True),
    sa.Column('category', sa.String(length=100), nullable=False),
    sa.Column('version', sa.String(length=20), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('is_template', sa.Boolean(), nullable=False),
    sa.Column('trigger_type', sa.Enum('MANUAL', 'SCHEDULED', 'EVENT_BASED', 'API_TRIGGER', 'EMAIL_TRIGGER', 'WEBHOOK_TRIGGER', name='workflowtriggertype'), nullable=False),
    sa.Column('trigger_config', sa.JSON(), nullable=True),
    sa.Column('trigger_events', sa.JSON(), nullable=True),
    sa.Column('parallel_execution', sa.Boolean(), nullable=False),
    sa.Column('timeout_minutes', sa.Integer(), nullable=True),
    sa.Column('retry_attempts', sa.Integer(), nullable=False),
    sa.Column('escalation_enabled', sa.Boolean(), nullable=False),
    sa.Column('input_schema', sa.JSON(), nullable=True),
    sa.Column('output_schema', sa.JSON(), nullable=True),
    sa.Column('default_values', sa.JSON(), nullable=True),
    sa.Column('pre_execution_rules', sa.JSON(), nullable=True),
    sa.Column('post_execution_rules', sa.JSON(), nullable=True),
    sa.Column('execution_count', sa.Integer(), nullable=False),
    sa.Column('success_count', sa.Integer(), nullable=False),
    sa.Column('failure_count', sa.Integer(), nullable=False),
    sa.Column('average_execution_time', sa.Float(), nullable=False),
    sa.Column('created_at', sa.DateTime(), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.Column('updated_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['company_id'], ['companies.id'], ),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['updated_by'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'code', name='uq_workflow_template_org_code')
    )
    op.create_index('idx_workflow_template_active', 'workflow_templates_advanced', ['is_active'], unique=False)
    op.create_index('idx_workflow_template_adv_org_category', 'workflow_templates_advanced', ['organization_id', 'category'], unique=False)
    op.create_index(op.f('ix_workflow_templates_advanced_category'), 'workflow_templates_advanced', ['category'], unique=False)
    op.create_index(op.f('ix_workflow_templates_advanced_code'), 'workflow_templates_advanced', ['code'], unique=False)
    op.create_index(op.f('ix_workflow_templates_advanced_company_id'), 'workflow_templates_advanced', ['company_id'], unique=False)
    op.create_index(op.f('ix_workflow_templates_advanced_id'), 'workflow_templates_advanced', ['id'], unique=False)
    op.create_index(op.f('ix_workflow_templates_advanced_name'), 'workflow_templates_advanced', ['name'], unique=False)
    op.create_index(op.f('ix_workflow_templates_advanced_organization_id'), 'workflow_templates_advanced', ['organization_id'], unique=False)
    op.create_table('accounts_payable',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('vendor_id', sa.Integer(), nullable=False),
    sa.Column('invoice_number', sa.String(length=50), nullable=False),
    sa.Column('invoice_date', sa.Date(), nullable=False),
    sa.Column('total_amount', sa.Numeric(precision=15, scale=2), nullable=False),
    sa.Column('paid_amount', sa.Numeric(precision=15, scale=2), nullable=False),
    sa.Column('balance_amount', sa.Numeric(precision=15, scale=2), nullable=False),
    sa.Column('due_date', sa.Date(), nullable=False),
    sa.Column('payment_terms', sa.String(length=100), nullable=True),
    sa.Column('status', sa.String(length=20), nullable=False),
    sa.Column('is_overdue', sa.Boolean(), nullable=False),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['vendor_id'], ['vendors.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'invoice_number', name='uq_org_invoice_number')
    )
    op.create_index('idx_ap_org_vendor', 'accounts_payable', ['organization_id', 'vendor_id'], unique=False)
    op.create_index('idx_ap_status', 'accounts_payable', ['status'], unique=False)
    op.create_index(op.f('ix_accounts_payable_id'), 'accounts_payable', ['id'], unique=False)
    op.create_index(op.f('ix_accounts_payable_invoice_number'), 'accounts_payable', ['invoice_number'], unique=False)
    op.create_index(op.f('ix_accounts_payable_organization_id'), 'accounts_payable', ['organization_id'], unique=False)
    op.create_index(op.f('ix_accounts_payable_vendor_id'), 'accounts_payable', ['vendor_id'], unique=False)
    op.create_table('accounts_receivable',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('customer_id', sa.Integer(), nullable=False),
    sa.Column('invoice_number', sa.String(length=50), nullable=False),
    sa.Column('invoice_date', sa.Date(), nullable=False),
    sa.Column('total_amount', sa.Numeric(precision=15, scale=2), nullable=False),
    sa.Column('received_amount', sa.Numeric(precision=15, scale=2), nullable=False),
    sa.Column('balance_amount', sa.Numeric(precision=15, scale=2), nullable=False),
    sa.Column('due_date', sa.Date(), nullable=False),
    sa.Column('payment_terms', sa.String(length=100), nullable=True),
    sa.Column('status', sa.String(length=20), nullable=False),
    sa.Column('is_overdue', sa.Boolean(), nullable=False),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.ForeignKeyConstraint(['customer_id'], ['customers.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'invoice_number', name='uq_org_ar_invoice_number')
    )
    op.create_index('idx_ar_org_customer', 'accounts_receivable', ['organization_id', 'customer_id'], unique=False)
    op.create_index('idx_ar_status', 'accounts_receivable', ['status'], unique=False)
    op.create_index(op.f('ix_accounts_receivable_customer_id'), 'accounts_receivable', ['customer_id'], unique=False)
    op.create_index(op.f('ix_accounts_receivable_id'), 'accounts_receivable', ['id'], unique=False)
    op.create_index(op.f('ix_accounts_receivable_invoice_number'), 'accounts_receivable', ['invoice_number'], unique=False)
    op.create_index(op.f('ix_accounts_receivable_organization_id'), 'accounts_receivable', ['organization_id'], unique=False)
    op.create_table('ai_insights',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('insight_type', sa.String(), nullable=False),
    sa.Column('title', sa.String(), nullable=False),
    sa.Column('description', sa.Text(), nullable=False),
    sa.Column('category', sa.String(), nullable=False),
    sa.Column('generated_by_model_id', sa.Integer(), nullable=True),
    sa.Column('data_sources', sa.JSON(), nullable=False),
    sa.Column('confidence_level', sa.Float(), nullable=False),
    sa.Column('priority', sa.String(), nullable=False),
    sa.Column('potential_impact_value', sa.Float(), nullable=True),
    sa.Column('implementation_effort', sa.String(), nullable=True),
    sa.Column('recommendations', sa.JSON(), nullable=True),
    sa.Column('action_items', sa.JSON(), nullable=True),
    sa.Column('status', sa.String(), nullable=False),
    sa.Column('assigned_to_id', sa.Integer(), nullable=True),
    sa.Column('user_feedback', sa.Text(), nullable=True),
    sa.Column('feedback_rating', sa.Float(), nullable=True),
    sa.Column('valid_from', sa.DateTime(timezone=True), nullable=False),
    sa.Column('valid_until', sa.DateTime(timezone=True), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('reviewed_by_id', sa.Integer(), nullable=True),
    sa.Column('reviewed_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['assigned_to_id'], ['users.id'], name='fk_ai_insight_assigned_to_id'),
    sa.ForeignKeyConstraint(['generated_by_model_id'], ['ai_models.id'], name='fk_ai_insight_model_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_ai_insight_organization_id'),
    sa.ForeignKeyConstraint(['reviewed_by_id'], ['users.id'], name='fk_ai_insight_reviewed_by_id'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_ai_insight_org_active', 'ai_insights', ['organization_id', 'is_active'], unique=False)
    op.create_index('idx_ai_insight_org_category', 'ai_insights', ['organization_id', 'category'], unique=False)
    op.create_index('idx_ai_insight_org_priority', 'ai_insights', ['organization_id', 'priority'], unique=False)
    op.create_index('idx_ai_insight_org_status', 'ai_insights', ['organization_id', 'status'], unique=False)
    op.create_index('idx_ai_insight_org_type', 'ai_insights', ['organization_id', 'insight_type'], unique=False)
    op.create_index(op.f('ix_ai_insights_category'), 'ai_insights', ['category'], unique=False)
    op.create_index(op.f('ix_ai_insights_id'), 'ai_insights', ['id'], unique=False)
    op.create_index(op.f('ix_ai_insights_insight_type'), 'ai_insights', ['insight_type'], unique=False)
    op.create_index(op.f('ix_ai_insights_organization_id'), 'ai_insights', ['organization_id'], unique=False)
    op.create_table('analytics_summaries',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('summary_type', sa.String(), nullable=False),
    sa.Column('summary_date', sa.Date(), nullable=False),
    sa.Column('total_jobs', sa.Integer(), nullable=False),
    sa.Column('completed_jobs', sa.Integer(), nullable=False),
    sa.Column('pending_jobs', sa.Integer(), nullable=False),
    sa.Column('cancelled_jobs', sa.Integer(), nullable=False),
    sa.Column('total_completion_time_hours', sa.Float(), nullable=True),
    sa.Column('average_completion_time_hours', sa.Float(), nullable=True),
    sa.Column('total_feedback_received', sa.Integer(), nullable=False),
    sa.Column('average_overall_rating', sa.Float(), nullable=True),
    sa.Column('average_service_quality', sa.Float(), nullable=True),
    sa.Column('average_technician_rating', sa.Float(), nullable=True),
    sa.Column('sla_met_count', sa.Integer(), nullable=False),
    sa.Column('sla_breached_count', sa.Integer(), nullable=False),
    sa.Column('sla_compliance_rate', sa.Float(), nullable=True),
    sa.Column('technician_id', sa.Integer(), nullable=True),
    sa.Column('customer_id', sa.Integer(), nullable=True),
    sa.Column('summary_data', sa.JSON(), nullable=True),
    sa.Column('calculated_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['customer_id'], ['customers.id'], name='fk_analytics_summary_customer_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_analytics_summary_organization_id'),
    sa.ForeignKeyConstraint(['technician_id'], ['users.id'], name='fk_analytics_summary_technician_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'summary_type', 'summary_date', 'technician_id', 'customer_id', name='uq_analytics_summary_org_type_date_entities')
    )
    op.create_index('idx_analytics_summary_customer', 'analytics_summaries', ['customer_id'], unique=False)
    op.create_index('idx_analytics_summary_org_type_date', 'analytics_summaries', ['organization_id', 'summary_type', 'summary_date'], unique=False)
    op.create_index('idx_analytics_summary_technician', 'analytics_summaries', ['technician_id'], unique=False)
    op.create_index(op.f('ix_analytics_summaries_id'), 'analytics_summaries', ['id'], unique=False)
    op.create_index(op.f('ix_analytics_summaries_organization_id'), 'analytics_summaries', ['organization_id'], unique=False)
    op.create_index(op.f('ix_analytics_summaries_summary_date'), 'analytics_summaries', ['summary_date'], unique=False)
    op.create_index(op.f('ix_analytics_summaries_summary_type'), 'analytics_summaries', ['summary_type'], unique=False)
    op.create_table('anomaly_detections',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('model_id', sa.Integer(), nullable=False),
    sa.Column('anomaly_type', sa.String(), nullable=False),
    sa.Column('severity', sa.String(), nullable=False),
    sa.Column('anomaly_score', sa.Float(), nullable=False),
    sa.Column('threshold_used', sa.Float(), nullable=False),
    sa.Column('data_source', sa.String(), nullable=False),
    sa.Column('data_snapshot', sa.JSON(), nullable=False),
    sa.Column('affected_metrics', sa.JSON(), nullable=False),
    sa.Column('business_impact', sa.String(), nullable=True),
    sa.Column('estimated_impact_value', sa.Float(), nullable=True),
    sa.Column('alert_status', sa.String(), nullable=False),
    sa.Column('assigned_to_id', sa.Integer(), nullable=True),
    sa.Column('resolution_notes', sa.Text(), nullable=True),
    sa.Column('resolved_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('detected_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('data_timestamp', sa.DateTime(timezone=True), nullable=False),
    sa.ForeignKeyConstraint(['assigned_to_id'], ['users.id'], name='fk_anomaly_detection_assigned_to_id'),
    sa.ForeignKeyConstraint(['model_id'], ['ai_models.id'], name='fk_anomaly_detection_model_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_anomaly_detection_organization_id'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_anomaly_detection_org_detected', 'anomaly_detections', ['organization_id', 'detected_at'], unique=False)
    op.create_index('idx_anomaly_detection_org_severity', 'anomaly_detections', ['organization_id', 'severity'], unique=False)
    op.create_index('idx_anomaly_detection_org_status', 'anomaly_detections', ['organization_id', 'alert_status'], unique=False)
    op.create_index('idx_anomaly_detection_org_type', 'anomaly_detections', ['organization_id', 'anomaly_type'], unique=False)
    op.create_index(op.f('ix_anomaly_detections_anomaly_type'), 'anomaly_detections', ['anomaly_type'], unique=False)
    op.create_index(op.f('ix_anomaly_detections_id'), 'anomaly_detections', ['id'], unique=False)
    op.create_index(op.f('ix_anomaly_detections_model_id'), 'anomaly_detections', ['model_id'], unique=False)
    op.create_index(op.f('ix_anomaly_detections_organization_id'), 'anomaly_detections', ['organization_id'], unique=False)
    op.create_index(op.f('ix_anomaly_detections_severity'), 'anomaly_detections', ['severity'], unique=False)
    op.create_table('api_errors',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('api_key_id', sa.Integer(), nullable=True),
    sa.Column('error_code', sa.String(length=100), nullable=False),
    sa.Column('error_message', sa.Text(), nullable=False),
    sa.Column('stack_trace', sa.Text(), nullable=True),
    sa.Column('endpoint', sa.String(length=500), nullable=False),
    sa.Column('method', sa.String(length=10), nullable=False),
    sa.Column('request_ip', sa.String(length=45), nullable=False),
    sa.Column('user_agent', sa.Text(), nullable=True),
    sa.Column('error_type', sa.String(length=100), nullable=False),
    sa.Column('severity', sa.Enum('INFO', 'WARNING', 'ERROR', 'DEBUG', name='loglevel'), nullable=False),
    sa.Column('is_resolved', sa.Boolean(), nullable=False),
    sa.Column('resolved_by', sa.Integer(), nullable=True),
    sa.Column('resolved_at', sa.DateTime(), nullable=True),
    sa.Column('resolution_notes', sa.Text(), nullable=True),
    sa.Column('occurred_at', sa.DateTime(), nullable=False),
    sa.Column('request_id', sa.String(length=100), nullable=True),
    sa.ForeignKeyConstraint(['api_key_id'], ['api_keys.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['resolved_by'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_api_error_org_occurred', 'api_errors', ['organization_id', 'occurred_at'], unique=False)
    op.create_index('idx_api_error_org_resolved', 'api_errors', ['organization_id', 'is_resolved'], unique=False)
    op.create_index('idx_api_error_org_severity', 'api_errors', ['organization_id', 'severity'], unique=False)
    op.create_index('idx_api_error_org_type', 'api_errors', ['organization_id', 'error_type'], unique=False)
    op.create_index(op.f('ix_api_errors_endpoint'), 'api_errors', ['endpoint'], unique=False)
    op.create_index(op.f('ix_api_errors_error_code'), 'api_errors', ['error_code'], unique=False)
    op.create_index(op.f('ix_api_errors_error_type'), 'api_errors', ['error_type'], unique=False)
    op.create_index(op.f('ix_api_errors_id'), 'api_errors', ['id'], unique=False)
    op.create_index(op.f('ix_api_errors_occurred_at'), 'api_errors', ['occurred_at'], unique=False)
    op.create_index(op.f('ix_api_errors_organization_id'), 'api_errors', ['organization_id'], unique=False)
    op.create_index(op.f('ix_api_errors_request_id'), 'api_errors', ['request_id'], unique=False)
    op.create_table('api_usage_logs',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('api_key_id', sa.Integer(), nullable=True),
    sa.Column('endpoint', sa.String(length=500), nullable=False),
    sa.Column('method', sa.String(length=10), nullable=False),
    sa.Column('request_ip', sa.String(length=45), nullable=False),
    sa.Column('user_agent', sa.Text(), nullable=True),
    sa.Column('request_headers', sa.JSON(), nullable=True),
    sa.Column('request_body_size', sa.Integer(), nullable=True),
    sa.Column('status_code', sa.Integer(), nullable=False),
    sa.Column('response_size', sa.Integer(), nullable=True),
    sa.Column('response_time_ms', sa.Float(), nullable=False),
    sa.Column('error_message', sa.Text(), nullable=True),
    sa.Column('stack_trace', sa.Text(), nullable=True),
    sa.Column('timestamp', sa.DateTime(), nullable=False),
    sa.Column('request_id', sa.String(length=100), nullable=True),
    sa.ForeignKeyConstraint(['api_key_id'], ['api_keys.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_api_usage_org_api_key', 'api_usage_logs', ['organization_id', 'api_key_id'], unique=False)
    op.create_index('idx_api_usage_org_endpoint', 'api_usage_logs', ['organization_id', 'endpoint'], unique=False)
    op.create_index('idx_api_usage_org_status', 'api_usage_logs', ['organization_id', 'status_code'], unique=False)
    op.create_index('idx_api_usage_org_timestamp', 'api_usage_logs', ['organization_id', 'timestamp'], unique=False)
    op.create_index(op.f('ix_api_usage_logs_endpoint'), 'api_usage_logs', ['endpoint'], unique=False)
    op.create_index(op.f('ix_api_usage_logs_id'), 'api_usage_logs', ['id'], unique=False)
    op.create_index(op.f('ix_api_usage_logs_organization_id'), 'api_usage_logs', ['organization_id'], unique=False)
    op.create_index(op.f('ix_api_usage_logs_request_id'), 'api_usage_logs', ['request_id'], unique=False)
    op.create_index(op.f('ix_api_usage_logs_request_ip'), 'api_usage_logs', ['request_ip'], unique=False)
    op.create_index(op.f('ix_api_usage_logs_status_code'), 'api_usage_logs', ['status_code'], unique=False)
    op.create_index(op.f('ix_api_usage_logs_timestamp'), 'api_usage_logs', ['timestamp'], unique=False)
    op.create_table('assets',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('asset_code', sa.String(), nullable=False),
    sa.Column('asset_name', sa.String(), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('category', sa.String(), nullable=False),
    sa.Column('subcategory', sa.String(), nullable=True),
    sa.Column('manufacturer', sa.String(), nullable=True),
    sa.Column('model', sa.String(), nullable=True),
    sa.Column('serial_number', sa.String(), nullable=True),
    sa.Column('year_of_manufacture', sa.Integer(), nullable=True),
    sa.Column('purchase_cost', sa.Float(), nullable=True),
    sa.Column('purchase_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('vendor_id', sa.Integer(), nullable=True),
    sa.Column('warranty_start_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('warranty_end_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('location', sa.String(), nullable=True),
    sa.Column('department', sa.String(), nullable=True),
    sa.Column('assigned_to_employee', sa.String(), nullable=True),
    sa.Column('status', sa.Enum('ACTIVE', 'INACTIVE', 'MAINTENANCE', 'RETIRED', 'DISPOSED', name='assetstatus'), nullable=False),
    sa.Column('condition', sa.Enum('EXCELLENT', 'GOOD', 'FAIR', 'POOR', 'CRITICAL', name='assetcondition'), nullable=False),
    sa.Column('last_inspection_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('next_inspection_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('specifications', sa.Text(), nullable=True),
    sa.Column('operating_capacity', sa.String(), nullable=True),
    sa.Column('power_rating', sa.String(), nullable=True),
    sa.Column('depreciation_method', sa.Enum('STRAIGHT_LINE', 'DECLINING_BALANCE', 'UNITS_OF_PRODUCTION', 'SUM_OF_YEARS', name='depreciationmethod'), nullable=True),
    sa.Column('useful_life_years', sa.Integer(), nullable=True),
    sa.Column('salvage_value', sa.Float(), nullable=True),
    sa.Column('depreciation_rate', sa.Float(), nullable=True),
    sa.Column('insurance_provider', sa.String(), nullable=True),
    sa.Column('insurance_policy_number', sa.String(), nullable=True),
    sa.Column('insurance_expiry_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('photo_path', sa.String(), nullable=True),
    sa.Column('document_path', sa.String(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['vendor_id'], ['vendors.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'asset_code', name='uq_asset_org_code')
    )
    op.create_index('idx_asset_org_category', 'assets', ['organization_id', 'category'], unique=False)
    op.create_index('idx_asset_org_created', 'assets', ['organization_id', 'created_at'], unique=False)
    op.create_index('idx_asset_org_location', 'assets', ['organization_id', 'location'], unique=False)
    op.create_index('idx_asset_org_status', 'assets', ['organization_id', 'status'], unique=False)
    op.create_index(op.f('ix_assets_id'), 'assets', ['id'], unique=False)
    op.create_index(op.f('ix_assets_organization_id'), 'assets', ['organization_id'], unique=False)
    op.create_table('attendance_records',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('employee_id', sa.Integer(), nullable=False),
    sa.Column('attendance_date', sa.Date(), nullable=False),
    sa.Column('check_in_time', sa.Time(), nullable=True),
    sa.Column('check_out_time', sa.Time(), nullable=True),
    sa.Column('break_start_time', sa.Time(), nullable=True),
    sa.Column('break_end_time', sa.Time(), nullable=True),
    sa.Column('total_hours', sa.Numeric(precision=5, scale=2), nullable=True),
    sa.Column('overtime_hours', sa.Numeric(precision=5, scale=2), nullable=True),
    sa.Column('break_hours', sa.Numeric(precision=5, scale=2), nullable=True),
    sa.Column('attendance_status', sa.String(), nullable=False),
    sa.Column('work_type', sa.String(), nullable=False),
    sa.Column('check_in_location', sa.String(), nullable=True),
    sa.Column('check_out_location', sa.String(), nullable=True),
    sa.Column('check_in_device', sa.String(), nullable=True),
    sa.Column('is_approved', sa.Boolean(), nullable=False),
    sa.Column('approved_by_id', sa.Integer(), nullable=True),
    sa.Column('approved_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('employee_remarks', sa.Text(), nullable=True),
    sa.Column('manager_remarks', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['approved_by_id'], ['users.id'], name='fk_attendance_record_approved_by_id'),
    sa.ForeignKeyConstraint(['employee_id'], ['employee_profiles.id'], name='fk_attendance_record_employee_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_attendance_record_organization_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'employee_id', 'attendance_date', name='uq_attendance_record_emp_date')
    )
    op.create_index('idx_attendance_record_org_date', 'attendance_records', ['organization_id', 'attendance_date'], unique=False)
    op.create_index('idx_attendance_record_status', 'attendance_records', ['attendance_status'], unique=False)
    op.create_index(op.f('ix_attendance_records_attendance_date'), 'attendance_records', ['attendance_date'], unique=False)
    op.create_index(op.f('ix_attendance_records_employee_id'), 'attendance_records', ['employee_id'], unique=False)
    op.create_index(op.f('ix_attendance_records_id'), 'attendance_records', ['id'], unique=False)
    op.create_index(op.f('ix_attendance_records_organization_id'), 'attendance_records', ['organization_id'], unique=False)
    op.create_table('bank_reconciliations',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('bank_account_id', sa.Integer(), nullable=False),
    sa.Column('reconciliation_date', sa.Date(), nullable=False),
    sa.Column('statement_date', sa.Date(), nullable=False),
    sa.Column('bank_balance', sa.Numeric(precision=15, scale=2), nullable=False),
    sa.Column('book_balance', sa.Numeric(precision=15, scale=2), nullable=False),
    sa.Column('outstanding_deposits', sa.Numeric(precision=15, scale=2), nullable=False),
    sa.Column('outstanding_checks', sa.Numeric(precision=15, scale=2), nullable=False),
    sa.Column('bank_charges', sa.Numeric(precision=15, scale=2), nullable=False),
    sa.Column('interest_earned', sa.Numeric(precision=15, scale=2), nullable=False),
    sa.Column('status', sa.String(length=20), nullable=False),
    sa.Column('difference_amount', sa.Numeric(precision=15, scale=2), nullable=False),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['bank_account_id'], ['bank_accounts.id'], ),
    sa.ForeignKeyConstraint(['created_by'], ['platform_users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_recon_org_date', 'bank_reconciliations', ['organization_id', 'reconciliation_date'], unique=False)
    op.create_index('idx_recon_status', 'bank_reconciliations', ['status'], unique=False)
    op.create_index(op.f('ix_bank_reconciliations_bank_account_id'), 'bank_reconciliations', ['bank_account_id'], unique=False)
    op.create_index(op.f('ix_bank_reconciliations_id'), 'bank_reconciliations', ['id'], unique=False)
    op.create_index(op.f('ix_bank_reconciliations_organization_id'), 'bank_reconciliations', ['organization_id'], unique=False)
    op.create_index(op.f('ix_bank_reconciliations_reconciliation_date'), 'bank_reconciliations', ['reconciliation_date'], unique=False)
    op.create_table('bill_of_materials',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('bom_name', sa.String(), nullable=False),
    sa.Column('output_item_id', sa.Integer(), nullable=False),
    sa.Column('output_quantity', sa.Float(), nullable=False),
    sa.Column('version', sa.String(), nullable=True),
    sa.Column('validity_start', sa.DateTime(timezone=True), nullable=True),
    sa.Column('validity_end', sa.DateTime(timezone=True), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('material_cost', sa.Float(), nullable=True),
    sa.Column('labor_cost', sa.Float(), nullable=True),
    sa.Column('overhead_cost', sa.Float(), nullable=True),
    sa.Column('total_cost', sa.Float(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['output_item_id'], ['products.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'bom_name', 'version', name='uq_bom_org_name_version')
    )
    op.create_index('idx_bom_org_active', 'bill_of_materials', ['organization_id', 'is_active'], unique=False)
    op.create_index('idx_bom_org_created', 'bill_of_materials', ['organization_id', 'created_at'], unique=False)
    op.create_index('idx_bom_org_output', 'bill_of_materials', ['organization_id', 'output_item_id'], unique=False)
    op.create_index(op.f('ix_bill_of_materials_id'), 'bill_of_materials', ['id'], unique=False)
    op.create_index(op.f('ix_bill_of_materials_organization_id'), 'bill_of_materials', ['organization_id'], unique=False)
    op.create_table('business_driver_models',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('financial_forecast_id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('driver_name', sa.String(length=200), nullable=False),
    sa.Column('driver_category', sa.String(length=100), nullable=False),
    sa.Column('driver_type', sa.String(length=50), nullable=False),
    sa.Column('historical_values', sa.JSON(), nullable=False),
    sa.Column('projected_values', sa.JSON(), nullable=False),
    sa.Column('correlation_metrics', sa.JSON(), nullable=True),
    sa.Column('impact_formula', sa.Text(), nullable=False),
    sa.Column('elasticity', sa.Numeric(precision=8, scale=4), nullable=True),
    sa.Column('data_source', sa.String(length=100), nullable=True),
    sa.Column('external_api_endpoint', sa.String(length=500), nullable=True),
    sa.Column('last_sync_date', sa.DateTime(), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('created_by_id', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by_id'], ['users.id'], ),
    sa.ForeignKeyConstraint(['financial_forecast_id'], ['financial_forecasts.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_driver_forecast_category', 'business_driver_models', ['financial_forecast_id', 'driver_category'], unique=False)
    op.create_index(op.f('ix_business_driver_models_driver_category'), 'business_driver_models', ['driver_category'], unique=False)
    op.create_index(op.f('ix_business_driver_models_financial_forecast_id'), 'business_driver_models', ['financial_forecast_id'], unique=False)
    op.create_index(op.f('ix_business_driver_models_id'), 'business_driver_models', ['id'], unique=False)
    op.create_index(op.f('ix_business_driver_models_organization_id'), 'business_driver_models', ['organization_id'], unique=False)
    op.create_table('business_rule_executions',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('business_rule_id', sa.Integer(), nullable=False),
    sa.Column('entity_type', sa.String(length=100), nullable=True),
    sa.Column('entity_id', sa.Integer(), nullable=True),
    sa.Column('execution_context', sa.JSON(), nullable=True),
    sa.Column('started_at', sa.DateTime(), server_default=sa.text('now()'), nullable=False),
    sa.Column('completed_at', sa.DateTime(), nullable=True),
    sa.Column('execution_time_ms', sa.Integer(), nullable=True),
    sa.Column('success', sa.Boolean(), nullable=False),
    sa.Column('result_data', sa.JSON(), nullable=True),
    sa.Column('error_message', sa.Text(), nullable=True),
    sa.Column('triggered_by_user', sa.Integer(), nullable=True),
    sa.Column('triggered_by_system', sa.String(length=100), nullable=True),
    sa.Column('created_at', sa.DateTime(), server_default=sa.text('now()'), nullable=False),
    sa.ForeignKeyConstraint(['business_rule_id'], ['business_rules.id'], ),
    sa.ForeignKeyConstraint(['triggered_by_user'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_business_rule_execution_date', 'business_rule_executions', ['started_at'], unique=False)
    op.create_index('idx_business_rule_execution_entity', 'business_rule_executions', ['entity_type', 'entity_id'], unique=False)
    op.create_index('idx_business_rule_execution_rule', 'business_rule_executions', ['business_rule_id'], unique=False)
    op.create_index(op.f('ix_business_rule_executions_business_rule_id'), 'business_rule_executions', ['business_rule_id'], unique=False)
    op.create_index(op.f('ix_business_rule_executions_entity_id'), 'business_rule_executions', ['entity_id'], unique=False)
    op.create_index(op.f('ix_business_rule_executions_entity_type'), 'business_rule_executions', ['entity_type'], unique=False)
    op.create_index(op.f('ix_business_rule_executions_id'), 'business_rule_executions', ['id'], unique=False)
    op.create_table('calendar_shares',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('calendar_id', sa.Integer(), nullable=False),
    sa.Column('user_id', sa.Integer(), nullable=False),
    sa.Column('permission', sa.String(length=20), nullable=False),
    sa.Column('can_create_events', sa.Boolean(), nullable=False),
    sa.Column('can_edit_events', sa.Boolean(), nullable=False),
    sa.Column('can_delete_events', sa.Boolean(), nullable=False),
    sa.Column('shared_at', sa.DateTime(), nullable=False),
    sa.Column('shared_by', sa.Integer(), nullable=False),
    sa.ForeignKeyConstraint(['calendar_id'], ['calendars.id'], ),
    sa.ForeignKeyConstraint(['shared_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_calendar_shares_id'), 'calendar_shares', ['id'], unique=False)
    op.create_table('campaign_analytics',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('campaign_id', sa.Integer(), nullable=False),
    sa.Column('analytics_date', sa.Date(), nullable=False),
    sa.Column('hour', sa.Integer(), nullable=True),
    sa.Column('impressions', sa.Integer(), nullable=False),
    sa.Column('clicks', sa.Integer(), nullable=False),
    sa.Column('conversions', sa.Integer(), nullable=False),
    sa.Column('spend', sa.Float(), nullable=False),
    sa.Column('revenue', sa.Float(), nullable=False),
    sa.Column('emails_sent', sa.Integer(), nullable=True),
    sa.Column('emails_delivered', sa.Integer(), nullable=True),
    sa.Column('emails_opened', sa.Integer(), nullable=True),
    sa.Column('emails_clicked', sa.Integer(), nullable=True),
    sa.Column('unsubscribes', sa.Integer(), nullable=True),
    sa.Column('bounces', sa.Integer(), nullable=True),
    sa.Column('likes', sa.Integer(), nullable=True),
    sa.Column('shares', sa.Integer(), nullable=True),
    sa.Column('comments', sa.Integer(), nullable=True),
    sa.Column('followers_gained', sa.Integer(), nullable=True),
    sa.Column('custom_metrics', sa.JSON(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.ForeignKeyConstraint(['campaign_id'], ['campaigns.id'], name='fk_campaign_analytics_campaign_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_campaign_analytics_organization_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('campaign_id', 'analytics_date', 'hour', name='uq_campaign_analytics_date_hour')
    )
    op.create_index('idx_campaign_analytics_date', 'campaign_analytics', ['analytics_date'], unique=False)
    op.create_index('idx_campaign_analytics_org_campaign', 'campaign_analytics', ['organization_id', 'campaign_id'], unique=False)
    op.create_index(op.f('ix_campaign_analytics_id'), 'campaign_analytics', ['id'], unique=False)
    op.create_index(op.f('ix_campaign_analytics_organization_id'), 'campaign_analytics', ['organization_id'], unique=False)
    op.create_table('categories',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('company_id', sa.Integer(), nullable=True),
    sa.Column('name', sa.String(length=200), nullable=False),
    sa.Column('code', sa.String(length=50), nullable=True),
    sa.Column('category_type', sa.String(length=50), nullable=False),
    sa.Column('parent_category_id', sa.Integer(), nullable=True),
    sa.Column('level', sa.Integer(), nullable=False),
    sa.Column('path', sa.String(length=500), nullable=True),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('sort_order', sa.Integer(), nullable=False),
    sa.Column('default_income_account_id', sa.Integer(), nullable=True),
    sa.Column('default_expense_account_id', sa.Integer(), nullable=True),
    sa.Column('default_asset_account_id', sa.Integer(), nullable=True),
    sa.Column('default_tax_code_id', sa.Integer(), nullable=True),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.Column('updated_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['company_id'], ['companies.id'], ),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['default_asset_account_id'], ['chart_of_accounts.id'], ),
    sa.ForeignKeyConstraint(['default_expense_account_id'], ['chart_of_accounts.id'], ),
    sa.ForeignKeyConstraint(['default_income_account_id'], ['chart_of_accounts.id'], ),
    sa.ForeignKeyConstraint(['default_tax_code_id'], ['master_tax_codes.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['parent_category_id'], ['categories.id'], ),
    sa.ForeignKeyConstraint(['updated_by'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'code', name='uq_category_org_code'),
    sa.UniqueConstraint('organization_id', 'name', 'category_type', name='uq_category_org_name_name_type')
    )
    op.create_index('idx_category_org_type_active', 'categories', ['organization_id', 'category_type', 'is_active'], unique=False)
    op.create_index('idx_category_parent', 'categories', ['parent_category_id'], unique=False)
    op.create_index(op.f('ix_categories_category_type'), 'categories', ['category_type'], unique=False)
    op.create_index(op.f('ix_categories_code'), 'categories', ['code'], unique=False)
    op.create_index(op.f('ix_categories_company_id'), 'categories', ['company_id'], unique=False)
    op.create_index(op.f('ix_categories_id'), 'categories', ['id'], unique=False)
    op.create_index(op.f('ix_categories_name'), 'categories', ['name'], unique=False)
    op.create_index(op.f('ix_categories_organization_id'), 'categories', ['organization_id'], unique=False)
    op.create_index(op.f('ix_categories_parent_category_id'), 'categories', ['parent_category_id'], unique=False)
    op.create_table('credit_notes',
    sa.Column('customer_id', sa.Integer(), nullable=True),
    sa.Column('vendor_id', sa.Integer(), nullable=True),
    sa.Column('reference_voucher_type', sa.String(), nullable=True),
    sa.Column('reference_voucher_id', sa.Integer(), nullable=True),
    sa.Column('reason', sa.String(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('voucher_number', sa.String(), nullable=False),
    sa.Column('date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['customer_id'], ['customers.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['vendor_id'], ['vendors.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'voucher_number', name='uq_cn_org_voucher_number')
    )
    op.create_index('idx_cn_org_customer', 'credit_notes', ['organization_id', 'customer_id'], unique=False)
    op.create_index('idx_cn_org_date', 'credit_notes', ['organization_id', 'date'], unique=False)
    op.create_index('idx_cn_org_vendor', 'credit_notes', ['organization_id', 'vendor_id'], unique=False)
    op.create_index(op.f('ix_credit_notes_id'), 'credit_notes', ['id'], unique=False)
    op.create_index(op.f('ix_credit_notes_organization_id'), 'credit_notes', ['organization_id'], unique=False)
    op.create_index(op.f('ix_credit_notes_voucher_number'), 'credit_notes', ['voucher_number'], unique=False)
    op.create_table('customer_analytics',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('customer_id', sa.Integer(), nullable=False),
    sa.Column('total_purchases', sa.Float(), nullable=False),
    sa.Column('average_order_value', sa.Float(), nullable=False),
    sa.Column('purchase_frequency', sa.Float(), nullable=False),
    sa.Column('last_purchase_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['customer_id'], ['customers.id'], name='fk_customer_analytics_customer_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_customer_analytics_organization_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'customer_id', name='uq_customer_analytics_org_customer')
    )
    op.create_index('idx_customer_analytics_org', 'customer_analytics', ['organization_id'], unique=False)
    op.create_index(op.f('ix_customer_analytics_customer_id'), 'customer_analytics', ['customer_id'], unique=False)
    op.create_index(op.f('ix_customer_analytics_id'), 'customer_analytics', ['id'], unique=False)
    op.create_index(op.f('ix_customer_analytics_organization_id'), 'customer_analytics', ['organization_id'], unique=False)
    op.create_table('customer_files',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('customer_id', sa.Integer(), nullable=False),
    sa.Column('filename', sa.String(), nullable=False),
    sa.Column('original_filename', sa.String(), nullable=False),
    sa.Column('file_path', sa.String(), nullable=False),
    sa.Column('file_size', sa.Integer(), nullable=False),
    sa.Column('content_type', sa.String(), nullable=False),
    sa.Column('file_type', sa.String(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['customer_id'], ['customers.id'], name='fk_customer_file_customer_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_customer_file_organization_id'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_customer_file_org_customer', 'customer_files', ['organization_id', 'customer_id'], unique=False)
    op.create_index(op.f('ix_customer_files_id'), 'customer_files', ['id'], unique=False)
    op.create_index(op.f('ix_customer_files_organization_id'), 'customer_files', ['organization_id'], unique=False)
    op.create_table('customer_interactions',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('customer_id', sa.Integer(), nullable=False),
    sa.Column('interaction_type', sa.String(), nullable=False),
    sa.Column('subject', sa.String(), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('status', sa.String(), nullable=False),
    sa.Column('interaction_date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], name='fk_customer_interaction_created_by'),
    sa.ForeignKeyConstraint(['customer_id'], ['customers.id'], name='fk_customer_interaction_customer_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_customer_interaction_organization_id'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_customer_interaction_date', 'customer_interactions', ['interaction_date'], unique=False)
    op.create_index('idx_customer_interaction_org_customer', 'customer_interactions', ['organization_id', 'customer_id'], unique=False)
    op.create_index('idx_customer_interaction_type_status', 'customer_interactions', ['interaction_type', 'status'], unique=False)
    op.create_index(op.f('ix_customer_interactions_id'), 'customer_interactions', ['id'], unique=False)
    op.create_index(op.f('ix_customer_interactions_organization_id'), 'customer_interactions', ['organization_id'], unique=False)
    op.create_table('customer_segments',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('customer_id', sa.Integer(), nullable=False),
    sa.Column('segment_name', sa.String(), nullable=False),
    sa.Column('segment_value', sa.Float(), nullable=True),
    sa.Column('segment_description', sa.Text(), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('assigned_date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('assigned_by', sa.Integer(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['assigned_by'], ['users.id'], name='fk_customer_segment_assigned_by'),
    sa.ForeignKeyConstraint(['customer_id'], ['customers.id'], name='fk_customer_segment_customer_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_customer_segment_organization_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'customer_id', 'segment_name', name='uq_customer_segment_org_customer_name')
    )
    op.create_index('idx_customer_segment_assigned_date', 'customer_segments', ['assigned_date'], unique=False)
    op.create_index('idx_customer_segment_name_active', 'customer_segments', ['segment_name', 'is_active'], unique=False)
    op.create_index('idx_customer_segment_org_customer', 'customer_segments', ['organization_id', 'customer_id'], unique=False)
    op.create_index(op.f('ix_customer_segments_id'), 'customer_segments', ['id'], unique=False)
    op.create_index(op.f('ix_customer_segments_organization_id'), 'customer_segments', ['organization_id'], unique=False)
    op.create_table('data_transformation_rules',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('integration_id', sa.Integer(), nullable=False),
    sa.Column('name', sa.String(length=255), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('entity_type', sa.String(length=100), nullable=False),
    sa.Column('rule_type', sa.String(length=100), nullable=False),
    sa.Column('conditions', sa.JSON(), nullable=True),
    sa.Column('transformation_script', sa.Text(), nullable=True),
    sa.Column('lookup_table', sa.JSON(), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('execution_order', sa.Integer(), nullable=False),
    sa.Column('created_by', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['integration_id'], ['external_integrations.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('integration_id', 'name', name='uq_transformation_rule_integration_name')
    )
    op.create_index('idx_transformation_rule_org_active', 'data_transformation_rules', ['organization_id', 'is_active'], unique=False)
    op.create_index('idx_transformation_rule_org_entity', 'data_transformation_rules', ['organization_id', 'entity_type'], unique=False)
    op.create_index('idx_transformation_rule_org_integration', 'data_transformation_rules', ['organization_id', 'integration_id'], unique=False)
    op.create_index(op.f('ix_data_transformation_rules_entity_type'), 'data_transformation_rules', ['entity_type'], unique=False)
    op.create_index(op.f('ix_data_transformation_rules_id'), 'data_transformation_rules', ['id'], unique=False)
    op.create_index(op.f('ix_data_transformation_rules_organization_id'), 'data_transformation_rules', ['organization_id'], unique=False)
    op.create_table('dcf_models',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('financial_model_id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('cost_of_equity', sa.Numeric(precision=8, scale=4), nullable=False),
    sa.Column('cost_of_debt', sa.Numeric(precision=8, scale=4), nullable=False),
    sa.Column('tax_rate', sa.Numeric(precision=8, scale=4), nullable=False),
    sa.Column('debt_to_equity_ratio', sa.Numeric(precision=8, scale=4), nullable=False),
    sa.Column('wacc', sa.Numeric(precision=8, scale=4), nullable=False),
    sa.Column('terminal_growth_rate', sa.Numeric(precision=8, scale=4), nullable=False),
    sa.Column('terminal_value_multiple', sa.Numeric(precision=8, scale=2), nullable=True),
    sa.Column('terminal_value', sa.Numeric(precision=15, scale=2), nullable=False),
    sa.Column('pv_of_fcf', sa.Numeric(precision=15, scale=2), nullable=False),
    sa.Column('pv_of_terminal_value', sa.Numeric(precision=15, scale=2), nullable=False),
    sa.Column('enterprise_value', sa.Numeric(precision=15, scale=2), nullable=False),
    sa.Column('equity_value', sa.Numeric(precision=15, scale=2), nullable=False),
    sa.Column('shares_outstanding', sa.Numeric(precision=15, scale=0), nullable=True),
    sa.Column('value_per_share', sa.Numeric(precision=10, scale=2), nullable=True),
    sa.Column('cash_flow_projections', sa.JSON(), nullable=False),
    sa.Column('calculated_at', sa.DateTime(), nullable=False),
    sa.ForeignKeyConstraint(['financial_model_id'], ['financial_models.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_dcf_model_org', 'dcf_models', ['organization_id'], unique=False)
    op.create_index(op.f('ix_dcf_models_financial_model_id'), 'dcf_models', ['financial_model_id'], unique=False)
    op.create_index(op.f('ix_dcf_models_id'), 'dcf_models', ['id'], unique=False)
    op.create_index(op.f('ix_dcf_models_organization_id'), 'dcf_models', ['organization_id'], unique=False)
    op.create_table('debit_notes',
    sa.Column('customer_id', sa.Integer(), nullable=True),
    sa.Column('vendor_id', sa.Integer(), nullable=True),
    sa.Column('reference_voucher_type', sa.String(), nullable=True),
    sa.Column('reference_voucher_id', sa.Integer(), nullable=True),
    sa.Column('reason', sa.String(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('voucher_number', sa.String(), nullable=False),
    sa.Column('date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['customer_id'], ['customers.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['vendor_id'], ['vendors.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'voucher_number', name='uq_dn_org_voucher_number')
    )
    op.create_index('idx_dn_org_customer', 'debit_notes', ['organization_id', 'customer_id'], unique=False)
    op.create_index('idx_dn_org_date', 'debit_notes', ['organization_id', 'date'], unique=False)
    op.create_index('idx_dn_org_vendor', 'debit_notes', ['organization_id', 'vendor_id'], unique=False)
    op.create_index(op.f('ix_debit_notes_id'), 'debit_notes', ['id'], unique=False)
    op.create_index(op.f('ix_debit_notes_organization_id'), 'debit_notes', ['organization_id'], unique=False)
    op.create_index(op.f('ix_debit_notes_voucher_number'), 'debit_notes', ['voucher_number'], unique=False)
    op.create_table('employee_learning_paths',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('employee_id', sa.Integer(), nullable=False),
    sa.Column('learning_path_id', sa.Integer(), nullable=False),
    sa.Column('enrolled_date', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('target_completion_date', sa.Date(), nullable=True),
    sa.Column('assigned_by_id', sa.Integer(), nullable=True),
    sa.Column('status', sa.String(), nullable=False),
    sa.Column('progress_percentage', sa.Numeric(precision=5, scale=2), nullable=False),
    sa.Column('completed_programs', sa.Integer(), nullable=False),
    sa.Column('total_programs', sa.Integer(), nullable=False),
    sa.Column('completed_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('overall_score', sa.Numeric(precision=5, scale=2), nullable=True),
    sa.Column('employee_notes', sa.Text(), nullable=True),
    sa.Column('manager_notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['assigned_by_id'], ['users.id'], name='fk_employee_learning_path_assigned_by_id'),
    sa.ForeignKeyConstraint(['employee_id'], ['employee_profiles.id'], name='fk_employee_learning_path_employee_id'),
    sa.ForeignKeyConstraint(['learning_path_id'], ['learning_paths.id'], name='fk_employee_learning_path_path_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_employee_learning_path_organization_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('employee_id', 'learning_path_id', name='uq_employee_learning_path')
    )
    op.create_index('idx_employee_learning_path_org_employee', 'employee_learning_paths', ['organization_id', 'employee_id'], unique=False)
    op.create_index('idx_employee_learning_path_status', 'employee_learning_paths', ['status'], unique=False)
    op.create_index(op.f('ix_employee_learning_paths_employee_id'), 'employee_learning_paths', ['employee_id'], unique=False)
    op.create_index(op.f('ix_employee_learning_paths_id'), 'employee_learning_paths', ['id'], unique=False)
    op.create_index(op.f('ix_employee_learning_paths_learning_path_id'), 'employee_learning_paths', ['learning_path_id'], unique=False)
    op.create_index(op.f('ix_employee_learning_paths_organization_id'), 'employee_learning_paths', ['organization_id'], unique=False)
    op.create_table('employee_loans',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('employee_id', sa.Integer(), nullable=False),
    sa.Column('loan_type', sa.String(), nullable=False),
    sa.Column('loan_amount', sa.Numeric(precision=15, scale=2), nullable=False),
    sa.Column('interest_rate', sa.Numeric(precision=5, scale=2), nullable=False),
    sa.Column('tenure_months', sa.Integer(), nullable=False),
    sa.Column('monthly_deduction', sa.Numeric(precision=15, scale=2), nullable=False),
    sa.Column('status', sa.String(), nullable=False),
    sa.Column('applied_date', sa.Date(), nullable=False),
    sa.Column('approved_date', sa.Date(), nullable=True),
    sa.Column('disbursed_date', sa.Date(), nullable=True),
    sa.Column('outstanding_amount', sa.Numeric(precision=15, scale=2), nullable=False),
    sa.Column('paid_amount', sa.Numeric(precision=15, scale=2), nullable=False),
    sa.Column('approved_by_id', sa.Integer(), nullable=True),
    sa.Column('reason', sa.Text(), nullable=False),
    sa.Column('remarks', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['approved_by_id'], ['users.id'], name='fk_employee_loan_approved_by_id'),
    sa.ForeignKeyConstraint(['employee_id'], ['employee_profiles.id'], name='fk_employee_loan_employee_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_employee_loan_organization_id'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_employee_loan_dates', 'employee_loans', ['applied_date', 'disbursed_date'], unique=False)
    op.create_index('idx_employee_loan_org_employee', 'employee_loans', ['organization_id', 'employee_id'], unique=False)
    op.create_index('idx_employee_loan_status', 'employee_loans', ['status'], unique=False)
    op.create_index(op.f('ix_employee_loans_employee_id'), 'employee_loans', ['employee_id'], unique=False)
    op.create_index(op.f('ix_employee_loans_id'), 'employee_loans', ['id'], unique=False)
    op.create_index(op.f('ix_employee_loans_organization_id'), 'employee_loans', ['organization_id'], unique=False)
    op.create_table('employee_skills',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('employee_id', sa.Integer(), nullable=False),
    sa.Column('skill_id', sa.Integer(), nullable=False),
    sa.Column('proficiency_level', sa.Integer(), nullable=False),
    sa.Column('self_assessment', sa.Integer(), nullable=True),
    sa.Column('manager_assessment', sa.Integer(), nullable=True),
    sa.Column('peer_assessment', sa.Integer(), nullable=True),
    sa.Column('assessed_date', sa.Date(), nullable=True),
    sa.Column('assessed_by_id', sa.Integer(), nullable=True),
    sa.Column('assessment_method', sa.String(), nullable=True),
    sa.Column('years_of_experience', sa.Numeric(precision=4, scale=1), nullable=True),
    sa.Column('certification_name', sa.String(), nullable=True),
    sa.Column('certification_date', sa.Date(), nullable=True),
    sa.Column('certification_expiry', sa.Date(), nullable=True),
    sa.Column('target_proficiency', sa.Integer(), nullable=True),
    sa.Column('target_date', sa.Date(), nullable=True),
    sa.Column('learning_plan', sa.Text(), nullable=True),
    sa.Column('assessment_notes', sa.Text(), nullable=True),
    sa.Column('evidence_links', sa.JSON(), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['assessed_by_id'], ['users.id'], name='fk_employee_skill_assessed_by_id'),
    sa.ForeignKeyConstraint(['employee_id'], ['employee_profiles.id'], name='fk_employee_skill_employee_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_employee_skill_organization_id'),
    sa.ForeignKeyConstraint(['skill_id'], ['skills.id'], name='fk_employee_skill_skill_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('employee_id', 'skill_id', name='uq_employee_skill_emp_skill')
    )
    op.create_index('idx_employee_skill_org_employee', 'employee_skills', ['organization_id', 'employee_id'], unique=False)
    op.create_index('idx_employee_skill_proficiency', 'employee_skills', ['proficiency_level'], unique=False)
    op.create_index(op.f('ix_employee_skills_employee_id'), 'employee_skills', ['employee_id'], unique=False)
    op.create_index(op.f('ix_employee_skills_id'), 'employee_skills', ['id'], unique=False)
    op.create_index(op.f('ix_employee_skills_organization_id'), 'employee_skills', ['organization_id'], unique=False)
    op.create_index(op.f('ix_employee_skills_skill_id'), 'employee_skills', ['skill_id'], unique=False)
    op.create_table('exhibition_events',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('name', sa.String(), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('location', sa.String(), nullable=True),
    sa.Column('venue', sa.String(), nullable=True),
    sa.Column('start_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('end_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('status', sa.String(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('auto_send_intro_email', sa.Boolean(), nullable=False),
    sa.Column('intro_email_template_id', sa.Integer(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by_id', sa.Integer(), nullable=False),
    sa.ForeignKeyConstraint(['created_by_id'], ['users.id'], ),
    sa.ForeignKeyConstraint(['intro_email_template_id'], ['notification_templates.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_exhibition_event_active', 'exhibition_events', ['is_active'], unique=False)
    op.create_index('idx_exhibition_event_org_status', 'exhibition_events', ['organization_id', 'status'], unique=False)
    op.create_index(op.f('ix_exhibition_events_id'), 'exhibition_events', ['id'], unique=False)
    op.create_index(op.f('ix_exhibition_events_organization_id'), 'exhibition_events', ['organization_id'], unique=False)
    op.create_table('forecast_versions',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('financial_forecast_id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('version_number', sa.String(length=20), nullable=False),
    sa.Column('version_name', sa.String(length=200), nullable=True),
    sa.Column('change_description', sa.Text(), nullable=True),
    sa.Column('forecast_snapshot', sa.JSON(), nullable=False),
    sa.Column('model_parameters_snapshot', sa.JSON(), nullable=False),
    sa.Column('is_current', sa.Boolean(), nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('created_by_id', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by_id'], ['users.id'], ),
    sa.ForeignKeyConstraint(['financial_forecast_id'], ['financial_forecasts.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('financial_forecast_id', 'version_number', name='uq_forecast_version')
    )
    op.create_index('idx_forecast_version_current', 'forecast_versions', ['financial_forecast_id', 'is_current'], unique=False)
    op.create_index(op.f('ix_forecast_versions_financial_forecast_id'), 'forecast_versions', ['financial_forecast_id'], unique=False)
    op.create_index(op.f('ix_forecast_versions_id'), 'forecast_versions', ['id'], unique=False)
    op.create_index(op.f('ix_forecast_versions_organization_id'), 'forecast_versions', ['organization_id'], unique=False)
    op.create_table('integration_logs',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('integration_id', sa.Integer(), nullable=False),
    sa.Column('log_level', sa.String(length=20), nullable=False),
    sa.Column('message', sa.Text(), nullable=False),
    sa.Column('category', sa.String(length=100), nullable=False),
    sa.Column('operation', sa.String(length=100), nullable=True),
    sa.Column('entity_type', sa.String(length=100), nullable=True),
    sa.Column('entity_id', sa.String(length=100), nullable=True),
    sa.Column('request_data', sa.JSON(), nullable=True),
    sa.Column('response_data', sa.JSON(), nullable=True),
    sa.Column('error_code', sa.String(length=100), nullable=True),
    sa.Column('stack_trace', sa.Text(), nullable=True),
    sa.Column('logged_at', sa.DateTime(), nullable=False),
    sa.Column('user_id', sa.Integer(), nullable=True),
    sa.Column('session_id', sa.String(length=100), nullable=True),
    sa.ForeignKeyConstraint(['integration_id'], ['external_integrations.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_integration_log_org_category', 'integration_logs', ['organization_id', 'category'], unique=False)
    op.create_index('idx_integration_log_org_integration', 'integration_logs', ['organization_id', 'integration_id'], unique=False)
    op.create_index('idx_integration_log_org_level', 'integration_logs', ['organization_id', 'log_level'], unique=False)
    op.create_index('idx_integration_log_org_logged', 'integration_logs', ['organization_id', 'logged_at'], unique=False)
    op.create_index(op.f('ix_integration_logs_category'), 'integration_logs', ['category'], unique=False)
    op.create_index(op.f('ix_integration_logs_id'), 'integration_logs', ['id'], unique=False)
    op.create_index(op.f('ix_integration_logs_log_level'), 'integration_logs', ['log_level'], unique=False)
    op.create_index(op.f('ix_integration_logs_logged_at'), 'integration_logs', ['logged_at'], unique=False)
    op.create_index(op.f('ix_integration_logs_organization_id'), 'integration_logs', ['organization_id'], unique=False)
    op.create_table('integration_mappings',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('integration_id', sa.Integer(), nullable=False),
    sa.Column('name', sa.String(length=255), nullable=False),
    sa.Column('entity_type', sa.String(length=100), nullable=False),
    sa.Column('source_field', sa.String(length=255), nullable=False),
    sa.Column('source_path', sa.String(length=500), nullable=True),
    sa.Column('target_field', sa.String(length=255), nullable=False),
    sa.Column('target_path', sa.String(length=500), nullable=True),
    sa.Column('mapping_type', sa.Enum('FIELD', 'TRANSFORMATION', 'CONDITIONAL', 'STATIC', name='mappingtype'), nullable=False),
    sa.Column('transformation_rule', sa.JSON(), nullable=True),
    sa.Column('default_value', sa.Text(), nullable=True),
    sa.Column('is_required', sa.Boolean(), nullable=False),
    sa.Column('validation_rules', sa.JSON(), nullable=True),
    sa.Column('sync_direction', sa.Enum('INBOUND', 'OUTBOUND', 'BIDIRECTIONAL', name='syncdirection'), nullable=False),
    sa.Column('is_key_field', sa.Boolean(), nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('created_by', sa.Integer(), nullable=False),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['integration_id'], ['external_integrations.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('integration_id', 'entity_type', 'source_field', 'target_field', name='uq_mapping_integration_entity_fields')
    )
    op.create_index('idx_mapping_org_entity', 'integration_mappings', ['organization_id', 'entity_type'], unique=False)
    op.create_index('idx_mapping_org_integration', 'integration_mappings', ['organization_id', 'integration_id'], unique=False)
    op.create_index('idx_mapping_org_key_field', 'integration_mappings', ['organization_id', 'is_key_field'], unique=False)
    op.create_index(op.f('ix_integration_mappings_entity_type'), 'integration_mappings', ['entity_type'], unique=False)
    op.create_index(op.f('ix_integration_mappings_id'), 'integration_mappings', ['id'], unique=False)
    op.create_index(op.f('ix_integration_mappings_organization_id'), 'integration_mappings', ['organization_id'], unique=False)
    op.create_table('integration_schedules',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('integration_id', sa.Integer(), nullable=False),
    sa.Column('name', sa.String(length=255), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('cron_expression', sa.String(length=100), nullable=False),
    sa.Column('timezone', sa.String(length=50), nullable=False),
    sa.Column('job_type', sa.String(length=100), nullable=False),
    sa.Column('entity_types', sa.JSON(), nullable=True),
    sa.Column('sync_direction', sa.Enum('INBOUND', 'OUTBOUND', 'BIDIRECTIONAL', name='syncdirection'), nullable=False),
    sa.Column('job_parameters', sa.JSON(), nullable=True),
    sa.Column('last_run_at', sa.DateTime(), nullable=True),
    sa.Column('next_run_at', sa.DateTime(), nullable=True),
    sa.Column('run_count', sa.Integer(), nullable=False),
    sa.Column('created_by', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['integration_id'], ['external_integrations.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('integration_id', 'name', name='uq_integration_schedule_integration_name')
    )
    op.create_index('idx_integration_schedule_org_active', 'integration_schedules', ['organization_id', 'is_active'], unique=False)
    op.create_index('idx_integration_schedule_org_integration', 'integration_schedules', ['organization_id', 'integration_id'], unique=False)
    op.create_index('idx_integration_schedule_org_next_run', 'integration_schedules', ['organization_id', 'next_run_at'], unique=False)
    op.create_index(op.f('ix_integration_schedules_id'), 'integration_schedules', ['id'], unique=False)
    op.create_index(op.f('ix_integration_schedules_organization_id'), 'integration_schedules', ['organization_id'], unique=False)
    op.create_table('integration_sync_jobs',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('integration_id', sa.Integer(), nullable=False),
    sa.Column('job_name', sa.String(length=255), nullable=False),
    sa.Column('job_type', sa.String(length=100), nullable=False),
    sa.Column('entity_type', sa.String(length=100), nullable=True),
    sa.Column('sync_direction', sa.Enum('INBOUND', 'OUTBOUND', 'BIDIRECTIONAL', name='syncdirection'), nullable=False),
    sa.Column('batch_size', sa.Integer(), nullable=False),
    sa.Column('status', sa.Enum('SUCCESS', 'FAILED', 'PARTIAL', 'IN_PROGRESS', name='syncstatus'), nullable=False),
    sa.Column('progress_percentage', sa.Float(), nullable=False),
    sa.Column('total_records', sa.Integer(), nullable=False),
    sa.Column('processed_records', sa.Integer(), nullable=False),
    sa.Column('successful_records', sa.Integer(), nullable=False),
    sa.Column('failed_records', sa.Integer(), nullable=False),
    sa.Column('skipped_records', sa.Integer(), nullable=False),
    sa.Column('started_at', sa.DateTime(), nullable=False),
    sa.Column('completed_at', sa.DateTime(), nullable=True),
    sa.Column('estimated_completion', sa.DateTime(), nullable=True),
    sa.Column('result_summary', sa.JSON(), nullable=True),
    sa.Column('error_summary', sa.Text(), nullable=True),
    sa.Column('job_parameters', sa.JSON(), nullable=True),
    sa.Column('triggered_by', sa.Integer(), nullable=False),
    sa.Column('can_cancel', sa.Boolean(), nullable=False),
    sa.ForeignKeyConstraint(['integration_id'], ['external_integrations.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['triggered_by'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_sync_job_org_integration', 'integration_sync_jobs', ['organization_id', 'integration_id'], unique=False)
    op.create_index('idx_sync_job_org_started', 'integration_sync_jobs', ['organization_id', 'started_at'], unique=False)
    op.create_index('idx_sync_job_org_status', 'integration_sync_jobs', ['organization_id', 'status'], unique=False)
    op.create_index('idx_sync_job_org_type', 'integration_sync_jobs', ['organization_id', 'job_type'], unique=False)
    op.create_index(op.f('ix_integration_sync_jobs_entity_type'), 'integration_sync_jobs', ['entity_type'], unique=False)
    op.create_index(op.f('ix_integration_sync_jobs_id'), 'integration_sync_jobs', ['id'], unique=False)
    op.create_index(op.f('ix_integration_sync_jobs_job_type'), 'integration_sync_jobs', ['job_type'], unique=False)
    op.create_index(op.f('ix_integration_sync_jobs_organization_id'), 'integration_sync_jobs', ['organization_id'], unique=False)
    op.create_table('inter_department_voucher_items',
    sa.Column('inter_department_voucher_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('quantity', sa.Float(), nullable=False),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('unit_price', sa.Float(), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.ForeignKeyConstraint(['inter_department_voucher_id'], ['inter_department_vouchers.id'], ),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_inter_department_voucher_items_id'), 'inter_department_voucher_items', ['id'], unique=False)
    op.create_table('inventory_alerts',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('alert_type', sa.String(), nullable=False),
    sa.Column('current_stock', sa.Float(), nullable=False),
    sa.Column('reorder_level', sa.Float(), nullable=False),
    sa.Column('location', sa.String(), nullable=True),
    sa.Column('status', sa.String(), nullable=False),
    sa.Column('priority', sa.String(), nullable=False),
    sa.Column('acknowledged_by_id', sa.Integer(), nullable=True),
    sa.Column('acknowledged_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('resolved_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('message', sa.Text(), nullable=True),
    sa.Column('suggested_order_quantity', sa.Float(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['acknowledged_by_id'], ['users.id'], name='fk_inventory_alert_acknowledged_by_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_inventory_alert_organization_id'),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], name='fk_inventory_alert_product_id'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_inventory_alert_created_at', 'inventory_alerts', ['created_at'], unique=False)
    op.create_index('idx_inventory_alert_org_priority', 'inventory_alerts', ['organization_id', 'priority'], unique=False)
    op.create_index('idx_inventory_alert_org_product', 'inventory_alerts', ['organization_id', 'product_id'], unique=False)
    op.create_index('idx_inventory_alert_org_status', 'inventory_alerts', ['organization_id', 'status'], unique=False)
    op.create_index('idx_inventory_alert_type', 'inventory_alerts', ['alert_type'], unique=False)
    op.create_index(op.f('ix_inventory_alerts_id'), 'inventory_alerts', ['id'], unique=False)
    op.create_index(op.f('ix_inventory_alerts_organization_id'), 'inventory_alerts', ['organization_id'], unique=False)
    op.create_table('inventory_transactions',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('transaction_type', sa.String(), nullable=False),
    sa.Column('quantity', sa.Float(), nullable=False),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('location', sa.String(), nullable=True),
    sa.Column('reference_type', sa.String(), nullable=True),
    sa.Column('reference_id', sa.Integer(), nullable=True),
    sa.Column('reference_number', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('unit_cost', sa.Float(), nullable=True),
    sa.Column('total_cost', sa.Float(), nullable=True),
    sa.Column('stock_before', sa.Float(), nullable=False),
    sa.Column('stock_after', sa.Float(), nullable=False),
    sa.Column('created_by_id', sa.Integer(), nullable=True),
    sa.Column('transaction_date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.ForeignKeyConstraint(['created_by_id'], ['users.id'], name='fk_inventory_transaction_created_by_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_inventory_transaction_organization_id'),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], name='fk_inventory_transaction_product_id'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_inventory_transaction_created_at', 'inventory_transactions', ['created_at'], unique=False)
    op.create_index('idx_inventory_transaction_org_date', 'inventory_transactions', ['organization_id', 'transaction_date'], unique=False)
    op.create_index('idx_inventory_transaction_org_product', 'inventory_transactions', ['organization_id', 'product_id'], unique=False)
    op.create_index('idx_inventory_transaction_org_type', 'inventory_transactions', ['organization_id', 'transaction_type'], unique=False)
    op.create_index('idx_inventory_transaction_reference', 'inventory_transactions', ['reference_type', 'reference_id'], unique=False)
    op.create_index(op.f('ix_inventory_transactions_id'), 'inventory_transactions', ['id'], unique=False)
    op.create_index(op.f('ix_inventory_transactions_organization_id'), 'inventory_transactions', ['organization_id'], unique=False)
    op.create_table('job_applications',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('job_posting_id', sa.Integer(), nullable=False),
    sa.Column('candidate_id', sa.Integer(), nullable=False),
    sa.Column('application_date', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('cover_letter', sa.Text(), nullable=True),
    sa.Column('custom_responses', sa.JSON(), nullable=True),
    sa.Column('status', sa.String(), nullable=False),
    sa.Column('stage', sa.String(), nullable=True),
    sa.Column('overall_score', sa.Numeric(precision=5, scale=2), nullable=True),
    sa.Column('resume_score', sa.Numeric(precision=5, scale=2), nullable=True),
    sa.Column('recruiter_rating', sa.Integer(), nullable=True),
    sa.Column('assigned_recruiter_id', sa.Integer(), nullable=True),
    sa.Column('last_activity_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('rejection_reason', sa.String(), nullable=True),
    sa.Column('rejection_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('rejection_feedback', sa.Text(), nullable=True),
    sa.Column('recruiter_notes', sa.Text(), nullable=True),
    sa.Column('hiring_manager_notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['assigned_recruiter_id'], ['users.id'], name='fk_job_application_assigned_recruiter_id'),
    sa.ForeignKeyConstraint(['candidate_id'], ['candidates.id'], name='fk_job_application_candidate_id'),
    sa.ForeignKeyConstraint(['job_posting_id'], ['job_postings.id'], name='fk_job_application_job_posting_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_job_application_organization_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('job_posting_id', 'candidate_id', name='uq_job_application_job_candidate')
    )
    op.create_index('idx_job_application_date', 'job_applications', ['application_date'], unique=False)
    op.create_index('idx_job_application_org_status', 'job_applications', ['organization_id', 'status'], unique=False)
    op.create_index(op.f('ix_job_applications_candidate_id'), 'job_applications', ['candidate_id'], unique=False)
    op.create_index(op.f('ix_job_applications_id'), 'job_applications', ['id'], unique=False)
    op.create_index(op.f('ix_job_applications_job_posting_id'), 'job_applications', ['job_posting_id'], unique=False)
    op.create_index(op.f('ix_job_applications_organization_id'), 'job_applications', ['organization_id'], unique=False)
    op.create_table('leads',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('lead_number', sa.String(), nullable=False),
    sa.Column('first_name', sa.String(), nullable=False),
    sa.Column('last_name', sa.String(), nullable=False),
    sa.Column('email', sa.String(), nullable=False),
    sa.Column('phone', sa.String(), nullable=True),
    sa.Column('company', sa.String(), nullable=True),
    sa.Column('job_title', sa.String(), nullable=True),
    sa.Column('address1', sa.String(), nullable=True),
    sa.Column('address2', sa.String(), nullable=True),
    sa.Column('city', sa.String(), nullable=True),
    sa.Column('state', sa.String(), nullable=True),
    sa.Column('pin_code', sa.String(), nullable=True),
    sa.Column('country', sa.String(), nullable=True),
    sa.Column('status', sa.Enum('NEW', 'CONTACTED', 'QUALIFIED', 'PROPOSAL', 'NEGOTIATION', 'CONVERTED', 'LOST', 'NURTURING', name='leadstatus'), nullable=False),
    sa.Column('source', sa.Enum('WEBSITE', 'REFERRAL', 'EMAIL_CAMPAIGN', 'SOCIAL_MEDIA', 'COLD_CALL', 'TRADE_SHOW', 'PARTNER', 'ADVERTISEMENT', 'OTHER', name='leadsource'), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('score', sa.Integer(), nullable=False),
    sa.Column('is_qualified', sa.Boolean(), nullable=False),
    sa.Column('qualification_notes', sa.Text(), nullable=True),
    sa.Column('estimated_value', sa.Float(), nullable=True),
    sa.Column('expected_close_date', sa.Date(), nullable=True),
    sa.Column('assigned_to_id', sa.Integer(), nullable=True),
    sa.Column('created_by_id', sa.Integer(), nullable=True),
    sa.Column('converted_to_customer_id', sa.Integer(), nullable=True),
    sa.Column('converted_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('custom_fields', sa.JSON(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('last_contacted', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['assigned_to_id'], ['users.id'], name='fk_lead_assigned_to_id'),
    sa.ForeignKeyConstraint(['converted_to_customer_id'], ['customers.id'], name='fk_lead_converted_customer_id'),
    sa.ForeignKeyConstraint(['created_by_id'], ['users.id'], name='fk_lead_created_by_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_lead_organization_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'lead_number', name='uq_lead_org_number')
    )
    op.create_index('idx_lead_company', 'leads', ['company'], unique=False)
    op.create_index('idx_lead_org_assigned', 'leads', ['organization_id', 'assigned_to_id'], unique=False)
    op.create_index('idx_lead_org_source', 'leads', ['organization_id', 'source'], unique=False)
    op.create_index('idx_lead_org_status', 'leads', ['organization_id', 'status'], unique=False)
    op.create_index('idx_lead_qualified', 'leads', ['is_qualified'], unique=False)
    op.create_index('idx_lead_score', 'leads', ['score'], unique=False)
    op.create_index(op.f('ix_leads_company'), 'leads', ['company'], unique=False)
    op.create_index(op.f('ix_leads_email'), 'leads', ['email'], unique=False)
    op.create_index(op.f('ix_leads_id'), 'leads', ['id'], unique=False)
    op.create_index(op.f('ix_leads_lead_number'), 'leads', ['lead_number'], unique=True)
    op.create_index(op.f('ix_leads_organization_id'), 'leads', ['organization_id'], unique=False)
    op.create_index(op.f('ix_leads_source'), 'leads', ['source'], unique=False)
    op.create_index(op.f('ix_leads_status'), 'leads', ['status'], unique=False)
    op.create_table('learning_path_programs',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('learning_path_id', sa.Integer(), nullable=False),
    sa.Column('program_id', sa.Integer(), nullable=False),
    sa.Column('sequence_order', sa.Integer(), nullable=False),
    sa.Column('is_mandatory', sa.Boolean(), nullable=False),
    sa.Column('prerequisite_programs', sa.JSON(), nullable=True),
    sa.Column('minimum_score', sa.Numeric(precision=5, scale=2), nullable=True),
    sa.Column('requires_certification', sa.Boolean(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.ForeignKeyConstraint(['learning_path_id'], ['learning_paths.id'], name='fk_learning_path_program_path_id'),
    sa.ForeignKeyConstraint(['program_id'], ['training_programs.id'], name='fk_learning_path_program_program_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('learning_path_id', 'program_id', name='uq_learning_path_program')
    )
    op.create_index('idx_learning_path_program_sequence', 'learning_path_programs', ['learning_path_id', 'sequence_order'], unique=False)
    op.create_index(op.f('ix_learning_path_programs_id'), 'learning_path_programs', ['id'], unique=False)
    op.create_index(op.f('ix_learning_path_programs_learning_path_id'), 'learning_path_programs', ['learning_path_id'], unique=False)
    op.create_index(op.f('ix_learning_path_programs_program_id'), 'learning_path_programs', ['program_id'], unique=False)
    op.create_table('leave_applications',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('employee_id', sa.Integer(), nullable=False),
    sa.Column('leave_type_id', sa.Integer(), nullable=False),
    sa.Column('start_date', sa.Date(), nullable=False),
    sa.Column('end_date', sa.Date(), nullable=False),
    sa.Column('total_days', sa.Integer(), nullable=False),
    sa.Column('reason', sa.Text(), nullable=False),
    sa.Column('is_half_day', sa.Boolean(), nullable=False),
    sa.Column('half_day_period', sa.String(), nullable=True),
    sa.Column('status', sa.String(), nullable=False),
    sa.Column('applied_date', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('approved_by_id', sa.Integer(), nullable=True),
    sa.Column('approved_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('approval_remarks', sa.Text(), nullable=True),
    sa.Column('contact_number', sa.String(), nullable=True),
    sa.Column('emergency_contact', sa.String(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['approved_by_id'], ['users.id'], name='fk_leave_application_approved_by_id'),
    sa.ForeignKeyConstraint(['employee_id'], ['employee_profiles.id'], name='fk_leave_application_employee_id'),
    sa.ForeignKeyConstraint(['leave_type_id'], ['leave_types.id'], name='fk_leave_application_leave_type_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_leave_application_organization_id'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_leave_application_dates', 'leave_applications', ['start_date', 'end_date'], unique=False)
    op.create_index('idx_leave_application_org_employee', 'leave_applications', ['organization_id', 'employee_id'], unique=False)
    op.create_index('idx_leave_application_status', 'leave_applications', ['status'], unique=False)
    op.create_index(op.f('ix_leave_applications_employee_id'), 'leave_applications', ['employee_id'], unique=False)
    op.create_index(op.f('ix_leave_applications_id'), 'leave_applications', ['id'], unique=False)
    op.create_index(op.f('ix_leave_applications_leave_type_id'), 'leave_applications', ['leave_type_id'], unique=False)
    op.create_index(op.f('ix_leave_applications_organization_id'), 'leave_applications', ['organization_id'], unique=False)
    op.create_table('marketing_list_contacts',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('marketing_list_id', sa.Integer(), nullable=False),
    sa.Column('customer_id', sa.Integer(), nullable=True),
    sa.Column('email', sa.String(), nullable=True),
    sa.Column('phone', sa.String(), nullable=True),
    sa.Column('first_name', sa.String(), nullable=True),
    sa.Column('last_name', sa.String(), nullable=True),
    sa.Column('is_subscribed', sa.Boolean(), nullable=False),
    sa.Column('subscribed_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('unsubscribed_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('opt_in_source', sa.String(), nullable=True),
    sa.Column('custom_attributes', sa.JSON(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['customer_id'], ['customers.id'], name='fk_marketing_list_contact_customer_id'),
    sa.ForeignKeyConstraint(['marketing_list_id'], ['marketing_lists.id'], name='fk_marketing_list_contact_list_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_marketing_list_contact_organization_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('marketing_list_id', 'customer_id', name='uq_marketing_list_contact_customer'),
    sa.UniqueConstraint('marketing_list_id', 'email', name='uq_marketing_list_contact_email')
    )
    op.create_index('idx_marketing_list_contact_email', 'marketing_list_contacts', ['email'], unique=False)
    op.create_index('idx_marketing_list_contact_org_list', 'marketing_list_contacts', ['organization_id', 'marketing_list_id'], unique=False)
    op.create_index('idx_marketing_list_contact_subscribed', 'marketing_list_contacts', ['is_subscribed'], unique=False)
    op.create_index(op.f('ix_marketing_list_contacts_email'), 'marketing_list_contacts', ['email'], unique=False)
    op.create_index(op.f('ix_marketing_list_contacts_id'), 'marketing_list_contacts', ['id'], unique=False)
    op.create_index(op.f('ix_marketing_list_contacts_organization_id'), 'marketing_list_contacts', ['organization_id'], unique=False)
    op.create_table('migration_conflicts',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('migration_job_id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('data_type', sa.Enum('LEDGERS', 'VOUCHERS', 'CONTACTS', 'PRODUCTS', 'CUSTOMERS', 'VENDORS', 'STOCK', 'CHART_OF_ACCOUNTS', 'COMPANY_INFO', name='migrationdatatype'), nullable=False),
    sa.Column('source_record_id', sa.String(length=100), nullable=False),
    sa.Column('conflict_type', sa.String(length=50), nullable=False),
    sa.Column('conflict_field', sa.String(length=200), nullable=True),
    sa.Column('source_value', sa.JSON(), nullable=False),
    sa.Column('existing_value', sa.JSON(), nullable=True),
    sa.Column('suggested_resolution', sa.String(length=50), nullable=True),
    sa.Column('is_resolved', sa.Boolean(), nullable=True),
    sa.Column('resolution_action', sa.String(length=50), nullable=True),
    sa.Column('resolved_by', sa.Integer(), nullable=True),
    sa.Column('resolved_at', sa.DateTime(), nullable=True),
    sa.Column('resolution_notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.ForeignKeyConstraint(['migration_job_id'], ['migration_jobs.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['resolved_by'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_migration_conflict_job', 'migration_conflicts', ['migration_job_id'], unique=False)
    op.create_index('idx_migration_conflict_resolved', 'migration_conflicts', ['is_resolved'], unique=False)
    op.create_index(op.f('ix_migration_conflicts_id'), 'migration_conflicts', ['id'], unique=False)
    op.create_index(op.f('ix_migration_conflicts_migration_job_id'), 'migration_conflicts', ['migration_job_id'], unique=False)
    op.create_index(op.f('ix_migration_conflicts_organization_id'), 'migration_conflicts', ['organization_id'], unique=False)
    op.create_table('migration_data_mappings',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('migration_job_id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('data_type', sa.Enum('LEDGERS', 'VOUCHERS', 'CONTACTS', 'PRODUCTS', 'CUSTOMERS', 'VENDORS', 'STOCK', 'CHART_OF_ACCOUNTS', 'COMPANY_INFO', name='migrationdatatype'), nullable=False),
    sa.Column('source_field', sa.String(length=200), nullable=False),
    sa.Column('target_field', sa.String(length=200), nullable=False),
    sa.Column('field_type', sa.String(length=50), nullable=False),
    sa.Column('is_required', sa.Boolean(), nullable=True),
    sa.Column('default_value', sa.String(length=500), nullable=True),
    sa.Column('transformation_rule', sa.String(length=1000), nullable=True),
    sa.Column('validation_rule', sa.String(length=1000), nullable=True),
    sa.Column('sample_source_value', sa.String(length=500), nullable=True),
    sa.Column('sample_target_value', sa.String(length=500), nullable=True),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.ForeignKeyConstraint(['migration_job_id'], ['migration_jobs.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('migration_job_id', 'data_type', 'source_field', name='uq_migration_mapping')
    )
    op.create_index('idx_migration_mapping_job', 'migration_data_mappings', ['migration_job_id'], unique=False)
    op.create_index('idx_migration_mapping_type', 'migration_data_mappings', ['data_type'], unique=False)
    op.create_index(op.f('ix_migration_data_mappings_id'), 'migration_data_mappings', ['id'], unique=False)
    op.create_index(op.f('ix_migration_data_mappings_migration_job_id'), 'migration_data_mappings', ['migration_job_id'], unique=False)
    op.create_index(op.f('ix_migration_data_mappings_organization_id'), 'migration_data_mappings', ['organization_id'], unique=False)
    op.create_table('migration_logs',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('migration_job_id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('level', sa.Enum('DEBUG', 'INFO', 'WARNING', 'ERROR', 'CRITICAL', name='migrationloglevel'), nullable=False),
    sa.Column('message', sa.Text(), nullable=False),
    sa.Column('source_record_id', sa.String(length=100), nullable=True),
    sa.Column('target_record_id', sa.Integer(), nullable=True),
    sa.Column('error_code', sa.String(length=50), nullable=True),
    sa.Column('error_details', sa.JSON(), nullable=True),
    sa.Column('stack_trace', sa.Text(), nullable=True),
    sa.Column('operation', sa.String(length=100), nullable=True),
    sa.Column('data_type', sa.Enum('LEDGERS', 'VOUCHERS', 'CONTACTS', 'PRODUCTS', 'CUSTOMERS', 'VENDORS', 'STOCK', 'CHART_OF_ACCOUNTS', 'COMPANY_INFO', name='migrationdatatype'), nullable=True),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.ForeignKeyConstraint(['migration_job_id'], ['migration_jobs.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_migration_log_created', 'migration_logs', ['created_at'], unique=False)
    op.create_index('idx_migration_log_job', 'migration_logs', ['migration_job_id'], unique=False)
    op.create_index('idx_migration_log_level', 'migration_logs', ['level'], unique=False)
    op.create_index(op.f('ix_migration_logs_id'), 'migration_logs', ['id'], unique=False)
    op.create_index(op.f('ix_migration_logs_migration_job_id'), 'migration_logs', ['migration_job_id'], unique=False)
    op.create_index(op.f('ix_migration_logs_organization_id'), 'migration_logs', ['organization_id'], unique=False)
    op.create_table('ml_predictions',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('ml_model_id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('prediction_date', sa.Date(), nullable=False),
    sa.Column('predicted_value', sa.Numeric(precision=15, scale=2), nullable=False),
    sa.Column('confidence_score', sa.Numeric(precision=5, scale=2), nullable=True),
    sa.Column('lower_bound', sa.Numeric(precision=15, scale=2), nullable=True),
    sa.Column('upper_bound', sa.Numeric(precision=15, scale=2), nullable=True),
    sa.Column('input_features', sa.JSON(), nullable=False),
    sa.Column('actual_value', sa.Numeric(precision=15, scale=2), nullable=True),
    sa.Column('prediction_error', sa.Numeric(precision=15, scale=2), nullable=True),
    sa.Column('predicted_at', sa.DateTime(), nullable=False),
    sa.ForeignKeyConstraint(['ml_model_id'], ['ml_forecast_models.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_prediction_model_date', 'ml_predictions', ['ml_model_id', 'prediction_date'], unique=False)
    op.create_index(op.f('ix_ml_predictions_id'), 'ml_predictions', ['id'], unique=False)
    op.create_index(op.f('ix_ml_predictions_ml_model_id'), 'ml_predictions', ['ml_model_id'], unique=False)
    op.create_index(op.f('ix_ml_predictions_organization_id'), 'ml_predictions', ['organization_id'], unique=False)
    op.create_index(op.f('ix_ml_predictions_prediction_date'), 'ml_predictions', ['prediction_date'], unique=False)
    op.create_table('model_audit_trail',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('financial_model_id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('action_type', sa.String(length=50), nullable=False),
    sa.Column('field_changed', sa.String(length=100), nullable=True),
    sa.Column('old_value', sa.Text(), nullable=True),
    sa.Column('new_value', sa.Text(), nullable=True),
    sa.Column('change_reason', sa.Text(), nullable=True),
    sa.Column('changed_by_id', sa.Integer(), nullable=False),
    sa.Column('changed_at', sa.DateTime(), nullable=False),
    sa.Column('ip_address', sa.String(length=45), nullable=True),
    sa.Column('user_agent', sa.Text(), nullable=True),
    sa.ForeignKeyConstraint(['changed_by_id'], ['users.id'], ),
    sa.ForeignKeyConstraint(['financial_model_id'], ['financial_models.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_audit_action_date', 'model_audit_trail', ['action_type', 'changed_at'], unique=False)
    op.create_index('idx_audit_model_date', 'model_audit_trail', ['financial_model_id', 'changed_at'], unique=False)
    op.create_index(op.f('ix_model_audit_trail_action_type'), 'model_audit_trail', ['action_type'], unique=False)
    op.create_index(op.f('ix_model_audit_trail_changed_at'), 'model_audit_trail', ['changed_at'], unique=False)
    op.create_index(op.f('ix_model_audit_trail_financial_model_id'), 'model_audit_trail', ['financial_model_id'], unique=False)
    op.create_index(op.f('ix_model_audit_trail_id'), 'model_audit_trail', ['id'], unique=False)
    op.create_index(op.f('ix_model_audit_trail_organization_id'), 'model_audit_trail', ['organization_id'], unique=False)
    op.create_table('model_performance_metrics',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('model_id', sa.Integer(), nullable=False),
    sa.Column('metric_name', sa.String(), nullable=False),
    sa.Column('metric_value', sa.Float(), nullable=False),
    sa.Column('baseline_value', sa.Float(), nullable=True),
    sa.Column('evaluation_dataset', sa.String(), nullable=True),
    sa.Column('evaluation_period_start', sa.DateTime(timezone=True), nullable=True),
    sa.Column('evaluation_period_end', sa.DateTime(timezone=True), nullable=True),
    sa.Column('sample_size', sa.Integer(), nullable=True),
    sa.Column('metric_metadata', sa.JSON(), nullable=True),
    sa.Column('measured_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.ForeignKeyConstraint(['model_id'], ['ai_models.id'], name='fk_model_performance_model_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_model_performance_organization_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('model_id', 'metric_name', 'measured_at', name='uq_model_performance_metric_time')
    )
    op.create_index('idx_model_performance_model_metric', 'model_performance_metrics', ['model_id', 'metric_name'], unique=False)
    op.create_index('idx_model_performance_org_measured', 'model_performance_metrics', ['organization_id', 'measured_at'], unique=False)
    op.create_index('idx_model_performance_org_model', 'model_performance_metrics', ['organization_id', 'model_id'], unique=False)
    op.create_index(op.f('ix_model_performance_metrics_id'), 'model_performance_metrics', ['id'], unique=False)
    op.create_index(op.f('ix_model_performance_metrics_metric_name'), 'model_performance_metrics', ['metric_name'], unique=False)
    op.create_index(op.f('ix_model_performance_metrics_model_id'), 'model_performance_metrics', ['model_id'], unique=False)
    op.create_index(op.f('ix_model_performance_metrics_organization_id'), 'model_performance_metrics', ['organization_id'], unique=False)
    op.create_table('notification_logs',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('template_id', sa.Integer(), nullable=True),
    sa.Column('recipient_type', sa.String(), nullable=False),
    sa.Column('recipient_id', sa.Integer(), nullable=True),
    sa.Column('recipient_identifier', sa.String(), nullable=False),
    sa.Column('channel', sa.String(), nullable=False),
    sa.Column('subject', sa.String(), nullable=True),
    sa.Column('content', sa.Text(), nullable=False),
    sa.Column('status', sa.String(), nullable=False),
    sa.Column('sent_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('delivered_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('opened_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('clicked_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('error_message', sa.Text(), nullable=True),
    sa.Column('retry_count', sa.Integer(), nullable=False),
    sa.Column('max_retries', sa.Integer(), nullable=False),
    sa.Column('trigger_event', sa.String(), nullable=True),
    sa.Column('context_data', sa.JSON(), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], name='fk_notification_log_created_by'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_notification_log_organization_id'),
    sa.ForeignKeyConstraint(['template_id'], ['notification_templates.id'], name='fk_notification_log_template_id'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_notification_log_org_channel', 'notification_logs', ['organization_id', 'channel'], unique=False)
    op.create_index('idx_notification_log_org_status', 'notification_logs', ['organization_id', 'status'], unique=False)
    op.create_index('idx_notification_log_recipient', 'notification_logs', ['recipient_type', 'recipient_id'], unique=False)
    op.create_index('idx_notification_log_sent_at', 'notification_logs', ['sent_at'], unique=False)
    op.create_index(op.f('ix_notification_logs_id'), 'notification_logs', ['id'], unique=False)
    op.create_index(op.f('ix_notification_logs_organization_id'), 'notification_logs', ['organization_id'], unique=False)
    op.create_table('payment_records',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('payment_number', sa.String(length=50), nullable=False),
    sa.Column('payment_date', sa.Date(), nullable=False),
    sa.Column('payment_amount', sa.Numeric(precision=15, scale=2), nullable=False),
    sa.Column('payment_method', sa.String(length=50), nullable=False),
    sa.Column('reference_type', sa.String(length=20), nullable=False),
    sa.Column('reference_id', sa.Integer(), nullable=False),
    sa.Column('bank_account_id', sa.Integer(), nullable=True),
    sa.Column('status', sa.String(length=20), nullable=False),
    sa.Column('transaction_fee', sa.Numeric(precision=15, scale=2), nullable=False),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['bank_account_id'], ['bank_accounts.id'], ),
    sa.ForeignKeyConstraint(['created_by'], ['platform_users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'payment_number', name='uq_org_payment_number')
    )
    op.create_index('idx_pr_org_date', 'payment_records', ['organization_id', 'payment_date'], unique=False)
    op.create_index('idx_pr_reference', 'payment_records', ['reference_type', 'reference_id'], unique=False)
    op.create_index(op.f('ix_payment_records_id'), 'payment_records', ['id'], unique=False)
    op.create_index(op.f('ix_payment_records_organization_id'), 'payment_records', ['organization_id'], unique=False)
    op.create_index(op.f('ix_payment_records_payment_date'), 'payment_records', ['payment_date'], unique=False)
    op.create_index(op.f('ix_payment_records_payment_number'), 'payment_records', ['payment_number'], unique=False)
    op.create_index(op.f('ix_payment_records_reference_id'), 'payment_records', ['reference_id'], unique=False)
    op.create_table('performance_reviews',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('employee_id', sa.Integer(), nullable=False),
    sa.Column('reviewer_id', sa.Integer(), nullable=False),
    sa.Column('review_period_start', sa.Date(), nullable=False),
    sa.Column('review_period_end', sa.Date(), nullable=False),
    sa.Column('review_type', sa.String(), nullable=False),
    sa.Column('overall_rating', sa.Numeric(precision=3, scale=2), nullable=True),
    sa.Column('technical_skills_rating', sa.Numeric(precision=3, scale=2), nullable=True),
    sa.Column('communication_rating', sa.Numeric(precision=3, scale=2), nullable=True),
    sa.Column('leadership_rating', sa.Numeric(precision=3, scale=2), nullable=True),
    sa.Column('teamwork_rating', sa.Numeric(precision=3, scale=2), nullable=True),
    sa.Column('achievements', sa.Text(), nullable=True),
    sa.Column('areas_of_improvement', sa.Text(), nullable=True),
    sa.Column('goals_next_period', sa.Text(), nullable=True),
    sa.Column('employee_comments', sa.Text(), nullable=True),
    sa.Column('reviewer_comments', sa.Text(), nullable=True),
    sa.Column('custom_ratings', sa.JSON(), nullable=True),
    sa.Column('status', sa.String(), nullable=False),
    sa.Column('submitted_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('acknowledged_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['employee_id'], ['employee_profiles.id'], name='fk_performance_review_employee_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_performance_review_organization_id'),
    sa.ForeignKeyConstraint(['reviewer_id'], ['users.id'], name='fk_performance_review_reviewer_id'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_performance_review_org_employee', 'performance_reviews', ['organization_id', 'employee_id'], unique=False)
    op.create_index('idx_performance_review_period', 'performance_reviews', ['review_period_start', 'review_period_end'], unique=False)
    op.create_index('idx_performance_review_status', 'performance_reviews', ['status'], unique=False)
    op.create_index(op.f('ix_performance_reviews_employee_id'), 'performance_reviews', ['employee_id'], unique=False)
    op.create_index(op.f('ix_performance_reviews_id'), 'performance_reviews', ['id'], unique=False)
    op.create_index(op.f('ix_performance_reviews_organization_id'), 'performance_reviews', ['organization_id'], unique=False)
    op.create_index(op.f('ix_performance_reviews_reviewer_id'), 'performance_reviews', ['reviewer_id'], unique=False)
    op.create_table('prediction_results',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('model_id', sa.Integer(), nullable=False),
    sa.Column('prediction_id', sa.String(), nullable=False),
    sa.Column('input_data', sa.JSON(), nullable=False),
    sa.Column('prediction_output', sa.JSON(), nullable=False),
    sa.Column('confidence_score', sa.Float(), nullable=True),
    sa.Column('prediction_context', sa.String(), nullable=True),
    sa.Column('business_entity_type', sa.String(), nullable=True),
    sa.Column('business_entity_id', sa.Integer(), nullable=True),
    sa.Column('actual_outcome', sa.JSON(), nullable=True),
    sa.Column('feedback_provided', sa.Boolean(), nullable=False),
    sa.Column('feedback_score', sa.Float(), nullable=True),
    sa.Column('requested_by_id', sa.Integer(), nullable=True),
    sa.Column('api_endpoint', sa.String(), nullable=True),
    sa.Column('processing_time_ms', sa.Float(), nullable=True),
    sa.Column('prediction_timestamp', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('outcome_timestamp', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['model_id'], ['ai_models.id'], name='fk_prediction_result_model_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_prediction_result_organization_id'),
    sa.ForeignKeyConstraint(['requested_by_id'], ['users.id'], name='fk_prediction_result_requested_by_id'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_prediction_result_entity', 'prediction_results', ['business_entity_type', 'business_entity_id'], unique=False)
    op.create_index('idx_prediction_result_org_context', 'prediction_results', ['organization_id', 'prediction_context'], unique=False)
    op.create_index('idx_prediction_result_org_model', 'prediction_results', ['organization_id', 'model_id'], unique=False)
    op.create_index('idx_prediction_result_org_timestamp', 'prediction_results', ['organization_id', 'prediction_timestamp'], unique=False)
    op.create_index(op.f('ix_prediction_results_id'), 'prediction_results', ['id'], unique=False)
    op.create_index(op.f('ix_prediction_results_model_id'), 'prediction_results', ['model_id'], unique=False)
    op.create_index(op.f('ix_prediction_results_organization_id'), 'prediction_results', ['organization_id'], unique=False)
    op.create_index(op.f('ix_prediction_results_prediction_id'), 'prediction_results', ['prediction_id'], unique=True)
    op.create_table('product_files',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('filename', sa.String(), nullable=False),
    sa.Column('original_filename', sa.String(), nullable=False),
    sa.Column('file_path', sa.String(), nullable=False),
    sa.Column('file_size', sa.Integer(), nullable=False),
    sa.Column('content_type', sa.String(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_product_file_organization_id'),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], name='fk_product_file_product_id'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_product_file_org_product', 'product_files', ['organization_id', 'product_id'], unique=False)
    op.create_index(op.f('ix_product_files_id'), 'product_files', ['id'], unique=False)
    op.create_index(op.f('ix_product_files_organization_id'), 'product_files', ['organization_id'], unique=False)
    op.create_table('product_tracking',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('tracking_type', sa.Enum('NONE', 'BATCH', 'SERIAL', 'BATCH_AND_SERIAL', name='trackingtype'), nullable=False),
    sa.Column('valuation_method', sa.Enum('FIFO', 'LIFO', 'WEIGHTED_AVERAGE', 'STANDARD_COST', name='inventoryvaluationmethod'), nullable=False),
    sa.Column('batch_naming_series', sa.String(length=50), nullable=True),
    sa.Column('auto_create_batch', sa.Boolean(), nullable=False),
    sa.Column('batch_expiry_required', sa.Boolean(), nullable=False),
    sa.Column('serial_naming_series', sa.String(length=50), nullable=True),
    sa.Column('auto_create_serial', sa.Boolean(), nullable=False),
    sa.Column('enable_reorder_alert', sa.Boolean(), nullable=False),
    sa.Column('reorder_level', sa.Numeric(precision=12, scale=3), nullable=True),
    sa.Column('reorder_quantity', sa.Numeric(precision=12, scale=3), nullable=True),
    sa.Column('max_stock_level', sa.Numeric(precision=12, scale=3), nullable=True),
    sa.Column('procurement_lead_time_days', sa.Integer(), nullable=True),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_product_tracking_id'), 'product_tracking', ['id'], unique=False)
    op.create_index(op.f('ix_product_tracking_product_id'), 'product_tracking', ['product_id'], unique=True)
    op.create_table('proforma_invoices',
    sa.Column('customer_id', sa.Integer(), nullable=False),
    sa.Column('valid_until', sa.DateTime(timezone=True), nullable=True),
    sa.Column('payment_terms', sa.String(), nullable=True),
    sa.Column('terms_conditions', sa.Text(), nullable=True),
    sa.Column('parent_id', sa.Integer(), nullable=True),
    sa.Column('revision_number', sa.Integer(), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('voucher_number', sa.String(), nullable=False),
    sa.Column('date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['customer_id'], ['customers.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['parent_id'], ['proforma_invoices.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'voucher_number', name='uq_pi_org_voucher_number')
    )
    op.create_index('idx_pi_org_customer', 'proforma_invoices', ['organization_id', 'customer_id'], unique=False)
    op.create_index('idx_pi_org_date', 'proforma_invoices', ['organization_id', 'date'], unique=False)
    op.create_index(op.f('ix_proforma_invoices_id'), 'proforma_invoices', ['id'], unique=False)
    op.create_index(op.f('ix_proforma_invoices_organization_id'), 'proforma_invoices', ['organization_id'], unique=False)
    op.create_index(op.f('ix_proforma_invoices_voucher_number'), 'proforma_invoices', ['voucher_number'], unique=False)
    op.create_table('projects',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('company_id', sa.Integer(), nullable=True),
    sa.Column('project_code', sa.String(length=50), nullable=False),
    sa.Column('name', sa.String(length=255), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('project_type', sa.Enum('INTERNAL', 'CLIENT', 'RESEARCH', 'MAINTENANCE', 'DEVELOPMENT', name='projecttype'), nullable=False),
    sa.Column('status', sa.Enum('PLANNING', 'ACTIVE', 'ON_HOLD', 'COMPLETED', 'CANCELLED', name='projectstatus'), nullable=False),
    sa.Column('priority', sa.Enum('LOW', 'MEDIUM', 'HIGH', 'CRITICAL', name='projectpriority'), nullable=False),
    sa.Column('start_date', sa.Date(), nullable=True),
    sa.Column('end_date', sa.Date(), nullable=True),
    sa.Column('planned_start_date', sa.Date(), nullable=True),
    sa.Column('planned_end_date', sa.Date(), nullable=True),
    sa.Column('budget', sa.Float(), nullable=True),
    sa.Column('actual_cost', sa.Float(), nullable=True),
    sa.Column('progress_percentage', sa.Float(), nullable=False),
    sa.Column('client_id', sa.Integer(), nullable=True),
    sa.Column('project_manager_id', sa.Integer(), nullable=False),
    sa.Column('created_by', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('is_billable', sa.Boolean(), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=True),
    sa.Column('tags', sa.JSON(), nullable=True),
    sa.Column('custom_fields', sa.JSON(), nullable=True),
    sa.ForeignKeyConstraint(['client_id'], ['customers.id'], ),
    sa.ForeignKeyConstraint(['company_id'], ['companies.id'], ),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['project_manager_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'project_code', name='uq_project_org_code')
    )
    op.create_index('idx_project_org_client', 'projects', ['organization_id', 'client_id'], unique=False)
    op.create_index('idx_project_org_manager', 'projects', ['organization_id', 'project_manager_id'], unique=False)
    op.create_index('idx_project_org_status', 'projects', ['organization_id', 'status'], unique=False)
    op.create_index('idx_project_org_type', 'projects', ['organization_id', 'project_type'], unique=False)
    op.create_index(op.f('ix_projects_company_id'), 'projects', ['company_id'], unique=False)
    op.create_index(op.f('ix_projects_id'), 'projects', ['id'], unique=False)
    op.create_index(op.f('ix_projects_name'), 'projects', ['name'], unique=False)
    op.create_index(op.f('ix_projects_organization_id'), 'projects', ['organization_id'], unique=False)
    op.create_index(op.f('ix_projects_project_code'), 'projects', ['project_code'], unique=False)
    op.create_table('promotions',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('promotion_code', sa.String(), nullable=False),
    sa.Column('name', sa.String(), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('promotion_type', sa.Enum('PERCENTAGE_DISCOUNT', 'FIXED_AMOUNT_DISCOUNT', 'BUY_X_GET_Y', 'FREE_SHIPPING', 'BUNDLE_OFFER', 'CASHBACK', 'LOYALTY_POINTS', name='promotiontype'), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('valid_from', sa.Date(), nullable=False),
    sa.Column('valid_until', sa.Date(), nullable=True),
    sa.Column('discount_percentage', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('minimum_purchase_amount', sa.Float(), nullable=True),
    sa.Column('maximum_discount_amount', sa.Float(), nullable=True),
    sa.Column('usage_limit_total', sa.Integer(), nullable=True),
    sa.Column('usage_limit_per_customer', sa.Integer(), nullable=True),
    sa.Column('current_usage_count', sa.Integer(), nullable=False),
    sa.Column('buy_quantity', sa.Integer(), nullable=True),
    sa.Column('get_quantity', sa.Integer(), nullable=True),
    sa.Column('get_discount_percentage', sa.Float(), nullable=True),
    sa.Column('applicable_products', sa.JSON(), nullable=True),
    sa.Column('applicable_categories', sa.JSON(), nullable=True),
    sa.Column('exclude_products', sa.JSON(), nullable=True),
    sa.Column('target_customer_segments', sa.JSON(), nullable=True),
    sa.Column('new_customers_only', sa.Boolean(), nullable=False),
    sa.Column('campaign_id', sa.Integer(), nullable=True),
    sa.Column('total_redemptions', sa.Integer(), nullable=False),
    sa.Column('total_discount_given', sa.Float(), nullable=False),
    sa.Column('total_revenue_impact', sa.Float(), nullable=False),
    sa.Column('created_by_id', sa.Integer(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['campaign_id'], ['campaigns.id'], name='fk_promotion_campaign_id'),
    sa.ForeignKeyConstraint(['created_by_id'], ['users.id'], name='fk_promotion_created_by_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_promotion_organization_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'promotion_code', name='uq_promotion_org_code')
    )
    op.create_index('idx_promotion_org_active', 'promotions', ['organization_id', 'is_active'], unique=False)
    op.create_index('idx_promotion_org_type', 'promotions', ['organization_id', 'promotion_type'], unique=False)
    op.create_index('idx_promotion_validity', 'promotions', ['valid_from', 'valid_until'], unique=False)
    op.create_index(op.f('ix_promotions_id'), 'promotions', ['id'], unique=False)
    op.create_index(op.f('ix_promotions_is_active'), 'promotions', ['is_active'], unique=False)
    op.create_index(op.f('ix_promotions_name'), 'promotions', ['name'], unique=False)
    op.create_index(op.f('ix_promotions_organization_id'), 'promotions', ['organization_id'], unique=False)
    op.create_index(op.f('ix_promotions_promotion_code'), 'promotions', ['promotion_code'], unique=False)
    op.create_index(op.f('ix_promotions_promotion_type'), 'promotions', ['promotion_type'], unique=False)
    op.create_table('purchase_orders',
    sa.Column('vendor_id', sa.Integer(), nullable=False),
    sa.Column('delivery_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('payment_terms', sa.String(), nullable=True),
    sa.Column('terms_conditions', sa.Text(), nullable=True),
    sa.Column('line_discount_type', sa.String(), nullable=True),
    sa.Column('total_discount_type', sa.String(), nullable=True),
    sa.Column('total_discount', sa.Float(), nullable=True),
    sa.Column('round_off', sa.Float(), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('voucher_number', sa.String(), nullable=False),
    sa.Column('date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['vendor_id'], ['vendors.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'voucher_number', name='uq_po_org_voucher_number')
    )
    op.create_index('idx_po_org_date', 'purchase_orders', ['organization_id', 'date'], unique=False)
    op.create_index('idx_po_org_status', 'purchase_orders', ['organization_id', 'status'], unique=False)
    op.create_index('idx_po_org_vendor', 'purchase_orders', ['organization_id', 'vendor_id'], unique=False)
    op.create_index(op.f('ix_purchase_orders_id'), 'purchase_orders', ['id'], unique=False)
    op.create_index(op.f('ix_purchase_orders_organization_id'), 'purchase_orders', ['organization_id'], unique=False)
    op.create_index(op.f('ix_purchase_orders_voucher_number'), 'purchase_orders', ['voucher_number'], unique=False)
    op.create_table('quotations',
    sa.Column('customer_id', sa.Integer(), nullable=False),
    sa.Column('valid_until', sa.DateTime(timezone=True), nullable=True),
    sa.Column('payment_terms', sa.String(), nullable=True),
    sa.Column('terms_conditions', sa.Text(), nullable=True),
    sa.Column('line_discount_type', sa.String(), nullable=True),
    sa.Column('total_discount_type', sa.String(), nullable=True),
    sa.Column('total_discount', sa.Float(), nullable=True),
    sa.Column('round_off', sa.Float(), nullable=True),
    sa.Column('parent_id', sa.Integer(), nullable=True),
    sa.Column('revision_number', sa.Integer(), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('voucher_number', sa.String(), nullable=False),
    sa.Column('date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['customer_id'], ['customers.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['parent_id'], ['quotations.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'voucher_number', name='uq_quotation_org_voucher_number')
    )
    op.create_index('idx_quotation_org_customer', 'quotations', ['organization_id', 'customer_id'], unique=False)
    op.create_index('idx_quotation_org_date', 'quotations', ['organization_id', 'date'], unique=False)
    op.create_index(op.f('ix_quotations_id'), 'quotations', ['id'], unique=False)
    op.create_index(op.f('ix_quotations_organization_id'), 'quotations', ['organization_id'], unique=False)
    op.create_index(op.f('ix_quotations_voucher_number'), 'quotations', ['voucher_number'], unique=False)
    op.create_table('rate_limit_rules',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('name', sa.String(length=255), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('api_key_id', sa.Integer(), nullable=True),
    sa.Column('endpoint_pattern', sa.String(length=500), nullable=True),
    sa.Column('method', sa.String(length=10), nullable=True),
    sa.Column('requests_limit', sa.Integer(), nullable=False),
    sa.Column('time_window_type', sa.Enum('PER_MINUTE', 'PER_HOUR', 'PER_DAY', 'PER_MONTH', name='ratelimittype'), nullable=False),
    sa.Column('time_window_value', sa.Integer(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('priority', sa.Integer(), nullable=False),
    sa.Column('block_request', sa.Boolean(), nullable=False),
    sa.Column('send_warning', sa.Boolean(), nullable=False),
    sa.Column('custom_message', sa.Text(), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.ForeignKeyConstraint(['api_key_id'], ['api_keys.id'], ),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'name', name='uq_rate_limit_rule_org_name')
    )
    op.create_index('idx_rate_limit_rule_org_active', 'rate_limit_rules', ['organization_id', 'is_active'], unique=False)
    op.create_index('idx_rate_limit_rule_org_api_key', 'rate_limit_rules', ['organization_id', 'api_key_id'], unique=False)
    op.create_index('idx_rate_limit_rule_org_priority', 'rate_limit_rules', ['organization_id', 'priority'], unique=False)
    op.create_index(op.f('ix_rate_limit_rules_id'), 'rate_limit_rules', ['id'], unique=False)
    op.create_index(op.f('ix_rate_limit_rules_name'), 'rate_limit_rules', ['name'], unique=False)
    op.create_index(op.f('ix_rate_limit_rules_organization_id'), 'rate_limit_rules', ['organization_id'], unique=False)
    op.create_table('risk_events',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('risk_analysis_id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('event_date', sa.Date(), nullable=False),
    sa.Column('event_description', sa.Text(), nullable=False),
    sa.Column('severity_level', sa.String(length=20), nullable=False),
    sa.Column('actual_financial_impact', sa.Numeric(precision=15, scale=2), nullable=True),
    sa.Column('recovery_cost', sa.Numeric(precision=15, scale=2), nullable=True),
    sa.Column('response_actions', sa.Text(), nullable=True),
    sa.Column('resolution_date', sa.Date(), nullable=True),
    sa.Column('lessons_learned', sa.Text(), nullable=True),
    sa.Column('status', sa.String(length=20), nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('reported_by_id', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['reported_by_id'], ['users.id'], ),
    sa.ForeignKeyConstraint(['risk_analysis_id'], ['risk_analysis.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_risk_event_date_severity', 'risk_events', ['event_date', 'severity_level'], unique=False)
    op.create_index(op.f('ix_risk_events_event_date'), 'risk_events', ['event_date'], unique=False)
    op.create_index(op.f('ix_risk_events_id'), 'risk_events', ['id'], unique=False)
    op.create_index(op.f('ix_risk_events_organization_id'), 'risk_events', ['organization_id'], unique=False)
    op.create_index(op.f('ix_risk_events_risk_analysis_id'), 'risk_events', ['risk_analysis_id'], unique=False)
    op.create_table('role_module_assignments',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('role_id', sa.Integer(), nullable=False),
    sa.Column('module_name', sa.String(), nullable=False),
    sa.Column('access_level', sa.String(), nullable=False),
    sa.Column('permissions', sa.JSON(), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('assigned_by_id', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['assigned_by_id'], ['users.id'], name='fk_role_module_assigned_by_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_role_module_organization_id'),
    sa.ForeignKeyConstraint(['role_id'], ['organization_roles.id'], name='fk_role_module_role_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('role_id', 'module_name', name='uq_role_module')
    )
    op.create_index('idx_role_module_active', 'role_module_assignments', ['is_active'], unique=False)
    op.create_index('idx_role_module_org', 'role_module_assignments', ['organization_id'], unique=False)
    op.create_index(op.f('ix_role_module_assignments_id'), 'role_module_assignments', ['id'], unique=False)
    op.create_index(op.f('ix_role_module_assignments_organization_id'), 'role_module_assignments', ['organization_id'], unique=False)
    op.create_table('routes',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('route_code', sa.String(), nullable=False),
    sa.Column('route_name', sa.String(), nullable=False),
    sa.Column('carrier_id', sa.Integer(), nullable=False),
    sa.Column('origin_city', sa.String(), nullable=False),
    sa.Column('origin_state', sa.String(), nullable=True),
    sa.Column('origin_country', sa.String(), nullable=True),
    sa.Column('destination_city', sa.String(), nullable=False),
    sa.Column('destination_state', sa.String(), nullable=True),
    sa.Column('destination_country', sa.String(), nullable=True),
    sa.Column('distance_km', sa.Float(), nullable=True),
    sa.Column('estimated_transit_time_hours', sa.Float(), nullable=True),
    sa.Column('max_transit_time_hours', sa.Float(), nullable=True),
    sa.Column('vehicle_type', sa.Enum('TRUCK', 'VAN', 'CONTAINER', 'AIRCRAFT', 'SHIP', 'TRAIN', name='vehicletype'), nullable=True),
    sa.Column('frequency', sa.String(), nullable=True),
    sa.Column('operating_days', sa.JSON(), nullable=True),
    sa.Column('max_weight_kg', sa.Float(), nullable=True),
    sa.Column('max_volume_cbm', sa.Float(), nullable=True),
    sa.Column('temperature_controlled', sa.Boolean(), nullable=True),
    sa.Column('hazmat_allowed', sa.Boolean(), nullable=True),
    sa.Column('average_transit_time_hours', sa.Float(), nullable=True),
    sa.Column('on_time_percentage', sa.Float(), nullable=True),
    sa.Column('fuel_surcharge_applicable', sa.Boolean(), nullable=True),
    sa.Column('toll_charges_applicable', sa.Boolean(), nullable=True),
    sa.Column('status', sa.Enum('ACTIVE', 'INACTIVE', 'SEASONAL', 'SUSPENDED', name='routestatus'), nullable=False),
    sa.Column('seasonal_start_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('seasonal_end_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['carrier_id'], ['carriers.id'], ),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'route_code', name='uq_route_org_code')
    )
    op.create_index('idx_route_org_carrier', 'routes', ['organization_id', 'carrier_id'], unique=False)
    op.create_index('idx_route_org_dest', 'routes', ['organization_id', 'destination_city'], unique=False)
    op.create_index('idx_route_org_origin', 'routes', ['organization_id', 'origin_city'], unique=False)
    op.create_index('idx_route_org_status', 'routes', ['organization_id', 'status'], unique=False)
    op.create_index(op.f('ix_routes_id'), 'routes', ['id'], unique=False)
    op.create_index(op.f('ix_routes_organization_id'), 'routes', ['organization_id'], unique=False)
    op.create_table('salary_structures',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('employee_id', sa.Integer(), nullable=False),
    sa.Column('structure_name', sa.String(), nullable=False),
    sa.Column('effective_from', sa.Date(), nullable=False),
    sa.Column('effective_to', sa.Date(), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('basic_salary', sa.Numeric(precision=15, scale=2), nullable=False),
    sa.Column('hra', sa.Numeric(precision=15, scale=2), nullable=True),
    sa.Column('transport_allowance', sa.Numeric(precision=15, scale=2), nullable=True),
    sa.Column('medical_allowance', sa.Numeric(precision=15, scale=2), nullable=True),
    sa.Column('special_allowance', sa.Numeric(precision=15, scale=2), nullable=True),
    sa.Column('other_allowances', sa.Numeric(precision=15, scale=2), nullable=True),
    sa.Column('provident_fund', sa.Numeric(precision=15, scale=2), nullable=True),
    sa.Column('professional_tax', sa.Numeric(precision=15, scale=2), nullable=True),
    sa.Column('income_tax', sa.Numeric(precision=15, scale=2), nullable=True),
    sa.Column('other_deductions', sa.Numeric(precision=15, scale=2), nullable=True),
    sa.Column('gross_salary', sa.Numeric(precision=15, scale=2), nullable=False),
    sa.Column('total_deductions', sa.Numeric(precision=15, scale=2), nullable=False),
    sa.Column('net_salary', sa.Numeric(precision=15, scale=2), nullable=False),
    sa.Column('variable_components', sa.JSON(), nullable=True),
    sa.Column('is_approved', sa.Boolean(), nullable=False),
    sa.Column('approved_by_id', sa.Integer(), nullable=True),
    sa.Column('approved_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by_id', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['approved_by_id'], ['users.id'], name='fk_salary_structure_approved_by_id'),
    sa.ForeignKeyConstraint(['created_by_id'], ['users.id'], name='fk_salary_structure_created_by_id'),
    sa.ForeignKeyConstraint(['employee_id'], ['employee_profiles.id'], name='fk_salary_structure_employee_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_salary_structure_organization_id'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_salary_structure_active', 'salary_structures', ['is_active'], unique=False)
    op.create_index('idx_salary_structure_effective', 'salary_structures', ['effective_from', 'effective_to'], unique=False)
    op.create_index('idx_salary_structure_org_employee', 'salary_structures', ['organization_id', 'employee_id'], unique=False)
    op.create_index(op.f('ix_salary_structures_effective_from'), 'salary_structures', ['effective_from'], unique=False)
    op.create_index(op.f('ix_salary_structures_employee_id'), 'salary_structures', ['employee_id'], unique=False)
    op.create_index(op.f('ix_salary_structures_id'), 'salary_structures', ['id'], unique=False)
    op.create_index(op.f('ix_salary_structures_organization_id'), 'salary_structures', ['organization_id'], unique=False)
    op.create_table('sales_orders',
    sa.Column('customer_id', sa.Integer(), nullable=False),
    sa.Column('delivery_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('payment_terms', sa.String(), nullable=True),
    sa.Column('terms_conditions', sa.Text(), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('voucher_number', sa.String(), nullable=False),
    sa.Column('date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['customer_id'], ['customers.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'voucher_number', name='uq_so_org_voucher_number')
    )
    op.create_index('idx_so_org_customer', 'sales_orders', ['organization_id', 'customer_id'], unique=False)
    op.create_index('idx_so_org_date', 'sales_orders', ['organization_id', 'date'], unique=False)
    op.create_index('idx_so_org_status', 'sales_orders', ['organization_id', 'status'], unique=False)
    op.create_index(op.f('ix_sales_orders_id'), 'sales_orders', ['id'], unique=False)
    op.create_index(op.f('ix_sales_orders_organization_id'), 'sales_orders', ['organization_id'], unique=False)
    op.create_index(op.f('ix_sales_orders_voucher_number'), 'sales_orders', ['voucher_number'], unique=False)
    op.create_table('scenario_analysis',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('financial_model_id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('scenario_name', sa.String(length=200), nullable=False),
    sa.Column('scenario_type', sa.Enum('BASE_CASE', 'BEST_CASE', 'WORST_CASE', 'CUSTOM', name='scenariotype'), nullable=False),
    sa.Column('scenario_description', sa.Text(), nullable=True),
    sa.Column('assumption_changes', sa.JSON(), nullable=False),
    sa.Column('scenario_results', sa.JSON(), nullable=False),
    sa.Column('variance_from_base', sa.JSON(), nullable=True),
    sa.Column('probability', sa.Numeric(precision=5, scale=2), nullable=True),
    sa.Column('risk_adjusted_value', sa.Numeric(precision=15, scale=2), nullable=True),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('created_by_id', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by_id'], ['users.id'], ),
    sa.ForeignKeyConstraint(['financial_model_id'], ['financial_models.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_scenario_org_type', 'scenario_analysis', ['organization_id', 'scenario_type'], unique=False)
    op.create_index(op.f('ix_scenario_analysis_financial_model_id'), 'scenario_analysis', ['financial_model_id'], unique=False)
    op.create_index(op.f('ix_scenario_analysis_id'), 'scenario_analysis', ['id'], unique=False)
    op.create_index(op.f('ix_scenario_analysis_organization_id'), 'scenario_analysis', ['organization_id'], unique=False)
    op.create_index(op.f('ix_scenario_analysis_scenario_type'), 'scenario_analysis', ['scenario_type'], unique=False)
    op.create_table('stock',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('quantity', sa.Float(), nullable=False),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('location', sa.String(), nullable=True),
    sa.Column('last_updated', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_stock_organization_id'),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], name='fk_stock_product_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'product_id', 'location', name='uq_stock_org_product_location')
    )
    op.create_index('idx_stock_org_location', 'stock', ['organization_id', 'location'], unique=False)
    op.create_index('idx_stock_org_product', 'stock', ['organization_id', 'product_id'], unique=False)
    op.create_index(op.f('ix_stock_id'), 'stock', ['id'], unique=False)
    op.create_index(op.f('ix_stock_organization_id'), 'stock', ['organization_id'], unique=False)
    op.create_table('tally_sync_items',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('sync_log_id', sa.Integer(), nullable=False),
    sa.Column('entity_type', sa.String(length=50), nullable=False),
    sa.Column('entity_id', sa.Integer(), nullable=True),
    sa.Column('entity_reference', sa.String(length=100), nullable=True),
    sa.Column('tally_guid', sa.String(length=100), nullable=True),
    sa.Column('tally_reference', sa.String(length=100), nullable=True),
    sa.Column('sync_direction', sa.String(length=20), nullable=False),
    sa.Column('sync_status', sa.Enum('PENDING', 'IN_PROGRESS', 'COMPLETED', 'FAILED', 'PARTIAL', name='syncstatus'), nullable=False),
    sa.Column('error_message', sa.Text(), nullable=True),
    sa.Column('before_data', sa.JSON(), nullable=True),
    sa.Column('after_data', sa.JSON(), nullable=True),
    sa.Column('processed_at', sa.DateTime(), nullable=False),
    sa.ForeignKeyConstraint(['sync_log_id'], ['tally_sync_logs.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_sync_item_entity', 'tally_sync_items', ['entity_type', 'entity_id'], unique=False)
    op.create_index('idx_sync_item_tally', 'tally_sync_items', ['tally_guid'], unique=False)
    op.create_index(op.f('ix_tally_sync_items_entity_id'), 'tally_sync_items', ['entity_id'], unique=False)
    op.create_index(op.f('ix_tally_sync_items_entity_reference'), 'tally_sync_items', ['entity_reference'], unique=False)
    op.create_index(op.f('ix_tally_sync_items_entity_type'), 'tally_sync_items', ['entity_type'], unique=False)
    op.create_index(op.f('ix_tally_sync_items_id'), 'tally_sync_items', ['id'], unique=False)
    op.create_index(op.f('ix_tally_sync_items_processed_at'), 'tally_sync_items', ['processed_at'], unique=False)
    op.create_index(op.f('ix_tally_sync_items_sync_direction'), 'tally_sync_items', ['sync_direction'], unique=False)
    op.create_index(op.f('ix_tally_sync_items_sync_log_id'), 'tally_sync_items', ['sync_log_id'], unique=False)
    op.create_index(op.f('ix_tally_sync_items_sync_status'), 'tally_sync_items', ['sync_status'], unique=False)
    op.create_index(op.f('ix_tally_sync_items_tally_guid'), 'tally_sync_items', ['tally_guid'], unique=False)
    op.create_index(op.f('ix_tally_sync_items_tally_reference'), 'tally_sync_items', ['tally_reference'], unique=False)
    op.create_table('task_project_members',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('project_id', sa.Integer(), nullable=False),
    sa.Column('user_id', sa.Integer(), nullable=False),
    sa.Column('role', sa.String(length=50), nullable=False),
    sa.Column('added_at', sa.DateTime(), nullable=False),
    sa.ForeignKeyConstraint(['project_id'], ['task_projects.id'], ),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_task_project_members_id'), 'task_project_members', ['id'], unique=False)
    op.create_table('tickets',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('ticket_number', sa.String(), nullable=False),
    sa.Column('customer_id', sa.Integer(), nullable=False),
    sa.Column('assigned_to_id', sa.Integer(), nullable=True),
    sa.Column('created_by_id', sa.Integer(), nullable=True),
    sa.Column('title', sa.String(), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('status', sa.String(), nullable=False),
    sa.Column('priority', sa.String(), nullable=False),
    sa.Column('ticket_type', sa.String(), nullable=False),
    sa.Column('resolution', sa.Text(), nullable=True),
    sa.Column('resolved_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('closed_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('due_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('estimated_hours', sa.Float(), nullable=True),
    sa.Column('actual_hours', sa.Float(), nullable=True),
    sa.Column('customer_rating', sa.Integer(), nullable=True),
    sa.Column('customer_feedback', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['assigned_to_id'], ['users.id'], name='fk_ticket_assigned_to_id'),
    sa.ForeignKeyConstraint(['created_by_id'], ['users.id'], name='fk_ticket_created_by_id'),
    sa.ForeignKeyConstraint(['customer_id'], ['customers.id'], name='fk_ticket_customer_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_ticket_organization_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'ticket_number', name='uq_ticket_org_number')
    )
    op.create_index('idx_ticket_created_at', 'tickets', ['created_at'], unique=False)
    op.create_index('idx_ticket_due_date', 'tickets', ['due_date'], unique=False)
    op.create_index('idx_ticket_org_assigned', 'tickets', ['organization_id', 'assigned_to_id'], unique=False)
    op.create_index('idx_ticket_org_customer', 'tickets', ['organization_id', 'customer_id'], unique=False)
    op.create_index('idx_ticket_org_priority', 'tickets', ['organization_id', 'priority'], unique=False)
    op.create_index('idx_ticket_org_status', 'tickets', ['organization_id', 'status'], unique=False)
    op.create_index('idx_ticket_org_type', 'tickets', ['organization_id', 'ticket_type'], unique=False)
    op.create_index(op.f('ix_tickets_id'), 'tickets', ['id'], unique=False)
    op.create_index(op.f('ix_tickets_organization_id'), 'tickets', ['organization_id'], unique=False)
    op.create_index(op.f('ix_tickets_ticket_number'), 'tickets', ['ticket_number'], unique=False)
    op.create_table('training_sessions',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('program_id', sa.Integer(), nullable=False),
    sa.Column('session_name', sa.String(), nullable=False),
    sa.Column('session_code', sa.String(), nullable=False),
    sa.Column('start_date', sa.Date(), nullable=False),
    sa.Column('end_date', sa.Date(), nullable=False),
    sa.Column('start_time', sa.DateTime(timezone=True), nullable=True),
    sa.Column('end_time', sa.DateTime(timezone=True), nullable=True),
    sa.Column('delivery_method', sa.String(), nullable=False),
    sa.Column('location', sa.String(), nullable=True),
    sa.Column('venue_details', sa.Text(), nullable=True),
    sa.Column('meeting_link', sa.String(), nullable=True),
    sa.Column('instructor_id', sa.Integer(), nullable=True),
    sa.Column('external_instructor', sa.String(), nullable=True),
    sa.Column('max_participants', sa.Integer(), nullable=False),
    sa.Column('enrolled_count', sa.Integer(), nullable=False),
    sa.Column('status', sa.String(), nullable=False),
    sa.Column('registration_start', sa.Date(), nullable=True),
    sa.Column('registration_end', sa.Date(), nullable=True),
    sa.Column('auto_approve_registration', sa.Boolean(), nullable=False),
    sa.Column('completion_rate', sa.Numeric(precision=5, scale=2), nullable=True),
    sa.Column('average_rating', sa.Numeric(precision=3, scale=2), nullable=True),
    sa.Column('session_materials', sa.JSON(), nullable=True),
    sa.Column('prerequisites_checked', sa.Boolean(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['instructor_id'], ['users.id'], name='fk_training_session_instructor_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_training_session_organization_id'),
    sa.ForeignKeyConstraint(['program_id'], ['training_programs.id'], name='fk_training_session_program_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'session_code', name='uq_training_session_org_code')
    )
    op.create_index('idx_training_session_org_dates', 'training_sessions', ['organization_id', 'start_date', 'end_date'], unique=False)
    op.create_index('idx_training_session_status', 'training_sessions', ['status'], unique=False)
    op.create_index(op.f('ix_training_sessions_id'), 'training_sessions', ['id'], unique=False)
    op.create_index(op.f('ix_training_sessions_organization_id'), 'training_sessions', ['organization_id'], unique=False)
    op.create_index(op.f('ix_training_sessions_program_id'), 'training_sessions', ['program_id'], unique=False)
    op.create_index(op.f('ix_training_sessions_session_code'), 'training_sessions', ['session_code'], unique=False)
    op.create_table('user_organization_roles',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('user_id', sa.Integer(), nullable=False),
    sa.Column('role_id', sa.Integer(), nullable=False),
    sa.Column('assigned_by_id', sa.Integer(), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('assigned_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('manager_assignments', sa.JSON(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['assigned_by_id'], ['users.id'], name='fk_user_org_role_assigned_by_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_user_org_role_organization_id'),
    sa.ForeignKeyConstraint(['role_id'], ['organization_roles.id'], name='fk_user_org_role_role_id'),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], name='fk_user_org_role_user_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('user_id', 'role_id', name='uq_user_org_role')
    )
    op.create_index('idx_user_org_role_active', 'user_organization_roles', ['is_active'], unique=False)
    op.create_index('idx_user_org_role_role', 'user_organization_roles', ['role_id'], unique=False)
    op.create_index('idx_user_org_role_user', 'user_organization_roles', ['user_id'], unique=False)
    op.create_index(op.f('ix_user_organization_roles_id'), 'user_organization_roles', ['id'], unique=False)
    op.create_index(op.f('ix_user_organization_roles_organization_id'), 'user_organization_roles', ['organization_id'], unique=False)
    op.create_table('vendor_evaluations',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('vendor_id', sa.Integer(), nullable=False),
    sa.Column('evaluation_date', sa.Date(), nullable=False),
    sa.Column('evaluation_type', sa.String(length=50), nullable=False),
    sa.Column('quality_rating', sa.Numeric(precision=3, scale=1), nullable=True),
    sa.Column('delivery_rating', sa.Numeric(precision=3, scale=1), nullable=True),
    sa.Column('service_rating', sa.Numeric(precision=3, scale=1), nullable=True),
    sa.Column('price_rating', sa.Numeric(precision=3, scale=1), nullable=True),
    sa.Column('communication_rating', sa.Numeric(precision=3, scale=1), nullable=True),
    sa.Column('overall_rating', sa.Numeric(precision=3, scale=1), nullable=False),
    sa.Column('strengths', sa.Text(), nullable=True),
    sa.Column('weaknesses', sa.Text(), nullable=True),
    sa.Column('improvement_suggestions', sa.Text(), nullable=True),
    sa.Column('on_time_delivery_percentage', sa.Numeric(precision=5, scale=2), nullable=True),
    sa.Column('quality_rejection_percentage', sa.Numeric(precision=5, scale=2), nullable=True),
    sa.Column('vendor_status', sa.Enum('ACTIVE', 'INACTIVE', 'BLACKLISTED', 'UNDER_REVIEW', name='vendorstatus'), nullable=False),
    sa.Column('evaluated_by', sa.Integer(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.ForeignKeyConstraint(['evaluated_by'], ['platform_users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['vendor_id'], ['vendors.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_vendor_eval_org_date', 'vendor_evaluations', ['organization_id', 'evaluation_date'], unique=False)
    op.create_index('idx_vendor_eval_rating', 'vendor_evaluations', ['overall_rating'], unique=False)
    op.create_index(op.f('ix_vendor_evaluations_evaluation_date'), 'vendor_evaluations', ['evaluation_date'], unique=False)
    op.create_index(op.f('ix_vendor_evaluations_id'), 'vendor_evaluations', ['id'], unique=False)
    op.create_index(op.f('ix_vendor_evaluations_organization_id'), 'vendor_evaluations', ['organization_id'], unique=False)
    op.create_index(op.f('ix_vendor_evaluations_vendor_id'), 'vendor_evaluations', ['vendor_id'], unique=False)
    op.create_table('vendor_files',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('vendor_id', sa.Integer(), nullable=False),
    sa.Column('filename', sa.String(), nullable=False),
    sa.Column('original_filename', sa.String(), nullable=False),
    sa.Column('file_path', sa.String(), nullable=False),
    sa.Column('file_size', sa.Integer(), nullable=False),
    sa.Column('content_type', sa.String(), nullable=False),
    sa.Column('file_type', sa.String(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_vendor_file_organization_id'),
    sa.ForeignKeyConstraint(['vendor_id'], ['vendors.id'], name='fk_vendor_file_vendor_id'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_vendor_file_org_vendor', 'vendor_files', ['organization_id', 'vendor_id'], unique=False)
    op.create_index(op.f('ix_vendor_files_id'), 'vendor_files', ['id'], unique=False)
    op.create_index(op.f('ix_vendor_files_organization_id'), 'vendor_files', ['organization_id'], unique=False)
    op.create_table('vendor_quotations',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('rfq_id', sa.Integer(), nullable=False),
    sa.Column('vendor_id', sa.Integer(), nullable=False),
    sa.Column('quotation_number', sa.String(length=50), nullable=False),
    sa.Column('quotation_date', sa.Date(), nullable=False),
    sa.Column('validity_date', sa.Date(), nullable=False),
    sa.Column('total_amount', sa.Numeric(precision=15, scale=2), nullable=False),
    sa.Column('tax_amount', sa.Numeric(precision=15, scale=2), nullable=False),
    sa.Column('grand_total', sa.Numeric(precision=15, scale=2), nullable=False),
    sa.Column('payment_terms', sa.String(length=100), nullable=True),
    sa.Column('delivery_terms', sa.String(length=100), nullable=True),
    sa.Column('warranty_terms', sa.Text(), nullable=True),
    sa.Column('is_selected', sa.Boolean(), nullable=False),
    sa.Column('selection_rank', sa.Integer(), nullable=True),
    sa.Column('technical_score', sa.Numeric(precision=5, scale=2), nullable=True),
    sa.Column('commercial_score', sa.Numeric(precision=5, scale=2), nullable=True),
    sa.Column('overall_score', sa.Numeric(precision=5, scale=2), nullable=True),
    sa.Column('evaluation_notes', sa.Text(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['rfq_id'], ['request_for_quotations.id'], ),
    sa.ForeignKeyConstraint(['vendor_id'], ['vendors.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'quotation_number', name='uq_org_quotation_number')
    )
    op.create_index('idx_quotation_rfq_vendor', 'vendor_quotations', ['rfq_id', 'vendor_id'], unique=False)
    op.create_index('idx_quotation_selected', 'vendor_quotations', ['is_selected'], unique=False)
    op.create_index(op.f('ix_vendor_quotations_id'), 'vendor_quotations', ['id'], unique=False)
    op.create_index(op.f('ix_vendor_quotations_organization_id'), 'vendor_quotations', ['organization_id'], unique=False)
    op.create_index(op.f('ix_vendor_quotations_quotation_date'), 'vendor_quotations', ['quotation_date'], unique=False)
    op.create_index(op.f('ix_vendor_quotations_quotation_number'), 'vendor_quotations', ['quotation_number'], unique=False)
    op.create_index(op.f('ix_vendor_quotations_rfq_id'), 'vendor_quotations', ['rfq_id'], unique=False)
    op.create_index(op.f('ix_vendor_quotations_vendor_id'), 'vendor_quotations', ['vendor_id'], unique=False)
    op.create_table('vendor_rfqs',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('rfq_id', sa.Integer(), nullable=False),
    sa.Column('vendor_id', sa.Integer(), nullable=False),
    sa.Column('invited_date', sa.Date(), nullable=False),
    sa.Column('invitation_sent', sa.Boolean(), nullable=False),
    sa.Column('has_responded', sa.Boolean(), nullable=False),
    sa.Column('response_date', sa.Date(), nullable=True),
    sa.Column('decline_reason', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.ForeignKeyConstraint(['rfq_id'], ['request_for_quotations.id'], ),
    sa.ForeignKeyConstraint(['vendor_id'], ['vendors.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('rfq_id', 'vendor_id', name='uq_rfq_vendor')
    )
    op.create_index('idx_vendor_rfq_response', 'vendor_rfqs', ['has_responded'], unique=False)
    op.create_index(op.f('ix_vendor_rfqs_id'), 'vendor_rfqs', ['id'], unique=False)
    op.create_index(op.f('ix_vendor_rfqs_invited_date'), 'vendor_rfqs', ['invited_date'], unique=False)
    op.create_index(op.f('ix_vendor_rfqs_rfq_id'), 'vendor_rfqs', ['rfq_id'], unique=False)
    op.create_index(op.f('ix_vendor_rfqs_vendor_id'), 'vendor_rfqs', ['vendor_id'], unique=False)
    op.create_table('voucher_approvals',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('approval_settings_id', sa.Integer(), nullable=False),
    sa.Column('voucher_type', sa.String(), nullable=False),
    sa.Column('voucher_id', sa.Integer(), nullable=False),
    sa.Column('voucher_number', sa.String(), nullable=True),
    sa.Column('voucher_amount', sa.Float(), nullable=True),
    sa.Column('submitted_by_id', sa.Integer(), nullable=False),
    sa.Column('submitted_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('status', sa.String(), nullable=False),
    sa.Column('current_approver_id', sa.Integer(), nullable=True),
    sa.Column('level_1_approver_id', sa.Integer(), nullable=True),
    sa.Column('level_1_approved_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('level_1_comments', sa.Text(), nullable=True),
    sa.Column('level_2_approver_id', sa.Integer(), nullable=True),
    sa.Column('level_2_approved_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('level_2_comments', sa.Text(), nullable=True),
    sa.Column('final_decision', sa.String(), nullable=True),
    sa.Column('final_decision_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('final_decision_by_id', sa.Integer(), nullable=True),
    sa.Column('rejection_reason', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['approval_settings_id'], ['organization_approval_settings.id'], name='fk_voucher_approval_settings_id'),
    sa.ForeignKeyConstraint(['current_approver_id'], ['users.id'], name='fk_voucher_approval_current_approver_id'),
    sa.ForeignKeyConstraint(['final_decision_by_id'], ['users.id'], name='fk_voucher_approval_final_decision_by_id'),
    sa.ForeignKeyConstraint(['level_1_approver_id'], ['users.id'], name='fk_voucher_approval_level_1_approver_id'),
    sa.ForeignKeyConstraint(['level_2_approver_id'], ['users.id'], name='fk_voucher_approval_level_2_approver_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_voucher_approval_organization_id'),
    sa.ForeignKeyConstraint(['submitted_by_id'], ['users.id'], name='fk_voucher_approval_submitted_by_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('voucher_type', 'voucher_id', name='uq_voucher_approval')
    )
    op.create_index('idx_voucher_approval_current', 'voucher_approvals', ['current_approver_id'], unique=False)
    op.create_index('idx_voucher_approval_org', 'voucher_approvals', ['organization_id'], unique=False)
    op.create_index('idx_voucher_approval_status', 'voucher_approvals', ['status'], unique=False)
    op.create_index('idx_voucher_approval_submitted', 'voucher_approvals', ['submitted_by_id'], unique=False)
    op.create_index(op.f('ix_voucher_approvals_id'), 'voucher_approvals', ['id'], unique=False)
    op.create_index(op.f('ix_voucher_approvals_organization_id'), 'voucher_approvals', ['organization_id'], unique=False)
    op.create_table('warehouse_stock',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('warehouse_id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('available_quantity', sa.Numeric(precision=12, scale=3), nullable=False),
    sa.Column('committed_quantity', sa.Numeric(precision=12, scale=3), nullable=False),
    sa.Column('on_order_quantity', sa.Numeric(precision=12, scale=3), nullable=False),
    sa.Column('free_quantity', sa.Numeric(precision=12, scale=3), nullable=False),
    sa.Column('total_quantity', sa.Numeric(precision=12, scale=3), nullable=False),
    sa.Column('average_cost', sa.Numeric(precision=15, scale=2), nullable=False),
    sa.Column('total_value', sa.Numeric(precision=15, scale=2), nullable=False),
    sa.Column('last_updated', sa.DateTime(), nullable=False),
    sa.Column('last_movement_date', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], ),
    sa.ForeignKeyConstraint(['warehouse_id'], ['warehouses.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('warehouse_id', 'product_id', name='uq_warehouse_product_stock')
    )
    op.create_index('idx_warehouse_stock_org_warehouse', 'warehouse_stock', ['organization_id', 'warehouse_id'], unique=False)
    op.create_index(op.f('ix_warehouse_stock_id'), 'warehouse_stock', ['id'], unique=False)
    op.create_index(op.f('ix_warehouse_stock_organization_id'), 'warehouse_stock', ['organization_id'], unique=False)
    op.create_index(op.f('ix_warehouse_stock_product_id'), 'warehouse_stock', ['product_id'], unique=False)
    op.create_index(op.f('ix_warehouse_stock_warehouse_id'), 'warehouse_stock', ['warehouse_id'], unique=False)
    op.create_table('webhook_deliveries',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('webhook_id', sa.Integer(), nullable=False),
    sa.Column('event_type', sa.String(length=100), nullable=False),
    sa.Column('entity_type', sa.String(length=100), nullable=False),
    sa.Column('entity_id', sa.Integer(), nullable=False),
    sa.Column('request_url', sa.String(length=1000), nullable=False),
    sa.Column('request_headers', sa.JSON(), nullable=True),
    sa.Column('request_body', sa.Text(), nullable=True),
    sa.Column('response_status_code', sa.Integer(), nullable=True),
    sa.Column('response_headers', sa.JSON(), nullable=True),
    sa.Column('response_body', sa.Text(), nullable=True),
    sa.Column('response_time_ms', sa.Float(), nullable=True),
    sa.Column('is_successful', sa.Boolean(), nullable=False),
    sa.Column('error_message', sa.Text(), nullable=True),
    sa.Column('attempt_number', sa.Integer(), nullable=False),
    sa.Column('max_attempts', sa.Integer(), nullable=False),
    sa.Column('next_retry_at', sa.DateTime(), nullable=True),
    sa.Column('delivered_at', sa.DateTime(), nullable=False),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['webhook_id'], ['webhooks.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_webhook_delivery_org_delivered', 'webhook_deliveries', ['organization_id', 'delivered_at'], unique=False)
    op.create_index('idx_webhook_delivery_org_event', 'webhook_deliveries', ['organization_id', 'event_type'], unique=False)
    op.create_index('idx_webhook_delivery_org_successful', 'webhook_deliveries', ['organization_id', 'is_successful'], unique=False)
    op.create_index('idx_webhook_delivery_org_webhook', 'webhook_deliveries', ['organization_id', 'webhook_id'], unique=False)
    op.create_index(op.f('ix_webhook_deliveries_event_type'), 'webhook_deliveries', ['event_type'], unique=False)
    op.create_index(op.f('ix_webhook_deliveries_id'), 'webhook_deliveries', ['id'], unique=False)
    op.create_index(op.f('ix_webhook_deliveries_organization_id'), 'webhook_deliveries', ['organization_id'], unique=False)
    op.create_table('workflow_schedules',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('workflow_template_id', sa.Integer(), nullable=False),
    sa.Column('name', sa.String(length=200), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('schedule_type', sa.String(length=50), nullable=False),
    sa.Column('schedule_expression', sa.String(length=200), nullable=False),
    sa.Column('timezone', sa.String(length=50), nullable=False),
    sa.Column('start_date', sa.DateTime(), nullable=True),
    sa.Column('end_date', sa.DateTime(), nullable=True),
    sa.Column('last_run_at', sa.DateTime(), nullable=True),
    sa.Column('next_run_at', sa.DateTime(), nullable=True),
    sa.Column('total_runs', sa.Integer(), nullable=False),
    sa.Column('successful_runs', sa.Integer(), nullable=False),
    sa.Column('failed_runs', sa.Integer(), nullable=False),
    sa.Column('default_input_data', sa.JSON(), nullable=True),
    sa.Column('created_at', sa.DateTime(), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['workflow_template_id'], ['workflow_templates_advanced.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'name', name='uq_workflow_schedule_org_name')
    )
    op.create_index('idx_workflow_schedule_active', 'workflow_schedules', ['is_active'], unique=False)
    op.create_index('idx_workflow_schedule_next_run', 'workflow_schedules', ['next_run_at'], unique=False)
    op.create_index(op.f('ix_workflow_schedules_id'), 'workflow_schedules', ['id'], unique=False)
    op.create_index(op.f('ix_workflow_schedules_name'), 'workflow_schedules', ['name'], unique=False)
    op.create_index(op.f('ix_workflow_schedules_organization_id'), 'workflow_schedules', ['organization_id'], unique=False)
    op.create_index(op.f('ix_workflow_schedules_schedule_type'), 'workflow_schedules', ['schedule_type'], unique=False)
    op.create_index(op.f('ix_workflow_schedules_workflow_template_id'), 'workflow_schedules', ['workflow_template_id'], unique=False)
    op.create_table('workflow_steps',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('template_id', sa.Integer(), nullable=False),
    sa.Column('step_name', sa.String(length=255), nullable=False),
    sa.Column('step_type', sa.Enum('APPROVAL', 'NOTIFICATION', 'CONDITION', 'ACTION', 'PARALLEL', 'SEQUENTIAL', name='steptype'), nullable=False),
    sa.Column('step_order', sa.Integer(), nullable=False),
    sa.Column('is_required', sa.Boolean(), nullable=True),
    sa.Column('allow_delegation', sa.Boolean(), nullable=True),
    sa.Column('allow_rejection', sa.Boolean(), nullable=True),
    sa.Column('assigned_role', sa.String(length=100), nullable=True),
    sa.Column('assigned_user_id', sa.Integer(), nullable=True),
    sa.Column('assignment_rules', sa.JSON(), nullable=True),
    sa.Column('condition_rules', sa.JSON(), nullable=True),
    sa.Column('parallel_group', sa.String(length=50), nullable=True),
    sa.Column('escalation_enabled', sa.Boolean(), nullable=True),
    sa.Column('escalation_hours', sa.Integer(), nullable=True),
    sa.Column('escalation_action', sa.Enum('EMAIL', 'NOTIFICATION', 'REASSIGN', 'AUTO_APPROVE', 'ESCALATE_TO_MANAGER', name='escalationaction'), nullable=True),
    sa.Column('escalation_to_user_id', sa.Integer(), nullable=True),
    sa.Column('notification_template', sa.Text(), nullable=True),
    sa.Column('send_email', sa.Boolean(), nullable=True),
    sa.Column('send_in_app', sa.Boolean(), nullable=True),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.ForeignKeyConstraint(['assigned_user_id'], ['users.id'], ),
    sa.ForeignKeyConstraint(['escalation_to_user_id'], ['users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['template_id'], ['workflow_templates.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_workflow_step_org_order', 'workflow_steps', ['organization_id', 'template_id', 'step_order'], unique=False)
    op.create_index('idx_workflow_step_org_template', 'workflow_steps', ['organization_id', 'template_id'], unique=False)
    op.create_index('idx_workflow_step_org_type', 'workflow_steps', ['organization_id', 'step_type'], unique=False)
    op.create_index(op.f('ix_workflow_steps_id'), 'workflow_steps', ['id'], unique=False)
    op.create_index(op.f('ix_workflow_steps_organization_id'), 'workflow_steps', ['organization_id'], unique=False)
    op.create_table('workflow_steps_automation',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('workflow_template_id', sa.Integer(), nullable=False),
    sa.Column('step_name', sa.String(length=200), nullable=False),
    sa.Column('step_code', sa.String(length=50), nullable=True),
    sa.Column('step_type', sa.Enum('APPROVAL', 'NOTIFICATION', 'DATA_VALIDATION', 'CALCULATION', 'API_CALL', 'EMAIL', 'SMS', 'WEBHOOK', 'CONDITION', 'TIMER', 'HUMAN_TASK', 'AUTO_TASK', name='workflowsteptype'), nullable=False),
    sa.Column('step_order', sa.Integer(), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('is_required', sa.Boolean(), nullable=False),
    sa.Column('is_parallel', sa.Boolean(), nullable=False),
    sa.Column('timeout_minutes', sa.Integer(), nullable=True),
    sa.Column('execution_condition', sa.Text(), nullable=True),
    sa.Column('skip_condition', sa.Text(), nullable=True),
    sa.Column('step_config', sa.JSON(), nullable=True),
    sa.Column('input_mapping', sa.JSON(), nullable=True),
    sa.Column('output_mapping', sa.JSON(), nullable=True),
    sa.Column('approval_required', sa.Boolean(), nullable=False),
    sa.Column('approver_roles', sa.JSON(), nullable=True),
    sa.Column('approver_users', sa.JSON(), nullable=True),
    sa.Column('approval_method', sa.String(length=50), nullable=True),
    sa.Column('business_rule_id', sa.Integer(), nullable=True),
    sa.Column('on_error_action', sa.String(length=50), nullable=False),
    sa.Column('retry_attempts', sa.Integer(), nullable=False),
    sa.Column('retry_delay_minutes', sa.Integer(), nullable=False),
    sa.Column('next_step_id', sa.Integer(), nullable=True),
    sa.Column('conditional_next_steps', sa.JSON(), nullable=True),
    sa.Column('created_at', sa.DateTime(), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.ForeignKeyConstraint(['business_rule_id'], ['business_rules.id'], ),
    sa.ForeignKeyConstraint(['next_step_id'], ['workflow_steps_automation.id'], ),
    sa.ForeignKeyConstraint(['workflow_template_id'], ['workflow_templates_advanced.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('workflow_template_id', 'step_code', name='uq_workflow_step_code'),
    sa.UniqueConstraint('workflow_template_id', 'step_order', name='uq_workflow_step_order')
    )
    op.create_index('idx_workflow_step_type', 'workflow_steps_automation', ['step_type'], unique=False)
    op.create_index(op.f('ix_workflow_steps_automation_business_rule_id'), 'workflow_steps_automation', ['business_rule_id'], unique=False)
    op.create_index(op.f('ix_workflow_steps_automation_id'), 'workflow_steps_automation', ['id'], unique=False)
    op.create_index(op.f('ix_workflow_steps_automation_next_step_id'), 'workflow_steps_automation', ['next_step_id'], unique=False)
    op.create_index(op.f('ix_workflow_steps_automation_step_code'), 'workflow_steps_automation', ['step_code'], unique=False)
    op.create_index(op.f('ix_workflow_steps_automation_step_name'), 'workflow_steps_automation', ['step_name'], unique=False)
    op.create_index(op.f('ix_workflow_steps_automation_step_order'), 'workflow_steps_automation', ['step_order'], unique=False)
    op.create_index(op.f('ix_workflow_steps_automation_step_type'), 'workflow_steps_automation', ['step_type'], unique=False)
    op.create_index(op.f('ix_workflow_steps_automation_workflow_template_id'), 'workflow_steps_automation', ['workflow_template_id'], unique=False)
    op.create_table('bom_components',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('bom_id', sa.Integer(), nullable=False),
    sa.Column('component_item_id', sa.Integer(), nullable=False),
    sa.Column('quantity_required', sa.Float(), nullable=False),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('unit_cost', sa.Float(), nullable=True),
    sa.Column('total_cost', sa.Float(), nullable=True),
    sa.Column('wastage_percentage', sa.Float(), nullable=True),
    sa.Column('is_optional', sa.Boolean(), nullable=True),
    sa.Column('sequence', sa.Integer(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.ForeignKeyConstraint(['bom_id'], ['bill_of_materials.id'], ),
    sa.ForeignKeyConstraint(['component_item_id'], ['products.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('bom_id', 'component_item_id', name='uq_bom_component_item')
    )
    op.create_index('idx_bom_comp_org_bom', 'bom_components', ['organization_id', 'bom_id'], unique=False)
    op.create_index('idx_bom_comp_org_item', 'bom_components', ['organization_id', 'component_item_id'], unique=False)
    op.create_index(op.f('ix_bom_components_id'), 'bom_components', ['id'], unique=False)
    op.create_index(op.f('ix_bom_components_organization_id'), 'bom_components', ['organization_id'], unique=False)
    op.create_table('business_card_scans',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('exhibition_event_id', sa.Integer(), nullable=False),
    sa.Column('scan_id', sa.String(), nullable=False),
    sa.Column('image_path', sa.String(), nullable=True),
    sa.Column('scan_method', sa.String(), nullable=False),
    sa.Column('raw_text', sa.Text(), nullable=True),
    sa.Column('extracted_data', sa.JSON(), nullable=True),
    sa.Column('full_name', sa.String(), nullable=True),
    sa.Column('company_name', sa.String(), nullable=True),
    sa.Column('designation', sa.String(), nullable=True),
    sa.Column('email', sa.String(), nullable=True),
    sa.Column('phone', sa.String(), nullable=True),
    sa.Column('mobile', sa.String(), nullable=True),
    sa.Column('website', sa.String(), nullable=True),
    sa.Column('address', sa.Text(), nullable=True),
    sa.Column('confidence_score', sa.Float(), nullable=True),
    sa.Column('validation_status', sa.String(), nullable=False),
    sa.Column('validated_by_id', sa.Integer(), nullable=True),
    sa.Column('validation_notes', sa.Text(), nullable=True),
    sa.Column('processing_status', sa.String(), nullable=False),
    sa.Column('prospect_created', sa.Boolean(), nullable=False),
    sa.Column('intro_email_sent', sa.Boolean(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('scanned_by_id', sa.Integer(), nullable=False),
    sa.ForeignKeyConstraint(['exhibition_event_id'], ['exhibition_events.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['scanned_by_id'], ['users.id'], ),
    sa.ForeignKeyConstraint(['validated_by_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('scan_id')
    )
    op.create_index('idx_card_scan_event', 'business_card_scans', ['exhibition_event_id'], unique=False)
    op.create_index('idx_card_scan_status', 'business_card_scans', ['processing_status'], unique=False)
    op.create_index('idx_card_scan_validation', 'business_card_scans', ['validation_status'], unique=False)
    op.create_index(op.f('ix_business_card_scans_id'), 'business_card_scans', ['id'], unique=False)
    op.create_index(op.f('ix_business_card_scans_organization_id'), 'business_card_scans', ['organization_id'], unique=False)
    op.create_table('chatbot_conversations',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('conversation_id', sa.String(), nullable=False),
    sa.Column('session_id', sa.String(), nullable=False),
    sa.Column('customer_id', sa.Integer(), nullable=True),
    sa.Column('customer_email', sa.String(), nullable=True),
    sa.Column('customer_phone', sa.String(), nullable=True),
    sa.Column('customer_name', sa.String(), nullable=True),
    sa.Column('channel', sa.String(), nullable=False),
    sa.Column('channel_user_id', sa.String(), nullable=True),
    sa.Column('status', sa.String(), nullable=False),
    sa.Column('intent', sa.String(), nullable=True),
    sa.Column('confidence_score', sa.Float(), nullable=True),
    sa.Column('escalated_to_human', sa.Boolean(), nullable=False),
    sa.Column('escalated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('assigned_agent_id', sa.Integer(), nullable=True),
    sa.Column('escalation_reason', sa.String(), nullable=True),
    sa.Column('resolved_by_bot', sa.Boolean(), nullable=False),
    sa.Column('resolution_category', sa.String(), nullable=True),
    sa.Column('customer_satisfaction', sa.Integer(), nullable=True),
    sa.Column('ticket_id', sa.Integer(), nullable=True),
    sa.Column('started_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('ended_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('last_message_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['assigned_agent_id'], ['users.id'], name='fk_chatbot_conversation_agent_id'),
    sa.ForeignKeyConstraint(['customer_id'], ['customers.id'], name='fk_chatbot_conversation_customer_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_chatbot_conversation_organization_id'),
    sa.ForeignKeyConstraint(['ticket_id'], ['tickets.id'], name='fk_chatbot_conversation_ticket_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'conversation_id', name='uq_chatbot_conversation_org_id')
    )
    op.create_index('idx_chatbot_conversation_channel', 'chatbot_conversations', ['channel'], unique=False)
    op.create_index('idx_chatbot_conversation_escalated', 'chatbot_conversations', ['escalated_to_human'], unique=False)
    op.create_index('idx_chatbot_conversation_intent', 'chatbot_conversations', ['intent'], unique=False)
    op.create_index('idx_chatbot_conversation_org_status', 'chatbot_conversations', ['organization_id', 'status'], unique=False)
    op.create_index('idx_chatbot_conversation_started', 'chatbot_conversations', ['started_at'], unique=False)
    op.create_index(op.f('ix_chatbot_conversations_conversation_id'), 'chatbot_conversations', ['conversation_id'], unique=True)
    op.create_index(op.f('ix_chatbot_conversations_id'), 'chatbot_conversations', ['id'], unique=False)
    op.create_index(op.f('ix_chatbot_conversations_organization_id'), 'chatbot_conversations', ['organization_id'], unique=False)
    op.create_index(op.f('ix_chatbot_conversations_session_id'), 'chatbot_conversations', ['session_id'], unique=False)
    op.create_table('credit_note_items',
    sa.Column('credit_note_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('quantity', sa.Float(), nullable=False),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('unit_price', sa.Float(), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.ForeignKeyConstraint(['credit_note_id'], ['credit_notes.id'], ),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_credit_note_items_id'), 'credit_note_items', ['id'], unique=False)
    op.create_table('customer_surveys',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('template_id', sa.Integer(), nullable=False),
    sa.Column('customer_id', sa.Integer(), nullable=True),
    sa.Column('ticket_id', sa.Integer(), nullable=True),
    sa.Column('survey_token', sa.String(), nullable=False),
    sa.Column('status', sa.String(), nullable=False),
    sa.Column('customer_email', sa.String(), nullable=True),
    sa.Column('customer_name', sa.String(), nullable=True),
    sa.Column('sent_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('started_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('completed_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('expires_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('responses', sa.JSON(), nullable=True),
    sa.Column('overall_rating', sa.Integer(), nullable=True),
    sa.Column('nps_score', sa.Integer(), nullable=True),
    sa.Column('comments', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.ForeignKeyConstraint(['customer_id'], ['customers.id'], name='fk_customer_survey_customer_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_customer_survey_organization_id'),
    sa.ForeignKeyConstraint(['template_id'], ['survey_templates.id'], name='fk_customer_survey_template_id'),
    sa.ForeignKeyConstraint(['ticket_id'], ['tickets.id'], name='fk_customer_survey_ticket_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'survey_token', name='uq_customer_survey_org_token')
    )
    op.create_index('idx_customer_survey_completed', 'customer_surveys', ['completed_at'], unique=False)
    op.create_index('idx_customer_survey_customer', 'customer_surveys', ['customer_id'], unique=False)
    op.create_index('idx_customer_survey_org_template', 'customer_surveys', ['organization_id', 'template_id'], unique=False)
    op.create_index('idx_customer_survey_status', 'customer_surveys', ['status'], unique=False)
    op.create_index('idx_customer_survey_ticket', 'customer_surveys', ['ticket_id'], unique=False)
    op.create_index(op.f('ix_customer_surveys_id'), 'customer_surveys', ['id'], unique=False)
    op.create_index(op.f('ix_customer_surveys_organization_id'), 'customer_surveys', ['organization_id'], unique=False)
    op.create_index(op.f('ix_customer_surveys_survey_token'), 'customer_surveys', ['survey_token'], unique=True)
    op.create_table('debit_note_items',
    sa.Column('debit_note_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('quantity', sa.Float(), nullable=False),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('unit_price', sa.Float(), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.ForeignKeyConstraint(['debit_note_id'], ['debit_notes.id'], ),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_debit_note_items_id'), 'debit_note_items', ['id'], unique=False)
    op.create_table('delivery_challans',
    sa.Column('customer_id', sa.Integer(), nullable=False),
    sa.Column('sales_order_id', sa.Integer(), nullable=True),
    sa.Column('delivery_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('transport_mode', sa.String(), nullable=True),
    sa.Column('vehicle_number', sa.String(), nullable=True),
    sa.Column('lr_rr_number', sa.String(), nullable=True),
    sa.Column('destination', sa.String(), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('voucher_number', sa.String(), nullable=False),
    sa.Column('date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['customer_id'], ['customers.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['sales_order_id'], ['sales_orders.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'voucher_number', name='uq_dc_org_voucher_number')
    )
    op.create_index('idx_dc_org_customer', 'delivery_challans', ['organization_id', 'customer_id'], unique=False)
    op.create_index('idx_dc_org_date', 'delivery_challans', ['organization_id', 'delivery_date'], unique=False)
    op.create_index('idx_dc_org_so', 'delivery_challans', ['organization_id', 'sales_order_id'], unique=False)
    op.create_index(op.f('ix_delivery_challans_id'), 'delivery_challans', ['id'], unique=False)
    op.create_index(op.f('ix_delivery_challans_organization_id'), 'delivery_challans', ['organization_id'], unique=False)
    op.create_index(op.f('ix_delivery_challans_voucher_number'), 'delivery_challans', ['voucher_number'], unique=False)
    op.create_table('depreciation_records',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('asset_id', sa.Integer(), nullable=False),
    sa.Column('depreciation_year', sa.Integer(), nullable=False),
    sa.Column('depreciation_month', sa.Integer(), nullable=True),
    sa.Column('period_start_date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('period_end_date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('opening_book_value', sa.Float(), nullable=False),
    sa.Column('depreciation_amount', sa.Float(), nullable=False),
    sa.Column('accumulated_depreciation', sa.Float(), nullable=False),
    sa.Column('closing_book_value', sa.Float(), nullable=False),
    sa.Column('depreciation_method', sa.Enum('STRAIGHT_LINE', 'DECLINING_BALANCE', 'UNITS_OF_PRODUCTION', 'SUM_OF_YEARS', name='depreciationmethod'), nullable=False),
    sa.Column('depreciation_rate', sa.Float(), nullable=True),
    sa.Column('usage_units', sa.Float(), nullable=True),
    sa.Column('is_finalized', sa.Boolean(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['asset_id'], ['assets.id'], ),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('asset_id', 'depreciation_year', 'depreciation_month', name='uq_depr_asset_year_month')
    )
    op.create_index('idx_depr_org_asset', 'depreciation_records', ['organization_id', 'asset_id'], unique=False)
    op.create_index('idx_depr_org_period', 'depreciation_records', ['organization_id', 'period_start_date'], unique=False)
    op.create_index('idx_depr_org_year', 'depreciation_records', ['organization_id', 'depreciation_year'], unique=False)
    op.create_index(op.f('ix_depreciation_records_id'), 'depreciation_records', ['id'], unique=False)
    op.create_index(op.f('ix_depreciation_records_organization_id'), 'depreciation_records', ['organization_id'], unique=False)
    op.create_table('dispatch_orders',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('order_number', sa.String(), nullable=False),
    sa.Column('customer_id', sa.Integer(), nullable=False),
    sa.Column('ticket_id', sa.Integer(), nullable=True),
    sa.Column('status', sa.String(), nullable=False),
    sa.Column('dispatch_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('expected_delivery_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('actual_delivery_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('delivery_address', sa.Text(), nullable=False),
    sa.Column('delivery_contact_person', sa.String(), nullable=True),
    sa.Column('delivery_contact_number', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('tracking_number', sa.String(), nullable=True),
    sa.Column('courier_name', sa.String(), nullable=True),
    sa.Column('created_by_id', sa.Integer(), nullable=True),
    sa.Column('updated_by_id', sa.Integer(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['created_by_id'], ['users.id'], name='fk_dispatch_order_created_by_id'),
    sa.ForeignKeyConstraint(['customer_id'], ['customers.id'], name='fk_dispatch_order_customer_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_dispatch_order_organization_id'),
    sa.ForeignKeyConstraint(['ticket_id'], ['tickets.id'], name='fk_dispatch_order_ticket_id'),
    sa.ForeignKeyConstraint(['updated_by_id'], ['users.id'], name='fk_dispatch_order_updated_by_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'order_number', name='uq_dispatch_order_org_number')
    )
    op.create_index('idx_dispatch_order_created_at', 'dispatch_orders', ['created_at'], unique=False)
    op.create_index('idx_dispatch_order_delivery_date', 'dispatch_orders', ['expected_delivery_date'], unique=False)
    op.create_index('idx_dispatch_order_dispatch_date', 'dispatch_orders', ['dispatch_date'], unique=False)
    op.create_index('idx_dispatch_order_org_customer', 'dispatch_orders', ['organization_id', 'customer_id'], unique=False)
    op.create_index('idx_dispatch_order_org_status', 'dispatch_orders', ['organization_id', 'status'], unique=False)
    op.create_index('idx_dispatch_order_org_ticket', 'dispatch_orders', ['organization_id', 'ticket_id'], unique=False)
    op.create_index(op.f('ix_dispatch_orders_id'), 'dispatch_orders', ['id'], unique=False)
    op.create_index(op.f('ix_dispatch_orders_order_number'), 'dispatch_orders', ['order_number'], unique=False)
    op.create_index(op.f('ix_dispatch_orders_organization_id'), 'dispatch_orders', ['organization_id'], unique=False)
    op.create_table('freight_cost_analysis',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('analysis_name', sa.String(), nullable=False),
    sa.Column('period_start', sa.DateTime(timezone=True), nullable=False),
    sa.Column('period_end', sa.DateTime(timezone=True), nullable=False),
    sa.Column('carrier_id', sa.Integer(), nullable=True),
    sa.Column('route_id', sa.Integer(), nullable=True),
    sa.Column('total_freight_cost', sa.Float(), nullable=True),
    sa.Column('base_freight_cost', sa.Float(), nullable=True),
    sa.Column('fuel_surcharges', sa.Float(), nullable=True),
    sa.Column('handling_charges', sa.Float(), nullable=True),
    sa.Column('insurance_costs', sa.Float(), nullable=True),
    sa.Column('other_charges', sa.Float(), nullable=True),
    sa.Column('total_shipments', sa.Integer(), nullable=True),
    sa.Column('total_weight_kg', sa.Float(), nullable=True),
    sa.Column('total_volume_cbm', sa.Float(), nullable=True),
    sa.Column('average_cost_per_kg', sa.Float(), nullable=True),
    sa.Column('average_cost_per_cbm', sa.Float(), nullable=True),
    sa.Column('average_cost_per_shipment', sa.Float(), nullable=True),
    sa.Column('on_time_delivery_percentage', sa.Float(), nullable=True),
    sa.Column('damage_incidents', sa.Integer(), nullable=True),
    sa.Column('previous_period_cost', sa.Float(), nullable=True),
    sa.Column('cost_variance', sa.Float(), nullable=True),
    sa.Column('cost_variance_percentage', sa.Float(), nullable=True),
    sa.Column('cost_optimization_opportunities', sa.Text(), nullable=True),
    sa.Column('recommended_actions', sa.Text(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['carrier_id'], ['carriers.id'], ),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['route_id'], ['routes.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_freight_analysis_org_carrier', 'freight_cost_analysis', ['organization_id', 'carrier_id'], unique=False)
    op.create_index('idx_freight_analysis_org_period', 'freight_cost_analysis', ['organization_id', 'period_start'], unique=False)
    op.create_index('idx_freight_analysis_org_route', 'freight_cost_analysis', ['organization_id', 'route_id'], unique=False)
    op.create_index(op.f('ix_freight_cost_analysis_id'), 'freight_cost_analysis', ['id'], unique=False)
    op.create_index(op.f('ix_freight_cost_analysis_organization_id'), 'freight_cost_analysis', ['organization_id'], unique=False)
    op.create_table('freight_rates',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('rate_code', sa.String(), nullable=False),
    sa.Column('carrier_id', sa.Integer(), nullable=False),
    sa.Column('route_id', sa.Integer(), nullable=True),
    sa.Column('effective_date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('expiry_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('freight_mode', sa.Enum('LTL', 'FTL', 'EXPRESS', 'STANDARD', 'ECONOMY', name='freightmode'), nullable=False),
    sa.Column('service_type', sa.String(), nullable=True),
    sa.Column('rate_basis', sa.String(), nullable=False),
    sa.Column('minimum_charge', sa.Float(), nullable=True),
    sa.Column('rate_per_kg', sa.Float(), nullable=True),
    sa.Column('minimum_weight_kg', sa.Float(), nullable=True),
    sa.Column('maximum_weight_kg', sa.Float(), nullable=True),
    sa.Column('rate_per_cbm', sa.Float(), nullable=True),
    sa.Column('minimum_volume_cbm', sa.Float(), nullable=True),
    sa.Column('maximum_volume_cbm', sa.Float(), nullable=True),
    sa.Column('rate_per_km', sa.Float(), nullable=True),
    sa.Column('fixed_rate', sa.Float(), nullable=True),
    sa.Column('fuel_surcharge_percentage', sa.Float(), nullable=True),
    sa.Column('handling_charge', sa.Float(), nullable=True),
    sa.Column('documentation_charge', sa.Float(), nullable=True),
    sa.Column('insurance_percentage', sa.Float(), nullable=True),
    sa.Column('cod_charge_percentage', sa.Float(), nullable=True),
    sa.Column('dangerous_goods_surcharge', sa.Float(), nullable=True),
    sa.Column('oversized_surcharge', sa.Float(), nullable=True),
    sa.Column('standard_transit_days', sa.Integer(), nullable=True),
    sa.Column('express_transit_days', sa.Integer(), nullable=True),
    sa.Column('currency', sa.String(), nullable=True),
    sa.Column('tax_applicable', sa.Boolean(), nullable=True),
    sa.Column('tax_percentage', sa.Float(), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=True),
    sa.Column('is_negotiated', sa.Boolean(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('terms_conditions', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['carrier_id'], ['carriers.id'], ),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['route_id'], ['routes.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'rate_code', name='uq_freight_rate_org_code')
    )
    op.create_index('idx_freight_rate_org_active', 'freight_rates', ['organization_id', 'is_active'], unique=False)
    op.create_index('idx_freight_rate_org_carrier', 'freight_rates', ['organization_id', 'carrier_id'], unique=False)
    op.create_index('idx_freight_rate_org_effective', 'freight_rates', ['organization_id', 'effective_date'], unique=False)
    op.create_index('idx_freight_rate_org_route', 'freight_rates', ['organization_id', 'route_id'], unique=False)
    op.create_index(op.f('ix_freight_rates_id'), 'freight_rates', ['id'], unique=False)
    op.create_index(op.f('ix_freight_rates_organization_id'), 'freight_rates', ['organization_id'], unique=False)
    op.create_table('goods_receipt_notes',
    sa.Column('purchase_order_id', sa.Integer(), nullable=False),
    sa.Column('vendor_id', sa.Integer(), nullable=False),
    sa.Column('grn_date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('challan_number', sa.String(), nullable=True),
    sa.Column('challan_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('transport_mode', sa.String(), nullable=True),
    sa.Column('vehicle_number', sa.String(), nullable=True),
    sa.Column('lr_rr_number', sa.String(), nullable=True),
    sa.Column('inspection_status', sa.String(), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('voucher_number', sa.String(), nullable=False),
    sa.Column('date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['purchase_order_id'], ['purchase_orders.id'], ),
    sa.ForeignKeyConstraint(['vendor_id'], ['vendors.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'voucher_number', name='uq_grn_org_voucher_number')
    )
    op.create_index('idx_grn_org_date', 'goods_receipt_notes', ['organization_id', 'grn_date'], unique=False)
    op.create_index('idx_grn_org_po', 'goods_receipt_notes', ['organization_id', 'purchase_order_id'], unique=False)
    op.create_index('idx_grn_org_vendor', 'goods_receipt_notes', ['organization_id', 'vendor_id'], unique=False)
    op.create_index(op.f('ix_goods_receipt_notes_id'), 'goods_receipt_notes', ['id'], unique=False)
    op.create_index(op.f('ix_goods_receipt_notes_organization_id'), 'goods_receipt_notes', ['organization_id'], unique=False)
    op.create_index(op.f('ix_goods_receipt_notes_voucher_number'), 'goods_receipt_notes', ['voucher_number'], unique=False)
    op.create_table('integration_sync_records',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('sync_job_id', sa.Integer(), nullable=False),
    sa.Column('entity_type', sa.String(length=100), nullable=False),
    sa.Column('local_id', sa.String(length=100), nullable=True),
    sa.Column('external_id', sa.String(length=100), nullable=True),
    sa.Column('operation', sa.String(length=50), nullable=False),
    sa.Column('sync_direction', sa.Enum('INBOUND', 'OUTBOUND', 'BIDIRECTIONAL', name='syncdirection'), nullable=False),
    sa.Column('status', sa.Enum('SUCCESS', 'FAILED', 'PARTIAL', 'IN_PROGRESS', name='syncstatus'), nullable=False),
    sa.Column('source_data', sa.JSON(), nullable=True),
    sa.Column('target_data', sa.JSON(), nullable=True),
    sa.Column('error_message', sa.Text(), nullable=True),
    sa.Column('validation_errors', sa.JSON(), nullable=True),
    sa.Column('processed_at', sa.DateTime(), nullable=False),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['sync_job_id'], ['integration_sync_jobs.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_sync_record_org_entity', 'integration_sync_records', ['organization_id', 'entity_type'], unique=False)
    op.create_index('idx_sync_record_org_external', 'integration_sync_records', ['organization_id', 'external_id'], unique=False)
    op.create_index('idx_sync_record_org_job', 'integration_sync_records', ['organization_id', 'sync_job_id'], unique=False)
    op.create_index('idx_sync_record_org_local', 'integration_sync_records', ['organization_id', 'local_id'], unique=False)
    op.create_index('idx_sync_record_org_status', 'integration_sync_records', ['organization_id', 'status'], unique=False)
    op.create_index(op.f('ix_integration_sync_records_entity_type'), 'integration_sync_records', ['entity_type'], unique=False)
    op.create_index(op.f('ix_integration_sync_records_external_id'), 'integration_sync_records', ['external_id'], unique=False)
    op.create_index(op.f('ix_integration_sync_records_id'), 'integration_sync_records', ['id'], unique=False)
    op.create_index(op.f('ix_integration_sync_records_local_id'), 'integration_sync_records', ['local_id'], unique=False)
    op.create_index(op.f('ix_integration_sync_records_organization_id'), 'integration_sync_records', ['organization_id'], unique=False)
    op.create_table('interviews',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('job_application_id', sa.Integer(), nullable=False),
    sa.Column('interview_type', sa.String(), nullable=False),
    sa.Column('interview_round', sa.Integer(), nullable=False),
    sa.Column('interview_title', sa.String(), nullable=False),
    sa.Column('scheduled_date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('duration_minutes', sa.Integer(), nullable=False),
    sa.Column('interview_mode', sa.String(), nullable=False),
    sa.Column('location', sa.String(), nullable=True),
    sa.Column('meeting_link', sa.String(), nullable=True),
    sa.Column('primary_interviewer_id', sa.Integer(), nullable=False),
    sa.Column('secondary_interviewers', sa.JSON(), nullable=True),
    sa.Column('status', sa.String(), nullable=False),
    sa.Column('overall_rating', sa.Integer(), nullable=True),
    sa.Column('recommendation', sa.String(), nullable=True),
    sa.Column('technical_score', sa.Numeric(precision=5, scale=2), nullable=True),
    sa.Column('communication_score', sa.Numeric(precision=5, scale=2), nullable=True),
    sa.Column('cultural_fit_score', sa.Numeric(precision=5, scale=2), nullable=True),
    sa.Column('problem_solving_score', sa.Numeric(precision=5, scale=2), nullable=True),
    sa.Column('interviewer_feedback', sa.Text(), nullable=True),
    sa.Column('candidate_feedback', sa.Text(), nullable=True),
    sa.Column('strengths', sa.Text(), nullable=True),
    sa.Column('weaknesses', sa.Text(), nullable=True),
    sa.Column('cancellation_reason', sa.String(), nullable=True),
    sa.Column('rescheduled_from', sa.DateTime(timezone=True), nullable=True),
    sa.Column('custom_scores', sa.JSON(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by_id', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by_id'], ['users.id'], name='fk_interview_created_by_id'),
    sa.ForeignKeyConstraint(['job_application_id'], ['job_applications.id'], name='fk_interview_job_application_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_interview_organization_id'),
    sa.ForeignKeyConstraint(['primary_interviewer_id'], ['users.id'], name='fk_interview_primary_interviewer_id'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_interview_interviewer', 'interviews', ['primary_interviewer_id'], unique=False)
    op.create_index('idx_interview_org_date', 'interviews', ['organization_id', 'scheduled_date'], unique=False)
    op.create_index('idx_interview_status', 'interviews', ['status'], unique=False)
    op.create_index(op.f('ix_interviews_id'), 'interviews', ['id'], unique=False)
    op.create_index(op.f('ix_interviews_job_application_id'), 'interviews', ['job_application_id'], unique=False)
    op.create_index(op.f('ix_interviews_organization_id'), 'interviews', ['organization_id'], unique=False)
    op.create_table('job_offers',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('job_application_id', sa.Integer(), nullable=False),
    sa.Column('offer_title', sa.String(), nullable=False),
    sa.Column('offer_date', sa.Date(), nullable=False),
    sa.Column('valid_until', sa.Date(), nullable=False),
    sa.Column('base_salary', sa.Numeric(precision=15, scale=2), nullable=False),
    sa.Column('variable_pay', sa.Numeric(precision=15, scale=2), nullable=True),
    sa.Column('bonus', sa.Numeric(precision=15, scale=2), nullable=True),
    sa.Column('total_compensation', sa.Numeric(precision=15, scale=2), nullable=False),
    sa.Column('salary_currency', sa.String(), nullable=False),
    sa.Column('benefits_package', sa.JSON(), nullable=True),
    sa.Column('joining_bonus', sa.Numeric(precision=15, scale=2), nullable=True),
    sa.Column('relocation_allowance', sa.Numeric(precision=15, scale=2), nullable=True),
    sa.Column('employment_type', sa.String(), nullable=False),
    sa.Column('probation_period', sa.Integer(), nullable=True),
    sa.Column('notice_period', sa.Integer(), nullable=True),
    sa.Column('start_date', sa.Date(), nullable=True),
    sa.Column('work_location', sa.String(), nullable=False),
    sa.Column('status', sa.String(), nullable=False),
    sa.Column('sent_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('response_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('is_negotiable', sa.Boolean(), nullable=False),
    sa.Column('negotiation_rounds', sa.Integer(), nullable=False),
    sa.Column('negotiation_notes', sa.Text(), nullable=True),
    sa.Column('approved_by_id', sa.Integer(), nullable=True),
    sa.Column('approved_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('offer_letter_path', sa.String(), nullable=True),
    sa.Column('contract_path', sa.String(), nullable=True),
    sa.Column('special_conditions', sa.Text(), nullable=True),
    sa.Column('rejection_reason', sa.String(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by_id', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['approved_by_id'], ['users.id'], name='fk_job_offer_approved_by_id'),
    sa.ForeignKeyConstraint(['created_by_id'], ['users.id'], name='fk_job_offer_created_by_id'),
    sa.ForeignKeyConstraint(['job_application_id'], ['job_applications.id'], name='fk_job_offer_job_application_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_job_offer_organization_id'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_job_offer_application', 'job_offers', ['job_application_id'], unique=False)
    op.create_index('idx_job_offer_dates', 'job_offers', ['offer_date', 'valid_until'], unique=False)
    op.create_index('idx_job_offer_org_status', 'job_offers', ['organization_id', 'status'], unique=False)
    op.create_index(op.f('ix_job_offers_id'), 'job_offers', ['id'], unique=False)
    op.create_index(op.f('ix_job_offers_job_application_id'), 'job_offers', ['job_application_id'], unique=False)
    op.create_index(op.f('ix_job_offers_organization_id'), 'job_offers', ['organization_id'], unique=False)
    op.create_table('lead_activities',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('lead_id', sa.Integer(), nullable=False),
    sa.Column('activity_type', sa.String(), nullable=False),
    sa.Column('subject', sa.String(), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('outcome', sa.String(), nullable=True),
    sa.Column('activity_date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('duration_minutes', sa.Integer(), nullable=True),
    sa.Column('created_by_id', sa.Integer(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.ForeignKeyConstraint(['created_by_id'], ['users.id'], name='fk_lead_activity_created_by_id'),
    sa.ForeignKeyConstraint(['lead_id'], ['leads.id'], name='fk_lead_activity_lead_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_lead_activity_organization_id'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_lead_activity_date', 'lead_activities', ['activity_date'], unique=False)
    op.create_index('idx_lead_activity_org_lead', 'lead_activities', ['organization_id', 'lead_id'], unique=False)
    op.create_index('idx_lead_activity_type', 'lead_activities', ['activity_type'], unique=False)
    op.create_index(op.f('ix_lead_activities_id'), 'lead_activities', ['id'], unique=False)
    op.create_index(op.f('ix_lead_activities_organization_id'), 'lead_activities', ['organization_id'], unique=False)
    op.create_table('maintenance_schedules',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('asset_id', sa.Integer(), nullable=False),
    sa.Column('schedule_name', sa.String(), nullable=False),
    sa.Column('maintenance_type', sa.Enum('PREVENTIVE', 'CORRECTIVE', 'EMERGENCY', 'INSPECTION', name='maintenancetype'), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('frequency_type', sa.String(), nullable=False),
    sa.Column('frequency_value', sa.Integer(), nullable=True),
    sa.Column('estimated_duration_hours', sa.Float(), nullable=True),
    sa.Column('last_maintenance_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('next_due_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('meter_type', sa.String(), nullable=True),
    sa.Column('meter_frequency', sa.Float(), nullable=True),
    sa.Column('last_meter_reading', sa.Float(), nullable=True),
    sa.Column('next_meter_due', sa.Float(), nullable=True),
    sa.Column('estimated_cost', sa.Float(), nullable=True),
    sa.Column('required_skills', sa.Text(), nullable=True),
    sa.Column('required_parts', sa.Text(), nullable=True),
    sa.Column('assigned_technician', sa.String(), nullable=True),
    sa.Column('assigned_department', sa.String(), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=True),
    sa.Column('priority', sa.String(), nullable=True),
    sa.Column('advance_notice_days', sa.Integer(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['asset_id'], ['assets.id'], ),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_maint_sched_org_active', 'maintenance_schedules', ['organization_id', 'is_active'], unique=False)
    op.create_index('idx_maint_sched_org_asset', 'maintenance_schedules', ['organization_id', 'asset_id'], unique=False)
    op.create_index('idx_maint_sched_org_due', 'maintenance_schedules', ['organization_id', 'next_due_date'], unique=False)
    op.create_index('idx_maint_sched_org_type', 'maintenance_schedules', ['organization_id', 'maintenance_type'], unique=False)
    op.create_index(op.f('ix_maintenance_schedules_id'), 'maintenance_schedules', ['id'], unique=False)
    op.create_index(op.f('ix_maintenance_schedules_organization_id'), 'maintenance_schedules', ['organization_id'], unique=False)
    op.create_table('manufacturing_orders',
    sa.Column('bom_id', sa.Integer(), nullable=False),
    sa.Column('planned_quantity', sa.Float(), nullable=False),
    sa.Column('produced_quantity', sa.Float(), nullable=True),
    sa.Column('scrap_quantity', sa.Float(), nullable=True),
    sa.Column('planned_start_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('planned_end_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('actual_start_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('actual_end_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('production_status', sa.String(), nullable=True),
    sa.Column('priority', sa.String(), nullable=True),
    sa.Column('production_department', sa.String(), nullable=True),
    sa.Column('production_location', sa.String(), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('voucher_number', sa.String(), nullable=False),
    sa.Column('date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['bom_id'], ['bill_of_materials.id'], ),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'voucher_number', name='uq_mo_org_voucher_number')
    )
    op.create_index('idx_mo_org_bom', 'manufacturing_orders', ['organization_id', 'bom_id'], unique=False)
    op.create_index('idx_mo_org_date', 'manufacturing_orders', ['organization_id', 'date'], unique=False)
    op.create_index('idx_mo_org_status', 'manufacturing_orders', ['organization_id', 'production_status'], unique=False)
    op.create_index(op.f('ix_manufacturing_orders_id'), 'manufacturing_orders', ['id'], unique=False)
    op.create_index(op.f('ix_manufacturing_orders_organization_id'), 'manufacturing_orders', ['organization_id'], unique=False)
    op.create_index(op.f('ix_manufacturing_orders_voucher_number'), 'manufacturing_orders', ['voucher_number'], unique=False)
    op.create_table('opportunities',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('opportunity_number', sa.String(), nullable=False),
    sa.Column('name', sa.String(), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('stage', sa.Enum('PROSPECTING', 'QUALIFICATION', 'PROPOSAL', 'NEGOTIATION', 'CLOSED_WON', 'CLOSED_LOST', name='opportunitystage'), nullable=False),
    sa.Column('probability', sa.Float(), nullable=False),
    sa.Column('amount', sa.Float(), nullable=False),
    sa.Column('expected_revenue', sa.Float(), nullable=False),
    sa.Column('expected_close_date', sa.Date(), nullable=False),
    sa.Column('actual_close_date', sa.Date(), nullable=True),
    sa.Column('customer_id', sa.Integer(), nullable=True),
    sa.Column('lead_id', sa.Integer(), nullable=True),
    sa.Column('assigned_to_id', sa.Integer(), nullable=True),
    sa.Column('created_by_id', sa.Integer(), nullable=True),
    sa.Column('competitors', sa.Text(), nullable=True),
    sa.Column('win_reason', sa.Text(), nullable=True),
    sa.Column('loss_reason', sa.Text(), nullable=True),
    sa.Column('source', sa.Enum('WEBSITE', 'REFERRAL', 'EMAIL_CAMPAIGN', 'SOCIAL_MEDIA', 'COLD_CALL', 'TRADE_SHOW', 'PARTNER', 'ADVERTISEMENT', 'OTHER', name='leadsource'), nullable=False),
    sa.Column('custom_fields', sa.JSON(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['assigned_to_id'], ['users.id'], name='fk_opportunity_assigned_to_id'),
    sa.ForeignKeyConstraint(['created_by_id'], ['users.id'], name='fk_opportunity_created_by_id'),
    sa.ForeignKeyConstraint(['customer_id'], ['customers.id'], name='fk_opportunity_customer_id'),
    sa.ForeignKeyConstraint(['lead_id'], ['leads.id'], name='fk_opportunity_lead_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_opportunity_organization_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'opportunity_number', name='uq_opportunity_org_number')
    )
    op.create_index('idx_opportunity_amount', 'opportunities', ['amount'], unique=False)
    op.create_index('idx_opportunity_close_date', 'opportunities', ['expected_close_date'], unique=False)
    op.create_index('idx_opportunity_org_assigned', 'opportunities', ['organization_id', 'assigned_to_id'], unique=False)
    op.create_index('idx_opportunity_org_stage', 'opportunities', ['organization_id', 'stage'], unique=False)
    op.create_index('idx_opportunity_probability', 'opportunities', ['probability'], unique=False)
    op.create_index(op.f('ix_opportunities_id'), 'opportunities', ['id'], unique=False)
    op.create_index(op.f('ix_opportunities_name'), 'opportunities', ['name'], unique=False)
    op.create_index(op.f('ix_opportunities_opportunity_number'), 'opportunities', ['opportunity_number'], unique=True)
    op.create_index(op.f('ix_opportunities_organization_id'), 'opportunities', ['organization_id'], unique=False)
    op.create_index(op.f('ix_opportunities_source'), 'opportunities', ['source'], unique=False)
    op.create_index(op.f('ix_opportunities_stage'), 'opportunities', ['stage'], unique=False)
    op.create_table('payslips',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('employee_id', sa.Integer(), nullable=False),
    sa.Column('payroll_period_id', sa.Integer(), nullable=False),
    sa.Column('salary_structure_id', sa.Integer(), nullable=False),
    sa.Column('payslip_number', sa.String(), nullable=False),
    sa.Column('pay_date', sa.Date(), nullable=False),
    sa.Column('working_days', sa.Integer(), nullable=False),
    sa.Column('present_days', sa.Integer(), nullable=False),
    sa.Column('absent_days', sa.Integer(), nullable=False),
    sa.Column('leave_days', sa.Integer(), nullable=False),
    sa.Column('overtime_hours', sa.Numeric(precision=5, scale=2), nullable=False),
    sa.Column('basic_salary', sa.Numeric(precision=15, scale=2), nullable=False),
    sa.Column('hra', sa.Numeric(precision=15, scale=2), nullable=False),
    sa.Column('transport_allowance', sa.Numeric(precision=15, scale=2), nullable=False),
    sa.Column('medical_allowance', sa.Numeric(precision=15, scale=2), nullable=False),
    sa.Column('special_allowance', sa.Numeric(precision=15, scale=2), nullable=False),
    sa.Column('overtime_amount', sa.Numeric(precision=15, scale=2), nullable=False),
    sa.Column('other_allowances', sa.Numeric(precision=15, scale=2), nullable=False),
    sa.Column('provident_fund', sa.Numeric(precision=15, scale=2), nullable=False),
    sa.Column('professional_tax', sa.Numeric(precision=15, scale=2), nullable=False),
    sa.Column('income_tax', sa.Numeric(precision=15, scale=2), nullable=False),
    sa.Column('loan_deduction', sa.Numeric(precision=15, scale=2), nullable=False),
    sa.Column('other_deductions', sa.Numeric(precision=15, scale=2), nullable=False),
    sa.Column('gross_pay', sa.Numeric(precision=15, scale=2), nullable=False),
    sa.Column('total_deductions', sa.Numeric(precision=15, scale=2), nullable=False),
    sa.Column('net_pay', sa.Numeric(precision=15, scale=2), nullable=False),
    sa.Column('variable_earnings', sa.JSON(), nullable=True),
    sa.Column('variable_deductions', sa.JSON(), nullable=True),
    sa.Column('status', sa.String(), nullable=False),
    sa.Column('generated_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('sent_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('acknowledged_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('pdf_path', sa.String(), nullable=True),
    sa.Column('email_sent', sa.Boolean(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['employee_id'], ['employee_profiles.id'], name='fk_payslip_employee_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_payslip_organization_id'),
    sa.ForeignKeyConstraint(['payroll_period_id'], ['payroll_periods.id'], name='fk_payslip_payroll_period_id'),
    sa.ForeignKeyConstraint(['salary_structure_id'], ['salary_structures.id'], name='fk_payslip_salary_structure_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'employee_id', 'payroll_period_id', name='uq_payslip_org_emp_period')
    )
    op.create_index('idx_payslip_org_employee', 'payslips', ['organization_id', 'employee_id'], unique=False)
    op.create_index('idx_payslip_period', 'payslips', ['payroll_period_id'], unique=False)
    op.create_index('idx_payslip_status', 'payslips', ['status'], unique=False)
    op.create_index(op.f('ix_payslips_employee_id'), 'payslips', ['employee_id'], unique=False)
    op.create_index(op.f('ix_payslips_id'), 'payslips', ['id'], unique=False)
    op.create_index(op.f('ix_payslips_organization_id'), 'payslips', ['organization_id'], unique=False)
    op.create_index(op.f('ix_payslips_payroll_period_id'), 'payslips', ['payroll_period_id'], unique=False)
    op.create_index(op.f('ix_payslips_payslip_number'), 'payslips', ['payslip_number'], unique=True)
    op.create_index(op.f('ix_payslips_salary_structure_id'), 'payslips', ['salary_structure_id'], unique=False)
    op.create_table('product_batches',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('product_tracking_id', sa.Integer(), nullable=False),
    sa.Column('batch_number', sa.String(length=100), nullable=False),
    sa.Column('batch_name', sa.String(length=200), nullable=True),
    sa.Column('manufacturing_date', sa.Date(), nullable=True),
    sa.Column('expiry_date', sa.Date(), nullable=True),
    sa.Column('supplier_batch_number', sa.String(length=100), nullable=True),
    sa.Column('supplier_id', sa.Integer(), nullable=True),
    sa.Column('quality_grade', sa.String(length=50), nullable=True),
    sa.Column('quality_notes', sa.Text(), nullable=True),
    sa.Column('batch_quantity', sa.Numeric(precision=12, scale=3), nullable=False),
    sa.Column('available_quantity', sa.Numeric(precision=12, scale=3), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('is_expired', sa.Boolean(), nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['product_tracking_id'], ['product_tracking.id'], ),
    sa.ForeignKeyConstraint(['supplier_id'], ['vendors.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'batch_number', name='uq_org_batch_number')
    )
    op.create_index('idx_batch_active', 'product_batches', ['is_active'], unique=False)
    op.create_index('idx_batch_expiry', 'product_batches', ['expiry_date'], unique=False)
    op.create_index(op.f('ix_product_batches_batch_number'), 'product_batches', ['batch_number'], unique=False)
    op.create_index(op.f('ix_product_batches_expiry_date'), 'product_batches', ['expiry_date'], unique=False)
    op.create_index(op.f('ix_product_batches_id'), 'product_batches', ['id'], unique=False)
    op.create_index(op.f('ix_product_batches_organization_id'), 'product_batches', ['organization_id'], unique=False)
    op.create_index(op.f('ix_product_batches_product_tracking_id'), 'product_batches', ['product_tracking_id'], unique=False)
    op.create_table('proforma_invoice_items',
    sa.Column('proforma_invoice_id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('discount_percentage', sa.Float(), nullable=True),
    sa.Column('gst_rate', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=False),
    sa.Column('taxable_amount', sa.Float(), nullable=True),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('quantity', sa.Float(), nullable=False),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('unit_price', sa.Float(), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], ),
    sa.ForeignKeyConstraint(['proforma_invoice_id'], ['proforma_invoices.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_proforma_invoice_items_id'), 'proforma_invoice_items', ['id'], unique=False)
    op.create_table('project_documents',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('project_id', sa.Integer(), nullable=False),
    sa.Column('document_name', sa.String(length=255), nullable=False),
    sa.Column('document_type', sa.String(length=100), nullable=True),
    sa.Column('file_path', sa.String(length=500), nullable=True),
    sa.Column('file_size', sa.Integer(), nullable=True),
    sa.Column('mime_type', sa.String(length=100), nullable=True),
    sa.Column('version', sa.String(length=20), nullable=True),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('tags', sa.JSON(), nullable=True),
    sa.Column('is_public', sa.Boolean(), nullable=True),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('uploaded_by', sa.Integer(), nullable=False),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['project_id'], ['projects.id'], ),
    sa.ForeignKeyConstraint(['uploaded_by'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_document_org_project', 'project_documents', ['organization_id', 'project_id'], unique=False)
    op.create_index('idx_document_org_public', 'project_documents', ['organization_id', 'is_public'], unique=False)
    op.create_index('idx_document_org_type', 'project_documents', ['organization_id', 'document_type'], unique=False)
    op.create_index(op.f('ix_project_documents_id'), 'project_documents', ['id'], unique=False)
    op.create_index(op.f('ix_project_documents_organization_id'), 'project_documents', ['organization_id'], unique=False)
    op.create_table('project_milestones',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('project_id', sa.Integer(), nullable=False),
    sa.Column('name', sa.String(length=255), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('status', sa.Enum('NOT_STARTED', 'IN_PROGRESS', 'COMPLETED', 'DELAYED', name='milestonestatus'), nullable=False),
    sa.Column('target_date', sa.Date(), nullable=False),
    sa.Column('completion_date', sa.Date(), nullable=True),
    sa.Column('progress_percentage', sa.Float(), nullable=False),
    sa.Column('dependencies', sa.JSON(), nullable=True),
    sa.Column('assigned_to', sa.Integer(), nullable=True),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('created_by', sa.Integer(), nullable=False),
    sa.ForeignKeyConstraint(['assigned_to'], ['users.id'], ),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['project_id'], ['projects.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_milestone_org_project', 'project_milestones', ['organization_id', 'project_id'], unique=False)
    op.create_index('idx_milestone_org_status', 'project_milestones', ['organization_id', 'status'], unique=False)
    op.create_index('idx_milestone_org_target_date', 'project_milestones', ['organization_id', 'target_date'], unique=False)
    op.create_index(op.f('ix_project_milestones_id'), 'project_milestones', ['id'], unique=False)
    op.create_index(op.f('ix_project_milestones_organization_id'), 'project_milestones', ['organization_id'], unique=False)
    op.create_table('project_resources',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('project_id', sa.Integer(), nullable=False),
    sa.Column('resource_type', sa.Enum('HUMAN', 'EQUIPMENT', 'MATERIAL', 'BUDGET', name='resourcetype'), nullable=False),
    sa.Column('resource_name', sa.String(length=255), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('allocated_quantity', sa.Float(), nullable=False),
    sa.Column('used_quantity', sa.Float(), nullable=False),
    sa.Column('unit', sa.String(length=50), nullable=True),
    sa.Column('unit_cost', sa.Float(), nullable=True),
    sa.Column('total_cost', sa.Float(), nullable=True),
    sa.Column('allocation_start', sa.Date(), nullable=True),
    sa.Column('allocation_end', sa.Date(), nullable=True),
    sa.Column('user_id', sa.Integer(), nullable=True),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('created_by', sa.Integer(), nullable=False),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['project_id'], ['projects.id'], ),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_resource_org_project', 'project_resources', ['organization_id', 'project_id'], unique=False)
    op.create_index('idx_resource_org_type', 'project_resources', ['organization_id', 'resource_type'], unique=False)
    op.create_index('idx_resource_org_user', 'project_resources', ['organization_id', 'user_id'], unique=False)
    op.create_index(op.f('ix_project_resources_id'), 'project_resources', ['id'], unique=False)
    op.create_index(op.f('ix_project_resources_organization_id'), 'project_resources', ['organization_id'], unique=False)
    op.create_table('promotion_redemptions',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('promotion_id', sa.Integer(), nullable=False),
    sa.Column('customer_id', sa.Integer(), nullable=True),
    sa.Column('voucher_type', sa.String(), nullable=True),
    sa.Column('voucher_id', sa.Integer(), nullable=True),
    sa.Column('voucher_number', sa.String(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=False),
    sa.Column('order_amount', sa.Float(), nullable=False),
    sa.Column('final_amount', sa.Float(), nullable=False),
    sa.Column('redeemed_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.ForeignKeyConstraint(['customer_id'], ['customers.id'], name='fk_promotion_redemption_customer_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_promotion_redemption_organization_id'),
    sa.ForeignKeyConstraint(['promotion_id'], ['promotions.id'], name='fk_promotion_redemption_promotion_id'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_promotion_redemption_customer', 'promotion_redemptions', ['customer_id'], unique=False)
    op.create_index('idx_promotion_redemption_date', 'promotion_redemptions', ['redeemed_at'], unique=False)
    op.create_index('idx_promotion_redemption_org_promotion', 'promotion_redemptions', ['organization_id', 'promotion_id'], unique=False)
    op.create_index(op.f('ix_promotion_redemptions_id'), 'promotion_redemptions', ['id'], unique=False)
    op.create_index(op.f('ix_promotion_redemptions_organization_id'), 'promotion_redemptions', ['organization_id'], unique=False)
    op.create_table('purchase_order_items',
    sa.Column('purchase_order_id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('delivered_quantity', sa.Float(), nullable=True),
    sa.Column('pending_quantity', sa.Float(), nullable=False),
    sa.Column('discount_percentage', sa.Float(), nullable=True),
    sa.Column('gst_rate', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=False),
    sa.Column('taxable_amount', sa.Float(), nullable=True),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('quantity', sa.Float(), nullable=False),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('unit_price', sa.Float(), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], ),
    sa.ForeignKeyConstraint(['purchase_order_id'], ['purchase_orders.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_purchase_order_items_id'), 'purchase_order_items', ['id'], unique=False)
    op.create_table('purchase_requisitions',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('requisition_number', sa.String(length=50), nullable=False),
    sa.Column('requisition_date', sa.Date(), nullable=False),
    sa.Column('required_date', sa.Date(), nullable=False),
    sa.Column('department', sa.String(length=100), nullable=True),
    sa.Column('cost_center', sa.String(length=100), nullable=True),
    sa.Column('project_code', sa.String(length=100), nullable=True),
    sa.Column('purpose', sa.Text(), nullable=False),
    sa.Column('justification', sa.Text(), nullable=True),
    sa.Column('estimated_budget', sa.Numeric(precision=15, scale=2), nullable=True),
    sa.Column('approval_status', sa.String(length=20), nullable=False),
    sa.Column('approved_by', sa.Integer(), nullable=True),
    sa.Column('approved_date', sa.Date(), nullable=True),
    sa.Column('rejection_reason', sa.Text(), nullable=True),
    sa.Column('purchase_order_id', sa.Integer(), nullable=True),
    sa.Column('requested_by', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.ForeignKeyConstraint(['approved_by'], ['platform_users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['purchase_order_id'], ['purchase_orders.id'], ),
    sa.ForeignKeyConstraint(['requested_by'], ['platform_users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_pr_org_status', 'purchase_requisitions', ['organization_id', 'approval_status'], unique=False)
    op.create_index('idx_pr_required_date', 'purchase_requisitions', ['required_date'], unique=False)
    op.create_index(op.f('ix_purchase_requisitions_approval_status'), 'purchase_requisitions', ['approval_status'], unique=False)
    op.create_index(op.f('ix_purchase_requisitions_id'), 'purchase_requisitions', ['id'], unique=False)
    op.create_index(op.f('ix_purchase_requisitions_organization_id'), 'purchase_requisitions', ['organization_id'], unique=False)
    op.create_index(op.f('ix_purchase_requisitions_purchase_order_id'), 'purchase_requisitions', ['purchase_order_id'], unique=False)
    op.create_index(op.f('ix_purchase_requisitions_required_date'), 'purchase_requisitions', ['required_date'], unique=False)
    op.create_index(op.f('ix_purchase_requisitions_requisition_date'), 'purchase_requisitions', ['requisition_date'], unique=False)
    op.create_index(op.f('ix_purchase_requisitions_requisition_number'), 'purchase_requisitions', ['requisition_number'], unique=True)
    op.create_table('quotation_items',
    sa.Column('quotation_id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('discount_percentage', sa.Float(), nullable=True),
    sa.Column('gst_rate', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=False),
    sa.Column('taxable_amount', sa.Float(), nullable=True),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('quantity', sa.Float(), nullable=False),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('unit_price', sa.Float(), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], ),
    sa.ForeignKeyConstraint(['quotation_id'], ['quotations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_quotation_items_id'), 'quotation_items', ['id'], unique=False)
    op.create_table('sales_order_items',
    sa.Column('sales_order_id', sa.Integer(), nullable=False),
    sa.Column('delivered_quantity', sa.Float(), nullable=True),
    sa.Column('pending_quantity', sa.Float(), nullable=False),
    sa.Column('discount_percentage', sa.Float(), nullable=True),
    sa.Column('gst_rate', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=False),
    sa.Column('taxable_amount', sa.Float(), nullable=True),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('quantity', sa.Float(), nullable=False),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('unit_price', sa.Float(), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], ),
    sa.ForeignKeyConstraint(['sales_order_id'], ['sales_orders.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_sales_order_items_id'), 'sales_order_items', ['id'], unique=False)
    op.create_table('sla_tracking',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('ticket_id', sa.Integer(), nullable=False),
    sa.Column('policy_id', sa.Integer(), nullable=False),
    sa.Column('response_deadline', sa.DateTime(timezone=True), nullable=False),
    sa.Column('resolution_deadline', sa.DateTime(timezone=True), nullable=False),
    sa.Column('first_response_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('resolved_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('response_status', sa.String(), nullable=False),
    sa.Column('resolution_status', sa.String(), nullable=False),
    sa.Column('escalation_triggered', sa.Boolean(), nullable=False),
    sa.Column('escalation_triggered_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('escalation_level', sa.Integer(), nullable=False),
    sa.Column('response_breach_hours', sa.Float(), nullable=True),
    sa.Column('resolution_breach_hours', sa.Float(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_sla_tracking_organization_id'),
    sa.ForeignKeyConstraint(['policy_id'], ['sla_policies.id'], name='fk_sla_tracking_policy_id'),
    sa.ForeignKeyConstraint(['ticket_id'], ['tickets.id'], name='fk_sla_tracking_ticket_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('ticket_id')
    )
    op.create_index('idx_sla_tracking_escalation', 'sla_tracking', ['escalation_triggered'], unique=False)
    op.create_index('idx_sla_tracking_org_ticket', 'sla_tracking', ['organization_id', 'ticket_id'], unique=False)
    op.create_index('idx_sla_tracking_policy', 'sla_tracking', ['policy_id'], unique=False)
    op.create_index('idx_sla_tracking_resolution_deadline', 'sla_tracking', ['resolution_deadline'], unique=False)
    op.create_index('idx_sla_tracking_resolution_status', 'sla_tracking', ['resolution_status'], unique=False)
    op.create_index('idx_sla_tracking_response_deadline', 'sla_tracking', ['response_deadline'], unique=False)
    op.create_index('idx_sla_tracking_response_status', 'sla_tracking', ['response_status'], unique=False)
    op.create_index(op.f('ix_sla_tracking_id'), 'sla_tracking', ['id'], unique=False)
    op.create_index(op.f('ix_sla_tracking_organization_id'), 'sla_tracking', ['organization_id'], unique=False)
    op.create_table('tasks',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('title', sa.String(length=255), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('status', sa.Enum('TODO', 'IN_PROGRESS', 'REVIEW', 'DONE', 'CANCELLED', name='taskstatus'), nullable=False),
    sa.Column('priority', sa.Enum('LOW', 'NORMAL', 'HIGH', 'URGENT', name='taskpriority'), nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('due_date', sa.DateTime(), nullable=True),
    sa.Column('start_date', sa.DateTime(), nullable=True),
    sa.Column('completed_at', sa.DateTime(), nullable=True),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('company_id', sa.Integer(), nullable=True),
    sa.Column('task_project_id', sa.Integer(), nullable=True),
    sa.Column('project_id', sa.Integer(), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=False),
    sa.Column('assigned_to', sa.Integer(), nullable=True),
    sa.Column('estimated_hours', sa.Integer(), nullable=True),
    sa.Column('actual_hours', sa.Integer(), nullable=True),
    sa.Column('tags', sa.JSON(), nullable=True),
    sa.Column('custom_fields', sa.JSON(), nullable=True),
    sa.ForeignKeyConstraint(['assigned_to'], ['users.id'], ),
    sa.ForeignKeyConstraint(['company_id'], ['companies.id'], ),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['project_id'], ['projects.id'], ),
    sa.ForeignKeyConstraint(['task_project_id'], ['task_projects.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_tasks_id'), 'tasks', ['id'], unique=False)
    op.create_index(op.f('ix_tasks_title'), 'tasks', ['title'], unique=False)
    op.create_table('ticket_attachments',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('ticket_id', sa.Integer(), nullable=False),
    sa.Column('filename', sa.String(), nullable=False),
    sa.Column('original_filename', sa.String(), nullable=False),
    sa.Column('file_path', sa.String(), nullable=False),
    sa.Column('file_size', sa.Integer(), nullable=False),
    sa.Column('content_type', sa.String(), nullable=False),
    sa.Column('file_type', sa.String(), nullable=False),
    sa.Column('uploaded_by_id', sa.Integer(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_ticket_attachment_organization_id'),
    sa.ForeignKeyConstraint(['ticket_id'], ['tickets.id'], name='fk_ticket_attachment_ticket_id'),
    sa.ForeignKeyConstraint(['uploaded_by_id'], ['users.id'], name='fk_ticket_attachment_uploaded_by_id'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_ticket_attachment_org_ticket', 'ticket_attachments', ['organization_id', 'ticket_id'], unique=False)
    op.create_index('idx_ticket_attachment_type', 'ticket_attachments', ['file_type'], unique=False)
    op.create_index('idx_ticket_attachment_uploaded_by', 'ticket_attachments', ['uploaded_by_id'], unique=False)
    op.create_index(op.f('ix_ticket_attachments_id'), 'ticket_attachments', ['id'], unique=False)
    op.create_index(op.f('ix_ticket_attachments_organization_id'), 'ticket_attachments', ['organization_id'], unique=False)
    op.create_table('ticket_history',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('ticket_id', sa.Integer(), nullable=False),
    sa.Column('action', sa.String(), nullable=False),
    sa.Column('field_changed', sa.String(), nullable=True),
    sa.Column('old_value', sa.Text(), nullable=True),
    sa.Column('new_value', sa.Text(), nullable=True),
    sa.Column('comment', sa.Text(), nullable=True),
    sa.Column('changed_by_id', sa.Integer(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.ForeignKeyConstraint(['changed_by_id'], ['users.id'], name='fk_ticket_history_changed_by_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_ticket_history_organization_id'),
    sa.ForeignKeyConstraint(['ticket_id'], ['tickets.id'], name='fk_ticket_history_ticket_id'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_ticket_history_action', 'ticket_history', ['action'], unique=False)
    op.create_index('idx_ticket_history_created_at', 'ticket_history', ['created_at'], unique=False)
    op.create_index('idx_ticket_history_org_ticket', 'ticket_history', ['organization_id', 'ticket_id'], unique=False)
    op.create_index('idx_ticket_history_user', 'ticket_history', ['changed_by_id'], unique=False)
    op.create_index(op.f('ix_ticket_history_id'), 'ticket_history', ['id'], unique=False)
    op.create_index(op.f('ix_ticket_history_organization_id'), 'ticket_history', ['organization_id'], unique=False)
    op.create_table('training_enrollments',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('employee_id', sa.Integer(), nullable=False),
    sa.Column('program_id', sa.Integer(), nullable=False),
    sa.Column('session_id', sa.Integer(), nullable=True),
    sa.Column('enrollment_date', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('enrollment_type', sa.String(), nullable=False),
    sa.Column('enrollment_source', sa.String(), nullable=False),
    sa.Column('status', sa.String(), nullable=False),
    sa.Column('approved_by_id', sa.Integer(), nullable=True),
    sa.Column('approved_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('attendance_percentage', sa.Numeric(precision=5, scale=2), nullable=True),
    sa.Column('participation_score', sa.Numeric(precision=5, scale=2), nullable=True),
    sa.Column('assignment_score', sa.Numeric(precision=5, scale=2), nullable=True),
    sa.Column('final_score', sa.Numeric(precision=5, scale=2), nullable=True),
    sa.Column('completed_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('certificate_issued', sa.Boolean(), nullable=False),
    sa.Column('certificate_number', sa.String(), nullable=True),
    sa.Column('certificate_path', sa.String(), nullable=True),
    sa.Column('participant_rating', sa.Integer(), nullable=True),
    sa.Column('participant_feedback', sa.Text(), nullable=True),
    sa.Column('instructor_feedback', sa.Text(), nullable=True),
    sa.Column('cost_allocated', sa.Numeric(precision=15, scale=2), nullable=True),
    sa.Column('budget_code', sa.String(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['approved_by_id'], ['users.id'], name='fk_training_enrollment_approved_by_id'),
    sa.ForeignKeyConstraint(['employee_id'], ['employee_profiles.id'], name='fk_training_enrollment_employee_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_training_enrollment_organization_id'),
    sa.ForeignKeyConstraint(['program_id'], ['training_programs.id'], name='fk_training_enrollment_program_id'),
    sa.ForeignKeyConstraint(['session_id'], ['training_sessions.id'], name='fk_training_enrollment_session_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('employee_id', 'program_id', 'session_id', name='uq_training_enrollment_emp_prog_session')
    )
    op.create_index('idx_training_enrollment_org_employee', 'training_enrollments', ['organization_id', 'employee_id'], unique=False)
    op.create_index('idx_training_enrollment_status', 'training_enrollments', ['status'], unique=False)
    op.create_index(op.f('ix_training_enrollments_employee_id'), 'training_enrollments', ['employee_id'], unique=False)
    op.create_index(op.f('ix_training_enrollments_id'), 'training_enrollments', ['id'], unique=False)
    op.create_index(op.f('ix_training_enrollments_organization_id'), 'training_enrollments', ['organization_id'], unique=False)
    op.create_index(op.f('ix_training_enrollments_program_id'), 'training_enrollments', ['program_id'], unique=False)
    op.create_index(op.f('ix_training_enrollments_session_id'), 'training_enrollments', ['session_id'], unique=False)
    op.create_table('vendor_quotation_items',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('quotation_id', sa.Integer(), nullable=False),
    sa.Column('rfq_item_id', sa.Integer(), nullable=False),
    sa.Column('vendor_item_code', sa.String(length=100), nullable=True),
    sa.Column('vendor_item_name', sa.String(length=200), nullable=True),
    sa.Column('brand', sa.String(length=100), nullable=True),
    sa.Column('model', sa.String(length=100), nullable=True),
    sa.Column('quoted_quantity', sa.Numeric(precision=12, scale=3), nullable=False),
    sa.Column('unit_price', sa.Numeric(precision=15, scale=2), nullable=False),
    sa.Column('total_price', sa.Numeric(precision=15, scale=2), nullable=False),
    sa.Column('delivery_period', sa.String(length=50), nullable=True),
    sa.Column('remarks', sa.Text(), nullable=True),
    sa.Column('meets_specifications', sa.Boolean(), nullable=False),
    sa.Column('deviation_notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.ForeignKeyConstraint(['quotation_id'], ['vendor_quotations.id'], ),
    sa.ForeignKeyConstraint(['rfq_item_id'], ['rfq_items.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_vendor_quotation_items_id'), 'vendor_quotation_items', ['id'], unique=False)
    op.create_index(op.f('ix_vendor_quotation_items_quotation_id'), 'vendor_quotation_items', ['quotation_id'], unique=False)
    op.create_index(op.f('ix_vendor_quotation_items_rfq_item_id'), 'vendor_quotation_items', ['rfq_item_id'], unique=False)
    op.create_table('workflow_instances',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('template_id', sa.Integer(), nullable=False),
    sa.Column('instance_name', sa.String(length=255), nullable=False),
    sa.Column('reference_number', sa.String(length=100), nullable=True),
    sa.Column('entity_type', sa.String(length=100), nullable=False),
    sa.Column('entity_id', sa.Integer(), nullable=False),
    sa.Column('entity_data', sa.JSON(), nullable=True),
    sa.Column('status', sa.Enum('CREATED', 'IN_PROGRESS', 'COMPLETED', 'FAILED', 'CANCELLED', 'PAUSED', name='instancestatus'), nullable=False),
    sa.Column('current_step_id', sa.Integer(), nullable=True),
    sa.Column('total_steps', sa.Integer(), nullable=False),
    sa.Column('completed_steps', sa.Integer(), nullable=False),
    sa.Column('started_at', sa.DateTime(), nullable=True),
    sa.Column('completed_at', sa.DateTime(), nullable=True),
    sa.Column('deadline', sa.DateTime(), nullable=True),
    sa.Column('triggered_by', sa.Integer(), nullable=False),
    sa.Column('trigger_reason', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.ForeignKeyConstraint(['current_step_id'], ['workflow_steps.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['template_id'], ['workflow_templates.id'], ),
    sa.ForeignKeyConstraint(['triggered_by'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_workflow_instance_org_entity', 'workflow_instances', ['organization_id', 'entity_type', 'entity_id'], unique=False)
    op.create_index('idx_workflow_instance_org_status', 'workflow_instances', ['organization_id', 'status'], unique=False)
    op.create_index('idx_workflow_instance_org_template', 'workflow_instances', ['organization_id', 'template_id'], unique=False)
    op.create_index('idx_workflow_instance_org_triggered', 'workflow_instances', ['organization_id', 'triggered_by'], unique=False)
    op.create_index(op.f('ix_workflow_instances_id'), 'workflow_instances', ['id'], unique=False)
    op.create_index(op.f('ix_workflow_instances_organization_id'), 'workflow_instances', ['organization_id'], unique=False)
    op.create_index(op.f('ix_workflow_instances_reference_number'), 'workflow_instances', ['reference_number'], unique=False)
    op.create_table('workflow_instances_automation',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('workflow_template_id', sa.Integer(), nullable=False),
    sa.Column('instance_name', sa.String(length=200), nullable=True),
    sa.Column('reference_type', sa.String(length=100), nullable=True),
    sa.Column('reference_id', sa.Integer(), nullable=True),
    sa.Column('status', sa.Enum('DRAFT', 'ACTIVE', 'PAUSED', 'COMPLETED', 'FAILED', 'CANCELLED', name='workflowstatus'), nullable=False),
    sa.Column('current_step_id', sa.Integer(), nullable=True),
    sa.Column('started_at', sa.DateTime(), nullable=True),
    sa.Column('completed_at', sa.DateTime(), nullable=True),
    sa.Column('failed_at', sa.DateTime(), nullable=True),
    sa.Column('cancelled_at', sa.DateTime(), nullable=True),
    sa.Column('input_data', sa.JSON(), nullable=True),
    sa.Column('current_data', sa.JSON(), nullable=True),
    sa.Column('output_data', sa.JSON(), nullable=True),
    sa.Column('total_steps', sa.Integer(), nullable=False),
    sa.Column('completed_steps', sa.Integer(), nullable=False),
    sa.Column('failed_steps', sa.Integer(), nullable=False),
    sa.Column('error_message', sa.Text(), nullable=True),
    sa.Column('retry_count', sa.Integer(), nullable=False),
    sa.Column('initiated_by', sa.Integer(), nullable=True),
    sa.Column('assigned_to', sa.Integer(), nullable=True),
    sa.Column('created_at', sa.DateTime(), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.ForeignKeyConstraint(['assigned_to'], ['users.id'], ),
    sa.ForeignKeyConstraint(['current_step_id'], ['workflow_steps_automation.id'], ),
    sa.ForeignKeyConstraint(['initiated_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['workflow_template_id'], ['workflow_templates_advanced.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_workflow_instance_auto_org_status', 'workflow_instances_automation', ['organization_id', 'status'], unique=False)
    op.create_index('idx_workflow_instance_reference', 'workflow_instances_automation', ['reference_type', 'reference_id'], unique=False)
    op.create_index('idx_workflow_instance_template', 'workflow_instances_automation', ['workflow_template_id'], unique=False)
    op.create_index(op.f('ix_workflow_instances_automation_current_step_id'), 'workflow_instances_automation', ['current_step_id'], unique=False)
    op.create_index(op.f('ix_workflow_instances_automation_id'), 'workflow_instances_automation', ['id'], unique=False)
    op.create_index(op.f('ix_workflow_instances_automation_instance_name'), 'workflow_instances_automation', ['instance_name'], unique=False)
    op.create_index(op.f('ix_workflow_instances_automation_organization_id'), 'workflow_instances_automation', ['organization_id'], unique=False)
    op.create_index(op.f('ix_workflow_instances_automation_reference_id'), 'workflow_instances_automation', ['reference_id'], unique=False)
    op.create_index(op.f('ix_workflow_instances_automation_reference_type'), 'workflow_instances_automation', ['reference_type'], unique=False)
    op.create_index(op.f('ix_workflow_instances_automation_status'), 'workflow_instances_automation', ['status'], unique=False)
    op.create_index(op.f('ix_workflow_instances_automation_workflow_template_id'), 'workflow_instances_automation', ['workflow_template_id'], unique=False)
    op.create_table('batch_locations',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('batch_id', sa.Integer(), nullable=False),
    sa.Column('stock_location_id', sa.Integer(), nullable=False),
    sa.Column('quantity', sa.Numeric(precision=12, scale=3), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.ForeignKeyConstraint(['batch_id'], ['product_batches.id'], ),
    sa.ForeignKeyConstraint(['stock_location_id'], ['stock_locations.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('batch_id', 'stock_location_id', name='uq_batch_location')
    )
    op.create_index(op.f('ix_batch_locations_batch_id'), 'batch_locations', ['batch_id'], unique=False)
    op.create_index(op.f('ix_batch_locations_id'), 'batch_locations', ['id'], unique=False)
    op.create_index(op.f('ix_batch_locations_stock_location_id'), 'batch_locations', ['stock_location_id'], unique=False)
    op.create_table('calendar_events',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('title', sa.String(length=255), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('event_type', sa.Enum('TASK', 'APPOINTMENT', 'MEETING', 'REMINDER', 'DEADLINE', 'PERSONAL', 'HOLIDAY', name='eventtype'), nullable=False),
    sa.Column('status', sa.Enum('SCHEDULED', 'CONFIRMED', 'CANCELLED', 'COMPLETED', 'NO_SHOW', name='eventstatus'), nullable=False),
    sa.Column('start_datetime', sa.DateTime(), nullable=False),
    sa.Column('end_datetime', sa.DateTime(), nullable=False),
    sa.Column('all_day', sa.Boolean(), nullable=False),
    sa.Column('timezone', sa.String(length=50), nullable=False),
    sa.Column('location', sa.String(length=255), nullable=True),
    sa.Column('meeting_url', sa.String(length=500), nullable=True),
    sa.Column('meeting_id', sa.String(length=100), nullable=True),
    sa.Column('meeting_password', sa.String(length=100), nullable=True),
    sa.Column('recurrence_type', sa.Enum('NONE', 'DAILY', 'WEEKLY', 'MONTHLY', 'YEARLY', 'CUSTOM', name='recurrencetype'), nullable=False),
    sa.Column('recurrence_rule', sa.JSON(), nullable=True),
    sa.Column('recurrence_end_date', sa.Date(), nullable=True),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('created_by', sa.Integer(), nullable=False),
    sa.Column('task_id', sa.Integer(), nullable=True),
    sa.Column('color', sa.String(length=7), nullable=True),
    sa.Column('is_private', sa.Boolean(), nullable=False),
    sa.Column('priority', sa.String(length=20), nullable=False),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('custom_fields', sa.JSON(), nullable=True),
    sa.Column('google_event_id', sa.String(length=255), nullable=True),
    sa.Column('google_calendar_id', sa.String(length=255), nullable=True),
    sa.Column('last_google_sync', sa.DateTime(), nullable=True),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['task_id'], ['tasks.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_calendar_events_end_datetime'), 'calendar_events', ['end_datetime'], unique=False)
    op.create_index(op.f('ix_calendar_events_google_event_id'), 'calendar_events', ['google_event_id'], unique=False)
    op.create_index(op.f('ix_calendar_events_id'), 'calendar_events', ['id'], unique=False)
    op.create_index(op.f('ix_calendar_events_start_datetime'), 'calendar_events', ['start_datetime'], unique=False)
    op.create_index(op.f('ix_calendar_events_title'), 'calendar_events', ['title'], unique=False)
    op.create_table('chatbot_messages',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('conversation_id', sa.Integer(), nullable=False),
    sa.Column('message_type', sa.String(), nullable=False),
    sa.Column('content', sa.Text(), nullable=False),
    sa.Column('message_format', sa.String(), nullable=False),
    sa.Column('sender_id', sa.String(), nullable=True),
    sa.Column('agent_id', sa.Integer(), nullable=True),
    sa.Column('intent_detected', sa.String(), nullable=True),
    sa.Column('confidence_score', sa.Float(), nullable=True),
    sa.Column('entities_extracted', sa.JSON(), nullable=True),
    sa.Column('is_read', sa.Boolean(), nullable=False),
    sa.Column('read_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.ForeignKeyConstraint(['agent_id'], ['users.id'], name='fk_chatbot_message_agent_id'),
    sa.ForeignKeyConstraint(['conversation_id'], ['chatbot_conversations.id'], name='fk_chatbot_message_conversation_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_chatbot_message_organization_id'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_chatbot_message_created', 'chatbot_messages', ['created_at'], unique=False)
    op.create_index('idx_chatbot_message_org_conversation', 'chatbot_messages', ['organization_id', 'conversation_id'], unique=False)
    op.create_index('idx_chatbot_message_type', 'chatbot_messages', ['message_type'], unique=False)
    op.create_index(op.f('ix_chatbot_messages_id'), 'chatbot_messages', ['id'], unique=False)
    op.create_index(op.f('ix_chatbot_messages_organization_id'), 'chatbot_messages', ['organization_id'], unique=False)
    op.create_table('delivery_challan_items',
    sa.Column('delivery_challan_id', sa.Integer(), nullable=False),
    sa.Column('so_item_id', sa.Integer(), nullable=True),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('unit_price', sa.Float(), nullable=True),
    sa.Column('total_amount', sa.Float(), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('quantity', sa.Float(), nullable=False),
    sa.Column('unit', sa.String(), nullable=False),
    sa.ForeignKeyConstraint(['delivery_challan_id'], ['delivery_challans.id'], ),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], ),
    sa.ForeignKeyConstraint(['so_item_id'], ['sales_order_items.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_delivery_challan_items_id'), 'delivery_challan_items', ['id'], unique=False)
    op.create_table('dispatch_items',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('dispatch_order_id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('quantity', sa.Float(), nullable=False),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('serial_numbers', sa.Text(), nullable=True),
    sa.Column('batch_numbers', sa.Text(), nullable=True),
    sa.Column('status', sa.String(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['dispatch_order_id'], ['dispatch_orders.id'], name='fk_dispatch_item_dispatch_order_id'),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], name='fk_dispatch_item_product_id'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_dispatch_item_order', 'dispatch_items', ['dispatch_order_id'], unique=False)
    op.create_index('idx_dispatch_item_product', 'dispatch_items', ['product_id'], unique=False)
    op.create_index('idx_dispatch_item_status', 'dispatch_items', ['status'], unique=False)
    op.create_index(op.f('ix_dispatch_items_id'), 'dispatch_items', ['id'], unique=False)
    op.create_table('exhibition_prospects',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('exhibition_event_id', sa.Integer(), nullable=False),
    sa.Column('card_scan_id', sa.Integer(), nullable=True),
    sa.Column('full_name', sa.String(), nullable=False),
    sa.Column('company_name', sa.String(), nullable=False),
    sa.Column('designation', sa.String(), nullable=True),
    sa.Column('email', sa.String(), nullable=True),
    sa.Column('phone', sa.String(), nullable=True),
    sa.Column('mobile', sa.String(), nullable=True),
    sa.Column('website', sa.String(), nullable=True),
    sa.Column('address', sa.Text(), nullable=True),
    sa.Column('lead_score', sa.Float(), nullable=True),
    sa.Column('qualification_status', sa.String(), nullable=False),
    sa.Column('interest_level', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('crm_customer_id', sa.Integer(), nullable=True),
    sa.Column('assigned_to_id', sa.Integer(), nullable=True),
    sa.Column('follow_up_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('intro_email_sent_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('last_contact_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('contact_attempts', sa.Integer(), nullable=False),
    sa.Column('status', sa.String(), nullable=False),
    sa.Column('conversion_status', sa.String(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by_id', sa.Integer(), nullable=False),
    sa.ForeignKeyConstraint(['assigned_to_id'], ['users.id'], ),
    sa.ForeignKeyConstraint(['card_scan_id'], ['business_card_scans.id'], ),
    sa.ForeignKeyConstraint(['created_by_id'], ['users.id'], ),
    sa.ForeignKeyConstraint(['crm_customer_id'], ['customers.id'], ),
    sa.ForeignKeyConstraint(['exhibition_event_id'], ['exhibition_events.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_exhibition_prospect_assigned', 'exhibition_prospects', ['assigned_to_id'], unique=False)
    op.create_index('idx_exhibition_prospect_company', 'exhibition_prospects', ['company_name'], unique=False)
    op.create_index('idx_exhibition_prospect_event', 'exhibition_prospects', ['exhibition_event_id'], unique=False)
    op.create_index('idx_exhibition_prospect_status', 'exhibition_prospects', ['status'], unique=False)
    op.create_index(op.f('ix_exhibition_prospects_id'), 'exhibition_prospects', ['id'], unique=False)
    op.create_index(op.f('ix_exhibition_prospects_organization_id'), 'exhibition_prospects', ['organization_id'], unique=False)
    op.create_table('goods_receipt_note_items',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('grn_id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('po_item_id', sa.Integer(), nullable=True),
    sa.Column('ordered_quantity', sa.Float(), nullable=False),
    sa.Column('received_quantity', sa.Float(), nullable=False),
    sa.Column('accepted_quantity', sa.Float(), nullable=False),
    sa.Column('rejected_quantity', sa.Float(), nullable=True),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('unit_price', sa.Float(), nullable=False),
    sa.Column('total_cost', sa.Float(), nullable=False),
    sa.Column('remarks', sa.Text(), nullable=True),
    sa.Column('batch_number', sa.String(), nullable=True),
    sa.Column('expiry_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('quality_status', sa.String(), nullable=True),
    sa.ForeignKeyConstraint(['grn_id'], ['goods_receipt_notes.id'], ),
    sa.ForeignKeyConstraint(['po_item_id'], ['purchase_order_items.id'], ),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_goods_receipt_note_items_id'), 'goods_receipt_note_items', ['id'], unique=False)
    op.create_table('installation_jobs',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('job_number', sa.String(), nullable=False),
    sa.Column('dispatch_order_id', sa.Integer(), nullable=False),
    sa.Column('customer_id', sa.Integer(), nullable=False),
    sa.Column('ticket_id', sa.Integer(), nullable=True),
    sa.Column('status', sa.String(), nullable=False),
    sa.Column('priority', sa.String(), nullable=False),
    sa.Column('scheduled_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('estimated_duration_hours', sa.Float(), nullable=True),
    sa.Column('actual_start_time', sa.DateTime(timezone=True), nullable=True),
    sa.Column('actual_end_time', sa.DateTime(timezone=True), nullable=True),
    sa.Column('assigned_technician_id', sa.Integer(), nullable=True),
    sa.Column('installation_address', sa.Text(), nullable=False),
    sa.Column('contact_person', sa.String(), nullable=True),
    sa.Column('contact_number', sa.String(), nullable=True),
    sa.Column('installation_notes', sa.Text(), nullable=True),
    sa.Column('completion_notes', sa.Text(), nullable=True),
    sa.Column('customer_feedback', sa.Text(), nullable=True),
    sa.Column('customer_rating', sa.Integer(), nullable=True),
    sa.Column('created_by_id', sa.Integer(), nullable=True),
    sa.Column('updated_by_id', sa.Integer(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['assigned_technician_id'], ['users.id'], name='fk_installation_job_assigned_technician_id'),
    sa.ForeignKeyConstraint(['created_by_id'], ['users.id'], name='fk_installation_job_created_by_id'),
    sa.ForeignKeyConstraint(['customer_id'], ['customers.id'], name='fk_installation_job_customer_id'),
    sa.ForeignKeyConstraint(['dispatch_order_id'], ['dispatch_orders.id'], name='fk_installation_job_dispatch_order_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_installation_job_organization_id'),
    sa.ForeignKeyConstraint(['ticket_id'], ['tickets.id'], name='fk_installation_job_ticket_id'),
    sa.ForeignKeyConstraint(['updated_by_id'], ['users.id'], name='fk_installation_job_updated_by_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'job_number', name='uq_installation_job_org_number')
    )
    op.create_index('idx_installation_job_created_at', 'installation_jobs', ['created_at'], unique=False)
    op.create_index('idx_installation_job_dispatch_order', 'installation_jobs', ['dispatch_order_id'], unique=False)
    op.create_index('idx_installation_job_org_customer', 'installation_jobs', ['organization_id', 'customer_id'], unique=False)
    op.create_index('idx_installation_job_org_status', 'installation_jobs', ['organization_id', 'status'], unique=False)
    op.create_index('idx_installation_job_org_technician', 'installation_jobs', ['organization_id', 'assigned_technician_id'], unique=False)
    op.create_index('idx_installation_job_priority', 'installation_jobs', ['priority'], unique=False)
    op.create_index('idx_installation_job_scheduled_date', 'installation_jobs', ['scheduled_date'], unique=False)
    op.create_index(op.f('ix_installation_jobs_id'), 'installation_jobs', ['id'], unique=False)
    op.create_index(op.f('ix_installation_jobs_job_number'), 'installation_jobs', ['job_number'], unique=False)
    op.create_index(op.f('ix_installation_jobs_organization_id'), 'installation_jobs', ['organization_id'], unique=False)
    op.create_table('job_card_vouchers',
    sa.Column('job_type', sa.String(), nullable=False),
    sa.Column('vendor_id', sa.Integer(), nullable=False),
    sa.Column('manufacturing_order_id', sa.Integer(), nullable=True),
    sa.Column('job_description', sa.Text(), nullable=False),
    sa.Column('job_category', sa.String(), nullable=True),
    sa.Column('expected_completion_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('actual_completion_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('materials_supplied_by', sa.String(), nullable=True),
    sa.Column('delivery_address', sa.Text(), nullable=True),
    sa.Column('transport_mode', sa.String(), nullable=True),
    sa.Column('job_status', sa.String(), nullable=True),
    sa.Column('quality_specifications', sa.Text(), nullable=True),
    sa.Column('quality_check_required', sa.Boolean(), nullable=True),
    sa.Column('approved_by', sa.Integer(), nullable=True),
    sa.Column('approval_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('voucher_number', sa.String(), nullable=False),
    sa.Column('date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['approved_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['manufacturing_order_id'], ['manufacturing_orders.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['vendor_id'], ['vendors.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'voucher_number', name='uq_jcv_org_voucher_number')
    )
    op.create_index('idx_jcv_org_date', 'job_card_vouchers', ['organization_id', 'date'], unique=False)
    op.create_index('idx_jcv_org_mo', 'job_card_vouchers', ['organization_id', 'manufacturing_order_id'], unique=False)
    op.create_index('idx_jcv_org_status', 'job_card_vouchers', ['organization_id', 'job_status'], unique=False)
    op.create_index('idx_jcv_org_vendor', 'job_card_vouchers', ['organization_id', 'vendor_id'], unique=False)
    op.create_index(op.f('ix_job_card_vouchers_id'), 'job_card_vouchers', ['id'], unique=False)
    op.create_index(op.f('ix_job_card_vouchers_organization_id'), 'job_card_vouchers', ['organization_id'], unique=False)
    op.create_index(op.f('ix_job_card_vouchers_voucher_number'), 'job_card_vouchers', ['voucher_number'], unique=False)
    op.create_table('maintenance_records',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('asset_id', sa.Integer(), nullable=False),
    sa.Column('schedule_id', sa.Integer(), nullable=True),
    sa.Column('work_order_number', sa.String(), nullable=False),
    sa.Column('maintenance_type', sa.Enum('PREVENTIVE', 'CORRECTIVE', 'EMERGENCY', 'INSPECTION', name='maintenancetype'), nullable=False),
    sa.Column('priority', sa.String(), nullable=True),
    sa.Column('scheduled_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('actual_start_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('actual_end_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('description', sa.Text(), nullable=False),
    sa.Column('work_performed', sa.Text(), nullable=True),
    sa.Column('findings', sa.Text(), nullable=True),
    sa.Column('recommendations', sa.Text(), nullable=True),
    sa.Column('assigned_technician', sa.String(), nullable=True),
    sa.Column('performed_by', sa.String(), nullable=True),
    sa.Column('supervised_by', sa.String(), nullable=True),
    sa.Column('status', sa.Enum('SCHEDULED', 'IN_PROGRESS', 'COMPLETED', 'CANCELLED', 'OVERDUE', name='maintenancestatus'), nullable=False),
    sa.Column('labor_cost', sa.Float(), nullable=True),
    sa.Column('parts_cost', sa.Float(), nullable=True),
    sa.Column('external_cost', sa.Float(), nullable=True),
    sa.Column('total_cost', sa.Float(), nullable=True),
    sa.Column('meter_reading_before', sa.Float(), nullable=True),
    sa.Column('meter_reading_after', sa.Float(), nullable=True),
    sa.Column('safety_incidents', sa.Text(), nullable=True),
    sa.Column('quality_check_passed', sa.Boolean(), nullable=True),
    sa.Column('quality_remarks', sa.Text(), nullable=True),
    sa.Column('condition_before', sa.Enum('EXCELLENT', 'GOOD', 'FAIR', 'POOR', 'CRITICAL', name='assetcondition'), nullable=True),
    sa.Column('condition_after', sa.Enum('EXCELLENT', 'GOOD', 'FAIR', 'POOR', 'CRITICAL', name='assetcondition'), nullable=True),
    sa.Column('photos_path', sa.String(), nullable=True),
    sa.Column('documents_path', sa.String(), nullable=True),
    sa.Column('approved_by', sa.Integer(), nullable=True),
    sa.Column('approval_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['approved_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['asset_id'], ['assets.id'], ),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['schedule_id'], ['maintenance_schedules.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'work_order_number', name='uq_maint_rec_org_wo')
    )
    op.create_index('idx_maint_rec_org_asset', 'maintenance_records', ['organization_id', 'asset_id'], unique=False)
    op.create_index('idx_maint_rec_org_date', 'maintenance_records', ['organization_id', 'scheduled_date'], unique=False)
    op.create_index('idx_maint_rec_org_status', 'maintenance_records', ['organization_id', 'status'], unique=False)
    op.create_index('idx_maint_rec_org_type', 'maintenance_records', ['organization_id', 'maintenance_type'], unique=False)
    op.create_index(op.f('ix_maintenance_records_id'), 'maintenance_records', ['id'], unique=False)
    op.create_index(op.f('ix_maintenance_records_organization_id'), 'maintenance_records', ['organization_id'], unique=False)
    op.create_table('manufacturing_journal_vouchers',
    sa.Column('manufacturing_order_id', sa.Integer(), nullable=False),
    sa.Column('bom_id', sa.Integer(), nullable=False),
    sa.Column('date_of_manufacture', sa.DateTime(timezone=True), nullable=False),
    sa.Column('shift', sa.String(), nullable=True),
    sa.Column('operator', sa.String(), nullable=True),
    sa.Column('supervisor', sa.String(), nullable=True),
    sa.Column('machine_used', sa.String(), nullable=True),
    sa.Column('finished_quantity', sa.Float(), nullable=True),
    sa.Column('scrap_quantity', sa.Float(), nullable=True),
    sa.Column('rework_quantity', sa.Float(), nullable=True),
    sa.Column('byproduct_quantity', sa.Float(), nullable=True),
    sa.Column('material_cost', sa.Float(), nullable=True),
    sa.Column('labor_cost', sa.Float(), nullable=True),
    sa.Column('overhead_cost', sa.Float(), nullable=True),
    sa.Column('total_manufacturing_cost', sa.Float(), nullable=True),
    sa.Column('quality_grade', sa.String(), nullable=True),
    sa.Column('quality_remarks', sa.Text(), nullable=True),
    sa.Column('narration', sa.Text(), nullable=True),
    sa.Column('attachment_path', sa.String(), nullable=True),
    sa.Column('approved_by', sa.Integer(), nullable=True),
    sa.Column('approval_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('voucher_number', sa.String(), nullable=False),
    sa.Column('date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['approved_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['bom_id'], ['bill_of_materials.id'], ),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['manufacturing_order_id'], ['manufacturing_orders.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'voucher_number', name='uq_mjv_org_voucher_number')
    )
    op.create_index('idx_mjv_org_bom', 'manufacturing_journal_vouchers', ['organization_id', 'bom_id'], unique=False)
    op.create_index('idx_mjv_org_date', 'manufacturing_journal_vouchers', ['organization_id', 'date_of_manufacture'], unique=False)
    op.create_index('idx_mjv_org_mo', 'manufacturing_journal_vouchers', ['organization_id', 'manufacturing_order_id'], unique=False)
    op.create_index(op.f('ix_manufacturing_journal_vouchers_id'), 'manufacturing_journal_vouchers', ['id'], unique=False)
    op.create_index(op.f('ix_manufacturing_journal_vouchers_organization_id'), 'manufacturing_journal_vouchers', ['organization_id'], unique=False)
    op.create_index(op.f('ix_manufacturing_journal_vouchers_voucher_number'), 'manufacturing_journal_vouchers', ['voucher_number'], unique=False)
    op.create_table('material_issues',
    sa.Column('manufacturing_order_id', sa.Integer(), nullable=True),
    sa.Column('issued_to_department', sa.String(), nullable=True),
    sa.Column('issued_to_employee', sa.String(), nullable=True),
    sa.Column('purpose', sa.String(), nullable=True),
    sa.Column('destination', sa.String(), nullable=True),
    sa.Column('issue_time', sa.DateTime(timezone=True), nullable=True),
    sa.Column('expected_return_time', sa.DateTime(timezone=True), nullable=True),
    sa.Column('approved_by', sa.Integer(), nullable=True),
    sa.Column('approval_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('voucher_number', sa.String(), nullable=False),
    sa.Column('date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['approved_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['manufacturing_order_id'], ['manufacturing_orders.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'voucher_number', name='uq_mi_org_voucher_number')
    )
    op.create_index('idx_mi_org_date', 'material_issues', ['organization_id', 'date'], unique=False)
    op.create_index('idx_mi_org_dept', 'material_issues', ['organization_id', 'issued_to_department'], unique=False)
    op.create_index('idx_mi_org_mo', 'material_issues', ['organization_id', 'manufacturing_order_id'], unique=False)
    op.create_index(op.f('ix_material_issues_id'), 'material_issues', ['id'], unique=False)
    op.create_index(op.f('ix_material_issues_organization_id'), 'material_issues', ['organization_id'], unique=False)
    op.create_index(op.f('ix_material_issues_voucher_number'), 'material_issues', ['voucher_number'], unique=False)
    op.create_table('material_receipt_vouchers',
    sa.Column('manufacturing_order_id', sa.Integer(), nullable=True),
    sa.Column('source_type', sa.String(), nullable=False),
    sa.Column('source_reference', sa.String(), nullable=True),
    sa.Column('received_from_department', sa.String(), nullable=True),
    sa.Column('received_from_employee', sa.String(), nullable=True),
    sa.Column('received_by_employee', sa.String(), nullable=True),
    sa.Column('receipt_time', sa.DateTime(timezone=True), nullable=True),
    sa.Column('inspection_required', sa.Boolean(), nullable=True),
    sa.Column('inspection_status', sa.String(), nullable=True),
    sa.Column('inspector_name', sa.String(), nullable=True),
    sa.Column('inspection_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('inspection_remarks', sa.Text(), nullable=True),
    sa.Column('condition_on_receipt', sa.String(), nullable=True),
    sa.Column('approved_by', sa.Integer(), nullable=True),
    sa.Column('approval_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('voucher_number', sa.String(), nullable=False),
    sa.Column('date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['approved_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['manufacturing_order_id'], ['manufacturing_orders.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'voucher_number', name='uq_mrv_org_voucher_number')
    )
    op.create_index('idx_mrv_org_date', 'material_receipt_vouchers', ['organization_id', 'date'], unique=False)
    op.create_index('idx_mrv_org_mo', 'material_receipt_vouchers', ['organization_id', 'manufacturing_order_id'], unique=False)
    op.create_index('idx_mrv_org_source', 'material_receipt_vouchers', ['organization_id', 'source_type'], unique=False)
    op.create_index(op.f('ix_material_receipt_vouchers_id'), 'material_receipt_vouchers', ['id'], unique=False)
    op.create_index(op.f('ix_material_receipt_vouchers_organization_id'), 'material_receipt_vouchers', ['organization_id'], unique=False)
    op.create_index(op.f('ix_material_receipt_vouchers_voucher_number'), 'material_receipt_vouchers', ['voucher_number'], unique=False)
    op.create_table('opportunity_activities',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('opportunity_id', sa.Integer(), nullable=False),
    sa.Column('activity_type', sa.String(), nullable=False),
    sa.Column('subject', sa.String(), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('outcome', sa.String(), nullable=True),
    sa.Column('activity_date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('duration_minutes', sa.Integer(), nullable=True),
    sa.Column('created_by_id', sa.Integer(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.ForeignKeyConstraint(['created_by_id'], ['users.id'], name='fk_opportunity_activity_created_by_id'),
    sa.ForeignKeyConstraint(['opportunity_id'], ['opportunities.id'], name='fk_opportunity_activity_opportunity_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_opportunity_activity_organization_id'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_opportunity_activity_date', 'opportunity_activities', ['activity_date'], unique=False)
    op.create_index('idx_opportunity_activity_org_opp', 'opportunity_activities', ['organization_id', 'opportunity_id'], unique=False)
    op.create_index('idx_opportunity_activity_type', 'opportunity_activities', ['activity_type'], unique=False)
    op.create_index(op.f('ix_opportunity_activities_id'), 'opportunity_activities', ['id'], unique=False)
    op.create_index(op.f('ix_opportunity_activities_organization_id'), 'opportunity_activities', ['organization_id'], unique=False)
    op.create_table('opportunity_products',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('opportunity_id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=True),
    sa.Column('product_name', sa.String(), nullable=False),
    sa.Column('product_description', sa.Text(), nullable=True),
    sa.Column('quantity', sa.Float(), nullable=False),
    sa.Column('unit_price', sa.Float(), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.Column('discount_percent', sa.Float(), nullable=False),
    sa.Column('discount_amount', sa.Float(), nullable=False),
    sa.Column('final_amount', sa.Float(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['opportunity_id'], ['opportunities.id'], name='fk_opportunity_product_opportunity_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_opportunity_product_organization_id'),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], name='fk_opportunity_product_product_id'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_opportunity_product_org_opp', 'opportunity_products', ['organization_id', 'opportunity_id'], unique=False)
    op.create_index(op.f('ix_opportunity_products_id'), 'opportunity_products', ['id'], unique=False)
    op.create_index(op.f('ix_opportunity_products_organization_id'), 'opportunity_products', ['organization_id'], unique=False)
    op.create_table('product_serials',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('product_tracking_id', sa.Integer(), nullable=False),
    sa.Column('batch_id', sa.Integer(), nullable=True),
    sa.Column('serial_number', sa.String(length=100), nullable=False),
    sa.Column('manufacturing_date', sa.Date(), nullable=True),
    sa.Column('warranty_expiry_date', sa.Date(), nullable=True),
    sa.Column('supplier_serial_number', sa.String(length=100), nullable=True),
    sa.Column('supplier_id', sa.Integer(), nullable=True),
    sa.Column('current_status', sa.String(length=20), nullable=False),
    sa.Column('current_warehouse_id', sa.Integer(), nullable=True),
    sa.Column('current_location_id', sa.Integer(), nullable=True),
    sa.Column('customer_id', sa.Integer(), nullable=True),
    sa.Column('sale_date', sa.Date(), nullable=True),
    sa.Column('sale_invoice_number', sa.String(length=100), nullable=True),
    sa.Column('quality_grade', sa.String(length=50), nullable=True),
    sa.Column('quality_notes', sa.Text(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.ForeignKeyConstraint(['batch_id'], ['product_batches.id'], ),
    sa.ForeignKeyConstraint(['current_location_id'], ['stock_locations.id'], ),
    sa.ForeignKeyConstraint(['current_warehouse_id'], ['warehouses.id'], ),
    sa.ForeignKeyConstraint(['customer_id'], ['customers.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['product_tracking_id'], ['product_tracking.id'], ),
    sa.ForeignKeyConstraint(['supplier_id'], ['vendors.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'serial_number', name='uq_org_serial_number')
    )
    op.create_index('idx_serial_status', 'product_serials', ['current_status'], unique=False)
    op.create_index('idx_serial_warranty', 'product_serials', ['warranty_expiry_date'], unique=False)
    op.create_index(op.f('ix_product_serials_batch_id'), 'product_serials', ['batch_id'], unique=False)
    op.create_index(op.f('ix_product_serials_current_location_id'), 'product_serials', ['current_location_id'], unique=False)
    op.create_index(op.f('ix_product_serials_current_status'), 'product_serials', ['current_status'], unique=False)
    op.create_index(op.f('ix_product_serials_current_warehouse_id'), 'product_serials', ['current_warehouse_id'], unique=False)
    op.create_index(op.f('ix_product_serials_customer_id'), 'product_serials', ['customer_id'], unique=False)
    op.create_index(op.f('ix_product_serials_id'), 'product_serials', ['id'], unique=False)
    op.create_index(op.f('ix_product_serials_organization_id'), 'product_serials', ['organization_id'], unique=False)
    op.create_index(op.f('ix_product_serials_product_tracking_id'), 'product_serials', ['product_tracking_id'], unique=False)
    op.create_index(op.f('ix_product_serials_serial_number'), 'product_serials', ['serial_number'], unique=False)
    op.create_table('production_entries',
    sa.Column('manufacturing_order_id', sa.Integer(), nullable=False),
    sa.Column('shift', sa.String(), nullable=True),
    sa.Column('operator', sa.String(), nullable=True),
    sa.Column('machine_used', sa.String(), nullable=True),
    sa.Column('good_quantity', sa.Float(), nullable=True),
    sa.Column('rejected_quantity', sa.Float(), nullable=True),
    sa.Column('rework_quantity', sa.Float(), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('voucher_number', sa.String(), nullable=False),
    sa.Column('date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['manufacturing_order_id'], ['manufacturing_orders.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'voucher_number', name='uq_pe_org_voucher_number')
    )
    op.create_index('idx_pe_org_date', 'production_entries', ['organization_id', 'date'], unique=False)
    op.create_index('idx_pe_org_mo', 'production_entries', ['organization_id', 'manufacturing_order_id'], unique=False)
    op.create_index(op.f('ix_production_entries_id'), 'production_entries', ['id'], unique=False)
    op.create_index(op.f('ix_production_entries_organization_id'), 'production_entries', ['organization_id'], unique=False)
    op.create_index(op.f('ix_production_entries_voucher_number'), 'production_entries', ['voucher_number'], unique=False)
    op.create_table('project_time_logs',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('project_id', sa.Integer(), nullable=False),
    sa.Column('user_id', sa.Integer(), nullable=False),
    sa.Column('task_id', sa.Integer(), nullable=True),
    sa.Column('start_time', sa.DateTime(), nullable=False),
    sa.Column('end_time', sa.DateTime(), nullable=True),
    sa.Column('duration_minutes', sa.Integer(), nullable=True),
    sa.Column('description', sa.Text(), nullable=False),
    sa.Column('work_type', sa.String(length=100), nullable=True),
    sa.Column('is_billable', sa.Boolean(), nullable=True),
    sa.Column('hourly_rate', sa.Float(), nullable=True),
    sa.Column('billable_amount', sa.Float(), nullable=True),
    sa.Column('is_approved', sa.Boolean(), nullable=True),
    sa.Column('approved_by', sa.Integer(), nullable=True),
    sa.Column('approved_at', sa.DateTime(), nullable=True),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.ForeignKeyConstraint(['approved_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['project_id'], ['projects.id'], ),
    sa.ForeignKeyConstraint(['task_id'], ['tasks.id'], ),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_timelog_org_billable', 'project_time_logs', ['organization_id', 'is_billable'], unique=False)
    op.create_index('idx_timelog_org_date', 'project_time_logs', ['organization_id', 'start_time'], unique=False)
    op.create_index('idx_timelog_org_project', 'project_time_logs', ['organization_id', 'project_id'], unique=False)
    op.create_index('idx_timelog_org_user', 'project_time_logs', ['organization_id', 'user_id'], unique=False)
    op.create_index(op.f('ix_project_time_logs_id'), 'project_time_logs', ['id'], unique=False)
    op.create_index(op.f('ix_project_time_logs_organization_id'), 'project_time_logs', ['organization_id'], unique=False)
    op.create_table('purchase_requisition_items',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('requisition_id', sa.Integer(), nullable=False),
    sa.Column('item_code', sa.String(length=100), nullable=False),
    sa.Column('item_name', sa.String(length=200), nullable=False),
    sa.Column('item_description', sa.Text(), nullable=True),
    sa.Column('required_quantity', sa.Numeric(precision=12, scale=3), nullable=False),
    sa.Column('unit', sa.String(length=20), nullable=False),
    sa.Column('estimated_unit_price', sa.Numeric(precision=15, scale=2), nullable=True),
    sa.Column('estimated_total_price', sa.Numeric(precision=15, scale=2), nullable=True),
    sa.Column('specifications', sa.JSON(), nullable=True),
    sa.Column('preferred_vendor', sa.String(length=200), nullable=True),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.ForeignKeyConstraint(['requisition_id'], ['purchase_requisitions.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_purchase_requisition_items_id'), 'purchase_requisition_items', ['id'], unique=False)
    op.create_index(op.f('ix_purchase_requisition_items_item_code'), 'purchase_requisition_items', ['item_code'], unique=False)
    op.create_index(op.f('ix_purchase_requisition_items_requisition_id'), 'purchase_requisition_items', ['requisition_id'], unique=False)
    op.create_table('purchase_vouchers',
    sa.Column('vendor_id', sa.Integer(), nullable=False),
    sa.Column('purchase_order_id', sa.Integer(), nullable=True),
    sa.Column('grn_id', sa.Integer(), nullable=True),
    sa.Column('invoice_number', sa.String(), nullable=True),
    sa.Column('invoice_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('due_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('payment_terms', sa.String(), nullable=True),
    sa.Column('transport_mode', sa.String(), nullable=True),
    sa.Column('vehicle_number', sa.String(), nullable=True),
    sa.Column('lr_rr_number', sa.String(), nullable=True),
    sa.Column('e_way_bill_number', sa.String(), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('voucher_number', sa.String(), nullable=False),
    sa.Column('date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['grn_id'], ['goods_receipt_notes.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['purchase_order_id'], ['purchase_orders.id'], ),
    sa.ForeignKeyConstraint(['vendor_id'], ['vendors.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'voucher_number', name='uq_pv_org_voucher_number')
    )
    op.create_index('idx_pv_org_date', 'purchase_vouchers', ['organization_id', 'date'], unique=False)
    op.create_index('idx_pv_org_grn', 'purchase_vouchers', ['organization_id', 'grn_id'], unique=False)
    op.create_index('idx_pv_org_po', 'purchase_vouchers', ['organization_id', 'purchase_order_id'], unique=False)
    op.create_index('idx_pv_org_vendor', 'purchase_vouchers', ['organization_id', 'vendor_id'], unique=False)
    op.create_index(op.f('ix_purchase_vouchers_id'), 'purchase_vouchers', ['id'], unique=False)
    op.create_index(op.f('ix_purchase_vouchers_organization_id'), 'purchase_vouchers', ['organization_id'], unique=False)
    op.create_index(op.f('ix_purchase_vouchers_voucher_number'), 'purchase_vouchers', ['voucher_number'], unique=False)
    op.create_table('sales_vouchers',
    sa.Column('customer_id', sa.Integer(), nullable=False),
    sa.Column('sales_order_id', sa.Integer(), nullable=True),
    sa.Column('delivery_challan_id', sa.Integer(), nullable=True),
    sa.Column('invoice_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('due_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('payment_terms', sa.String(), nullable=True),
    sa.Column('place_of_supply', sa.String(), nullable=True),
    sa.Column('transport_mode', sa.String(), nullable=True),
    sa.Column('vehicle_number', sa.String(), nullable=True),
    sa.Column('lr_rr_number', sa.String(), nullable=True),
    sa.Column('e_way_bill_number', sa.String(), nullable=True),
    sa.Column('voucher_type', sa.String(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('voucher_number', sa.String(), nullable=False),
    sa.Column('date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['customer_id'], ['customers.id'], ),
    sa.ForeignKeyConstraint(['delivery_challan_id'], ['delivery_challans.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['sales_order_id'], ['sales_orders.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'voucher_number', name='uq_sv_org_voucher_number')
    )
    op.create_index('idx_sv_org_challan', 'sales_vouchers', ['organization_id', 'delivery_challan_id'], unique=False)
    op.create_index('idx_sv_org_customer', 'sales_vouchers', ['organization_id', 'customer_id'], unique=False)
    op.create_index('idx_sv_org_date', 'sales_vouchers', ['organization_id', 'date'], unique=False)
    op.create_index('idx_sv_org_so', 'sales_vouchers', ['organization_id', 'sales_order_id'], unique=False)
    op.create_index(op.f('ix_sales_vouchers_id'), 'sales_vouchers', ['id'], unique=False)
    op.create_index(op.f('ix_sales_vouchers_organization_id'), 'sales_vouchers', ['organization_id'], unique=False)
    op.create_index(op.f('ix_sales_vouchers_voucher_number'), 'sales_vouchers', ['voucher_number'], unique=False)
    op.create_index(op.f('ix_sales_vouchers_voucher_type'), 'sales_vouchers', ['voucher_type'], unique=False)
    op.create_table('shipments',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('shipment_number', sa.String(), nullable=False),
    sa.Column('carrier_id', sa.Integer(), nullable=False),
    sa.Column('route_id', sa.Integer(), nullable=True),
    sa.Column('sales_order_id', sa.Integer(), nullable=True),
    sa.Column('purchase_order_id', sa.Integer(), nullable=True),
    sa.Column('manufacturing_order_id', sa.Integer(), nullable=True),
    sa.Column('tracking_number', sa.String(), nullable=True),
    sa.Column('awb_number', sa.String(), nullable=True),
    sa.Column('bol_number', sa.String(), nullable=True),
    sa.Column('freight_mode', sa.Enum('LTL', 'FTL', 'EXPRESS', 'STANDARD', 'ECONOMY', name='freightmode'), nullable=False),
    sa.Column('service_type', sa.String(), nullable=True),
    sa.Column('origin_name', sa.String(), nullable=False),
    sa.Column('origin_address', sa.Text(), nullable=True),
    sa.Column('origin_city', sa.String(), nullable=False),
    sa.Column('origin_state', sa.String(), nullable=True),
    sa.Column('origin_postal_code', sa.String(), nullable=True),
    sa.Column('origin_country', sa.String(), nullable=True),
    sa.Column('destination_name', sa.String(), nullable=False),
    sa.Column('destination_address', sa.Text(), nullable=True),
    sa.Column('destination_city', sa.String(), nullable=False),
    sa.Column('destination_state', sa.String(), nullable=True),
    sa.Column('destination_postal_code', sa.String(), nullable=True),
    sa.Column('destination_country', sa.String(), nullable=True),
    sa.Column('total_weight_kg', sa.Float(), nullable=True),
    sa.Column('total_volume_cbm', sa.Float(), nullable=True),
    sa.Column('total_pieces', sa.Integer(), nullable=True),
    sa.Column('declared_value', sa.Float(), nullable=True),
    sa.Column('is_fragile', sa.Boolean(), nullable=True),
    sa.Column('is_hazardous', sa.Boolean(), nullable=True),
    sa.Column('temperature_controlled', sa.Boolean(), nullable=True),
    sa.Column('signature_required', sa.Boolean(), nullable=True),
    sa.Column('pickup_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('pickup_time_from', sa.String(), nullable=True),
    sa.Column('pickup_time_to', sa.String(), nullable=True),
    sa.Column('expected_delivery_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('actual_delivery_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('status', sa.Enum('PLANNED', 'BOOKED', 'IN_TRANSIT', 'DELIVERED', 'CANCELLED', 'DELAYED', name='shipmentstatus'), nullable=False),
    sa.Column('last_location_update', sa.String(), nullable=True),
    sa.Column('last_status_update', sa.DateTime(timezone=True), nullable=True),
    sa.Column('freight_charges', sa.Float(), nullable=True),
    sa.Column('fuel_surcharge', sa.Float(), nullable=True),
    sa.Column('handling_charges', sa.Float(), nullable=True),
    sa.Column('insurance_charges', sa.Float(), nullable=True),
    sa.Column('other_charges', sa.Float(), nullable=True),
    sa.Column('total_charges', sa.Float(), nullable=True),
    sa.Column('payment_terms', sa.String(), nullable=True),
    sa.Column('cod_amount', sa.Float(), nullable=True),
    sa.Column('shipping_documents', sa.JSON(), nullable=True),
    sa.Column('special_instructions', sa.Text(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['carrier_id'], ['carriers.id'], ),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['manufacturing_order_id'], ['manufacturing_orders.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['purchase_order_id'], ['purchase_orders.id'], ),
    sa.ForeignKeyConstraint(['route_id'], ['routes.id'], ),
    sa.ForeignKeyConstraint(['sales_order_id'], ['sales_orders.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'shipment_number', name='uq_shipment_org_number')
    )
    op.create_index('idx_shipment_org_carrier', 'shipments', ['organization_id', 'carrier_id'], unique=False)
    op.create_index('idx_shipment_org_pickup_date', 'shipments', ['organization_id', 'pickup_date'], unique=False)
    op.create_index('idx_shipment_org_status', 'shipments', ['organization_id', 'status'], unique=False)
    op.create_index('idx_shipment_org_tracking', 'shipments', ['organization_id', 'tracking_number'], unique=False)
    op.create_index(op.f('ix_shipments_id'), 'shipments', ['id'], unique=False)
    op.create_index(op.f('ix_shipments_organization_id'), 'shipments', ['organization_id'], unique=False)
    op.create_table('stock_adjustment_items',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('adjustment_id', sa.Integer(), nullable=False),
    sa.Column('warehouse_id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('book_quantity', sa.Numeric(precision=12, scale=3), nullable=False),
    sa.Column('physical_quantity', sa.Numeric(precision=12, scale=3), nullable=False),
    sa.Column('adjustment_quantity', sa.Numeric(precision=12, scale=3), nullable=False),
    sa.Column('unit_cost', sa.Numeric(precision=15, scale=2), nullable=False),
    sa.Column('adjustment_value', sa.Numeric(precision=15, scale=2), nullable=False),
    sa.Column('batch_id', sa.Integer(), nullable=True),
    sa.Column('serial_numbers', sa.JSON(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.ForeignKeyConstraint(['adjustment_id'], ['stock_adjustments.id'], ),
    sa.ForeignKeyConstraint(['batch_id'], ['product_batches.id'], ),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], ),
    sa.ForeignKeyConstraint(['warehouse_id'], ['warehouses.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_stock_adjustment_items_adjustment_id'), 'stock_adjustment_items', ['adjustment_id'], unique=False)
    op.create_index(op.f('ix_stock_adjustment_items_batch_id'), 'stock_adjustment_items', ['batch_id'], unique=False)
    op.create_index(op.f('ix_stock_adjustment_items_id'), 'stock_adjustment_items', ['id'], unique=False)
    op.create_index(op.f('ix_stock_adjustment_items_product_id'), 'stock_adjustment_items', ['product_id'], unique=False)
    op.create_index(op.f('ix_stock_adjustment_items_warehouse_id'), 'stock_adjustment_items', ['warehouse_id'], unique=False)
    op.create_table('stock_journals',
    sa.Column('journal_type', sa.String(), nullable=False),
    sa.Column('from_location', sa.String(), nullable=True),
    sa.Column('to_location', sa.String(), nullable=True),
    sa.Column('from_warehouse', sa.String(), nullable=True),
    sa.Column('to_warehouse', sa.String(), nullable=True),
    sa.Column('manufacturing_order_id', sa.Integer(), nullable=True),
    sa.Column('bom_id', sa.Integer(), nullable=True),
    sa.Column('transfer_reason', sa.String(), nullable=True),
    sa.Column('assembly_product_id', sa.Integer(), nullable=True),
    sa.Column('assembly_quantity', sa.Float(), nullable=True),
    sa.Column('physical_verification_done', sa.Boolean(), nullable=True),
    sa.Column('verified_by', sa.String(), nullable=True),
    sa.Column('verification_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('approved_by', sa.Integer(), nullable=True),
    sa.Column('approval_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('voucher_number', sa.String(), nullable=False),
    sa.Column('date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['approved_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['assembly_product_id'], ['products.id'], ),
    sa.ForeignKeyConstraint(['bom_id'], ['bill_of_materials.id'], ),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['manufacturing_order_id'], ['manufacturing_orders.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'voucher_number', name='uq_sj_org_voucher_number')
    )
    op.create_index('idx_sj_org_date', 'stock_journals', ['organization_id', 'date'], unique=False)
    op.create_index('idx_sj_org_from_loc', 'stock_journals', ['organization_id', 'from_location'], unique=False)
    op.create_index('idx_sj_org_mo', 'stock_journals', ['organization_id', 'manufacturing_order_id'], unique=False)
    op.create_index('idx_sj_org_to_loc', 'stock_journals', ['organization_id', 'to_location'], unique=False)
    op.create_index('idx_sj_org_type', 'stock_journals', ['organization_id', 'journal_type'], unique=False)
    op.create_index(op.f('ix_stock_journals_id'), 'stock_journals', ['id'], unique=False)
    op.create_index(op.f('ix_stock_journals_organization_id'), 'stock_journals', ['organization_id'], unique=False)
    op.create_index(op.f('ix_stock_journals_voucher_number'), 'stock_journals', ['voucher_number'], unique=False)
    op.create_table('stock_movements',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('warehouse_id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('movement_type', sa.Enum('RECEIPT', 'ISSUE', 'TRANSFER', 'ADJUSTMENT', 'RETURN', 'DAMAGE', 'OBSOLETE', name='stockmovementtype'), nullable=False),
    sa.Column('movement_date', sa.DateTime(), nullable=False),
    sa.Column('reference_number', sa.String(length=100), nullable=True),
    sa.Column('quantity', sa.Numeric(precision=12, scale=3), nullable=False),
    sa.Column('unit_cost', sa.Numeric(precision=15, scale=2), nullable=True),
    sa.Column('total_value', sa.Numeric(precision=15, scale=2), nullable=True),
    sa.Column('batch_id', sa.Integer(), nullable=True),
    sa.Column('serial_numbers', sa.JSON(), nullable=True),
    sa.Column('from_location_id', sa.Integer(), nullable=True),
    sa.Column('to_location_id', sa.Integer(), nullable=True),
    sa.Column('source_document_type', sa.String(length=50), nullable=True),
    sa.Column('source_document_id', sa.Integer(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.ForeignKeyConstraint(['batch_id'], ['product_batches.id'], ),
    sa.ForeignKeyConstraint(['created_by'], ['platform_users.id'], ),
    sa.ForeignKeyConstraint(['from_location_id'], ['stock_locations.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], ),
    sa.ForeignKeyConstraint(['to_location_id'], ['stock_locations.id'], ),
    sa.ForeignKeyConstraint(['warehouse_id'], ['warehouses.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_stock_movement_org_date', 'stock_movements', ['organization_id', 'movement_date'], unique=False)
    op.create_index('idx_stock_movement_type', 'stock_movements', ['movement_type'], unique=False)
    op.create_index(op.f('ix_stock_movements_batch_id'), 'stock_movements', ['batch_id'], unique=False)
    op.create_index(op.f('ix_stock_movements_from_location_id'), 'stock_movements', ['from_location_id'], unique=False)
    op.create_index(op.f('ix_stock_movements_id'), 'stock_movements', ['id'], unique=False)
    op.create_index(op.f('ix_stock_movements_movement_date'), 'stock_movements', ['movement_date'], unique=False)
    op.create_index(op.f('ix_stock_movements_movement_type'), 'stock_movements', ['movement_type'], unique=False)
    op.create_index(op.f('ix_stock_movements_organization_id'), 'stock_movements', ['organization_id'], unique=False)
    op.create_index(op.f('ix_stock_movements_product_id'), 'stock_movements', ['product_id'], unique=False)
    op.create_index(op.f('ix_stock_movements_reference_number'), 'stock_movements', ['reference_number'], unique=False)
    op.create_index(op.f('ix_stock_movements_source_document_id'), 'stock_movements', ['source_document_id'], unique=False)
    op.create_index(op.f('ix_stock_movements_source_document_type'), 'stock_movements', ['source_document_type'], unique=False)
    op.create_index(op.f('ix_stock_movements_to_location_id'), 'stock_movements', ['to_location_id'], unique=False)
    op.create_index(op.f('ix_stock_movements_warehouse_id'), 'stock_movements', ['warehouse_id'], unique=False)
    op.create_table('task_attachments',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('task_id', sa.Integer(), nullable=False),
    sa.Column('user_id', sa.Integer(), nullable=False),
    sa.Column('filename', sa.String(length=255), nullable=False),
    sa.Column('file_path', sa.String(length=500), nullable=False),
    sa.Column('file_size', sa.Integer(), nullable=True),
    sa.Column('mime_type', sa.String(length=100), nullable=True),
    sa.Column('uploaded_at', sa.DateTime(), nullable=False),
    sa.ForeignKeyConstraint(['task_id'], ['tasks.id'], ),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_task_attachments_id'), 'task_attachments', ['id'], unique=False)
    op.create_table('task_comments',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('task_id', sa.Integer(), nullable=False),
    sa.Column('user_id', sa.Integer(), nullable=False),
    sa.Column('content', sa.Text(), nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.ForeignKeyConstraint(['task_id'], ['tasks.id'], ),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_task_comments_id'), 'task_comments', ['id'], unique=False)
    op.create_table('task_reminders',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('task_id', sa.Integer(), nullable=False),
    sa.Column('user_id', sa.Integer(), nullable=False),
    sa.Column('remind_at', sa.DateTime(), nullable=False),
    sa.Column('message', sa.String(length=255), nullable=True),
    sa.Column('is_sent', sa.Boolean(), nullable=False),
    sa.Column('sent_at', sa.DateTime(), nullable=True),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.ForeignKeyConstraint(['task_id'], ['tasks.id'], ),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_task_reminders_id'), 'task_reminders', ['id'], unique=False)
    op.create_table('task_time_logs',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('task_id', sa.Integer(), nullable=False),
    sa.Column('user_id', sa.Integer(), nullable=False),
    sa.Column('description', sa.String(length=255), nullable=True),
    sa.Column('hours', sa.Integer(), nullable=False),
    sa.Column('logged_at', sa.DateTime(), nullable=False),
    sa.Column('work_date', sa.DateTime(), nullable=False),
    sa.ForeignKeyConstraint(['task_id'], ['tasks.id'], ),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_task_time_logs_id'), 'task_time_logs', ['id'], unique=False)
    op.create_table('workflow_step_executions_automation',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('workflow_instance_id', sa.Integer(), nullable=False),
    sa.Column('workflow_step_id', sa.Integer(), nullable=False),
    sa.Column('status', sa.String(length=50), nullable=False),
    sa.Column('started_at', sa.DateTime(), nullable=True),
    sa.Column('completed_at', sa.DateTime(), nullable=True),
    sa.Column('failed_at', sa.DateTime(), nullable=True),
    sa.Column('input_data', sa.JSON(), nullable=True),
    sa.Column('output_data', sa.JSON(), nullable=True),
    sa.Column('error_data', sa.JSON(), nullable=True),
    sa.Column('approval_status', sa.String(length=50), nullable=True),
    sa.Column('approved_by', sa.Integer(), nullable=True),
    sa.Column('approved_at', sa.DateTime(), nullable=True),
    sa.Column('approval_comments', sa.Text(), nullable=True),
    sa.Column('execution_time_ms', sa.Integer(), nullable=True),
    sa.Column('retry_count', sa.Integer(), nullable=False),
    sa.Column('error_message', sa.Text(), nullable=True),
    sa.Column('assigned_to', sa.Integer(), nullable=True),
    sa.Column('completed_by', sa.Integer(), nullable=True),
    sa.Column('created_at', sa.DateTime(), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.ForeignKeyConstraint(['approved_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['assigned_to'], ['users.id'], ),
    sa.ForeignKeyConstraint(['completed_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['workflow_instance_id'], ['workflow_instances_automation.id'], ),
    sa.ForeignKeyConstraint(['workflow_step_id'], ['workflow_steps_automation.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('workflow_instance_id', 'workflow_step_id', name='uq_workflow_step_execution')
    )
    op.create_index('idx_workflow_step_execution_assignee', 'workflow_step_executions_automation', ['assigned_to'], unique=False)
    op.create_index('idx_workflow_step_execution_status', 'workflow_step_executions_automation', ['status'], unique=False)
    op.create_index(op.f('ix_workflow_step_executions_automation_approval_status'), 'workflow_step_executions_automation', ['approval_status'], unique=False)
    op.create_index(op.f('ix_workflow_step_executions_automation_id'), 'workflow_step_executions_automation', ['id'], unique=False)
    op.create_index(op.f('ix_workflow_step_executions_automation_status'), 'workflow_step_executions_automation', ['status'], unique=False)
    op.create_index(op.f('ix_workflow_step_executions_automation_workflow_instance_id'), 'workflow_step_executions_automation', ['workflow_instance_id'], unique=False)
    op.create_index(op.f('ix_workflow_step_executions_automation_workflow_step_id'), 'workflow_step_executions_automation', ['workflow_step_id'], unique=False)
    op.create_table('workflow_step_instances',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('instance_id', sa.Integer(), nullable=False),
    sa.Column('step_id', sa.Integer(), nullable=False),
    sa.Column('status', sa.Enum('CREATED', 'IN_PROGRESS', 'COMPLETED', 'FAILED', 'CANCELLED', 'PAUSED', name='instancestatus'), nullable=False),
    sa.Column('assigned_to', sa.Integer(), nullable=True),
    sa.Column('started_at', sa.DateTime(), nullable=True),
    sa.Column('completed_at', sa.DateTime(), nullable=True),
    sa.Column('deadline', sa.DateTime(), nullable=True),
    sa.Column('result_data', sa.JSON(), nullable=True),
    sa.Column('comments', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.ForeignKeyConstraint(['assigned_to'], ['users.id'], ),
    sa.ForeignKeyConstraint(['instance_id'], ['workflow_instances.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['step_id'], ['workflow_steps.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_workflow_step_instance_org_assigned', 'workflow_step_instances', ['organization_id', 'assigned_to'], unique=False)
    op.create_index('idx_workflow_step_instance_org_instance', 'workflow_step_instances', ['organization_id', 'instance_id'], unique=False)
    op.create_index('idx_workflow_step_instance_org_status', 'workflow_step_instances', ['organization_id', 'status'], unique=False)
    op.create_index('idx_workflow_step_instance_org_step', 'workflow_step_instances', ['organization_id', 'step_id'], unique=False)
    op.create_index(op.f('ix_workflow_step_instances_id'), 'workflow_step_instances', ['id'], unique=False)
    op.create_index(op.f('ix_workflow_step_instances_organization_id'), 'workflow_step_instances', ['organization_id'], unique=False)
    op.create_table('approval_requests',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('company_id', sa.Integer(), nullable=True),
    sa.Column('approval_code', sa.String(length=100), nullable=False),
    sa.Column('title', sa.String(length=255), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('entity_type', sa.String(length=100), nullable=False),
    sa.Column('entity_id', sa.Integer(), nullable=False),
    sa.Column('entity_data', sa.JSON(), nullable=True),
    sa.Column('status', sa.Enum('PENDING', 'APPROVED', 'REJECTED', 'DELEGATED', 'ESCALATED', 'CANCELLED', name='approvalstatus'), nullable=False),
    sa.Column('priority', sa.String(length=20), nullable=True),
    sa.Column('requested_by', sa.Integer(), nullable=False),
    sa.Column('assigned_to', sa.Integer(), nullable=False),
    sa.Column('workflow_instance_id', sa.Integer(), nullable=True),
    sa.Column('step_instance_id', sa.Integer(), nullable=True),
    sa.Column('requested_at', sa.DateTime(), nullable=False),
    sa.Column('deadline', sa.DateTime(), nullable=True),
    sa.Column('responded_at', sa.DateTime(), nullable=True),
    sa.Column('decision', sa.Enum('PENDING', 'APPROVED', 'REJECTED', 'DELEGATED', 'ESCALATED', 'CANCELLED', name='approvalstatus'), nullable=True),
    sa.Column('decision_comments', sa.Text(), nullable=True),
    sa.Column('decision_data', sa.JSON(), nullable=True),
    sa.Column('delegated_to', sa.Integer(), nullable=True),
    sa.Column('delegation_reason', sa.Text(), nullable=True),
    sa.Column('escalated_to', sa.Integer(), nullable=True),
    sa.Column('escalation_reason', sa.Text(), nullable=True),
    sa.Column('escalated_at', sa.DateTime(), nullable=True),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.ForeignKeyConstraint(['assigned_to'], ['users.id'], ),
    sa.ForeignKeyConstraint(['company_id'], ['companies.id'], ),
    sa.ForeignKeyConstraint(['delegated_to'], ['users.id'], ),
    sa.ForeignKeyConstraint(['escalated_to'], ['users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['requested_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['step_instance_id'], ['workflow_step_instances.id'], ),
    sa.ForeignKeyConstraint(['workflow_instance_id'], ['workflow_instances.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'approval_code', name='uq_approval_org_code')
    )
    op.create_index('idx_approval_org_assigned', 'approval_requests', ['organization_id', 'assigned_to'], unique=False)
    op.create_index('idx_approval_org_entity', 'approval_requests', ['organization_id', 'entity_type', 'entity_id'], unique=False)
    op.create_index('idx_approval_org_requested', 'approval_requests', ['organization_id', 'requested_by'], unique=False)
    op.create_index('idx_approval_org_status', 'approval_requests', ['organization_id', 'status'], unique=False)
    op.create_index(op.f('ix_approval_requests_approval_code'), 'approval_requests', ['approval_code'], unique=False)
    op.create_index(op.f('ix_approval_requests_company_id'), 'approval_requests', ['company_id'], unique=False)
    op.create_index(op.f('ix_approval_requests_entity_type'), 'approval_requests', ['entity_type'], unique=False)
    op.create_index(op.f('ix_approval_requests_id'), 'approval_requests', ['id'], unique=False)
    op.create_index(op.f('ix_approval_requests_organization_id'), 'approval_requests', ['organization_id'], unique=False)
    op.create_table('completion_records',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('installation_job_id', sa.Integer(), nullable=False),
    sa.Column('completion_status', sa.String(), nullable=False),
    sa.Column('completed_by_id', sa.Integer(), nullable=False),
    sa.Column('completion_date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('actual_start_time', sa.DateTime(timezone=True), nullable=True),
    sa.Column('actual_end_time', sa.DateTime(timezone=True), nullable=True),
    sa.Column('total_duration_minutes', sa.Integer(), nullable=True),
    sa.Column('work_performed', sa.Text(), nullable=False),
    sa.Column('issues_encountered', sa.Text(), nullable=True),
    sa.Column('resolution_notes', sa.Text(), nullable=True),
    sa.Column('materials_used', sa.Text(), nullable=True),
    sa.Column('parts_replaced', sa.Text(), nullable=True),
    sa.Column('quality_check_passed', sa.Boolean(), nullable=False),
    sa.Column('verification_notes', sa.Text(), nullable=True),
    sa.Column('photos_attached', sa.Boolean(), nullable=False),
    sa.Column('customer_present', sa.Boolean(), nullable=False),
    sa.Column('customer_signature_received', sa.Boolean(), nullable=False),
    sa.Column('customer_feedback_notes', sa.Text(), nullable=True),
    sa.Column('customer_rating', sa.Integer(), nullable=True),
    sa.Column('follow_up_required', sa.Boolean(), nullable=False),
    sa.Column('follow_up_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('follow_up_notes', sa.Text(), nullable=True),
    sa.Column('feedback_request_sent', sa.Boolean(), nullable=False),
    sa.Column('feedback_request_sent_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['completed_by_id'], ['users.id'], name='fk_completion_record_completed_by_id'),
    sa.ForeignKeyConstraint(['installation_job_id'], ['installation_jobs.id'], name='fk_completion_record_installation_job_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_completion_record_organization_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('installation_job_id')
    )
    op.create_index('idx_completion_record_completed_by', 'completion_records', ['completed_by_id'], unique=False)
    op.create_index('idx_completion_record_completion_date', 'completion_records', ['completion_date'], unique=False)
    op.create_index('idx_completion_record_feedback_sent', 'completion_records', ['feedback_request_sent'], unique=False)
    op.create_index('idx_completion_record_follow_up', 'completion_records', ['follow_up_required', 'follow_up_date'], unique=False)
    op.create_index('idx_completion_record_org_job', 'completion_records', ['organization_id', 'installation_job_id'], unique=False)
    op.create_index('idx_completion_record_status', 'completion_records', ['completion_status'], unique=False)
    op.create_index(op.f('ix_completion_records_id'), 'completion_records', ['id'], unique=False)
    op.create_index(op.f('ix_completion_records_organization_id'), 'completion_records', ['organization_id'], unique=False)
    op.create_table('emails',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('message_id', sa.String(length=255), nullable=False),
    sa.Column('thread_id', sa.String(length=255), nullable=True),
    sa.Column('subject', sa.String(length=500), nullable=False),
    sa.Column('from_address', sa.String(length=255), nullable=False),
    sa.Column('from_name', sa.String(length=255), nullable=True),
    sa.Column('to_addresses', sa.JSON(), nullable=False),
    sa.Column('cc_addresses', sa.JSON(), nullable=True),
    sa.Column('bcc_addresses', sa.JSON(), nullable=True),
    sa.Column('reply_to', sa.String(length=255), nullable=True),
    sa.Column('body_text', sa.Text(), nullable=True),
    sa.Column('body_html', sa.Text(), nullable=True),
    sa.Column('status', sa.Enum('UNREAD', 'READ', 'REPLIED', 'FORWARDED', 'ARCHIVED', 'DELETED', 'SPAM', name='emailstatus'), nullable=False),
    sa.Column('priority', sa.Enum('LOW', 'NORMAL', 'HIGH', 'URGENT', name='emailpriority'), nullable=False),
    sa.Column('is_flagged', sa.Boolean(), nullable=False),
    sa.Column('is_important', sa.Boolean(), nullable=False),
    sa.Column('sent_at', sa.DateTime(), nullable=False),
    sa.Column('received_at', sa.DateTime(), nullable=False),
    sa.Column('account_id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('task_id', sa.Integer(), nullable=True),
    sa.Column('calendar_event_id', sa.Integer(), nullable=True),
    sa.Column('folder', sa.String(length=255), nullable=True),
    sa.Column('labels', sa.JSON(), nullable=True),
    sa.Column('size_bytes', sa.Integer(), nullable=True),
    sa.Column('has_attachments', sa.Boolean(), nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.ForeignKeyConstraint(['account_id'], ['email_accounts.id'], ),
    sa.ForeignKeyConstraint(['calendar_event_id'], ['calendar_events.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['task_id'], ['tasks.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_emails_from_address'), 'emails', ['from_address'], unique=False)
    op.create_index(op.f('ix_emails_id'), 'emails', ['id'], unique=False)
    op.create_index(op.f('ix_emails_message_id'), 'emails', ['message_id'], unique=False)
    op.create_index(op.f('ix_emails_received_at'), 'emails', ['received_at'], unique=False)
    op.create_index(op.f('ix_emails_sent_at'), 'emails', ['sent_at'], unique=False)
    op.create_index(op.f('ix_emails_subject'), 'emails', ['subject'], unique=False)
    op.create_index(op.f('ix_emails_thread_id'), 'emails', ['thread_id'], unique=False)
    op.create_table('event_attendees',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('event_id', sa.Integer(), nullable=False),
    sa.Column('user_id', sa.Integer(), nullable=True),
    sa.Column('external_email', sa.String(length=255), nullable=True),
    sa.Column('external_name', sa.String(length=255), nullable=True),
    sa.Column('response_status', sa.String(length=20), nullable=False),
    sa.Column('is_organizer', sa.Boolean(), nullable=False),
    sa.Column('is_required', sa.Boolean(), nullable=False),
    sa.Column('responded_at', sa.DateTime(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.ForeignKeyConstraint(['event_id'], ['calendar_events.id'], ),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_event_attendees_id'), 'event_attendees', ['id'], unique=False)
    op.create_table('event_reminders',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('event_id', sa.Integer(), nullable=False),
    sa.Column('user_id', sa.Integer(), nullable=False),
    sa.Column('remind_before_minutes', sa.Integer(), nullable=False),
    sa.Column('reminder_type', sa.String(length=20), nullable=False),
    sa.Column('message', sa.String(length=500), nullable=True),
    sa.Column('is_sent', sa.Boolean(), nullable=False),
    sa.Column('sent_at', sa.DateTime(), nullable=True),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.ForeignKeyConstraint(['event_id'], ['calendar_events.id'], ),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_event_reminders_id'), 'event_reminders', ['id'], unique=False)
    op.create_table('installation_tasks',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('installation_job_id', sa.Integer(), nullable=False),
    sa.Column('task_number', sa.String(), nullable=False),
    sa.Column('title', sa.String(), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('status', sa.String(), nullable=False),
    sa.Column('priority', sa.String(), nullable=False),
    sa.Column('estimated_duration_minutes', sa.Integer(), nullable=True),
    sa.Column('sequence_order', sa.Integer(), nullable=False),
    sa.Column('assigned_technician_id', sa.Integer(), nullable=True),
    sa.Column('started_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('completed_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('work_notes', sa.Text(), nullable=True),
    sa.Column('completion_notes', sa.Text(), nullable=True),
    sa.Column('depends_on_task_id', sa.Integer(), nullable=True),
    sa.Column('created_by_id', sa.Integer(), nullable=True),
    sa.Column('updated_by_id', sa.Integer(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['assigned_technician_id'], ['users.id'], name='fk_installation_task_assigned_technician_id'),
    sa.ForeignKeyConstraint(['created_by_id'], ['users.id'], name='fk_installation_task_created_by_id'),
    sa.ForeignKeyConstraint(['depends_on_task_id'], ['installation_tasks.id'], name='fk_installation_task_depends_on_task_id'),
    sa.ForeignKeyConstraint(['installation_job_id'], ['installation_jobs.id'], name='fk_installation_task_installation_job_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_installation_task_organization_id'),
    sa.ForeignKeyConstraint(['updated_by_id'], ['users.id'], name='fk_installation_task_updated_by_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'task_number', name='uq_installation_task_org_number')
    )
    op.create_index('idx_installation_task_created_at', 'installation_tasks', ['created_at'], unique=False)
    op.create_index('idx_installation_task_org_job', 'installation_tasks', ['organization_id', 'installation_job_id'], unique=False)
    op.create_index('idx_installation_task_sequence', 'installation_tasks', ['installation_job_id', 'sequence_order'], unique=False)
    op.create_index('idx_installation_task_status', 'installation_tasks', ['status'], unique=False)
    op.create_index('idx_installation_task_technician', 'installation_tasks', ['assigned_technician_id'], unique=False)
    op.create_index(op.f('ix_installation_tasks_id'), 'installation_tasks', ['id'], unique=False)
    op.create_index(op.f('ix_installation_tasks_organization_id'), 'installation_tasks', ['organization_id'], unique=False)
    op.create_index(op.f('ix_installation_tasks_task_number'), 'installation_tasks', ['task_number'], unique=False)
    op.create_table('job_card_received_outputs',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('job_card_id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('quantity_received', sa.Float(), nullable=False),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('unit_rate', sa.Float(), nullable=True),
    sa.Column('total_value', sa.Float(), nullable=True),
    sa.Column('quality_status', sa.String(), nullable=True),
    sa.Column('inspection_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('inspection_remarks', sa.Text(), nullable=True),
    sa.Column('batch_number', sa.String(), nullable=True),
    sa.Column('receipt_date', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['job_card_id'], ['job_card_vouchers.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_job_card_received_outputs_id'), 'job_card_received_outputs', ['id'], unique=False)
    op.create_index(op.f('ix_job_card_received_outputs_organization_id'), 'job_card_received_outputs', ['organization_id'], unique=False)
    op.create_table('job_card_supplied_materials',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('job_card_id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('quantity_supplied', sa.Float(), nullable=False),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('unit_rate', sa.Float(), nullable=True),
    sa.Column('total_value', sa.Float(), nullable=True),
    sa.Column('batch_number', sa.String(), nullable=True),
    sa.Column('lot_number', sa.String(), nullable=True),
    sa.Column('supply_date', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['job_card_id'], ['job_card_vouchers.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_job_card_supplied_materials_id'), 'job_card_supplied_materials', ['id'], unique=False)
    op.create_index(op.f('ix_job_card_supplied_materials_organization_id'), 'job_card_supplied_materials', ['organization_id'], unique=False)
    op.create_table('job_parts',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('job_id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('quantity_required', sa.Float(), nullable=False),
    sa.Column('quantity_used', sa.Float(), nullable=False),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('status', sa.String(), nullable=False),
    sa.Column('location_used', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('unit_cost', sa.Float(), nullable=True),
    sa.Column('total_cost', sa.Float(), nullable=True),
    sa.Column('allocated_by_id', sa.Integer(), nullable=True),
    sa.Column('used_by_id', sa.Integer(), nullable=True),
    sa.Column('allocated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('used_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['allocated_by_id'], ['users.id'], name='fk_job_parts_allocated_by_id'),
    sa.ForeignKeyConstraint(['job_id'], ['installation_jobs.id'], name='fk_job_parts_job_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_job_parts_organization_id'),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], name='fk_job_parts_product_id'),
    sa.ForeignKeyConstraint(['used_by_id'], ['users.id'], name='fk_job_parts_used_by_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('job_id', 'product_id', name='uq_job_parts_job_product')
    )
    op.create_index('idx_job_parts_org_product', 'job_parts', ['organization_id', 'product_id'], unique=False)
    op.create_index('idx_job_parts_org_status', 'job_parts', ['organization_id', 'status'], unique=False)
    op.create_index('idx_job_parts_used_at', 'job_parts', ['used_at'], unique=False)
    op.create_index(op.f('ix_job_parts_id'), 'job_parts', ['id'], unique=False)
    op.create_index(op.f('ix_job_parts_organization_id'), 'job_parts', ['organization_id'], unique=False)
    op.create_table('maintenance_parts_used',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('maintenance_record_id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('quantity_used', sa.Float(), nullable=False),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('unit_cost', sa.Float(), nullable=True),
    sa.Column('total_cost', sa.Float(), nullable=True),
    sa.Column('batch_number', sa.String(), nullable=True),
    sa.Column('serial_number', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.ForeignKeyConstraint(['maintenance_record_id'], ['maintenance_records.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_maint_parts_org_product', 'maintenance_parts_used', ['organization_id', 'product_id'], unique=False)
    op.create_index('idx_maint_parts_org_record', 'maintenance_parts_used', ['organization_id', 'maintenance_record_id'], unique=False)
    op.create_index(op.f('ix_maintenance_parts_used_id'), 'maintenance_parts_used', ['id'], unique=False)
    op.create_index(op.f('ix_maintenance_parts_used_organization_id'), 'maintenance_parts_used', ['organization_id'], unique=False)
    op.create_table('manufacturing_journal_byproducts',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('journal_id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('quantity', sa.Float(), nullable=False),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('unit_value', sa.Float(), nullable=True),
    sa.Column('total_value', sa.Float(), nullable=True),
    sa.Column('batch_number', sa.String(), nullable=True),
    sa.Column('condition', sa.String(), nullable=True),
    sa.ForeignKeyConstraint(['journal_id'], ['manufacturing_journal_vouchers.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_manufacturing_journal_byproducts_id'), 'manufacturing_journal_byproducts', ['id'], unique=False)
    op.create_index(op.f('ix_manufacturing_journal_byproducts_organization_id'), 'manufacturing_journal_byproducts', ['organization_id'], unique=False)
    op.create_table('manufacturing_journal_finished_products',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('journal_id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('quantity', sa.Float(), nullable=False),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('unit_cost', sa.Float(), nullable=True),
    sa.Column('total_cost', sa.Float(), nullable=True),
    sa.Column('quality_grade', sa.String(), nullable=True),
    sa.Column('batch_number', sa.String(), nullable=True),
    sa.Column('lot_number', sa.String(), nullable=True),
    sa.ForeignKeyConstraint(['journal_id'], ['manufacturing_journal_vouchers.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_manufacturing_journal_finished_products_id'), 'manufacturing_journal_finished_products', ['id'], unique=False)
    op.create_index(op.f('ix_manufacturing_journal_finished_products_organization_id'), 'manufacturing_journal_finished_products', ['organization_id'], unique=False)
    op.create_table('manufacturing_journal_materials',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('journal_id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('quantity_consumed', sa.Float(), nullable=False),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('unit_cost', sa.Float(), nullable=True),
    sa.Column('total_cost', sa.Float(), nullable=True),
    sa.Column('batch_number', sa.String(), nullable=True),
    sa.Column('lot_number', sa.String(), nullable=True),
    sa.ForeignKeyConstraint(['journal_id'], ['manufacturing_journal_vouchers.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_manufacturing_journal_materials_id'), 'manufacturing_journal_materials', ['id'], unique=False)
    op.create_index(op.f('ix_manufacturing_journal_materials_organization_id'), 'manufacturing_journal_materials', ['organization_id'], unique=False)
    op.create_table('material_issue_items',
    sa.Column('material_issue_id', sa.Integer(), nullable=False),
    sa.Column('batch_number', sa.String(), nullable=True),
    sa.Column('lot_number', sa.String(), nullable=True),
    sa.Column('expiry_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('warehouse_location', sa.String(), nullable=True),
    sa.Column('bin_location', sa.String(), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('quantity', sa.Float(), nullable=False),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('unit_price', sa.Float(), nullable=False),
    sa.Column('discount_percentage', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('taxable_amount', sa.Float(), nullable=False),
    sa.Column('gst_rate', sa.Float(), nullable=True),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.ForeignKeyConstraint(['material_issue_id'], ['material_issues.id'], ),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_material_issue_items_id'), 'material_issue_items', ['id'], unique=False)
    op.create_table('material_receipt_items',
    sa.Column('receipt_id', sa.Integer(), nullable=False),
    sa.Column('batch_number', sa.String(), nullable=True),
    sa.Column('lot_number', sa.String(), nullable=True),
    sa.Column('expiry_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('warehouse_location', sa.String(), nullable=True),
    sa.Column('bin_location', sa.String(), nullable=True),
    sa.Column('quality_status', sa.String(), nullable=True),
    sa.Column('inspection_remarks', sa.Text(), nullable=True),
    sa.Column('received_quantity', sa.Float(), nullable=True),
    sa.Column('accepted_quantity', sa.Float(), nullable=True),
    sa.Column('rejected_quantity', sa.Float(), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('quantity', sa.Float(), nullable=False),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('unit_price', sa.Float(), nullable=False),
    sa.Column('discount_percentage', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('taxable_amount', sa.Float(), nullable=False),
    sa.Column('gst_rate', sa.Float(), nullable=True),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], ),
    sa.ForeignKeyConstraint(['receipt_id'], ['material_receipt_vouchers.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_material_receipt_items_id'), 'material_receipt_items', ['id'], unique=False)
    op.create_table('production_entry_items',
    sa.Column('production_entry_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('quantity', sa.Float(), nullable=False),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('unit_price', sa.Float(), nullable=False),
    sa.Column('discount_percentage', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('taxable_amount', sa.Float(), nullable=False),
    sa.Column('gst_rate', sa.Float(), nullable=True),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], ),
    sa.ForeignKeyConstraint(['production_entry_id'], ['production_entries.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_production_entry_items_id'), 'production_entry_items', ['id'], unique=False)
    op.create_table('purchase_returns',
    sa.Column('vendor_id', sa.Integer(), nullable=False),
    sa.Column('reference_voucher_id', sa.Integer(), nullable=True),
    sa.Column('reason', sa.Text(), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('voucher_number', sa.String(), nullable=False),
    sa.Column('date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['reference_voucher_id'], ['purchase_vouchers.id'], ),
    sa.ForeignKeyConstraint(['vendor_id'], ['vendors.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'voucher_number', name='uq_pr_org_voucher_number')
    )
    op.create_index('idx_purchase_returns_org_date', 'purchase_returns', ['organization_id', 'date'], unique=False)
    op.create_index('idx_pr_org_vendor', 'purchase_returns', ['organization_id', 'vendor_id'], unique=False)
    op.create_index(op.f('ix_purchase_returns_id'), 'purchase_returns', ['id'], unique=False)
    op.create_index(op.f('ix_purchase_returns_organization_id'), 'purchase_returns', ['organization_id'], unique=False)
    op.create_index(op.f('ix_purchase_returns_voucher_number'), 'purchase_returns', ['voucher_number'], unique=False)
    op.create_table('purchase_voucher_items',
    sa.Column('purchase_voucher_id', sa.Integer(), nullable=False),
    sa.Column('grn_item_id', sa.Integer(), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('quantity', sa.Float(), nullable=False),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('unit_price', sa.Float(), nullable=False),
    sa.Column('discount_percentage', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('taxable_amount', sa.Float(), nullable=False),
    sa.Column('gst_rate', sa.Float(), nullable=True),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.ForeignKeyConstraint(['grn_item_id'], ['goods_receipt_note_items.id'], ),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], ),
    sa.ForeignKeyConstraint(['purchase_voucher_id'], ['purchase_vouchers.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_purchase_voucher_items_id'), 'purchase_voucher_items', ['id'], unique=False)
    op.create_table('sales_returns',
    sa.Column('customer_id', sa.Integer(), nullable=False),
    sa.Column('reference_voucher_id', sa.Integer(), nullable=True),
    sa.Column('reason', sa.Text(), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('voucher_number', sa.String(), nullable=False),
    sa.Column('date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['customer_id'], ['customers.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['reference_voucher_id'], ['sales_vouchers.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'voucher_number', name='uq_sr_org_voucher_number')
    )
    op.create_index('idx_sr_org_customer', 'sales_returns', ['organization_id', 'customer_id'], unique=False)
    op.create_index('idx_sr_org_date', 'sales_returns', ['organization_id', 'date'], unique=False)
    op.create_index(op.f('ix_sales_returns_id'), 'sales_returns', ['id'], unique=False)
    op.create_index(op.f('ix_sales_returns_organization_id'), 'sales_returns', ['organization_id'], unique=False)
    op.create_index(op.f('ix_sales_returns_voucher_number'), 'sales_returns', ['voucher_number'], unique=False)
    op.create_table('sales_voucher_items',
    sa.Column('sales_voucher_id', sa.Integer(), nullable=False),
    sa.Column('delivery_challan_item_id', sa.Integer(), nullable=True),
    sa.Column('hsn_code', sa.String(), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('quantity', sa.Float(), nullable=False),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('unit_price', sa.Float(), nullable=False),
    sa.Column('discount_percentage', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('taxable_amount', sa.Float(), nullable=False),
    sa.Column('gst_rate', sa.Float(), nullable=True),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.ForeignKeyConstraint(['delivery_challan_item_id'], ['delivery_challan_items.id'], ),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], ),
    sa.ForeignKeyConstraint(['sales_voucher_id'], ['sales_vouchers.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_sales_voucher_items_id'), 'sales_voucher_items', ['id'], unique=False)
    op.create_table('shipment_items',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('shipment_id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('quantity', sa.Float(), nullable=False),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('weight_per_unit_kg', sa.Float(), nullable=True),
    sa.Column('volume_per_unit_cbm', sa.Float(), nullable=True),
    sa.Column('packaging_type', sa.String(), nullable=True),
    sa.Column('number_of_packages', sa.Integer(), nullable=True),
    sa.Column('package_dimensions', sa.String(), nullable=True),
    sa.Column('batch_number', sa.String(), nullable=True),
    sa.Column('serial_numbers', sa.JSON(), nullable=True),
    sa.Column('unit_value', sa.Float(), nullable=True),
    sa.Column('total_value', sa.Float(), nullable=True),
    sa.Column('handling_instructions', sa.Text(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], ),
    sa.ForeignKeyConstraint(['shipment_id'], ['shipments.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_shipment_items_org_product', 'shipment_items', ['organization_id', 'product_id'], unique=False)
    op.create_index('idx_shipment_items_org_shipment', 'shipment_items', ['organization_id', 'shipment_id'], unique=False)
    op.create_index(op.f('ix_shipment_items_id'), 'shipment_items', ['id'], unique=False)
    op.create_index(op.f('ix_shipment_items_organization_id'), 'shipment_items', ['organization_id'], unique=False)
    op.create_table('shipment_tracking',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('shipment_id', sa.Integer(), nullable=False),
    sa.Column('event_timestamp', sa.DateTime(timezone=True), nullable=False),
    sa.Column('event_type', sa.String(), nullable=False),
    sa.Column('status', sa.String(), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('location', sa.String(), nullable=True),
    sa.Column('city', sa.String(), nullable=True),
    sa.Column('state', sa.String(), nullable=True),
    sa.Column('country', sa.String(), nullable=True),
    sa.Column('facility_name', sa.String(), nullable=True),
    sa.Column('vehicle_number', sa.String(), nullable=True),
    sa.Column('driver_name', sa.String(), nullable=True),
    sa.Column('is_exception', sa.Boolean(), nullable=True),
    sa.Column('exception_reason', sa.String(), nullable=True),
    sa.Column('resolution_required', sa.Boolean(), nullable=True),
    sa.Column('data_source', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['shipment_id'], ['shipments.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_shipment_tracking_org_shipment', 'shipment_tracking', ['organization_id', 'shipment_id'], unique=False)
    op.create_index('idx_shipment_tracking_org_status', 'shipment_tracking', ['organization_id', 'status'], unique=False)
    op.create_index('idx_shipment_tracking_org_timestamp', 'shipment_tracking', ['organization_id', 'event_timestamp'], unique=False)
    op.create_index(op.f('ix_shipment_tracking_id'), 'shipment_tracking', ['id'], unique=False)
    op.create_index(op.f('ix_shipment_tracking_organization_id'), 'shipment_tracking', ['organization_id'], unique=False)
    op.create_table('stock_journal_entries',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('stock_journal_id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('debit_quantity', sa.Float(), nullable=True),
    sa.Column('credit_quantity', sa.Float(), nullable=True),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('unit_rate', sa.Float(), nullable=True),
    sa.Column('debit_value', sa.Float(), nullable=True),
    sa.Column('credit_value', sa.Float(), nullable=True),
    sa.Column('from_location', sa.String(), nullable=True),
    sa.Column('to_location', sa.String(), nullable=True),
    sa.Column('from_warehouse', sa.String(), nullable=True),
    sa.Column('to_warehouse', sa.String(), nullable=True),
    sa.Column('from_bin', sa.String(), nullable=True),
    sa.Column('to_bin', sa.String(), nullable=True),
    sa.Column('batch_number', sa.String(), nullable=True),
    sa.Column('lot_number', sa.String(), nullable=True),
    sa.Column('expiry_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('transformation_type', sa.String(), nullable=True),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], ),
    sa.ForeignKeyConstraint(['stock_journal_id'], ['stock_journals.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_stock_journal_entries_id'), 'stock_journal_entries', ['id'], unique=False)
    op.create_index(op.f('ix_stock_journal_entries_organization_id'), 'stock_journal_entries', ['organization_id'], unique=False)
    op.create_table('approval_attachments',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('approval_id', sa.Integer(), nullable=False),
    sa.Column('file_name', sa.String(length=255), nullable=False),
    sa.Column('file_path', sa.String(length=500), nullable=True),
    sa.Column('file_size', sa.Integer(), nullable=True),
    sa.Column('mime_type', sa.String(length=100), nullable=True),
    sa.Column('uploaded_at', sa.DateTime(), nullable=False),
    sa.Column('uploaded_by', sa.Integer(), nullable=False),
    sa.ForeignKeyConstraint(['approval_id'], ['approval_requests.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['uploaded_by'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_approval_attachment_org_approval', 'approval_attachments', ['organization_id', 'approval_id'], unique=False)
    op.create_index('idx_approval_attachment_org_uploader', 'approval_attachments', ['organization_id', 'uploaded_by'], unique=False)
    op.create_index(op.f('ix_approval_attachments_id'), 'approval_attachments', ['id'], unique=False)
    op.create_index(op.f('ix_approval_attachments_organization_id'), 'approval_attachments', ['organization_id'], unique=False)
    op.create_table('approval_history',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('approval_id', sa.Integer(), nullable=False),
    sa.Column('action', sa.String(length=100), nullable=False),
    sa.Column('previous_status', sa.Enum('PENDING', 'APPROVED', 'REJECTED', 'DELEGATED', 'ESCALATED', 'CANCELLED', name='approvalstatus'), nullable=True),
    sa.Column('new_status', sa.Enum('PENDING', 'APPROVED', 'REJECTED', 'DELEGATED', 'ESCALATED', 'CANCELLED', name='approvalstatus'), nullable=False),
    sa.Column('performed_by', sa.Integer(), nullable=False),
    sa.Column('comments', sa.Text(), nullable=True),
    sa.Column('changes', sa.JSON(), nullable=True),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.ForeignKeyConstraint(['approval_id'], ['approval_requests.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['performed_by'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_approval_history_org_action', 'approval_history', ['organization_id', 'action'], unique=False)
    op.create_index('idx_approval_history_org_approval', 'approval_history', ['organization_id', 'approval_id'], unique=False)
    op.create_index('idx_approval_history_org_performer', 'approval_history', ['organization_id', 'performed_by'], unique=False)
    op.create_index(op.f('ix_approval_history_id'), 'approval_history', ['id'], unique=False)
    op.create_index(op.f('ix_approval_history_organization_id'), 'approval_history', ['organization_id'], unique=False)
    op.create_table('customer_feedback',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('installation_job_id', sa.Integer(), nullable=False),
    sa.Column('customer_id', sa.Integer(), nullable=False),
    sa.Column('completion_record_id', sa.Integer(), nullable=True),
    sa.Column('overall_rating', sa.Integer(), nullable=False),
    sa.Column('service_quality_rating', sa.Integer(), nullable=True),
    sa.Column('technician_rating', sa.Integer(), nullable=True),
    sa.Column('timeliness_rating', sa.Integer(), nullable=True),
    sa.Column('communication_rating', sa.Integer(), nullable=True),
    sa.Column('feedback_comments', sa.Text(), nullable=True),
    sa.Column('improvement_suggestions', sa.Text(), nullable=True),
    sa.Column('survey_responses', sa.Text(), nullable=True),
    sa.Column('would_recommend', sa.Boolean(), nullable=True),
    sa.Column('satisfaction_level', sa.String(), nullable=True),
    sa.Column('follow_up_preferred', sa.Boolean(), nullable=False),
    sa.Column('preferred_contact_method', sa.String(), nullable=True),
    sa.Column('feedback_status', sa.String(), nullable=False),
    sa.Column('reviewed_by_id', sa.Integer(), nullable=True),
    sa.Column('reviewed_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('response_notes', sa.Text(), nullable=True),
    sa.Column('submitted_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['completion_record_id'], ['completion_records.id'], name='fk_customer_feedback_completion_record_id'),
    sa.ForeignKeyConstraint(['customer_id'], ['customers.id'], name='fk_customer_feedback_customer_id'),
    sa.ForeignKeyConstraint(['installation_job_id'], ['installation_jobs.id'], name='fk_customer_feedback_installation_job_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_customer_feedback_organization_id'),
    sa.ForeignKeyConstraint(['reviewed_by_id'], ['users.id'], name='fk_customer_feedback_reviewed_by_id'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_customer_feedback_completion', 'customer_feedback', ['completion_record_id'], unique=False)
    op.create_index('idx_customer_feedback_customer', 'customer_feedback', ['customer_id'], unique=False)
    op.create_index('idx_customer_feedback_org_job', 'customer_feedback', ['organization_id', 'installation_job_id'], unique=False)
    op.create_index('idx_customer_feedback_rating', 'customer_feedback', ['overall_rating'], unique=False)
    op.create_index('idx_customer_feedback_status', 'customer_feedback', ['feedback_status'], unique=False)
    op.create_index('idx_customer_feedback_submitted', 'customer_feedback', ['submitted_at'], unique=False)
    op.create_index(op.f('ix_customer_feedback_id'), 'customer_feedback', ['id'], unique=False)
    op.create_index(op.f('ix_customer_feedback_organization_id'), 'customer_feedback', ['organization_id'], unique=False)
    op.create_table('email_actions',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('email_id', sa.Integer(), nullable=False),
    sa.Column('user_id', sa.Integer(), nullable=False),
    sa.Column('action_type', sa.String(length=50), nullable=False),
    sa.Column('action_data', sa.JSON(), nullable=True),
    sa.Column('performed_at', sa.DateTime(), nullable=False),
    sa.ForeignKeyConstraint(['email_id'], ['emails.id'], ),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_email_actions_id'), 'email_actions', ['id'], unique=False)
    op.create_table('email_attachments',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('email_id', sa.Integer(), nullable=False),
    sa.Column('filename', sa.String(length=255), nullable=False),
    sa.Column('content_type', sa.String(length=100), nullable=True),
    sa.Column('size_bytes', sa.Integer(), nullable=True),
    sa.Column('content_id', sa.String(length=255), nullable=True),
    sa.Column('file_path', sa.String(length=500), nullable=True),
    sa.Column('file_data', sa.LargeBinary(), nullable=True),
    sa.Column('is_inline', sa.Boolean(), nullable=False),
    sa.Column('is_downloaded', sa.Boolean(), nullable=False),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.ForeignKeyConstraint(['email_id'], ['emails.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_email_attachments_id'), 'email_attachments', ['id'], unique=False)
    op.create_table('purchase_return_items',
    sa.Column('purchase_return_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('quantity', sa.Float(), nullable=False),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('unit_price', sa.Float(), nullable=False),
    sa.Column('discount_percentage', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('taxable_amount', sa.Float(), nullable=False),
    sa.Column('gst_rate', sa.Float(), nullable=True),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], ),
    sa.ForeignKeyConstraint(['purchase_return_id'], ['purchase_returns.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_purchase_return_items_id'), 'purchase_return_items', ['id'], unique=False)
    op.create_table('sales_return_items',
    sa.Column('sales_return_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('quantity', sa.Float(), nullable=False),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('unit_price', sa.Float(), nullable=False),
    sa.Column('discount_percentage', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('taxable_amount', sa.Float(), nullable=False),
    sa.Column('gst_rate', sa.Float(), nullable=True),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], ),
    sa.ForeignKeyConstraint(['sales_return_id'], ['sales_returns.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_sales_return_items_id'), 'sales_return_items', ['id'], unique=False)
    op.create_table('sent_emails',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('message_id', sa.String(length=255), nullable=True),
    sa.Column('thread_id', sa.String(length=255), nullable=True),
    sa.Column('subject', sa.String(length=500), nullable=False),
    sa.Column('to_addresses', sa.JSON(), nullable=False),
    sa.Column('cc_addresses', sa.JSON(), nullable=True),
    sa.Column('bcc_addresses', sa.JSON(), nullable=True),
    sa.Column('body_text', sa.Text(), nullable=True),
    sa.Column('body_html', sa.Text(), nullable=True),
    sa.Column('account_id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('sent_by', sa.Integer(), nullable=False),
    sa.Column('task_id', sa.Integer(), nullable=True),
    sa.Column('calendar_event_id', sa.Integer(), nullable=True),
    sa.Column('in_reply_to_id', sa.Integer(), nullable=True),
    sa.Column('status', sa.String(length=20), nullable=False),
    sa.Column('delivery_status', sa.String(length=20), nullable=True),
    sa.Column('sent_at', sa.DateTime(), nullable=False),
    sa.Column('scheduled_at', sa.DateTime(), nullable=True),
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.ForeignKeyConstraint(['account_id'], ['email_accounts.id'], ),
    sa.ForeignKeyConstraint(['calendar_event_id'], ['calendar_events.id'], ),
    sa.ForeignKeyConstraint(['in_reply_to_id'], ['emails.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['sent_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['task_id'], ['tasks.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_sent_emails_id'), 'sent_emails', ['id'], unique=False)
    op.create_index(op.f('ix_sent_emails_message_id'), 'sent_emails', ['message_id'], unique=False)
    op.create_index(op.f('ix_sent_emails_thread_id'), 'sent_emails', ['thread_id'], unique=False)
    op.create_table('service_analytics_events',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('event_type', sa.String(), nullable=False),
    sa.Column('event_category', sa.String(), nullable=False),
    sa.Column('installation_job_id', sa.Integer(), nullable=True),
    sa.Column('technician_id', sa.Integer(), nullable=True),
    sa.Column('customer_id', sa.Integer(), nullable=True),
    sa.Column('completion_record_id', sa.Integer(), nullable=True),
    sa.Column('feedback_id', sa.Integer(), nullable=True),
    sa.Column('event_data', sa.JSON(), nullable=True),
    sa.Column('metric_value', sa.Float(), nullable=True),
    sa.Column('event_timestamp', sa.DateTime(timezone=True), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.ForeignKeyConstraint(['completion_record_id'], ['completion_records.id'], name='fk_service_analytics_event_completion_record_id'),
    sa.ForeignKeyConstraint(['customer_id'], ['customers.id'], name='fk_service_analytics_event_customer_id'),
    sa.ForeignKeyConstraint(['feedback_id'], ['customer_feedback.id'], name='fk_service_analytics_event_feedback_id'),
    sa.ForeignKeyConstraint(['installation_job_id'], ['installation_jobs.id'], name='fk_service_analytics_event_installation_job_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_service_analytics_event_organization_id'),
    sa.ForeignKeyConstraint(['technician_id'], ['users.id'], name='fk_service_analytics_event_technician_id'),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_service_analytics_event_customer', 'service_analytics_events', ['customer_id'], unique=False)
    op.create_index('idx_service_analytics_event_job', 'service_analytics_events', ['installation_job_id'], unique=False)
    op.create_index('idx_service_analytics_event_org_category', 'service_analytics_events', ['organization_id', 'event_category'], unique=False)
    op.create_index('idx_service_analytics_event_org_timestamp', 'service_analytics_events', ['organization_id', 'event_timestamp'], unique=False)
    op.create_index('idx_service_analytics_event_org_type', 'service_analytics_events', ['organization_id', 'event_type'], unique=False)
    op.create_index('idx_service_analytics_event_technician', 'service_analytics_events', ['technician_id'], unique=False)
    op.create_index(op.f('ix_service_analytics_events_event_category'), 'service_analytics_events', ['event_category'], unique=False)
    op.create_index(op.f('ix_service_analytics_events_event_timestamp'), 'service_analytics_events', ['event_timestamp'], unique=False)
    op.create_index(op.f('ix_service_analytics_events_event_type'), 'service_analytics_events', ['event_type'], unique=False)
    op.create_index(op.f('ix_service_analytics_events_id'), 'service_analytics_events', ['id'], unique=False)
    op.create_index(op.f('ix_service_analytics_events_organization_id'), 'service_analytics_events', ['organization_id'], unique=False)
    op.create_table('service_closures',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('installation_job_id', sa.Integer(), nullable=False),
    sa.Column('completion_record_id', sa.Integer(), nullable=True),
    sa.Column('customer_feedback_id', sa.Integer(), nullable=True),
    sa.Column('closure_status', sa.String(), nullable=False),
    sa.Column('closure_reason', sa.String(), nullable=True),
    sa.Column('closure_notes', sa.Text(), nullable=True),
    sa.Column('requires_manager_approval', sa.Boolean(), nullable=False),
    sa.Column('approved_by_id', sa.Integer(), nullable=True),
    sa.Column('approved_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('approval_notes', sa.Text(), nullable=True),
    sa.Column('closed_by_id', sa.Integer(), nullable=True),
    sa.Column('closed_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('final_closure_notes', sa.Text(), nullable=True),
    sa.Column('feedback_received', sa.Boolean(), nullable=False),
    sa.Column('minimum_rating_met', sa.Boolean(), nullable=False),
    sa.Column('escalation_required', sa.Boolean(), nullable=False),
    sa.Column('escalation_reason', sa.Text(), nullable=True),
    sa.Column('reopened_count', sa.Integer(), nullable=False),
    sa.Column('last_reopened_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('last_reopened_by_id', sa.Integer(), nullable=True),
    sa.Column('reopening_reason', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['approved_by_id'], ['users.id'], name='fk_service_closure_approved_by_id'),
    sa.ForeignKeyConstraint(['closed_by_id'], ['users.id'], name='fk_service_closure_closed_by_id'),
    sa.ForeignKeyConstraint(['completion_record_id'], ['completion_records.id'], name='fk_service_closure_completion_record_id'),
    sa.ForeignKeyConstraint(['customer_feedback_id'], ['customer_feedback.id'], name='fk_service_closure_customer_feedback_id'),
    sa.ForeignKeyConstraint(['installation_job_id'], ['installation_jobs.id'], name='fk_service_closure_installation_job_id'),
    sa.ForeignKeyConstraint(['last_reopened_by_id'], ['users.id'], name='fk_service_closure_last_reopened_by_id'),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], name='fk_service_closure_organization_id'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('installation_job_id')
    )
    op.create_index('idx_service_closure_approval_required', 'service_closures', ['requires_manager_approval'], unique=False)
    op.create_index('idx_service_closure_approved_by', 'service_closures', ['approved_by_id'], unique=False)
    op.create_index('idx_service_closure_closed_by', 'service_closures', ['closed_by_id'], unique=False)
    op.create_index('idx_service_closure_completion', 'service_closures', ['completion_record_id'], unique=False)
    op.create_index('idx_service_closure_escalation', 'service_closures', ['escalation_required'], unique=False)
    op.create_index('idx_service_closure_feedback', 'service_closures', ['customer_feedback_id'], unique=False)
    op.create_index('idx_service_closure_feedback_received', 'service_closures', ['feedback_received'], unique=False)
    op.create_index('idx_service_closure_org_job', 'service_closures', ['organization_id', 'installation_job_id'], unique=False)
    op.create_index('idx_service_closure_status', 'service_closures', ['closure_status'], unique=False)
    op.create_index(op.f('ix_service_closures_id'), 'service_closures', ['id'], unique=False)
    op.create_index(op.f('ix_service_closures_organization_id'), 'service_closures', ['organization_id'], unique=False)
    # ### end Alembic commands ###


def downgrade() -> None:
    # ### commands auto generated by Alembic - please adjust! ###
    op.drop_index(op.f('ix_service_closures_organization_id'), table_name='service_closures')
    op.drop_index(op.f('ix_service_closures_id'), table_name='service_closures')
    op.drop_index('idx_service_closure_status', table_name='service_closures')
    op.drop_index('idx_service_closure_org_job', table_name='service_closures')
    op.drop_index('idx_service_closure_feedback_received', table_name='service_closures')
    op.drop_index('idx_service_closure_feedback', table_name='service_closures')
    op.drop_index('idx_service_closure_escalation', table_name='service_closures')
    op.drop_index('idx_service_closure_completion', table_name='service_closures')
    op.drop_index('idx_service_closure_closed_by', table_name='service_closures')
    op.drop_index('idx_service_closure_approved_by', table_name='service_closures')
    op.drop_index('idx_service_closure_approval_required', table_name='service_closures')
    op.drop_table('service_closures')
    op.drop_index(op.f('ix_service_analytics_events_organization_id'), table_name='service_analytics_events')
    op.drop_index(op.f('ix_service_analytics_events_id'), table_name='service_analytics_events')
    op.drop_index(op.f('ix_service_analytics_events_event_type'), table_name='service_analytics_events')
    op.drop_index(op.f('ix_service_analytics_events_event_timestamp'), table_name='service_analytics_events')
    op.drop_index(op.f('ix_service_analytics_events_event_category'), table_name='service_analytics_events')
    op.drop_index('idx_service_analytics_event_technician', table_name='service_analytics_events')
    op.drop_index('idx_service_analytics_event_org_type', table_name='service_analytics_events')
    op.drop_index('idx_service_analytics_event_org_timestamp', table_name='service_analytics_events')
    op.drop_index('idx_service_analytics_event_org_category', table_name='service_analytics_events')
    op.drop_index('idx_service_analytics_event_job', table_name='service_analytics_events')
    op.drop_index('idx_service_analytics_event_customer', table_name='service_analytics_events')
    op.drop_table('service_analytics_events')
    op.drop_index(op.f('ix_sent_emails_thread_id'), table_name='sent_emails')
    op.drop_index(op.f('ix_sent_emails_message_id'), table_name='sent_emails')
    op.drop_index(op.f('ix_sent_emails_id'), table_name='sent_emails')
    op.drop_table('sent_emails')
    op.drop_index(op.f('ix_sales_return_items_id'), table_name='sales_return_items')
    op.drop_table('sales_return_items')
    op.drop_index(op.f('ix_purchase_return_items_id'), table_name='purchase_return_items')
    op.drop_table('purchase_return_items')
    op.drop_index(op.f('ix_email_attachments_id'), table_name='email_attachments')
    op.drop_table('email_attachments')
    op.drop_index(op.f('ix_email_actions_id'), table_name='email_actions')
    op.drop_table('email_actions')
    op.drop_index(op.f('ix_customer_feedback_organization_id'), table_name='customer_feedback')
    op.drop_index(op.f('ix_customer_feedback_id'), table_name='customer_feedback')
    op.drop_index('idx_customer_feedback_submitted', table_name='customer_feedback')
    op.drop_index('idx_customer_feedback_status', table_name='customer_feedback')
    op.drop_index('idx_customer_feedback_rating', table_name='customer_feedback')
    op.drop_index('idx_customer_feedback_org_job', table_name='customer_feedback')
    op.drop_index('idx_customer_feedback_customer', table_name='customer_feedback')
    op.drop_index('idx_customer_feedback_completion', table_name='customer_feedback')
    op.drop_table('customer_feedback')
    op.drop_index(op.f('ix_approval_history_organization_id'), table_name='approval_history')
    op.drop_index(op.f('ix_approval_history_id'), table_name='approval_history')
    op.drop_index('idx_approval_history_org_performer', table_name='approval_history')
    op.drop_index('idx_approval_history_org_approval', table_name='approval_history')
    op.drop_index('idx_approval_history_org_action', table_name='approval_history')
    op.drop_table('approval_history')
    op.drop_index(op.f('ix_approval_attachments_organization_id'), table_name='approval_attachments')
    op.drop_index(op.f('ix_approval_attachments_id'), table_name='approval_attachments')
    op.drop_index('idx_approval_attachment_org_uploader', table_name='approval_attachments')
    op.drop_index('idx_approval_attachment_org_approval', table_name='approval_attachments')
    op.drop_table('approval_attachments')
    op.drop_index(op.f('ix_stock_journal_entries_organization_id'), table_name='stock_journal_entries')
    op.drop_index(op.f('ix_stock_journal_entries_id'), table_name='stock_journal_entries')
    op.drop_table('stock_journal_entries')
    op.drop_index(op.f('ix_shipment_tracking_organization_id'), table_name='shipment_tracking')
    op.drop_index(op.f('ix_shipment_tracking_id'), table_name='shipment_tracking')
    op.drop_index('idx_shipment_tracking_org_timestamp', table_name='shipment_tracking')
    op.drop_index('idx_shipment_tracking_org_status', table_name='shipment_tracking')
    op.drop_index('idx_shipment_tracking_org_shipment', table_name='shipment_tracking')
    op.drop_table('shipment_tracking')
    op.drop_index(op.f('ix_shipment_items_organization_id'), table_name='shipment_items')
    op.drop_index(op.f('ix_shipment_items_id'), table_name='shipment_items')
    op.drop_index('idx_shipment_items_org_shipment', table_name='shipment_items')
    op.drop_index('idx_shipment_items_org_product', table_name='shipment_items')
    op.drop_table('shipment_items')
    op.drop_index(op.f('ix_sales_voucher_items_id'), table_name='sales_voucher_items')
    op.drop_table('sales_voucher_items')
    op.drop_index(op.f('ix_sales_returns_voucher_number'), table_name='sales_returns')
    op.drop_index(op.f('ix_sales_returns_organization_id'), table_name='sales_returns')
    op.drop_index(op.f('ix_sales_returns_id'), table_name='sales_returns')
    op.drop_index('idx_sr_org_date', table_name='sales_returns')
    op.drop_index('idx_sr_org_customer', table_name='sales_returns')
    op.drop_table('sales_returns')
    op.drop_index(op.f('ix_purchase_voucher_items_id'), table_name='purchase_voucher_items')
    op.drop_table('purchase_voucher_items')
    op.drop_index(op.f('ix_purchase_returns_voucher_number'), table_name='purchase_returns')
    op.drop_index(op.f('ix_purchase_returns_organization_id'), table_name='purchase_returns')
    op.drop_index(op.f('ix_purchase_returns_id'), table_name='purchase_returns')
    op.drop_index('idx_pr_org_vendor', table_name='purchase_returns')
    op.drop_index('idx_purchase_returns_org_date', table_name='purchase_returns')
    op.drop_table('purchase_returns')
    op.drop_index(op.f('ix_production_entry_items_id'), table_name='production_entry_items')
    op.drop_table('production_entry_items')
    op.drop_index(op.f('ix_material_receipt_items_id'), table_name='material_receipt_items')
    op.drop_table('material_receipt_items')
    op.drop_index(op.f('ix_material_issue_items_id'), table_name='material_issue_items')
    op.drop_table('material_issue_items')
    op.drop_index(op.f('ix_manufacturing_journal_materials_organization_id'), table_name='manufacturing_journal_materials')
    op.drop_index(op.f('ix_manufacturing_journal_materials_id'), table_name='manufacturing_journal_materials')
    op.drop_table('manufacturing_journal_materials')
    op.drop_index(op.f('ix_manufacturing_journal_finished_products_organization_id'), table_name='manufacturing_journal_finished_products')
    op.drop_index(op.f('ix_manufacturing_journal_finished_products_id'), table_name='manufacturing_journal_finished_products')
    op.drop_table('manufacturing_journal_finished_products')
    op.drop_index(op.f('ix_manufacturing_journal_byproducts_organization_id'), table_name='manufacturing_journal_byproducts')
    op.drop_index(op.f('ix_manufacturing_journal_byproducts_id'), table_name='manufacturing_journal_byproducts')
    op.drop_table('manufacturing_journal_byproducts')
    op.drop_index(op.f('ix_maintenance_parts_used_organization_id'), table_name='maintenance_parts_used')
    op.drop_index(op.f('ix_maintenance_parts_used_id'), table_name='maintenance_parts_used')
    op.drop_index('idx_maint_parts_org_record', table_name='maintenance_parts_used')
    op.drop_index('idx_maint_parts_org_product', table_name='maintenance_parts_used')
    op.drop_table('maintenance_parts_used')
    op.drop_index(op.f('ix_job_parts_organization_id'), table_name='job_parts')
    op.drop_index(op.f('ix_job_parts_id'), table_name='job_parts')
    op.drop_index('idx_job_parts_used_at', table_name='job_parts')
    op.drop_index('idx_job_parts_org_status', table_name='job_parts')
    op.drop_index('idx_job_parts_org_product', table_name='job_parts')
    op.drop_table('job_parts')
    op.drop_index(op.f('ix_job_card_supplied_materials_organization_id'), table_name='job_card_supplied_materials')
    op.drop_index(op.f('ix_job_card_supplied_materials_id'), table_name='job_card_supplied_materials')
    op.drop_table('job_card_supplied_materials')
    op.drop_index(op.f('ix_job_card_received_outputs_organization_id'), table_name='job_card_received_outputs')
    op.drop_index(op.f('ix_job_card_received_outputs_id'), table_name='job_card_received_outputs')
    op.drop_table('job_card_received_outputs')
    op.drop_index(op.f('ix_installation_tasks_task_number'), table_name='installation_tasks')
    op.drop_index(op.f('ix_installation_tasks_organization_id'), table_name='installation_tasks')
    op.drop_index(op.f('ix_installation_tasks_id'), table_name='installation_tasks')
    op.drop_index('idx_installation_task_technician', table_name='installation_tasks')
    op.drop_index('idx_installation_task_status', table_name='installation_tasks')
    op.drop_index('idx_installation_task_sequence', table_name='installation_tasks')
    op.drop_index('idx_installation_task_org_job', table_name='installation_tasks')
    op.drop_index('idx_installation_task_created_at', table_name='installation_tasks')
    op.drop_table('installation_tasks')
    op.drop_index(op.f('ix_event_reminders_id'), table_name='event_reminders')
    op.drop_table('event_reminders')
    op.drop_index(op.f('ix_event_attendees_id'), table_name='event_attendees')
    op.drop_table('event_attendees')
    op.drop_index(op.f('ix_emails_thread_id'), table_name='emails')
    op.drop_index(op.f('ix_emails_subject'), table_name='emails')
    op.drop_index(op.f('ix_emails_sent_at'), table_name='emails')
    op.drop_index(op.f('ix_emails_received_at'), table_name='emails')
    op.drop_index(op.f('ix_emails_message_id'), table_name='emails')
    op.drop_index(op.f('ix_emails_id'), table_name='emails')
    op.drop_index(op.f('ix_emails_from_address'), table_name='emails')
    op.drop_table('emails')
    op.drop_index(op.f('ix_completion_records_organization_id'), table_name='completion_records')
    op.drop_index(op.f('ix_completion_records_id'), table_name='completion_records')
    op.drop_index('idx_completion_record_status', table_name='completion_records')
    op.drop_index('idx_completion_record_org_job', table_name='completion_records')
    op.drop_index('idx_completion_record_follow_up', table_name='completion_records')
    op.drop_index('idx_completion_record_feedback_sent', table_name='completion_records')
    op.drop_index('idx_completion_record_completion_date', table_name='completion_records')
    op.drop_index('idx_completion_record_completed_by', table_name='completion_records')
    op.drop_table('completion_records')
    op.drop_index(op.f('ix_approval_requests_organization_id'), table_name='approval_requests')
    op.drop_index(op.f('ix_approval_requests_id'), table_name='approval_requests')
    op.drop_index(op.f('ix_approval_requests_entity_type'), table_name='approval_requests')
    op.drop_index(op.f('ix_approval_requests_company_id'), table_name='approval_requests')
    op.drop_index(op.f('ix_approval_requests_approval_code'), table_name='approval_requests')
    op.drop_index('idx_approval_org_status', table_name='approval_requests')
    op.drop_index('idx_approval_org_requested', table_name='approval_requests')
    op.drop_index('idx_approval_org_entity', table_name='approval_requests')
    op.drop_index('idx_approval_org_assigned', table_name='approval_requests')
    op.drop_table('approval_requests')
    op.drop_index(op.f('ix_workflow_step_instances_organization_id'), table_name='workflow_step_instances')
    op.drop_index(op.f('ix_workflow_step_instances_id'), table_name='workflow_step_instances')
    op.drop_index('idx_workflow_step_instance_org_step', table_name='workflow_step_instances')
    op.drop_index('idx_workflow_step_instance_org_status', table_name='workflow_step_instances')
    op.drop_index('idx_workflow_step_instance_org_instance', table_name='workflow_step_instances')
    op.drop_index('idx_workflow_step_instance_org_assigned', table_name='workflow_step_instances')
    op.drop_table('workflow_step_instances')
    op.drop_index(op.f('ix_workflow_step_executions_automation_workflow_step_id'), table_name='workflow_step_executions_automation')
    op.drop_index(op.f('ix_workflow_step_executions_automation_workflow_instance_id'), table_name='workflow_step_executions_automation')
    op.drop_index(op.f('ix_workflow_step_executions_automation_status'), table_name='workflow_step_executions_automation')
    op.drop_index(op.f('ix_workflow_step_executions_automation_id'), table_name='workflow_step_executions_automation')
    op.drop_index(op.f('ix_workflow_step_executions_automation_approval_status'), table_name='workflow_step_executions_automation')
    op.drop_index('idx_workflow_step_execution_status', table_name='workflow_step_executions_automation')
    op.drop_index('idx_workflow_step_execution_assignee', table_name='workflow_step_executions_automation')
    op.drop_table('workflow_step_executions_automation')
    op.drop_index(op.f('ix_task_time_logs_id'), table_name='task_time_logs')
    op.drop_table('task_time_logs')
    op.drop_index(op.f('ix_task_reminders_id'), table_name='task_reminders')
    op.drop_table('task_reminders')
    op.drop_index(op.f('ix_task_comments_id'), table_name='task_comments')
    op.drop_table('task_comments')
    op.drop_index(op.f('ix_task_attachments_id'), table_name='task_attachments')
    op.drop_table('task_attachments')
    op.drop_index(op.f('ix_stock_movements_warehouse_id'), table_name='stock_movements')
    op.drop_index(op.f('ix_stock_movements_to_location_id'), table_name='stock_movements')
    op.drop_index(op.f('ix_stock_movements_source_document_type'), table_name='stock_movements')
    op.drop_index(op.f('ix_stock_movements_source_document_id'), table_name='stock_movements')
    op.drop_index(op.f('ix_stock_movements_reference_number'), table_name='stock_movements')
    op.drop_index(op.f('ix_stock_movements_product_id'), table_name='stock_movements')
    op.drop_index(op.f('ix_stock_movements_organization_id'), table_name='stock_movements')
    op.drop_index(op.f('ix_stock_movements_movement_type'), table_name='stock_movements')
    op.drop_index(op.f('ix_stock_movements_movement_date'), table_name='stock_movements')
    op.drop_index(op.f('ix_stock_movements_id'), table_name='stock_movements')
    op.drop_index(op.f('ix_stock_movements_from_location_id'), table_name='stock_movements')
    op.drop_index(op.f('ix_stock_movements_batch_id'), table_name='stock_movements')
    op.drop_index('idx_stock_movement_type', table_name='stock_movements')
    op.drop_index('idx_stock_movement_org_date', table_name='stock_movements')
    op.drop_table('stock_movements')
    op.drop_index(op.f('ix_stock_journals_voucher_number'), table_name='stock_journals')
    op.drop_index(op.f('ix_stock_journals_organization_id'), table_name='stock_journals')
    op.drop_index(op.f('ix_stock_journals_id'), table_name='stock_journals')
    op.drop_index('idx_sj_org_type', table_name='stock_journals')
    op.drop_index('idx_sj_org_to_loc', table_name='stock_journals')
    op.drop_index('idx_sj_org_mo', table_name='stock_journals')
    op.drop_index('idx_sj_org_from_loc', table_name='stock_journals')
    op.drop_index('idx_sj_org_date', table_name='stock_journals')
    op.drop_table('stock_journals')
    op.drop_index(op.f('ix_stock_adjustment_items_warehouse_id'), table_name='stock_adjustment_items')
    op.drop_index(op.f('ix_stock_adjustment_items_product_id'), table_name='stock_adjustment_items')
    op.drop_index(op.f('ix_stock_adjustment_items_id'), table_name='stock_adjustment_items')
    op.drop_index(op.f('ix_stock_adjustment_items_batch_id'), table_name='stock_adjustment_items')
    op.drop_index(op.f('ix_stock_adjustment_items_adjustment_id'), table_name='stock_adjustment_items')
    op.drop_table('stock_adjustment_items')
    op.drop_index(op.f('ix_shipments_organization_id'), table_name='shipments')
    op.drop_index(op.f('ix_shipments_id'), table_name='shipments')
    op.drop_index('idx_shipment_org_tracking', table_name='shipments')
    op.drop_index('idx_shipment_org_status', table_name='shipments')
    op.drop_index('idx_shipment_org_pickup_date', table_name='shipments')
    op.drop_index('idx_shipment_org_carrier', table_name='shipments')
    op.drop_table('shipments')
    op.drop_index(op.f('ix_sales_vouchers_voucher_type'), table_name='sales_vouchers')
    op.drop_index(op.f('ix_sales_vouchers_voucher_number'), table_name='sales_vouchers')
    op.drop_index(op.f('ix_sales_vouchers_organization_id'), table_name='sales_vouchers')
    op.drop_index(op.f('ix_sales_vouchers_id'), table_name='sales_vouchers')
    op.drop_index('idx_sv_org_so', table_name='sales_vouchers')
    op.drop_index('idx_sv_org_date', table_name='sales_vouchers')
    op.drop_index('idx_sv_org_customer', table_name='sales_vouchers')
    op.drop_index('idx_sv_org_challan', table_name='sales_vouchers')
    op.drop_table('sales_vouchers')
    op.drop_index(op.f('ix_purchase_vouchers_voucher_number'), table_name='purchase_vouchers')
    op.drop_index(op.f('ix_purchase_vouchers_organization_id'), table_name='purchase_vouchers')
    op.drop_index(op.f('ix_purchase_vouchers_id'), table_name='purchase_vouchers')
    op.drop_index('idx_pv_org_vendor', table_name='purchase_vouchers')
    op.drop_index('idx_pv_org_po', table_name='purchase_vouchers')
    op.drop_index('idx_pv_org_grn', table_name='purchase_vouchers')
    op.drop_index('idx_pv_org_date', table_name='purchase_vouchers')
    op.drop_table('purchase_vouchers')
    op.drop_index(op.f('ix_purchase_requisition_items_requisition_id'), table_name='purchase_requisition_items')
    op.drop_index(op.f('ix_purchase_requisition_items_item_code'), table_name='purchase_requisition_items')
    op.drop_index(op.f('ix_purchase_requisition_items_id'), table_name='purchase_requisition_items')
    op.drop_table('purchase_requisition_items')
    op.drop_index(op.f('ix_project_time_logs_organization_id'), table_name='project_time_logs')
    op.drop_index(op.f('ix_project_time_logs_id'), table_name='project_time_logs')
    op.drop_index('idx_timelog_org_user', table_name='project_time_logs')
    op.drop_index('idx_timelog_org_project', table_name='project_time_logs')
    op.drop_index('idx_timelog_org_date', table_name='project_time_logs')
    op.drop_index('idx_timelog_org_billable', table_name='project_time_logs')
    op.drop_table('project_time_logs')
    op.drop_index(op.f('ix_production_entries_voucher_number'), table_name='production_entries')
    op.drop_index(op.f('ix_production_entries_organization_id'), table_name='production_entries')
    op.drop_index(op.f('ix_production_entries_id'), table_name='production_entries')
    op.drop_index('idx_pe_org_mo', table_name='production_entries')
    op.drop_index('idx_pe_org_date', table_name='production_entries')
    op.drop_table('production_entries')
    op.drop_index(op.f('ix_product_serials_serial_number'), table_name='product_serials')
    op.drop_index(op.f('ix_product_serials_product_tracking_id'), table_name='product_serials')
    op.drop_index(op.f('ix_product_serials_organization_id'), table_name='product_serials')
    op.drop_index(op.f('ix_product_serials_id'), table_name='product_serials')
    op.drop_index(op.f('ix_product_serials_customer_id'), table_name='product_serials')
    op.drop_index(op.f('ix_product_serials_current_warehouse_id'), table_name='product_serials')
    op.drop_index(op.f('ix_product_serials_current_status'), table_name='product_serials')
    op.drop_index(op.f('ix_product_serials_current_location_id'), table_name='product_serials')
    op.drop_index(op.f('ix_product_serials_batch_id'), table_name='product_serials')
    op.drop_index('idx_serial_warranty', table_name='product_serials')
    op.drop_index('idx_serial_status', table_name='product_serials')
    op.drop_table('product_serials')
    op.drop_index(op.f('ix_opportunity_products_organization_id'), table_name='opportunity_products')
    op.drop_index(op.f('ix_opportunity_products_id'), table_name='opportunity_products')
    op.drop_index('idx_opportunity_product_org_opp', table_name='opportunity_products')
    op.drop_table('opportunity_products')
    op.drop_index(op.f('ix_opportunity_activities_organization_id'), table_name='opportunity_activities')
    op.drop_index(op.f('ix_opportunity_activities_id'), table_name='opportunity_activities')
    op.drop_index('idx_opportunity_activity_type', table_name='opportunity_activities')
    op.drop_index('idx_opportunity_activity_org_opp', table_name='opportunity_activities')
    op.drop_index('idx_opportunity_activity_date', table_name='opportunity_activities')
    op.drop_table('opportunity_activities')
    op.drop_index(op.f('ix_material_receipt_vouchers_voucher_number'), table_name='material_receipt_vouchers')
    op.drop_index(op.f('ix_material_receipt_vouchers_organization_id'), table_name='material_receipt_vouchers')
    op.drop_index(op.f('ix_material_receipt_vouchers_id'), table_name='material_receipt_vouchers')
    op.drop_index('idx_mrv_org_source', table_name='material_receipt_vouchers')
    op.drop_index('idx_mrv_org_mo', table_name='material_receipt_vouchers')
    op.drop_index('idx_mrv_org_date', table_name='material_receipt_vouchers')
    op.drop_table('material_receipt_vouchers')
    op.drop_index(op.f('ix_material_issues_voucher_number'), table_name='material_issues')
    op.drop_index(op.f('ix_material_issues_organization_id'), table_name='material_issues')
    op.drop_index(op.f('ix_material_issues_id'), table_name='material_issues')
    op.drop_index('idx_mi_org_mo', table_name='material_issues')
    op.drop_index('idx_mi_org_dept', table_name='material_issues')
    op.drop_index('idx_mi_org_date', table_name='material_issues')
    op.drop_table('material_issues')
    op.drop_index(op.f('ix_manufacturing_journal_vouchers_voucher_number'), table_name='manufacturing_journal_vouchers')
    op.drop_index(op.f('ix_manufacturing_journal_vouchers_organization_id'), table_name='manufacturing_journal_vouchers')
    op.drop_index(op.f('ix_manufacturing_journal_vouchers_id'), table_name='manufacturing_journal_vouchers')
    op.drop_index('idx_mjv_org_mo', table_name='manufacturing_journal_vouchers')
    op.drop_index('idx_mjv_org_date', table_name='manufacturing_journal_vouchers')
    op.drop_index('idx_mjv_org_bom', table_name='manufacturing_journal_vouchers')
    op.drop_table('manufacturing_journal_vouchers')
    op.drop_index(op.f('ix_maintenance_records_organization_id'), table_name='maintenance_records')
    op.drop_index(op.f('ix_maintenance_records_id'), table_name='maintenance_records')
    op.drop_index('idx_maint_rec_org_type', table_name='maintenance_records')
    op.drop_index('idx_maint_rec_org_status', table_name='maintenance_records')
    op.drop_index('idx_maint_rec_org_date', table_name='maintenance_records')
    op.drop_index('idx_maint_rec_org_asset', table_name='maintenance_records')
    op.drop_table('maintenance_records')
    op.drop_index(op.f('ix_job_card_vouchers_voucher_number'), table_name='job_card_vouchers')
    op.drop_index(op.f('ix_job_card_vouchers_organization_id'), table_name='job_card_vouchers')
    op.drop_index(op.f('ix_job_card_vouchers_id'), table_name='job_card_vouchers')
    op.drop_index('idx_jcv_org_vendor', table_name='job_card_vouchers')
    op.drop_index('idx_jcv_org_status', table_name='job_card_vouchers')
    op.drop_index('idx_jcv_org_mo', table_name='job_card_vouchers')
    op.drop_index('idx_jcv_org_date', table_name='job_card_vouchers')
    op.drop_table('job_card_vouchers')
    op.drop_index(op.f('ix_installation_jobs_organization_id'), table_name='installation_jobs')
    op.drop_index(op.f('ix_installation_jobs_job_number'), table_name='installation_jobs')
    op.drop_index(op.f('ix_installation_jobs_id'), table_name='installation_jobs')
    op.drop_index('idx_installation_job_scheduled_date', table_name='installation_jobs')
    op.drop_index('idx_installation_job_priority', table_name='installation_jobs')
    op.drop_index('idx_installation_job_org_technician', table_name='installation_jobs')
    op.drop_index('idx_installation_job_org_status', table_name='installation_jobs')
    op.drop_index('idx_installation_job_org_customer', table_name='installation_jobs')
    op.drop_index('idx_installation_job_dispatch_order', table_name='installation_jobs')
    op.drop_index('idx_installation_job_created_at', table_name='installation_jobs')
    op.drop_table('installation_jobs')
    op.drop_index(op.f('ix_goods_receipt_note_items_id'), table_name='goods_receipt_note_items')
    op.drop_table('goods_receipt_note_items')
    op.drop_index(op.f('ix_exhibition_prospects_organization_id'), table_name='exhibition_prospects')
    op.drop_index(op.f('ix_exhibition_prospects_id'), table_name='exhibition_prospects')
    op.drop_index('idx_exhibition_prospect_status', table_name='exhibition_prospects')
    op.drop_index('idx_exhibition_prospect_event', table_name='exhibition_prospects')
    op.drop_index('idx_exhibition_prospect_company', table_name='exhibition_prospects')
    op.drop_index('idx_exhibition_prospect_assigned', table_name='exhibition_prospects')
    op.drop_table('exhibition_prospects')
    op.drop_index(op.f('ix_dispatch_items_id'), table_name='dispatch_items')
    op.drop_index('idx_dispatch_item_status', table_name='dispatch_items')
    op.drop_index('idx_dispatch_item_product', table_name='dispatch_items')
    op.drop_index('idx_dispatch_item_order', table_name='dispatch_items')
    op.drop_table('dispatch_items')
    op.drop_index(op.f('ix_delivery_challan_items_id'), table_name='delivery_challan_items')
    op.drop_table('delivery_challan_items')
    op.drop_index(op.f('ix_chatbot_messages_organization_id'), table_name='chatbot_messages')
    op.drop_index(op.f('ix_chatbot_messages_id'), table_name='chatbot_messages')
    op.drop_index('idx_chatbot_message_type', table_name='chatbot_messages')
    op.drop_index('idx_chatbot_message_org_conversation', table_name='chatbot_messages')
    op.drop_index('idx_chatbot_message_created', table_name='chatbot_messages')
    op.drop_table('chatbot_messages')
    op.drop_index(op.f('ix_calendar_events_title'), table_name='calendar_events')
    op.drop_index(op.f('ix_calendar_events_start_datetime'), table_name='calendar_events')
    op.drop_index(op.f('ix_calendar_events_id'), table_name='calendar_events')
    op.drop_index(op.f('ix_calendar_events_google_event_id'), table_name='calendar_events')
    op.drop_index(op.f('ix_calendar_events_end_datetime'), table_name='calendar_events')
    op.drop_table('calendar_events')
    op.drop_index(op.f('ix_batch_locations_stock_location_id'), table_name='batch_locations')
    op.drop_index(op.f('ix_batch_locations_id'), table_name='batch_locations')
    op.drop_index(op.f('ix_batch_locations_batch_id'), table_name='batch_locations')
    op.drop_table('batch_locations')
    op.drop_index(op.f('ix_workflow_instances_automation_workflow_template_id'), table_name='workflow_instances_automation')
    op.drop_index(op.f('ix_workflow_instances_automation_status'), table_name='workflow_instances_automation')
    op.drop_index(op.f('ix_workflow_instances_automation_reference_type'), table_name='workflow_instances_automation')
    op.drop_index(op.f('ix_workflow_instances_automation_reference_id'), table_name='workflow_instances_automation')
    op.drop_index(op.f('ix_workflow_instances_automation_organization_id'), table_name='workflow_instances_automation')
    op.drop_index(op.f('ix_workflow_instances_automation_instance_name'), table_name='workflow_instances_automation')
    op.drop_index(op.f('ix_workflow_instances_automation_id'), table_name='workflow_instances_automation')
    op.drop_index(op.f('ix_workflow_instances_automation_current_step_id'), table_name='workflow_instances_automation')
    op.drop_index('idx_workflow_instance_template', table_name='workflow_instances_automation')
    op.drop_index('idx_workflow_instance_reference', table_name='workflow_instances_automation')
    op.drop_index('idx_workflow_instance_auto_org_status', table_name='workflow_instances_automation')
    op.drop_table('workflow_instances_automation')
    op.drop_index(op.f('ix_workflow_instances_reference_number'), table_name='workflow_instances')
    op.drop_index(op.f('ix_workflow_instances_organization_id'), table_name='workflow_instances')
    op.drop_index(op.f('ix_workflow_instances_id'), table_name='workflow_instances')
    op.drop_index('idx_workflow_instance_org_triggered', table_name='workflow_instances')
    op.drop_index('idx_workflow_instance_org_template', table_name='workflow_instances')
    op.drop_index('idx_workflow_instance_org_status', table_name='workflow_instances')
    op.drop_index('idx_workflow_instance_org_entity', table_name='workflow_instances')
    op.drop_table('workflow_instances')
    op.drop_index(op.f('ix_vendor_quotation_items_rfq_item_id'), table_name='vendor_quotation_items')
    op.drop_index(op.f('ix_vendor_quotation_items_quotation_id'), table_name='vendor_quotation_items')
    op.drop_index(op.f('ix_vendor_quotation_items_id'), table_name='vendor_quotation_items')
    op.drop_table('vendor_quotation_items')
    op.drop_index(op.f('ix_training_enrollments_session_id'), table_name='training_enrollments')
    op.drop_index(op.f('ix_training_enrollments_program_id'), table_name='training_enrollments')
    op.drop_index(op.f('ix_training_enrollments_organization_id'), table_name='training_enrollments')
    op.drop_index(op.f('ix_training_enrollments_id'), table_name='training_enrollments')
    op.drop_index(op.f('ix_training_enrollments_employee_id'), table_name='training_enrollments')
    op.drop_index('idx_training_enrollment_status', table_name='training_enrollments')
    op.drop_index('idx_training_enrollment_org_employee', table_name='training_enrollments')
    op.drop_table('training_enrollments')
    op.drop_index(op.f('ix_ticket_history_organization_id'), table_name='ticket_history')
    op.drop_index(op.f('ix_ticket_history_id'), table_name='ticket_history')
    op.drop_index('idx_ticket_history_user', table_name='ticket_history')
    op.drop_index('idx_ticket_history_org_ticket', table_name='ticket_history')
    op.drop_index('idx_ticket_history_created_at', table_name='ticket_history')
    op.drop_index('idx_ticket_history_action', table_name='ticket_history')
    op.drop_table('ticket_history')
    op.drop_index(op.f('ix_ticket_attachments_organization_id'), table_name='ticket_attachments')
    op.drop_index(op.f('ix_ticket_attachments_id'), table_name='ticket_attachments')
    op.drop_index('idx_ticket_attachment_uploaded_by', table_name='ticket_attachments')
    op.drop_index('idx_ticket_attachment_type', table_name='ticket_attachments')
    op.drop_index('idx_ticket_attachment_org_ticket', table_name='ticket_attachments')
    op.drop_table('ticket_attachments')
    op.drop_index(op.f('ix_tasks_title'), table_name='tasks')
    op.drop_index(op.f('ix_tasks_id'), table_name='tasks')
    op.drop_table('tasks')
    op.drop_index(op.f('ix_sla_tracking_organization_id'), table_name='sla_tracking')
    op.drop_index(op.f('ix_sla_tracking_id'), table_name='sla_tracking')
    op.drop_index('idx_sla_tracking_response_status', table_name='sla_tracking')
    op.drop_index('idx_sla_tracking_response_deadline', table_name='sla_tracking')
    op.drop_index('idx_sla_tracking_resolution_status', table_name='sla_tracking')
    op.drop_index('idx_sla_tracking_resolution_deadline', table_name='sla_tracking')
    op.drop_index('idx_sla_tracking_policy', table_name='sla_tracking')
    op.drop_index('idx_sla_tracking_org_ticket', table_name='sla_tracking')
    op.drop_index('idx_sla_tracking_escalation', table_name='sla_tracking')
    op.drop_table('sla_tracking')
    op.drop_index(op.f('ix_sales_order_items_id'), table_name='sales_order_items')
    op.drop_table('sales_order_items')
    op.drop_index(op.f('ix_quotation_items_id'), table_name='quotation_items')
    op.drop_table('quotation_items')
    op.drop_index(op.f('ix_purchase_requisitions_requisition_number'), table_name='purchase_requisitions')
    op.drop_index(op.f('ix_purchase_requisitions_requisition_date'), table_name='purchase_requisitions')
    op.drop_index(op.f('ix_purchase_requisitions_required_date'), table_name='purchase_requisitions')
    op.drop_index(op.f('ix_purchase_requisitions_purchase_order_id'), table_name='purchase_requisitions')
    op.drop_index(op.f('ix_purchase_requisitions_organization_id'), table_name='purchase_requisitions')
    op.drop_index(op.f('ix_purchase_requisitions_id'), table_name='purchase_requisitions')
    op.drop_index(op.f('ix_purchase_requisitions_approval_status'), table_name='purchase_requisitions')
    op.drop_index('idx_pr_required_date', table_name='purchase_requisitions')
    op.drop_index('idx_pr_org_status', table_name='purchase_requisitions')
    op.drop_table('purchase_requisitions')
    op.drop_index(op.f('ix_purchase_order_items_id'), table_name='purchase_order_items')
    op.drop_table('purchase_order_items')
    op.drop_index(op.f('ix_promotion_redemptions_organization_id'), table_name='promotion_redemptions')
    op.drop_index(op.f('ix_promotion_redemptions_id'), table_name='promotion_redemptions')
    op.drop_index('idx_promotion_redemption_org_promotion', table_name='promotion_redemptions')
    op.drop_index('idx_promotion_redemption_date', table_name='promotion_redemptions')
    op.drop_index('idx_promotion_redemption_customer', table_name='promotion_redemptions')
    op.drop_table('promotion_redemptions')
    op.drop_index(op.f('ix_project_resources_organization_id'), table_name='project_resources')
    op.drop_index(op.f('ix_project_resources_id'), table_name='project_resources')
    op.drop_index('idx_resource_org_user', table_name='project_resources')
    op.drop_index('idx_resource_org_type', table_name='project_resources')
    op.drop_index('idx_resource_org_project', table_name='project_resources')
    op.drop_table('project_resources')
    op.drop_index(op.f('ix_project_milestones_organization_id'), table_name='project_milestones')
    op.drop_index(op.f('ix_project_milestones_id'), table_name='project_milestones')
    op.drop_index('idx_milestone_org_target_date', table_name='project_milestones')
    op.drop_index('idx_milestone_org_status', table_name='project_milestones')
    op.drop_index('idx_milestone_org_project', table_name='project_milestones')
    op.drop_table('project_milestones')
    op.drop_index(op.f('ix_project_documents_organization_id'), table_name='project_documents')
    op.drop_index(op.f('ix_project_documents_id'), table_name='project_documents')
    op.drop_index('idx_document_org_type', table_name='project_documents')
    op.drop_index('idx_document_org_public', table_name='project_documents')
    op.drop_index('idx_document_org_project', table_name='project_documents')
    op.drop_table('project_documents')
    op.drop_index(op.f('ix_proforma_invoice_items_id'), table_name='proforma_invoice_items')
    op.drop_table('proforma_invoice_items')
    op.drop_index(op.f('ix_product_batches_product_tracking_id'), table_name='product_batches')
    op.drop_index(op.f('ix_product_batches_organization_id'), table_name='product_batches')
    op.drop_index(op.f('ix_product_batches_id'), table_name='product_batches')
    op.drop_index(op.f('ix_product_batches_expiry_date'), table_name='product_batches')
    op.drop_index(op.f('ix_product_batches_batch_number'), table_name='product_batches')
    op.drop_index('idx_batch_expiry', table_name='product_batches')
    op.drop_index('idx_batch_active', table_name='product_batches')
    op.drop_table('product_batches')
    op.drop_index(op.f('ix_payslips_salary_structure_id'), table_name='payslips')
    op.drop_index(op.f('ix_payslips_payslip_number'), table_name='payslips')
    op.drop_index(op.f('ix_payslips_payroll_period_id'), table_name='payslips')
    op.drop_index(op.f('ix_payslips_organization_id'), table_name='payslips')
    op.drop_index(op.f('ix_payslips_id'), table_name='payslips')
    op.drop_index(op.f('ix_payslips_employee_id'), table_name='payslips')
    op.drop_index('idx_payslip_status', table_name='payslips')
    op.drop_index('idx_payslip_period', table_name='payslips')
    op.drop_index('idx_payslip_org_employee', table_name='payslips')
    op.drop_table('payslips')
    op.drop_index(op.f('ix_opportunities_stage'), table_name='opportunities')
    op.drop_index(op.f('ix_opportunities_source'), table_name='opportunities')
    op.drop_index(op.f('ix_opportunities_organization_id'), table_name='opportunities')
    op.drop_index(op.f('ix_opportunities_opportunity_number'), table_name='opportunities')
    op.drop_index(op.f('ix_opportunities_name'), table_name='opportunities')
    op.drop_index(op.f('ix_opportunities_id'), table_name='opportunities')
    op.drop_index('idx_opportunity_probability', table_name='opportunities')
    op.drop_index('idx_opportunity_org_stage', table_name='opportunities')
    op.drop_index('idx_opportunity_org_assigned', table_name='opportunities')
    op.drop_index('idx_opportunity_close_date', table_name='opportunities')
    op.drop_index('idx_opportunity_amount', table_name='opportunities')
    op.drop_table('opportunities')
    op.drop_index(op.f('ix_manufacturing_orders_voucher_number'), table_name='manufacturing_orders')
    op.drop_index(op.f('ix_manufacturing_orders_organization_id'), table_name='manufacturing_orders')
    op.drop_index(op.f('ix_manufacturing_orders_id'), table_name='manufacturing_orders')
    op.drop_index('idx_mo_org_status', table_name='manufacturing_orders')
    op.drop_index('idx_mo_org_date', table_name='manufacturing_orders')
    op.drop_index('idx_mo_org_bom', table_name='manufacturing_orders')
    op.drop_table('manufacturing_orders')
    op.drop_index(op.f('ix_maintenance_schedules_organization_id'), table_name='maintenance_schedules')
    op.drop_index(op.f('ix_maintenance_schedules_id'), table_name='maintenance_schedules')
    op.drop_index('idx_maint_sched_org_type', table_name='maintenance_schedules')
    op.drop_index('idx_maint_sched_org_due', table_name='maintenance_schedules')
    op.drop_index('idx_maint_sched_org_asset', table_name='maintenance_schedules')
    op.drop_index('idx_maint_sched_org_active', table_name='maintenance_schedules')
    op.drop_table('maintenance_schedules')
    op.drop_index(op.f('ix_lead_activities_organization_id'), table_name='lead_activities')
    op.drop_index(op.f('ix_lead_activities_id'), table_name='lead_activities')
    op.drop_index('idx_lead_activity_type', table_name='lead_activities')
    op.drop_index('idx_lead_activity_org_lead', table_name='lead_activities')
    op.drop_index('idx_lead_activity_date', table_name='lead_activities')
    op.drop_table('lead_activities')
    op.drop_index(op.f('ix_job_offers_organization_id'), table_name='job_offers')
    op.drop_index(op.f('ix_job_offers_job_application_id'), table_name='job_offers')
    op.drop_index(op.f('ix_job_offers_id'), table_name='job_offers')
    op.drop_index('idx_job_offer_org_status', table_name='job_offers')
    op.drop_index('idx_job_offer_dates', table_name='job_offers')
    op.drop_index('idx_job_offer_application', table_name='job_offers')
    op.drop_table('job_offers')
    op.drop_index(op.f('ix_interviews_organization_id'), table_name='interviews')
    op.drop_index(op.f('ix_interviews_job_application_id'), table_name='interviews')
    op.drop_index(op.f('ix_interviews_id'), table_name='interviews')
    op.drop_index('idx_interview_status', table_name='interviews')
    op.drop_index('idx_interview_org_date', table_name='interviews')
    op.drop_index('idx_interview_interviewer', table_name='interviews')
    op.drop_table('interviews')
    op.drop_index(op.f('ix_integration_sync_records_organization_id'), table_name='integration_sync_records')
    op.drop_index(op.f('ix_integration_sync_records_local_id'), table_name='integration_sync_records')
    op.drop_index(op.f('ix_integration_sync_records_id'), table_name='integration_sync_records')
    op.drop_index(op.f('ix_integration_sync_records_external_id'), table_name='integration_sync_records')
    op.drop_index(op.f('ix_integration_sync_records_entity_type'), table_name='integration_sync_records')
    op.drop_index('idx_sync_record_org_status', table_name='integration_sync_records')
    op.drop_index('idx_sync_record_org_local', table_name='integration_sync_records')
    op.drop_index('idx_sync_record_org_job', table_name='integration_sync_records')
    op.drop_index('idx_sync_record_org_external', table_name='integration_sync_records')
    op.drop_index('idx_sync_record_org_entity', table_name='integration_sync_records')
    op.drop_table('integration_sync_records')
    op.drop_index(op.f('ix_goods_receipt_notes_voucher_number'), table_name='goods_receipt_notes')
    op.drop_index(op.f('ix_goods_receipt_notes_organization_id'), table_name='goods_receipt_notes')
    op.drop_index(op.f('ix_goods_receipt_notes_id'), table_name='goods_receipt_notes')
    op.drop_index('idx_grn_org_vendor', table_name='goods_receipt_notes')
    op.drop_index('idx_grn_org_po', table_name='goods_receipt_notes')
    op.drop_index('idx_grn_org_date', table_name='goods_receipt_notes')
    op.drop_table('goods_receipt_notes')
    op.drop_index(op.f('ix_freight_rates_organization_id'), table_name='freight_rates')
    op.drop_index(op.f('ix_freight_rates_id'), table_name='freight_rates')
    op.drop_index('idx_freight_rate_org_route', table_name='freight_rates')
    op.drop_index('idx_freight_rate_org_effective', table_name='freight_rates')
    op.drop_index('idx_freight_rate_org_carrier', table_name='freight_rates')
    op.drop_index('idx_freight_rate_org_active', table_name='freight_rates')
    op.drop_table('freight_rates')
    op.drop_index(op.f('ix_freight_cost_analysis_organization_id'), table_name='freight_cost_analysis')
    op.drop_index(op.f('ix_freight_cost_analysis_id'), table_name='freight_cost_analysis')
    op.drop_index('idx_freight_analysis_org_route', table_name='freight_cost_analysis')
    op.drop_index('idx_freight_analysis_org_period', table_name='freight_cost_analysis')
    op.drop_index('idx_freight_analysis_org_carrier', table_name='freight_cost_analysis')
    op.drop_table('freight_cost_analysis')
    op.drop_index(op.f('ix_dispatch_orders_organization_id'), table_name='dispatch_orders')
    op.drop_index(op.f('ix_dispatch_orders_order_number'), table_name='dispatch_orders')
    op.drop_index(op.f('ix_dispatch_orders_id'), table_name='dispatch_orders')
    op.drop_index('idx_dispatch_order_org_ticket', table_name='dispatch_orders')
    op.drop_index('idx_dispatch_order_org_status', table_name='dispatch_orders')
    op.drop_index('idx_dispatch_order_org_customer', table_name='dispatch_orders')
    op.drop_index('idx_dispatch_order_dispatch_date', table_name='dispatch_orders')
    op.drop_index('idx_dispatch_order_delivery_date', table_name='dispatch_orders')
    op.drop_index('idx_dispatch_order_created_at', table_name='dispatch_orders')
    op.drop_table('dispatch_orders')
    op.drop_index(op.f('ix_depreciation_records_organization_id'), table_name='depreciation_records')
    op.drop_index(op.f('ix_depreciation_records_id'), table_name='depreciation_records')
    op.drop_index('idx_depr_org_year', table_name='depreciation_records')
    op.drop_index('idx_depr_org_period', table_name='depreciation_records')
    op.drop_index('idx_depr_org_asset', table_name='depreciation_records')
    op.drop_table('depreciation_records')
    op.drop_index(op.f('ix_delivery_challans_voucher_number'), table_name='delivery_challans')
    op.drop_index(op.f('ix_delivery_challans_organization_id'), table_name='delivery_challans')
    op.drop_index(op.f('ix_delivery_challans_id'), table_name='delivery_challans')
    op.drop_index('idx_dc_org_so', table_name='delivery_challans')
    op.drop_index('idx_dc_org_date', table_name='delivery_challans')
    op.drop_index('idx_dc_org_customer', table_name='delivery_challans')
    op.drop_table('delivery_challans')
    op.drop_index(op.f('ix_debit_note_items_id'), table_name='debit_note_items')
    op.drop_table('debit_note_items')
    op.drop_index(op.f('ix_customer_surveys_survey_token'), table_name='customer_surveys')
    op.drop_index(op.f('ix_customer_surveys_organization_id'), table_name='customer_surveys')
    op.drop_index(op.f('ix_customer_surveys_id'), table_name='customer_surveys')
    op.drop_index('idx_customer_survey_ticket', table_name='customer_surveys')
    op.drop_index('idx_customer_survey_status', table_name='customer_surveys')
    op.drop_index('idx_customer_survey_org_template', table_name='customer_surveys')
    op.drop_index('idx_customer_survey_customer', table_name='customer_surveys')
    op.drop_index('idx_customer_survey_completed', table_name='customer_surveys')
    op.drop_table('customer_surveys')
    op.drop_index(op.f('ix_credit_note_items_id'), table_name='credit_note_items')
    op.drop_table('credit_note_items')
    op.drop_index(op.f('ix_chatbot_conversations_session_id'), table_name='chatbot_conversations')
    op.drop_index(op.f('ix_chatbot_conversations_organization_id'), table_name='chatbot_conversations')
    op.drop_index(op.f('ix_chatbot_conversations_id'), table_name='chatbot_conversations')
    op.drop_index(op.f('ix_chatbot_conversations_conversation_id'), table_name='chatbot_conversations')
    op.drop_index('idx_chatbot_conversation_started', table_name='chatbot_conversations')
    op.drop_index('idx_chatbot_conversation_org_status', table_name='chatbot_conversations')
    op.drop_index('idx_chatbot_conversation_intent', table_name='chatbot_conversations')
    op.drop_index('idx_chatbot_conversation_escalated', table_name='chatbot_conversations')
    op.drop_index('idx_chatbot_conversation_channel', table_name='chatbot_conversations')
    op.drop_table('chatbot_conversations')
    op.drop_index(op.f('ix_business_card_scans_organization_id'), table_name='business_card_scans')
    op.drop_index(op.f('ix_business_card_scans_id'), table_name='business_card_scans')
    op.drop_index('idx_card_scan_validation', table_name='business_card_scans')
    op.drop_index('idx_card_scan_status', table_name='business_card_scans')
    op.drop_index('idx_card_scan_event', table_name='business_card_scans')
    op.drop_table('business_card_scans')
    op.drop_index(op.f('ix_bom_components_organization_id'), table_name='bom_components')
    op.drop_index(op.f('ix_bom_components_id'), table_name='bom_components')
    op.drop_index('idx_bom_comp_org_item', table_name='bom_components')
    op.drop_index('idx_bom_comp_org_bom', table_name='bom_components')
    op.drop_table('bom_components')
    op.drop_index(op.f('ix_workflow_steps_automation_workflow_template_id'), table_name='workflow_steps_automation')
    op.drop_index(op.f('ix_workflow_steps_automation_step_type'), table_name='workflow_steps_automation')
    op.drop_index(op.f('ix_workflow_steps_automation_step_order'), table_name='workflow_steps_automation')
    op.drop_index(op.f('ix_workflow_steps_automation_step_name'), table_name='workflow_steps_automation')
    op.drop_index(op.f('ix_workflow_steps_automation_step_code'), table_name='workflow_steps_automation')
    op.drop_index(op.f('ix_workflow_steps_automation_next_step_id'), table_name='workflow_steps_automation')
    op.drop_index(op.f('ix_workflow_steps_automation_id'), table_name='workflow_steps_automation')
    op.drop_index(op.f('ix_workflow_steps_automation_business_rule_id'), table_name='workflow_steps_automation')
    op.drop_index('idx_workflow_step_type', table_name='workflow_steps_automation')
    op.drop_table('workflow_steps_automation')
    op.drop_index(op.f('ix_workflow_steps_organization_id'), table_name='workflow_steps')
    op.drop_index(op.f('ix_workflow_steps_id'), table_name='workflow_steps')
    op.drop_index('idx_workflow_step_org_type', table_name='workflow_steps')
    op.drop_index('idx_workflow_step_org_template', table_name='workflow_steps')
    op.drop_index('idx_workflow_step_org_order', table_name='workflow_steps')
    op.drop_table('workflow_steps')
    op.drop_index(op.f('ix_workflow_schedules_workflow_template_id'), table_name='workflow_schedules')
    op.drop_index(op.f('ix_workflow_schedules_schedule_type'), table_name='workflow_schedules')
    op.drop_index(op.f('ix_workflow_schedules_organization_id'), table_name='workflow_schedules')
    op.drop_index(op.f('ix_workflow_schedules_name'), table_name='workflow_schedules')
    op.drop_index(op.f('ix_workflow_schedules_id'), table_name='workflow_schedules')
    op.drop_index('idx_workflow_schedule_next_run', table_name='workflow_schedules')
    op.drop_index('idx_workflow_schedule_active', table_name='workflow_schedules')
    op.drop_table('workflow_schedules')
    op.drop_index(op.f('ix_webhook_deliveries_organization_id'), table_name='webhook_deliveries')
    op.drop_index(op.f('ix_webhook_deliveries_id'), table_name='webhook_deliveries')
    op.drop_index(op.f('ix_webhook_deliveries_event_type'), table_name='webhook_deliveries')
    op.drop_index('idx_webhook_delivery_org_webhook', table_name='webhook_deliveries')
    op.drop_index('idx_webhook_delivery_org_successful', table_name='webhook_deliveries')
    op.drop_index('idx_webhook_delivery_org_event', table_name='webhook_deliveries')
    op.drop_index('idx_webhook_delivery_org_delivered', table_name='webhook_deliveries')
    op.drop_table('webhook_deliveries')
    op.drop_index(op.f('ix_warehouse_stock_warehouse_id'), table_name='warehouse_stock')
    op.drop_index(op.f('ix_warehouse_stock_product_id'), table_name='warehouse_stock')
    op.drop_index(op.f('ix_warehouse_stock_organization_id'), table_name='warehouse_stock')
    op.drop_index(op.f('ix_warehouse_stock_id'), table_name='warehouse_stock')
    op.drop_index('idx_warehouse_stock_org_warehouse', table_name='warehouse_stock')
    op.drop_table('warehouse_stock')
    op.drop_index(op.f('ix_voucher_approvals_organization_id'), table_name='voucher_approvals')
    op.drop_index(op.f('ix_voucher_approvals_id'), table_name='voucher_approvals')
    op.drop_index('idx_voucher_approval_submitted', table_name='voucher_approvals')
    op.drop_index('idx_voucher_approval_status', table_name='voucher_approvals')
    op.drop_index('idx_voucher_approval_org', table_name='voucher_approvals')
    op.drop_index('idx_voucher_approval_current', table_name='voucher_approvals')
    op.drop_table('voucher_approvals')
    op.drop_index(op.f('ix_vendor_rfqs_vendor_id'), table_name='vendor_rfqs')
    op.drop_index(op.f('ix_vendor_rfqs_rfq_id'), table_name='vendor_rfqs')
    op.drop_index(op.f('ix_vendor_rfqs_invited_date'), table_name='vendor_rfqs')
    op.drop_index(op.f('ix_vendor_rfqs_id'), table_name='vendor_rfqs')
    op.drop_index('idx_vendor_rfq_response', table_name='vendor_rfqs')
    op.drop_table('vendor_rfqs')
    op.drop_index(op.f('ix_vendor_quotations_vendor_id'), table_name='vendor_quotations')
    op.drop_index(op.f('ix_vendor_quotations_rfq_id'), table_name='vendor_quotations')
    op.drop_index(op.f('ix_vendor_quotations_quotation_number'), table_name='vendor_quotations')
    op.drop_index(op.f('ix_vendor_quotations_quotation_date'), table_name='vendor_quotations')
    op.drop_index(op.f('ix_vendor_quotations_organization_id'), table_name='vendor_quotations')
    op.drop_index(op.f('ix_vendor_quotations_id'), table_name='vendor_quotations')
    op.drop_index('idx_quotation_selected', table_name='vendor_quotations')
    op.drop_index('idx_quotation_rfq_vendor', table_name='vendor_quotations')
    op.drop_table('vendor_quotations')
    op.drop_index(op.f('ix_vendor_files_organization_id'), table_name='vendor_files')
    op.drop_index(op.f('ix_vendor_files_id'), table_name='vendor_files')
    op.drop_index('idx_vendor_file_org_vendor', table_name='vendor_files')
    op.drop_table('vendor_files')
    op.drop_index(op.f('ix_vendor_evaluations_vendor_id'), table_name='vendor_evaluations')
    op.drop_index(op.f('ix_vendor_evaluations_organization_id'), table_name='vendor_evaluations')
    op.drop_index(op.f('ix_vendor_evaluations_id'), table_name='vendor_evaluations')
    op.drop_index(op.f('ix_vendor_evaluations_evaluation_date'), table_name='vendor_evaluations')
    op.drop_index('idx_vendor_eval_rating', table_name='vendor_evaluations')
    op.drop_index('idx_vendor_eval_org_date', table_name='vendor_evaluations')
    op.drop_table('vendor_evaluations')
    op.drop_index(op.f('ix_user_organization_roles_organization_id'), table_name='user_organization_roles')
    op.drop_index(op.f('ix_user_organization_roles_id'), table_name='user_organization_roles')
    op.drop_index('idx_user_org_role_user', table_name='user_organization_roles')
    op.drop_index('idx_user_org_role_role', table_name='user_organization_roles')
    op.drop_index('idx_user_org_role_active', table_name='user_organization_roles')
    op.drop_table('user_organization_roles')
    op.drop_index(op.f('ix_training_sessions_session_code'), table_name='training_sessions')
    op.drop_index(op.f('ix_training_sessions_program_id'), table_name='training_sessions')
    op.drop_index(op.f('ix_training_sessions_organization_id'), table_name='training_sessions')
    op.drop_index(op.f('ix_training_sessions_id'), table_name='training_sessions')
    op.drop_index('idx_training_session_status', table_name='training_sessions')
    op.drop_index('idx_training_session_org_dates', table_name='training_sessions')
    op.drop_table('training_sessions')
    op.drop_index(op.f('ix_tickets_ticket_number'), table_name='tickets')
    op.drop_index(op.f('ix_tickets_organization_id'), table_name='tickets')
    op.drop_index(op.f('ix_tickets_id'), table_name='tickets')
    op.drop_index('idx_ticket_org_type', table_name='tickets')
    op.drop_index('idx_ticket_org_status', table_name='tickets')
    op.drop_index('idx_ticket_org_priority', table_name='tickets')
    op.drop_index('idx_ticket_org_customer', table_name='tickets')
    op.drop_index('idx_ticket_org_assigned', table_name='tickets')
    op.drop_index('idx_ticket_due_date', table_name='tickets')
    op.drop_index('idx_ticket_created_at', table_name='tickets')
    op.drop_table('tickets')
    op.drop_index(op.f('ix_task_project_members_id'), table_name='task_project_members')
    op.drop_table('task_project_members')
    op.drop_index(op.f('ix_tally_sync_items_tally_reference'), table_name='tally_sync_items')
    op.drop_index(op.f('ix_tally_sync_items_tally_guid'), table_name='tally_sync_items')
    op.drop_index(op.f('ix_tally_sync_items_sync_status'), table_name='tally_sync_items')
    op.drop_index(op.f('ix_tally_sync_items_sync_log_id'), table_name='tally_sync_items')
    op.drop_index(op.f('ix_tally_sync_items_sync_direction'), table_name='tally_sync_items')
    op.drop_index(op.f('ix_tally_sync_items_processed_at'), table_name='tally_sync_items')
    op.drop_index(op.f('ix_tally_sync_items_id'), table_name='tally_sync_items')
    op.drop_index(op.f('ix_tally_sync_items_entity_type'), table_name='tally_sync_items')
    op.drop_index(op.f('ix_tally_sync_items_entity_reference'), table_name='tally_sync_items')
    op.drop_index(op.f('ix_tally_sync_items_entity_id'), table_name='tally_sync_items')
    op.drop_index('idx_sync_item_tally', table_name='tally_sync_items')
    op.drop_index('idx_sync_item_entity', table_name='tally_sync_items')
    op.drop_table('tally_sync_items')
    op.drop_index(op.f('ix_stock_organization_id'), table_name='stock')
    op.drop_index(op.f('ix_stock_id'), table_name='stock')
    op.drop_index('idx_stock_org_product', table_name='stock')
    op.drop_index('idx_stock_org_location', table_name='stock')
    op.drop_table('stock')
    op.drop_index(op.f('ix_scenario_analysis_scenario_type'), table_name='scenario_analysis')
    op.drop_index(op.f('ix_scenario_analysis_organization_id'), table_name='scenario_analysis')
    op.drop_index(op.f('ix_scenario_analysis_id'), table_name='scenario_analysis')
    op.drop_index(op.f('ix_scenario_analysis_financial_model_id'), table_name='scenario_analysis')
    op.drop_index('idx_scenario_org_type', table_name='scenario_analysis')
    op.drop_table('scenario_analysis')
    op.drop_index(op.f('ix_sales_orders_voucher_number'), table_name='sales_orders')
    op.drop_index(op.f('ix_sales_orders_organization_id'), table_name='sales_orders')
    op.drop_index(op.f('ix_sales_orders_id'), table_name='sales_orders')
    op.drop_index('idx_so_org_status', table_name='sales_orders')
    op.drop_index('idx_so_org_date', table_name='sales_orders')
    op.drop_index('idx_so_org_customer', table_name='sales_orders')
    op.drop_table('sales_orders')
    op.drop_index(op.f('ix_salary_structures_organization_id'), table_name='salary_structures')
    op.drop_index(op.f('ix_salary_structures_id'), table_name='salary_structures')
    op.drop_index(op.f('ix_salary_structures_employee_id'), table_name='salary_structures')
    op.drop_index(op.f('ix_salary_structures_effective_from'), table_name='salary_structures')
    op.drop_index('idx_salary_structure_org_employee', table_name='salary_structures')
    op.drop_index('idx_salary_structure_effective', table_name='salary_structures')
    op.drop_index('idx_salary_structure_active', table_name='salary_structures')
    op.drop_table('salary_structures')
    op.drop_index(op.f('ix_routes_organization_id'), table_name='routes')
    op.drop_index(op.f('ix_routes_id'), table_name='routes')
    op.drop_index('idx_route_org_status', table_name='routes')
    op.drop_index('idx_route_org_origin', table_name='routes')
    op.drop_index('idx_route_org_dest', table_name='routes')
    op.drop_index('idx_route_org_carrier', table_name='routes')
    op.drop_table('routes')
    op.drop_index(op.f('ix_role_module_assignments_organization_id'), table_name='role_module_assignments')
    op.drop_index(op.f('ix_role_module_assignments_id'), table_name='role_module_assignments')
    op.drop_index('idx_role_module_org', table_name='role_module_assignments')
    op.drop_index('idx_role_module_active', table_name='role_module_assignments')
    op.drop_table('role_module_assignments')
    op.drop_index(op.f('ix_risk_events_risk_analysis_id'), table_name='risk_events')
    op.drop_index(op.f('ix_risk_events_organization_id'), table_name='risk_events')
    op.drop_index(op.f('ix_risk_events_id'), table_name='risk_events')
    op.drop_index(op.f('ix_risk_events_event_date'), table_name='risk_events')
    op.drop_index('idx_risk_event_date_severity', table_name='risk_events')
    op.drop_table('risk_events')
    op.drop_index(op.f('ix_rate_limit_rules_organization_id'), table_name='rate_limit_rules')
    op.drop_index(op.f('ix_rate_limit_rules_name'), table_name='rate_limit_rules')
    op.drop_index(op.f('ix_rate_limit_rules_id'), table_name='rate_limit_rules')
    op.drop_index('idx_rate_limit_rule_org_priority', table_name='rate_limit_rules')
    op.drop_index('idx_rate_limit_rule_org_api_key', table_name='rate_limit_rules')
    op.drop_index('idx_rate_limit_rule_org_active', table_name='rate_limit_rules')
    op.drop_table('rate_limit_rules')
    op.drop_index(op.f('ix_quotations_voucher_number'), table_name='quotations')
    op.drop_index(op.f('ix_quotations_organization_id'), table_name='quotations')
    op.drop_index(op.f('ix_quotations_id'), table_name='quotations')
    op.drop_index('idx_quotation_org_date', table_name='quotations')
    op.drop_index('idx_quotation_org_customer', table_name='quotations')
    op.drop_table('quotations')
    op.drop_index(op.f('ix_purchase_orders_voucher_number'), table_name='purchase_orders')
    op.drop_index(op.f('ix_purchase_orders_organization_id'), table_name='purchase_orders')
    op.drop_index(op.f('ix_purchase_orders_id'), table_name='purchase_orders')
    op.drop_index('idx_po_org_vendor', table_name='purchase_orders')
    op.drop_index('idx_po_org_status', table_name='purchase_orders')
    op.drop_index('idx_po_org_date', table_name='purchase_orders')
    op.drop_table('purchase_orders')
    op.drop_index(op.f('ix_promotions_promotion_type'), table_name='promotions')
    op.drop_index(op.f('ix_promotions_promotion_code'), table_name='promotions')
    op.drop_index(op.f('ix_promotions_organization_id'), table_name='promotions')
    op.drop_index(op.f('ix_promotions_name'), table_name='promotions')
    op.drop_index(op.f('ix_promotions_is_active'), table_name='promotions')
    op.drop_index(op.f('ix_promotions_id'), table_name='promotions')
    op.drop_index('idx_promotion_validity', table_name='promotions')
    op.drop_index('idx_promotion_org_type', table_name='promotions')
    op.drop_index('idx_promotion_org_active', table_name='promotions')
    op.drop_table('promotions')
    op.drop_index(op.f('ix_projects_project_code'), table_name='projects')
    op.drop_index(op.f('ix_projects_organization_id'), table_name='projects')
    op.drop_index(op.f('ix_projects_name'), table_name='projects')
    op.drop_index(op.f('ix_projects_id'), table_name='projects')
    op.drop_index(op.f('ix_projects_company_id'), table_name='projects')
    op.drop_index('idx_project_org_type', table_name='projects')
    op.drop_index('idx_project_org_status', table_name='projects')
    op.drop_index('idx_project_org_manager', table_name='projects')
    op.drop_index('idx_project_org_client', table_name='projects')
    op.drop_table('projects')
    op.drop_index(op.f('ix_proforma_invoices_voucher_number'), table_name='proforma_invoices')
    op.drop_index(op.f('ix_proforma_invoices_organization_id'), table_name='proforma_invoices')
    op.drop_index(op.f('ix_proforma_invoices_id'), table_name='proforma_invoices')
    op.drop_index('idx_pi_org_date', table_name='proforma_invoices')
    op.drop_index('idx_pi_org_customer', table_name='proforma_invoices')
    op.drop_table('proforma_invoices')
    op.drop_index(op.f('ix_product_tracking_product_id'), table_name='product_tracking')
    op.drop_index(op.f('ix_product_tracking_id'), table_name='product_tracking')
    op.drop_table('product_tracking')
    op.drop_index(op.f('ix_product_files_organization_id'), table_name='product_files')
    op.drop_index(op.f('ix_product_files_id'), table_name='product_files')
    op.drop_index('idx_product_file_org_product', table_name='product_files')
    op.drop_table('product_files')
    op.drop_index(op.f('ix_prediction_results_prediction_id'), table_name='prediction_results')
    op.drop_index(op.f('ix_prediction_results_organization_id'), table_name='prediction_results')
    op.drop_index(op.f('ix_prediction_results_model_id'), table_name='prediction_results')
    op.drop_index(op.f('ix_prediction_results_id'), table_name='prediction_results')
    op.drop_index('idx_prediction_result_org_timestamp', table_name='prediction_results')
    op.drop_index('idx_prediction_result_org_model', table_name='prediction_results')
    op.drop_index('idx_prediction_result_org_context', table_name='prediction_results')
    op.drop_index('idx_prediction_result_entity', table_name='prediction_results')
    op.drop_table('prediction_results')
    op.drop_index(op.f('ix_performance_reviews_reviewer_id'), table_name='performance_reviews')
    op.drop_index(op.f('ix_performance_reviews_organization_id'), table_name='performance_reviews')
    op.drop_index(op.f('ix_performance_reviews_id'), table_name='performance_reviews')
    op.drop_index(op.f('ix_performance_reviews_employee_id'), table_name='performance_reviews')
    op.drop_index('idx_performance_review_status', table_name='performance_reviews')
    op.drop_index('idx_performance_review_period', table_name='performance_reviews')
    op.drop_index('idx_performance_review_org_employee', table_name='performance_reviews')
    op.drop_table('performance_reviews')
    op.drop_index(op.f('ix_payment_records_reference_id'), table_name='payment_records')
    op.drop_index(op.f('ix_payment_records_payment_number'), table_name='payment_records')
    op.drop_index(op.f('ix_payment_records_payment_date'), table_name='payment_records')
    op.drop_index(op.f('ix_payment_records_organization_id'), table_name='payment_records')
    op.drop_index(op.f('ix_payment_records_id'), table_name='payment_records')
    op.drop_index('idx_pr_reference', table_name='payment_records')
    op.drop_index('idx_pr_org_date', table_name='payment_records')
    op.drop_table('payment_records')
    op.drop_index(op.f('ix_notification_logs_organization_id'), table_name='notification_logs')
    op.drop_index(op.f('ix_notification_logs_id'), table_name='notification_logs')
    op.drop_index('idx_notification_log_sent_at', table_name='notification_logs')
    op.drop_index('idx_notification_log_recipient', table_name='notification_logs')
    op.drop_index('idx_notification_log_org_status', table_name='notification_logs')
    op.drop_index('idx_notification_log_org_channel', table_name='notification_logs')
    op.drop_table('notification_logs')
    op.drop_index(op.f('ix_model_performance_metrics_organization_id'), table_name='model_performance_metrics')
    op.drop_index(op.f('ix_model_performance_metrics_model_id'), table_name='model_performance_metrics')
    op.drop_index(op.f('ix_model_performance_metrics_metric_name'), table_name='model_performance_metrics')
    op.drop_index(op.f('ix_model_performance_metrics_id'), table_name='model_performance_metrics')
    op.drop_index('idx_model_performance_org_model', table_name='model_performance_metrics')
    op.drop_index('idx_model_performance_org_measured', table_name='model_performance_metrics')
    op.drop_index('idx_model_performance_model_metric', table_name='model_performance_metrics')
    op.drop_table('model_performance_metrics')
    op.drop_index(op.f('ix_model_audit_trail_organization_id'), table_name='model_audit_trail')
    op.drop_index(op.f('ix_model_audit_trail_id'), table_name='model_audit_trail')
    op.drop_index(op.f('ix_model_audit_trail_financial_model_id'), table_name='model_audit_trail')
    op.drop_index(op.f('ix_model_audit_trail_changed_at'), table_name='model_audit_trail')
    op.drop_index(op.f('ix_model_audit_trail_action_type'), table_name='model_audit_trail')
    op.drop_index('idx_audit_model_date', table_name='model_audit_trail')
    op.drop_index('idx_audit_action_date', table_name='model_audit_trail')
    op.drop_table('model_audit_trail')
    op.drop_index(op.f('ix_ml_predictions_prediction_date'), table_name='ml_predictions')
    op.drop_index(op.f('ix_ml_predictions_organization_id'), table_name='ml_predictions')
    op.drop_index(op.f('ix_ml_predictions_ml_model_id'), table_name='ml_predictions')
    op.drop_index(op.f('ix_ml_predictions_id'), table_name='ml_predictions')
    op.drop_index('idx_prediction_model_date', table_name='ml_predictions')
    op.drop_table('ml_predictions')
    op.drop_index(op.f('ix_migration_logs_organization_id'), table_name='migration_logs')
    op.drop_index(op.f('ix_migration_logs_migration_job_id'), table_name='migration_logs')
    op.drop_index(op.f('ix_migration_logs_id'), table_name='migration_logs')
    op.drop_index('idx_migration_log_level', table_name='migration_logs')
    op.drop_index('idx_migration_log_job', table_name='migration_logs')
    op.drop_index('idx_migration_log_created', table_name='migration_logs')
    op.drop_table('migration_logs')
    op.drop_index(op.f('ix_migration_data_mappings_organization_id'), table_name='migration_data_mappings')
    op.drop_index(op.f('ix_migration_data_mappings_migration_job_id'), table_name='migration_data_mappings')
    op.drop_index(op.f('ix_migration_data_mappings_id'), table_name='migration_data_mappings')
    op.drop_index('idx_migration_mapping_type', table_name='migration_data_mappings')
    op.drop_index('idx_migration_mapping_job', table_name='migration_data_mappings')
    op.drop_table('migration_data_mappings')
    op.drop_index(op.f('ix_migration_conflicts_organization_id'), table_name='migration_conflicts')
    op.drop_index(op.f('ix_migration_conflicts_migration_job_id'), table_name='migration_conflicts')
    op.drop_index(op.f('ix_migration_conflicts_id'), table_name='migration_conflicts')
    op.drop_index('idx_migration_conflict_resolved', table_name='migration_conflicts')
    op.drop_index('idx_migration_conflict_job', table_name='migration_conflicts')
    op.drop_table('migration_conflicts')
    op.drop_index(op.f('ix_marketing_list_contacts_organization_id'), table_name='marketing_list_contacts')
    op.drop_index(op.f('ix_marketing_list_contacts_id'), table_name='marketing_list_contacts')
    op.drop_index(op.f('ix_marketing_list_contacts_email'), table_name='marketing_list_contacts')
    op.drop_index('idx_marketing_list_contact_subscribed', table_name='marketing_list_contacts')
    op.drop_index('idx_marketing_list_contact_org_list', table_name='marketing_list_contacts')
    op.drop_index('idx_marketing_list_contact_email', table_name='marketing_list_contacts')
    op.drop_table('marketing_list_contacts')
    op.drop_index(op.f('ix_leave_applications_organization_id'), table_name='leave_applications')
    op.drop_index(op.f('ix_leave_applications_leave_type_id'), table_name='leave_applications')
    op.drop_index(op.f('ix_leave_applications_id'), table_name='leave_applications')
    op.drop_index(op.f('ix_leave_applications_employee_id'), table_name='leave_applications')
    op.drop_index('idx_leave_application_status', table_name='leave_applications')
    op.drop_index('idx_leave_application_org_employee', table_name='leave_applications')
    op.drop_index('idx_leave_application_dates', table_name='leave_applications')
    op.drop_table('leave_applications')
    op.drop_index(op.f('ix_learning_path_programs_program_id'), table_name='learning_path_programs')
    op.drop_index(op.f('ix_learning_path_programs_learning_path_id'), table_name='learning_path_programs')
    op.drop_index(op.f('ix_learning_path_programs_id'), table_name='learning_path_programs')
    op.drop_index('idx_learning_path_program_sequence', table_name='learning_path_programs')
    op.drop_table('learning_path_programs')
    op.drop_index(op.f('ix_leads_status'), table_name='leads')
    op.drop_index(op.f('ix_leads_source'), table_name='leads')
    op.drop_index(op.f('ix_leads_organization_id'), table_name='leads')
    op.drop_index(op.f('ix_leads_lead_number'), table_name='leads')
    op.drop_index(op.f('ix_leads_id'), table_name='leads')
    op.drop_index(op.f('ix_leads_email'), table_name='leads')
    op.drop_index(op.f('ix_leads_company'), table_name='leads')
    op.drop_index('idx_lead_score', table_name='leads')
    op.drop_index('idx_lead_qualified', table_name='leads')
    op.drop_index('idx_lead_org_status', table_name='leads')
    op.drop_index('idx_lead_org_source', table_name='leads')
    op.drop_index('idx_lead_org_assigned', table_name='leads')
    op.drop_index('idx_lead_company', table_name='leads')
    op.drop_table('leads')
    op.drop_index(op.f('ix_job_applications_organization_id'), table_name='job_applications')
    op.drop_index(op.f('ix_job_applications_job_posting_id'), table_name='job_applications')
    op.drop_index(op.f('ix_job_applications_id'), table_name='job_applications')
    op.drop_index(op.f('ix_job_applications_candidate_id'), table_name='job_applications')
    op.drop_index('idx_job_application_org_status', table_name='job_applications')
    op.drop_index('idx_job_application_date', table_name='job_applications')
    op.drop_table('job_applications')
    op.drop_index(op.f('ix_inventory_transactions_organization_id'), table_name='inventory_transactions')
    op.drop_index(op.f('ix_inventory_transactions_id'), table_name='inventory_transactions')
    op.drop_index('idx_inventory_transaction_reference', table_name='inventory_transactions')
    op.drop_index('idx_inventory_transaction_org_type', table_name='inventory_transactions')
    op.drop_index('idx_inventory_transaction_org_product', table_name='inventory_transactions')
    op.drop_index('idx_inventory_transaction_org_date', table_name='inventory_transactions')
    op.drop_index('idx_inventory_transaction_created_at', table_name='inventory_transactions')
    op.drop_table('inventory_transactions')
    op.drop_index(op.f('ix_inventory_alerts_organization_id'), table_name='inventory_alerts')
    op.drop_index(op.f('ix_inventory_alerts_id'), table_name='inventory_alerts')
    op.drop_index('idx_inventory_alert_type', table_name='inventory_alerts')
    op.drop_index('idx_inventory_alert_org_status', table_name='inventory_alerts')
    op.drop_index('idx_inventory_alert_org_product', table_name='inventory_alerts')
    op.drop_index('idx_inventory_alert_org_priority', table_name='inventory_alerts')
    op.drop_index('idx_inventory_alert_created_at', table_name='inventory_alerts')
    op.drop_table('inventory_alerts')
    op.drop_index(op.f('ix_inter_department_voucher_items_id'), table_name='inter_department_voucher_items')
    op.drop_table('inter_department_voucher_items')
    op.drop_index(op.f('ix_integration_sync_jobs_organization_id'), table_name='integration_sync_jobs')
    op.drop_index(op.f('ix_integration_sync_jobs_job_type'), table_name='integration_sync_jobs')
    op.drop_index(op.f('ix_integration_sync_jobs_id'), table_name='integration_sync_jobs')
    op.drop_index(op.f('ix_integration_sync_jobs_entity_type'), table_name='integration_sync_jobs')
    op.drop_index('idx_sync_job_org_type', table_name='integration_sync_jobs')
    op.drop_index('idx_sync_job_org_status', table_name='integration_sync_jobs')
    op.drop_index('idx_sync_job_org_started', table_name='integration_sync_jobs')
    op.drop_index('idx_sync_job_org_integration', table_name='integration_sync_jobs')
    op.drop_table('integration_sync_jobs')
    op.drop_index(op.f('ix_integration_schedules_organization_id'), table_name='integration_schedules')
    op.drop_index(op.f('ix_integration_schedules_id'), table_name='integration_schedules')
    op.drop_index('idx_integration_schedule_org_next_run', table_name='integration_schedules')
    op.drop_index('idx_integration_schedule_org_integration', table_name='integration_schedules')
    op.drop_index('idx_integration_schedule_org_active', table_name='integration_schedules')
    op.drop_table('integration_schedules')
    op.drop_index(op.f('ix_integration_mappings_organization_id'), table_name='integration_mappings')
    op.drop_index(op.f('ix_integration_mappings_id'), table_name='integration_mappings')
    op.drop_index(op.f('ix_integration_mappings_entity_type'), table_name='integration_mappings')
    op.drop_index('idx_mapping_org_key_field', table_name='integration_mappings')
    op.drop_index('idx_mapping_org_integration', table_name='integration_mappings')
    op.drop_index('idx_mapping_org_entity', table_name='integration_mappings')
    op.drop_table('integration_mappings')
    op.drop_index(op.f('ix_integration_logs_organization_id'), table_name='integration_logs')
    op.drop_index(op.f('ix_integration_logs_logged_at'), table_name='integration_logs')
    op.drop_index(op.f('ix_integration_logs_log_level'), table_name='integration_logs')
    op.drop_index(op.f('ix_integration_logs_id'), table_name='integration_logs')
    op.drop_index(op.f('ix_integration_logs_category'), table_name='integration_logs')
    op.drop_index('idx_integration_log_org_logged', table_name='integration_logs')
    op.drop_index('idx_integration_log_org_level', table_name='integration_logs')
    op.drop_index('idx_integration_log_org_integration', table_name='integration_logs')
    op.drop_index('idx_integration_log_org_category', table_name='integration_logs')
    op.drop_table('integration_logs')
    op.drop_index(op.f('ix_forecast_versions_organization_id'), table_name='forecast_versions')
    op.drop_index(op.f('ix_forecast_versions_id'), table_name='forecast_versions')
    op.drop_index(op.f('ix_forecast_versions_financial_forecast_id'), table_name='forecast_versions')
    op.drop_index('idx_forecast_version_current', table_name='forecast_versions')
    op.drop_table('forecast_versions')
    op.drop_index(op.f('ix_exhibition_events_organization_id'), table_name='exhibition_events')
    op.drop_index(op.f('ix_exhibition_events_id'), table_name='exhibition_events')
    op.drop_index('idx_exhibition_event_org_status', table_name='exhibition_events')
    op.drop_index('idx_exhibition_event_active', table_name='exhibition_events')
    op.drop_table('exhibition_events')
    op.drop_index(op.f('ix_employee_skills_skill_id'), table_name='employee_skills')
    op.drop_index(op.f('ix_employee_skills_organization_id'), table_name='employee_skills')
    op.drop_index(op.f('ix_employee_skills_id'), table_name='employee_skills')
    op.drop_index(op.f('ix_employee_skills_employee_id'), table_name='employee_skills')
    op.drop_index('idx_employee_skill_proficiency', table_name='employee_skills')
    op.drop_index('idx_employee_skill_org_employee', table_name='employee_skills')
    op.drop_table('employee_skills')
    op.drop_index(op.f('ix_employee_loans_organization_id'), table_name='employee_loans')
    op.drop_index(op.f('ix_employee_loans_id'), table_name='employee_loans')
    op.drop_index(op.f('ix_employee_loans_employee_id'), table_name='employee_loans')
    op.drop_index('idx_employee_loan_status', table_name='employee_loans')
    op.drop_index('idx_employee_loan_org_employee', table_name='employee_loans')
    op.drop_index('idx_employee_loan_dates', table_name='employee_loans')
    op.drop_table('employee_loans')
    op.drop_index(op.f('ix_employee_learning_paths_organization_id'), table_name='employee_learning_paths')
    op.drop_index(op.f('ix_employee_learning_paths_learning_path_id'), table_name='employee_learning_paths')
    op.drop_index(op.f('ix_employee_learning_paths_id'), table_name='employee_learning_paths')
    op.drop_index(op.f('ix_employee_learning_paths_employee_id'), table_name='employee_learning_paths')
    op.drop_index('idx_employee_learning_path_status', table_name='employee_learning_paths')
    op.drop_index('idx_employee_learning_path_org_employee', table_name='employee_learning_paths')
    op.drop_table('employee_learning_paths')
    op.drop_index(op.f('ix_debit_notes_voucher_number'), table_name='debit_notes')
    op.drop_index(op.f('ix_debit_notes_organization_id'), table_name='debit_notes')
    op.drop_index(op.f('ix_debit_notes_id'), table_name='debit_notes')
    op.drop_index('idx_dn_org_vendor', table_name='debit_notes')
    op.drop_index('idx_dn_org_date', table_name='debit_notes')
    op.drop_index('idx_dn_org_customer', table_name='debit_notes')
    op.drop_table('debit_notes')
    op.drop_index(op.f('ix_dcf_models_organization_id'), table_name='dcf_models')
    op.drop_index(op.f('ix_dcf_models_id'), table_name='dcf_models')
    op.drop_index(op.f('ix_dcf_models_financial_model_id'), table_name='dcf_models')
    op.drop_index('idx_dcf_model_org', table_name='dcf_models')
    op.drop_table('dcf_models')
    op.drop_index(op.f('ix_data_transformation_rules_organization_id'), table_name='data_transformation_rules')
    op.drop_index(op.f('ix_data_transformation_rules_id'), table_name='data_transformation_rules')
    op.drop_index(op.f('ix_data_transformation_rules_entity_type'), table_name='data_transformation_rules')
    op.drop_index('idx_transformation_rule_org_integration', table_name='data_transformation_rules')
    op.drop_index('idx_transformation_rule_org_entity', table_name='data_transformation_rules')
    op.drop_index('idx_transformation_rule_org_active', table_name='data_transformation_rules')
    op.drop_table('data_transformation_rules')
    op.drop_index(op.f('ix_customer_segments_organization_id'), table_name='customer_segments')
    op.drop_index(op.f('ix_customer_segments_id'), table_name='customer_segments')
    op.drop_index('idx_customer_segment_org_customer', table_name='customer_segments')
    op.drop_index('idx_customer_segment_name_active', table_name='customer_segments')
    op.drop_index('idx_customer_segment_assigned_date', table_name='customer_segments')
    op.drop_table('customer_segments')
    op.drop_index(op.f('ix_customer_interactions_organization_id'), table_name='customer_interactions')
    op.drop_index(op.f('ix_customer_interactions_id'), table_name='customer_interactions')
    op.drop_index('idx_customer_interaction_type_status', table_name='customer_interactions')
    op.drop_index('idx_customer_interaction_org_customer', table_name='customer_interactions')
    op.drop_index('idx_customer_interaction_date', table_name='customer_interactions')
    op.drop_table('customer_interactions')
    op.drop_index(op.f('ix_customer_files_organization_id'), table_name='customer_files')
    op.drop_index(op.f('ix_customer_files_id'), table_name='customer_files')
    op.drop_index('idx_customer_file_org_customer', table_name='customer_files')
    op.drop_table('customer_files')
    op.drop_index(op.f('ix_customer_analytics_organization_id'), table_name='customer_analytics')
    op.drop_index(op.f('ix_customer_analytics_id'), table_name='customer_analytics')
    op.drop_index(op.f('ix_customer_analytics_customer_id'), table_name='customer_analytics')
    op.drop_index('idx_customer_analytics_org', table_name='customer_analytics')
    op.drop_table('customer_analytics')
    op.drop_index(op.f('ix_credit_notes_voucher_number'), table_name='credit_notes')
    op.drop_index(op.f('ix_credit_notes_organization_id'), table_name='credit_notes')
    op.drop_index(op.f('ix_credit_notes_id'), table_name='credit_notes')
    op.drop_index('idx_cn_org_vendor', table_name='credit_notes')
    op.drop_index('idx_cn_org_date', table_name='credit_notes')
    op.drop_index('idx_cn_org_customer', table_name='credit_notes')
    op.drop_table('credit_notes')
    op.drop_index(op.f('ix_categories_parent_category_id'), table_name='categories')
    op.drop_index(op.f('ix_categories_organization_id'), table_name='categories')
    op.drop_index(op.f('ix_categories_name'), table_name='categories')
    op.drop_index(op.f('ix_categories_id'), table_name='categories')
    op.drop_index(op.f('ix_categories_company_id'), table_name='categories')
    op.drop_index(op.f('ix_categories_code'), table_name='categories')
    op.drop_index(op.f('ix_categories_category_type'), table_name='categories')
    op.drop_index('idx_category_parent', table_name='categories')
    op.drop_index('idx_category_org_type_active', table_name='categories')
    op.drop_table('categories')
    op.drop_index(op.f('ix_campaign_analytics_organization_id'), table_name='campaign_analytics')
    op.drop_index(op.f('ix_campaign_analytics_id'), table_name='campaign_analytics')
    op.drop_index('idx_campaign_analytics_org_campaign', table_name='campaign_analytics')
    op.drop_index('idx_campaign_analytics_date', table_name='campaign_analytics')
    op.drop_table('campaign_analytics')
    op.drop_index(op.f('ix_calendar_shares_id'), table_name='calendar_shares')
    op.drop_table('calendar_shares')
    op.drop_index(op.f('ix_business_rule_executions_id'), table_name='business_rule_executions')
    op.drop_index(op.f('ix_business_rule_executions_entity_type'), table_name='business_rule_executions')
    op.drop_index(op.f('ix_business_rule_executions_entity_id'), table_name='business_rule_executions')
    op.drop_index(op.f('ix_business_rule_executions_business_rule_id'), table_name='business_rule_executions')
    op.drop_index('idx_business_rule_execution_rule', table_name='business_rule_executions')
    op.drop_index('idx_business_rule_execution_entity', table_name='business_rule_executions')
    op.drop_index('idx_business_rule_execution_date', table_name='business_rule_executions')
    op.drop_table('business_rule_executions')
    op.drop_index(op.f('ix_business_driver_models_organization_id'), table_name='business_driver_models')
    op.drop_index(op.f('ix_business_driver_models_id'), table_name='business_driver_models')
    op.drop_index(op.f('ix_business_driver_models_financial_forecast_id'), table_name='business_driver_models')
    op.drop_index(op.f('ix_business_driver_models_driver_category'), table_name='business_driver_models')
    op.drop_index('idx_driver_forecast_category', table_name='business_driver_models')
    op.drop_table('business_driver_models')
    op.drop_index(op.f('ix_bill_of_materials_organization_id'), table_name='bill_of_materials')
    op.drop_index(op.f('ix_bill_of_materials_id'), table_name='bill_of_materials')
    op.drop_index('idx_bom_org_output', table_name='bill_of_materials')
    op.drop_index('idx_bom_org_created', table_name='bill_of_materials')
    op.drop_index('idx_bom_org_active', table_name='bill_of_materials')
    op.drop_table('bill_of_materials')
    op.drop_index(op.f('ix_bank_reconciliations_reconciliation_date'), table_name='bank_reconciliations')
    op.drop_index(op.f('ix_bank_reconciliations_organization_id'), table_name='bank_reconciliations')
    op.drop_index(op.f('ix_bank_reconciliations_id'), table_name='bank_reconciliations')
    op.drop_index(op.f('ix_bank_reconciliations_bank_account_id'), table_name='bank_reconciliations')
    op.drop_index('idx_recon_status', table_name='bank_reconciliations')
    op.drop_index('idx_recon_org_date', table_name='bank_reconciliations')
    op.drop_table('bank_reconciliations')
    op.drop_index(op.f('ix_attendance_records_organization_id'), table_name='attendance_records')
    op.drop_index(op.f('ix_attendance_records_id'), table_name='attendance_records')
    op.drop_index(op.f('ix_attendance_records_employee_id'), table_name='attendance_records')
    op.drop_index(op.f('ix_attendance_records_attendance_date'), table_name='attendance_records')
    op.drop_index('idx_attendance_record_status', table_name='attendance_records')
    op.drop_index('idx_attendance_record_org_date', table_name='attendance_records')
    op.drop_table('attendance_records')
    op.drop_index(op.f('ix_assets_organization_id'), table_name='assets')
    op.drop_index(op.f('ix_assets_id'), table_name='assets')
    op.drop_index('idx_asset_org_status', table_name='assets')
    op.drop_index('idx_asset_org_location', table_name='assets')
    op.drop_index('idx_asset_org_created', table_name='assets')
    op.drop_index('idx_asset_org_category', table_name='assets')
    op.drop_table('assets')
    op.drop_index(op.f('ix_api_usage_logs_timestamp'), table_name='api_usage_logs')
    op.drop_index(op.f('ix_api_usage_logs_status_code'), table_name='api_usage_logs')
    op.drop_index(op.f('ix_api_usage_logs_request_ip'), table_name='api_usage_logs')
    op.drop_index(op.f('ix_api_usage_logs_request_id'), table_name='api_usage_logs')
    op.drop_index(op.f('ix_api_usage_logs_organization_id'), table_name='api_usage_logs')
    op.drop_index(op.f('ix_api_usage_logs_id'), table_name='api_usage_logs')
    op.drop_index(op.f('ix_api_usage_logs_endpoint'), table_name='api_usage_logs')
    op.drop_index('idx_api_usage_org_timestamp', table_name='api_usage_logs')
    op.drop_index('idx_api_usage_org_status', table_name='api_usage_logs')
    op.drop_index('idx_api_usage_org_endpoint', table_name='api_usage_logs')
    op.drop_index('idx_api_usage_org_api_key', table_name='api_usage_logs')
    op.drop_table('api_usage_logs')
    op.drop_index(op.f('ix_api_errors_request_id'), table_name='api_errors')
    op.drop_index(op.f('ix_api_errors_organization_id'), table_name='api_errors')
    op.drop_index(op.f('ix_api_errors_occurred_at'), table_name='api_errors')
    op.drop_index(op.f('ix_api_errors_id'), table_name='api_errors')
    op.drop_index(op.f('ix_api_errors_error_type'), table_name='api_errors')
    op.drop_index(op.f('ix_api_errors_error_code'), table_name='api_errors')
    op.drop_index(op.f('ix_api_errors_endpoint'), table_name='api_errors')
    op.drop_index('idx_api_error_org_type', table_name='api_errors')
    op.drop_index('idx_api_error_org_severity', table_name='api_errors')
    op.drop_index('idx_api_error_org_resolved', table_name='api_errors')
    op.drop_index('idx_api_error_org_occurred', table_name='api_errors')
    op.drop_table('api_errors')
    op.drop_index(op.f('ix_anomaly_detections_severity'), table_name='anomaly_detections')
    op.drop_index(op.f('ix_anomaly_detections_organization_id'), table_name='anomaly_detections')
    op.drop_index(op.f('ix_anomaly_detections_model_id'), table_name='anomaly_detections')
    op.drop_index(op.f('ix_anomaly_detections_id'), table_name='anomaly_detections')
    op.drop_index(op.f('ix_anomaly_detections_anomaly_type'), table_name='anomaly_detections')
    op.drop_index('idx_anomaly_detection_org_type', table_name='anomaly_detections')
    op.drop_index('idx_anomaly_detection_org_status', table_name='anomaly_detections')
    op.drop_index('idx_anomaly_detection_org_severity', table_name='anomaly_detections')
    op.drop_index('idx_anomaly_detection_org_detected', table_name='anomaly_detections')
    op.drop_table('anomaly_detections')
    op.drop_index(op.f('ix_analytics_summaries_summary_type'), table_name='analytics_summaries')
    op.drop_index(op.f('ix_analytics_summaries_summary_date'), table_name='analytics_summaries')
    op.drop_index(op.f('ix_analytics_summaries_organization_id'), table_name='analytics_summaries')
    op.drop_index(op.f('ix_analytics_summaries_id'), table_name='analytics_summaries')
    op.drop_index('idx_analytics_summary_technician', table_name='analytics_summaries')
    op.drop_index('idx_analytics_summary_org_type_date', table_name='analytics_summaries')
    op.drop_index('idx_analytics_summary_customer', table_name='analytics_summaries')
    op.drop_table('analytics_summaries')
    op.drop_index(op.f('ix_ai_insights_organization_id'), table_name='ai_insights')
    op.drop_index(op.f('ix_ai_insights_insight_type'), table_name='ai_insights')
    op.drop_index(op.f('ix_ai_insights_id'), table_name='ai_insights')
    op.drop_index(op.f('ix_ai_insights_category'), table_name='ai_insights')
    op.drop_index('idx_ai_insight_org_type', table_name='ai_insights')
    op.drop_index('idx_ai_insight_org_status', table_name='ai_insights')
    op.drop_index('idx_ai_insight_org_priority', table_name='ai_insights')
    op.drop_index('idx_ai_insight_org_category', table_name='ai_insights')
    op.drop_index('idx_ai_insight_org_active', table_name='ai_insights')
    op.drop_table('ai_insights')
    op.drop_index(op.f('ix_accounts_receivable_organization_id'), table_name='accounts_receivable')
    op.drop_index(op.f('ix_accounts_receivable_invoice_number'), table_name='accounts_receivable')
    op.drop_index(op.f('ix_accounts_receivable_id'), table_name='accounts_receivable')
    op.drop_index(op.f('ix_accounts_receivable_customer_id'), table_name='accounts_receivable')
    op.drop_index('idx_ar_status', table_name='accounts_receivable')
    op.drop_index('idx_ar_org_customer', table_name='accounts_receivable')
    op.drop_table('accounts_receivable')
    op.drop_index(op.f('ix_accounts_payable_vendor_id'), table_name='accounts_payable')
    op.drop_index(op.f('ix_accounts_payable_organization_id'), table_name='accounts_payable')
    op.drop_index(op.f('ix_accounts_payable_invoice_number'), table_name='accounts_payable')
    op.drop_index(op.f('ix_accounts_payable_id'), table_name='accounts_payable')
    op.drop_index('idx_ap_status', table_name='accounts_payable')
    op.drop_index('idx_ap_org_vendor', table_name='accounts_payable')
    op.drop_table('accounts_payable')
    op.drop_index(op.f('ix_workflow_templates_advanced_organization_id'), table_name='workflow_templates_advanced')
    op.drop_index(op.f('ix_workflow_templates_advanced_name'), table_name='workflow_templates_advanced')
    op.drop_index(op.f('ix_workflow_templates_advanced_id'), table_name='workflow_templates_advanced')
    op.drop_index(op.f('ix_workflow_templates_advanced_company_id'), table_name='workflow_templates_advanced')
    op.drop_index(op.f('ix_workflow_templates_advanced_code'), table_name='workflow_templates_advanced')
    op.drop_index(op.f('ix_workflow_templates_advanced_category'), table_name='workflow_templates_advanced')
    op.drop_index('idx_workflow_template_adv_org_category', table_name='workflow_templates_advanced')
    op.drop_index('idx_workflow_template_active', table_name='workflow_templates_advanced')
    op.drop_table('workflow_templates_advanced')
    op.drop_index(op.f('ix_workflow_templates_organization_id'), table_name='workflow_templates')
    op.drop_index(op.f('ix_workflow_templates_name'), table_name='workflow_templates')
    op.drop_index(op.f('ix_workflow_templates_id'), table_name='workflow_templates')
    op.drop_index(op.f('ix_workflow_templates_company_id'), table_name='workflow_templates')
    op.drop_index(op.f('ix_workflow_templates_category'), table_name='workflow_templates')
    op.drop_index('idx_workflow_template_org_status', table_name='workflow_templates')
    op.drop_index('idx_workflow_template_org_entity', table_name='workflow_templates')
    op.drop_index('idx_workflow_template_org_category', table_name='workflow_templates')
    op.drop_table('workflow_templates')
    op.drop_index(op.f('ix_webhooks_organization_id'), table_name='webhooks')
    op.drop_index(op.f('ix_webhooks_name'), table_name='webhooks')
    op.drop_index(op.f('ix_webhooks_id'), table_name='webhooks')
    op.drop_index(op.f('ix_webhooks_company_id'), table_name='webhooks')
    op.drop_index('idx_webhook_org_status', table_name='webhooks')
    op.drop_index('idx_webhook_org_events', table_name='webhooks')
    op.drop_table('webhooks')
    op.drop_index(op.f('ix_vendors_organization_id'), table_name='vendors')
    op.drop_index(op.f('ix_vendors_name'), table_name='vendors')
    op.drop_index(op.f('ix_vendors_id'), table_name='vendors')
    op.drop_index(op.f('ix_vendors_company_id'), table_name='vendors')
    op.drop_index('idx_vendor_org_name', table_name='vendors')
    op.drop_index('idx_vendor_org_active', table_name='vendors')
    op.drop_table('vendors')
    op.drop_index(op.f('ix_user_service_roles_organization_id'), table_name='user_service_roles')
    op.drop_index(op.f('ix_user_service_roles_id'), table_name='user_service_roles')
    op.drop_index('idx_user_service_role_user', table_name='user_service_roles')
    op.drop_index('idx_user_service_role_role', table_name='user_service_roles')
    op.drop_index('idx_user_service_role_active', table_name='user_service_roles')
    op.drop_table('user_service_roles')
    op.drop_index(op.f('ix_user_email_tokens_user_id'), table_name='user_email_tokens')
    op.drop_index(op.f('ix_user_email_tokens_organization_id'), table_name='user_email_tokens')
    op.drop_index(op.f('ix_user_email_tokens_id'), table_name='user_email_tokens')
    op.drop_index(op.f('ix_user_email_tokens_email_address'), table_name='user_email_tokens')
    op.drop_table('user_email_tokens')
    op.drop_index(op.f('ix_user_companies_organization_id'), table_name='user_companies')
    op.drop_index(op.f('ix_user_companies_id'), table_name='user_companies')
    op.drop_index('idx_user_company_user', table_name='user_companies')
    op.drop_index('idx_user_company_org', table_name='user_companies')
    op.drop_index('idx_user_company_company', table_name='user_companies')
    op.drop_index('idx_user_company_admin', table_name='user_companies')
    op.drop_index('idx_user_company_active', table_name='user_companies')
    op.drop_table('user_companies')
    op.drop_index(op.f('ix_units_unit_type'), table_name='units')
    op.drop_index(op.f('ix_units_symbol'), table_name='units')
    op.drop_index(op.f('ix_units_organization_id'), table_name='units')
    op.drop_index(op.f('ix_units_name'), table_name='units')
    op.drop_index(op.f('ix_units_id'), table_name='units')
    op.drop_index(op.f('ix_units_company_id'), table_name='units')
    op.drop_index(op.f('ix_units_base_unit_id'), table_name='units')
    op.drop_index('idx_unit_org_type_active', table_name='units')
    op.drop_index('idx_unit_base', table_name='units')
    op.drop_table('units')
    op.drop_index(op.f('ix_transaction_comparables_transaction_date'), table_name='transaction_comparables')
    op.drop_index(op.f('ix_transaction_comparables_organization_id'), table_name='transaction_comparables')
    op.drop_index(op.f('ix_transaction_comparables_id'), table_name='transaction_comparables')
    op.drop_index('idx_transaction_comps_industry', table_name='transaction_comparables')
    op.drop_index('idx_transaction_comps_date', table_name='transaction_comparables')
    op.drop_table('transaction_comparables')
    op.drop_index(op.f('ix_training_programs_program_name'), table_name='training_programs')
    op.drop_index(op.f('ix_training_programs_program_code'), table_name='training_programs')
    op.drop_index(op.f('ix_training_programs_organization_id'), table_name='training_programs')
    op.drop_index(op.f('ix_training_programs_id'), table_name='training_programs')
    op.drop_index('idx_training_program_org_status', table_name='training_programs')
    op.drop_index('idx_training_program_category', table_name='training_programs')
    op.drop_table('training_programs')
    op.drop_index(op.f('ix_trading_comparables_ticker_symbol'), table_name='trading_comparables')
    op.drop_index(op.f('ix_trading_comparables_organization_id'), table_name='trading_comparables')
    op.drop_index(op.f('ix_trading_comparables_id'), table_name='trading_comparables')
    op.drop_index(op.f('ix_trading_comparables_as_of_date'), table_name='trading_comparables')
    op.drop_index('idx_trading_comps_industry', table_name='trading_comparables')
    op.drop_index('idx_trading_comps_date', table_name='trading_comparables')
    op.drop_table('trading_comparables')
    op.drop_index(op.f('ix_task_projects_name'), table_name='task_projects')
    op.drop_index(op.f('ix_task_projects_id'), table_name='task_projects')
    op.drop_table('task_projects')
    op.drop_index(op.f('ix_tally_voucher_mappings_tally_voucher_type'), table_name='tally_voucher_mappings')
    op.drop_index(op.f('ix_tally_voucher_mappings_tally_configuration_id'), table_name='tally_voucher_mappings')
    op.drop_index(op.f('ix_tally_voucher_mappings_id'), table_name='tally_voucher_mappings')
    op.drop_index(op.f('ix_tally_voucher_mappings_erp_voucher_type'), table_name='tally_voucher_mappings')
    op.drop_index('idx_tally_voucher_type', table_name='tally_voucher_mappings')
    op.drop_table('tally_voucher_mappings')
    op.drop_index(op.f('ix_tally_sync_logs_triggered_by'), table_name='tally_sync_logs')
    op.drop_index(op.f('ix_tally_sync_logs_tally_configuration_id'), table_name='tally_sync_logs')
    op.drop_index(op.f('ix_tally_sync_logs_sync_type'), table_name='tally_sync_logs')
    op.drop_index(op.f('ix_tally_sync_logs_sync_status'), table_name='tally_sync_logs')
    op.drop_index(op.f('ix_tally_sync_logs_sync_direction'), table_name='tally_sync_logs')
    op.drop_index(op.f('ix_tally_sync_logs_started_at'), table_name='tally_sync_logs')
    op.drop_index(op.f('ix_tally_sync_logs_id'), table_name='tally_sync_logs')
    op.drop_index('idx_sync_log_type_status', table_name='tally_sync_logs')
    op.drop_index('idx_sync_log_started', table_name='tally_sync_logs')
    op.drop_table('tally_sync_logs')
    op.drop_index(op.f('ix_tally_ledger_mappings_tally_ledger_name'), table_name='tally_ledger_mappings')
    op.drop_index(op.f('ix_tally_ledger_mappings_tally_ledger_guid'), table_name='tally_ledger_mappings')
    op.drop_index(op.f('ix_tally_ledger_mappings_tally_configuration_id'), table_name='tally_ledger_mappings')
    op.drop_index(op.f('ix_tally_ledger_mappings_id'), table_name='tally_ledger_mappings')
    op.drop_index(op.f('ix_tally_ledger_mappings_chart_of_accounts_id'), table_name='tally_ledger_mappings')
    op.drop_index('idx_tally_ledger_name', table_name='tally_ledger_mappings')
    op.drop_table('tally_ledger_mappings')
    op.drop_index(op.f('ix_survey_templates_organization_id'), table_name='survey_templates')
    op.drop_index(op.f('ix_survey_templates_name'), table_name='survey_templates')
    op.drop_index(op.f('ix_survey_templates_id'), table_name='survey_templates')
    op.drop_index('idx_survey_template_trigger', table_name='survey_templates')
    op.drop_index('idx_survey_template_org_type', table_name='survey_templates')
    op.drop_index('idx_survey_template_active', table_name='survey_templates')
    op.drop_table('survey_templates')
    op.drop_index(op.f('ix_stock_locations_warehouse_id'), table_name='stock_locations')
    op.drop_index(op.f('ix_stock_locations_parent_location_id'), table_name='stock_locations')
    op.drop_index(op.f('ix_stock_locations_location_code'), table_name='stock_locations')
    op.drop_index(op.f('ix_stock_locations_id'), table_name='stock_locations')
    op.drop_table('stock_locations')
    op.drop_index(op.f('ix_sticky_notes_user_id'), table_name='sticky_notes')
    op.drop_index(op.f('ix_sticky_notes_organization_id'), table_name='sticky_notes')
    op.drop_index(op.f('ix_sticky_notes_id'), table_name='sticky_notes')
    op.drop_table('sticky_notes')
    op.drop_index(op.f('ix_sla_policies_organization_id'), table_name='sla_policies')
    op.drop_index(op.f('ix_sla_policies_id'), table_name='sla_policies')
    op.drop_index('idx_sla_policy_ticket_type', table_name='sla_policies')
    op.drop_index('idx_sla_policy_priority', table_name='sla_policies')
    op.drop_index('idx_sla_policy_org_active', table_name='sla_policies')
    op.drop_index('idx_sla_policy_default', table_name='sla_policies')
    op.drop_table('sla_policies')
    op.drop_index(op.f('ix_skills_organization_id'), table_name='skills')
    op.drop_index(op.f('ix_skills_name'), table_name='skills')
    op.drop_index(op.f('ix_skills_id'), table_name='skills')
    op.drop_index('idx_skill_org_type', table_name='skills')
    op.drop_index('idx_skill_active', table_name='skills')
    op.drop_table('skills')
    op.drop_index(op.f('ix_service_role_permissions_organization_id'), table_name='service_role_permissions')
    op.drop_index(op.f('ix_service_role_permissions_id'), table_name='service_role_permissions')
    op.drop_index('idx_service_role_permission_role', table_name='service_role_permissions')
    op.drop_index('idx_service_role_permission_permission', table_name='service_role_permissions')
    op.drop_table('service_role_permissions')
    op.drop_index(op.f('ix_seo_meta_tags_page_path'), table_name='seo_meta_tags')
    op.drop_index(op.f('ix_seo_meta_tags_organization_id'), table_name='seo_meta_tags')
    op.drop_index(op.f('ix_seo_meta_tags_id'), table_name='seo_meta_tags')
    op.drop_index('idx_seo_meta_org_path', table_name='seo_meta_tags')
    op.drop_index('idx_seo_meta_active', table_name='seo_meta_tags')
    op.drop_table('seo_meta_tags')
    op.drop_index(op.f('ix_sales_pipelines_organization_id'), table_name='sales_pipelines')
    op.drop_index(op.f('ix_sales_pipelines_id'), table_name='sales_pipelines')
    op.drop_index('idx_sales_pipeline_org_default', table_name='sales_pipelines')
    op.drop_table('sales_pipelines')
    op.drop_index(op.f('ix_sales_forecasts_organization_id'), table_name='sales_forecasts')
    op.drop_index(op.f('ix_sales_forecasts_id'), table_name='sales_forecasts')
    op.drop_index('idx_sales_forecast_org_period', table_name='sales_forecasts')
    op.drop_table('sales_forecasts')
    op.drop_index(op.f('ix_risk_analysis_risk_category'), table_name='risk_analysis')
    op.drop_index(op.f('ix_risk_analysis_organization_id'), table_name='risk_analysis')
    op.drop_index(op.f('ix_risk_analysis_id'), table_name='risk_analysis')
    op.drop_index('idx_risk_org_category', table_name='risk_analysis')
    op.drop_index('idx_risk_alert_level', table_name='risk_analysis')
    op.drop_table('risk_analysis')
    op.drop_index(op.f('ix_rfq_items_rfq_id'), table_name='rfq_items')
    op.drop_index(op.f('ix_rfq_items_item_code'), table_name='rfq_items')
    op.drop_index(op.f('ix_rfq_items_id'), table_name='rfq_items')
    op.drop_table('rfq_items')
    op.drop_index(op.f('ix_report_configurations_organization_id'), table_name='report_configurations')
    op.drop_index(op.f('ix_report_configurations_id'), table_name='report_configurations')
    op.drop_index('idx_report_configuration_schedule', table_name='report_configurations')
    op.drop_index('idx_report_configuration_org_active', table_name='report_configurations')
    op.drop_table('report_configurations')
    op.drop_index(op.f('ix_receipt_vouchers_voucher_number'), table_name='receipt_vouchers')
    op.drop_index(op.f('ix_receipt_vouchers_organization_id'), table_name='receipt_vouchers')
    op.drop_index(op.f('ix_receipt_vouchers_id'), table_name='receipt_vouchers')
    op.drop_index('idx_rv_org_entity', table_name='receipt_vouchers')
    op.drop_index('idx_rv_org_date', table_name='receipt_vouchers')
    op.drop_table('receipt_vouchers')
    op.drop_index(op.f('ix_products_organization_id'), table_name='products')
    op.drop_index(op.f('ix_products_name'), table_name='products')
    op.drop_index(op.f('ix_products_id'), table_name='products')
    op.drop_index(op.f('ix_products_company_id'), table_name='products')
    op.drop_index('idx_product_org_name', table_name='products')
    op.drop_index('idx_product_org_hsn', table_name='products')
    op.drop_index('idx_product_org_active', table_name='products')
    op.drop_table('products')
    op.drop_index(op.f('ix_payroll_settings_organization_id'), table_name='payroll_settings')
    op.drop_index(op.f('ix_payroll_settings_id'), table_name='payroll_settings')
    op.drop_table('payroll_settings')
    op.drop_index(op.f('ix_payroll_periods_organization_id'), table_name='payroll_periods')
    op.drop_index(op.f('ix_payroll_periods_id'), table_name='payroll_periods')
    op.drop_index('idx_payroll_period_org_status', table_name='payroll_periods')
    op.drop_index('idx_payroll_period_dates', table_name='payroll_periods')
    op.drop_table('payroll_periods')
    op.drop_index(op.f('ix_payment_vouchers_voucher_number'), table_name='payment_vouchers')
    op.drop_index(op.f('ix_payment_vouchers_organization_id'), table_name='payment_vouchers')
    op.drop_index(op.f('ix_payment_vouchers_id'), table_name='payment_vouchers')
    op.drop_index('idx_pv_payment_org_entity', table_name='payment_vouchers')
    op.drop_index('idx_pv_payment_org_date', table_name='payment_vouchers')
    op.drop_table('payment_vouchers')
    op.drop_index(op.f('ix_payment_terms_extended_organization_id'), table_name='payment_terms_extended')
    op.drop_index(op.f('ix_payment_terms_extended_name'), table_name='payment_terms_extended')
    op.drop_index(op.f('ix_payment_terms_extended_id'), table_name='payment_terms_extended')
    op.drop_index(op.f('ix_payment_terms_extended_company_id'), table_name='payment_terms_extended')
    op.drop_index(op.f('ix_payment_terms_extended_code'), table_name='payment_terms_extended')
    op.drop_index('idx_payment_terms_ext_org_active', table_name='payment_terms_extended')
    op.drop_index('idx_payment_terms_ext_default', table_name='payment_terms_extended')
    op.drop_table('payment_terms_extended')
    op.drop_index(op.f('ix_organization_roles_organization_id'), table_name='organization_roles')
    op.drop_index(op.f('ix_organization_roles_id'), table_name='organization_roles')
    op.drop_index('idx_org_role_org_active', table_name='organization_roles')
    op.drop_index('idx_org_role_hierarchy', table_name='organization_roles')
    op.drop_table('organization_roles')
    op.drop_index(op.f('ix_organization_approval_settings_organization_id'), table_name='organization_approval_settings')
    op.drop_index(op.f('ix_organization_approval_settings_id'), table_name='organization_approval_settings')
    op.drop_index('idx_approval_settings_model', table_name='organization_approval_settings')
    op.drop_table('organization_approval_settings')
    op.drop_index(op.f('ix_oauth_states_user_id'), table_name='oauth_states')
    op.drop_index(op.f('ix_oauth_states_state'), table_name='oauth_states')
    op.drop_index(op.f('ix_oauth_states_organization_id'), table_name='oauth_states')
    op.drop_index(op.f('ix_oauth_states_id'), table_name='oauth_states')
    op.drop_table('oauth_states')
    op.drop_index(op.f('ix_notification_templates_organization_id'), table_name='notification_templates')
    op.drop_index(op.f('ix_notification_templates_name'), table_name='notification_templates')
    op.drop_index(op.f('ix_notification_templates_id'), table_name='notification_templates')
    op.drop_index('idx_notification_template_org_type', table_name='notification_templates')
    op.drop_index('idx_notification_template_org_channel', table_name='notification_templates')
    op.drop_table('notification_templates')
    op.drop_index(op.f('ix_ml_forecast_models_organization_id'), table_name='ml_forecast_models')
    op.drop_index(op.f('ix_ml_forecast_models_model_type'), table_name='ml_forecast_models')
    op.drop_index(op.f('ix_ml_forecast_models_id'), table_name='ml_forecast_models')
    op.drop_index('idx_ml_model_org_type', table_name='ml_forecast_models')
    op.drop_index('idx_ml_model_active_prod', table_name='ml_forecast_models')
    op.drop_table('ml_forecast_models')
    op.drop_index(op.f('ix_migration_jobs_organization_id'), table_name='migration_jobs')
    op.drop_index(op.f('ix_migration_jobs_id'), table_name='migration_jobs')
    op.drop_index(op.f('ix_migration_jobs_created_by'), table_name='migration_jobs')
    op.drop_index('idx_migration_job_org_status', table_name='migration_jobs')
    op.drop_index('idx_migration_job_created_by', table_name='migration_jobs')
    op.drop_table('migration_jobs')
    op.drop_index(op.f('ix_master_tax_codes_tax_type'), table_name='master_tax_codes')
    op.drop_index(op.f('ix_master_tax_codes_organization_id'), table_name='master_tax_codes')
    op.drop_index(op.f('ix_master_tax_codes_name'), table_name='master_tax_codes')
    op.drop_index(op.f('ix_master_tax_codes_id'), table_name='master_tax_codes')
    op.drop_index(op.f('ix_master_tax_codes_company_id'), table_name='master_tax_codes')
    op.drop_index(op.f('ix_master_tax_codes_code'), table_name='master_tax_codes')
    op.drop_index('idx_tax_code_rate', table_name='master_tax_codes')
    op.drop_index('idx_tax_code_org_type_active', table_name='master_tax_codes')
    op.drop_table('master_tax_codes')
    op.drop_index(op.f('ix_marketing_lists_organization_id'), table_name='marketing_lists')
    op.drop_index(op.f('ix_marketing_lists_name'), table_name='marketing_lists')
    op.drop_index(op.f('ix_marketing_lists_id'), table_name='marketing_lists')
    op.drop_index('idx_marketing_list_org_type', table_name='marketing_lists')
    op.drop_index('idx_marketing_list_active', table_name='marketing_lists')
    op.drop_table('marketing_lists')
    op.drop_index(op.f('ix_learning_paths_path_name'), table_name='learning_paths')
    op.drop_index(op.f('ix_learning_paths_organization_id'), table_name='learning_paths')
    op.drop_index(op.f('ix_learning_paths_id'), table_name='learning_paths')
    op.drop_index('idx_learning_path_org_status', table_name='learning_paths')
    op.drop_index('idx_learning_path_level', table_name='learning_paths')
    op.drop_table('learning_paths')
    op.drop_index(op.f('ix_keyword_analysis_organization_id'), table_name='keyword_analysis')
    op.drop_index(op.f('ix_keyword_analysis_keyword'), table_name='keyword_analysis')
    op.drop_index(op.f('ix_keyword_analysis_id'), table_name='keyword_analysis')
    op.drop_index('idx_keyword_target', table_name='keyword_analysis')
    op.drop_index('idx_keyword_priority', table_name='keyword_analysis')
    op.drop_index('idx_keyword_org_keyword', table_name='keyword_analysis')
    op.drop_table('keyword_analysis')
    op.drop_index(op.f('ix_journal_vouchers_voucher_number'), table_name='journal_vouchers')
    op.drop_index(op.f('ix_journal_vouchers_organization_id'), table_name='journal_vouchers')
    op.drop_index(op.f('ix_journal_vouchers_id'), table_name='journal_vouchers')
    op.drop_index('idx_journal_org_date', table_name='journal_vouchers')
    op.drop_table('journal_vouchers')
    op.drop_index(op.f('ix_journal_entries_transaction_id'), table_name='journal_entries')
    op.drop_index(op.f('ix_journal_entries_reference_number'), table_name='journal_entries')
    op.drop_index(op.f('ix_journal_entries_organization_id'), table_name='journal_entries')
    op.drop_index(op.f('ix_journal_entries_id'), table_name='journal_entries')
    op.drop_index(op.f('ix_journal_entries_entry_number'), table_name='journal_entries')
    op.drop_index(op.f('ix_journal_entries_entry_date'), table_name='journal_entries')
    op.drop_index(op.f('ix_journal_entries_account_id'), table_name='journal_entries')
    op.drop_index('idx_je_transaction', table_name='journal_entries')
    op.drop_index('idx_je_org_date', table_name='journal_entries')
    op.drop_table('journal_entries')
    op.drop_index(op.f('ix_job_postings_organization_id'), table_name='job_postings')
    op.drop_index(op.f('ix_job_postings_job_title'), table_name='job_postings')
    op.drop_index(op.f('ix_job_postings_job_code'), table_name='job_postings')
    op.drop_index(op.f('ix_job_postings_id'), table_name='job_postings')
    op.drop_index('idx_job_posting_org_status', table_name='job_postings')
    op.drop_index('idx_job_posting_deadline', table_name='job_postings')
    op.drop_table('job_postings')
    op.drop_index(op.f('ix_inter_department_vouchers_voucher_number'), table_name='inter_department_vouchers')
    op.drop_index(op.f('ix_inter_department_vouchers_organization_id'), table_name='inter_department_vouchers')
    op.drop_index(op.f('ix_inter_department_vouchers_id'), table_name='inter_department_vouchers')
    op.drop_index('idx_idv_org_to_dept', table_name='inter_department_vouchers')
    op.drop_index('idx_idv_org_from_dept', table_name='inter_department_vouchers')
    op.drop_index('idx_idv_org_date', table_name='inter_department_vouchers')
    op.drop_table('inter_department_vouchers')
    op.drop_index(op.f('ix_google_calendar_integrations_id'), table_name='google_calendar_integrations')
    op.drop_table('google_calendar_integrations')
    op.drop_index(op.f('ix_general_ledger_transaction_number'), table_name='general_ledger')
    op.drop_index(op.f('ix_general_ledger_transaction_date'), table_name='general_ledger')
    op.drop_index(op.f('ix_general_ledger_reference_id'), table_name='general_ledger')
    op.drop_index(op.f('ix_general_ledger_organization_id'), table_name='general_ledger')
    op.drop_index(op.f('ix_general_ledger_id'), table_name='general_ledger')
    op.drop_index(op.f('ix_general_ledger_account_id'), table_name='general_ledger')
    op.drop_index('idx_gl_transaction_number', table_name='general_ledger')
    op.drop_index('idx_gl_reference', table_name='general_ledger')
    op.drop_index('idx_gl_org_account_date', table_name='general_ledger')
    op.drop_table('general_ledger')
    op.drop_index(op.f('ix_financial_models_organization_id'), table_name='financial_models')
    op.drop_index(op.f('ix_financial_models_model_type'), table_name='financial_models')
    op.drop_index(op.f('ix_financial_models_id'), table_name='financial_models')
    op.drop_index('idx_fin_model_template', table_name='financial_models')
    op.drop_index('idx_fin_model_org_type', table_name='financial_models')
    op.drop_table('financial_models')
    op.drop_index(op.f('ix_financial_model_templates_template_name'), table_name='financial_model_templates')
    op.drop_index(op.f('ix_financial_model_templates_template_category'), table_name='financial_model_templates')
    op.drop_index(op.f('ix_financial_model_templates_industry'), table_name='financial_model_templates')
    op.drop_index(op.f('ix_financial_model_templates_id'), table_name='financial_model_templates')
    op.drop_index('idx_template_category_industry', table_name='financial_model_templates')
    op.drop_index('idx_template_active_public', table_name='financial_model_templates')
    op.drop_table('financial_model_templates')
    op.drop_index(op.f('ix_financial_forecasts_organization_id'), table_name='financial_forecasts')
    op.drop_index(op.f('ix_financial_forecasts_id'), table_name='financial_forecasts')
    op.drop_index(op.f('ix_financial_forecasts_forecast_type'), table_name='financial_forecasts')
    op.drop_index(op.f('ix_financial_forecasts_forecast_method'), table_name='financial_forecasts')
    op.drop_index('idx_forecast_org_type', table_name='financial_forecasts')
    op.drop_index('idx_forecast_method_status', table_name='financial_forecasts')
    op.drop_table('financial_forecasts')
    op.drop_index(op.f('ix_external_integrations_provider'), table_name='external_integrations')
    op.drop_index(op.f('ix_external_integrations_organization_id'), table_name='external_integrations')
    op.drop_index(op.f('ix_external_integrations_name'), table_name='external_integrations')
    op.drop_index(op.f('ix_external_integrations_id'), table_name='external_integrations')
    op.drop_index(op.f('ix_external_integrations_company_id'), table_name='external_integrations')
    op.drop_index('idx_integration_org_type', table_name='external_integrations')
    op.drop_index('idx_integration_org_status', table_name='external_integrations')
    op.drop_index('idx_integration_org_provider', table_name='external_integrations')
    op.drop_table('external_integrations')
    op.drop_index(op.f('ix_erp_tax_codes_tax_type'), table_name='erp_tax_codes')
    op.drop_index(op.f('ix_erp_tax_codes_tax_code'), table_name='erp_tax_codes')
    op.drop_index(op.f('ix_erp_tax_codes_organization_id'), table_name='erp_tax_codes')
    op.drop_index(op.f('ix_erp_tax_codes_id'), table_name='erp_tax_codes')
    op.drop_index(op.f('ix_erp_tax_codes_hsn_sac_code'), table_name='erp_tax_codes')
    op.drop_index(op.f('ix_erp_tax_codes_gst_configuration_id'), table_name='erp_tax_codes')
    op.drop_index('idx_tax_org_type', table_name='erp_tax_codes')
    op.drop_table('erp_tax_codes')
    op.drop_index(op.f('ix_employee_profiles_user_id'), table_name='employee_profiles')
    op.drop_index(op.f('ix_employee_profiles_organization_id'), table_name='employee_profiles')
    op.drop_index(op.f('ix_employee_profiles_id'), table_name='employee_profiles')
    op.drop_index(op.f('ix_employee_profiles_employee_code'), table_name='employee_profiles')
    op.drop_index('idx_employee_profile_org_user', table_name='employee_profiles')
    op.drop_index('idx_employee_profile_hire_date', table_name='employee_profiles')
    op.drop_index('idx_employee_profile_employment_status', table_name='employee_profiles')
    op.drop_table('employee_profiles')
    op.drop_index(op.f('ix_email_templates_name'), table_name='email_templates')
    op.drop_index(op.f('ix_email_templates_id'), table_name='email_templates')
    op.drop_table('email_templates')
    op.drop_index(op.f('ix_email_rules_id'), table_name='email_rules')
    op.drop_table('email_rules')
    op.drop_index(op.f('ix_email_accounts_id'), table_name='email_accounts')
    op.drop_index(op.f('ix_email_accounts_email_address'), table_name='email_accounts')
    op.drop_table('email_accounts')
    op.drop_index(op.f('ix_customers_organization_id'), table_name='customers')
    op.drop_index(op.f('ix_customers_name'), table_name='customers')
    op.drop_index(op.f('ix_customers_id'), table_name='customers')
    op.drop_index(op.f('ix_customers_company_id'), table_name='customers')
    op.drop_index('idx_customer_org_name', table_name='customers')
    op.drop_index('idx_customer_org_active', table_name='customers')
    op.drop_table('customers')
    op.drop_index(op.f('ix_contra_vouchers_voucher_number'), table_name='contra_vouchers')
    op.drop_index(op.f('ix_contra_vouchers_organization_id'), table_name='contra_vouchers')
    op.drop_index(op.f('ix_contra_vouchers_id'), table_name='contra_vouchers')
    op.drop_index('idx_contra_org_to_account', table_name='contra_vouchers')
    op.drop_index('idx_contra_org_from_account', table_name='contra_vouchers')
    op.drop_index('idx_contra_org_date', table_name='contra_vouchers')
    op.drop_table('contra_vouchers')
    op.drop_index(op.f('ix_competitor_analysis_organization_id'), table_name='competitor_analysis')
    op.drop_index(op.f('ix_competitor_analysis_id'), table_name='competitor_analysis')
    op.drop_index(op.f('ix_competitor_analysis_competitor_domain'), table_name='competitor_analysis')
    op.drop_index('idx_competitor_org_domain', table_name='competitor_analysis')
    op.drop_index('idx_competitor_active', table_name='competitor_analysis')
    op.drop_table('competitor_analysis')
    op.drop_index(op.f('ix_channel_configurations_organization_id'), table_name='channel_configurations')
    op.drop_index(op.f('ix_channel_configurations_id'), table_name='channel_configurations')
    op.drop_index('idx_channel_config_org_type', table_name='channel_configurations')
    op.drop_index('idx_channel_config_active', table_name='channel_configurations')
    op.drop_table('channel_configurations')
    op.drop_index(op.f('ix_carriers_organization_id'), table_name='carriers')
    op.drop_index(op.f('ix_carriers_id'), table_name='carriers')
    op.drop_index('idx_carrier_org_type', table_name='carriers')
    op.drop_index('idx_carrier_org_name', table_name='carriers')
    op.drop_index('idx_carrier_org_active', table_name='carriers')
    op.drop_table('carriers')
    op.drop_index(op.f('ix_candidates_organization_id'), table_name='candidates')
    op.drop_index(op.f('ix_candidates_id'), table_name='candidates')
    op.drop_index(op.f('ix_candidates_email'), table_name='candidates')
    op.drop_index('idx_candidate_status', table_name='candidates')
    op.drop_index('idx_candidate_org_email', table_name='candidates')
    op.drop_index('idx_candidate_name', table_name='candidates')
    op.drop_table('candidates')
    op.drop_index(op.f('ix_campaigns_status'), table_name='campaigns')
    op.drop_index(op.f('ix_campaigns_organization_id'), table_name='campaigns')
    op.drop_index(op.f('ix_campaigns_name'), table_name='campaigns')
    op.drop_index(op.f('ix_campaigns_id'), table_name='campaigns')
    op.drop_index(op.f('ix_campaigns_campaign_type'), table_name='campaigns')
    op.drop_index(op.f('ix_campaigns_campaign_number'), table_name='campaigns')
    op.drop_index('idx_campaign_org_type', table_name='campaigns')
    op.drop_index('idx_campaign_org_status', table_name='campaigns')
    op.drop_index('idx_campaign_dates', table_name='campaigns')
    op.drop_table('campaigns')
    op.drop_index(op.f('ix_calendars_name'), table_name='calendars')
    op.drop_index(op.f('ix_calendars_id'), table_name='calendars')
    op.drop_table('calendars')
    op.drop_index(op.f('ix_business_rules_organization_id'), table_name='business_rules')
    op.drop_index(op.f('ix_business_rules_name'), table_name='business_rules')
    op.drop_index(op.f('ix_business_rules_id'), table_name='business_rules')
    op.drop_index(op.f('ix_business_rules_company_id'), table_name='business_rules')
    op.drop_index(op.f('ix_business_rules_code'), table_name='business_rules')
    op.drop_index(op.f('ix_business_rules_category'), table_name='business_rules')
    op.drop_index('idx_business_rule_org_category', table_name='business_rules')
    op.drop_index('idx_business_rule_active', table_name='business_rules')
    op.drop_table('business_rules')
    op.drop_index(op.f('ix_bank_accounts_organization_id'), table_name='bank_accounts')
    op.drop_index(op.f('ix_bank_accounts_id'), table_name='bank_accounts')
    op.drop_index(op.f('ix_bank_accounts_chart_account_id'), table_name='bank_accounts')
    op.drop_index(op.f('ix_bank_accounts_account_number'), table_name='bank_accounts')
    op.drop_index('idx_bank_org_active', table_name='bank_accounts')
    op.drop_table('bank_accounts')
    op.drop_index(op.f('ix_automation_workflows_workflow_type'), table_name='automation_workflows')
    op.drop_index(op.f('ix_automation_workflows_workflow_name'), table_name='automation_workflows')
    op.drop_index(op.f('ix_automation_workflows_organization_id'), table_name='automation_workflows')
    op.drop_index(op.f('ix_automation_workflows_id'), table_name='automation_workflows')
    op.drop_index(op.f('ix_automation_workflows_category'), table_name='automation_workflows')
    op.drop_index('idx_automation_workflow_org_type', table_name='automation_workflows')
    op.drop_index('idx_automation_workflow_org_category', table_name='automation_workflows')
    op.drop_index('idx_automation_workflow_org_active', table_name='automation_workflows')
    op.drop_table('automation_workflows')
    op.drop_index(op.f('ix_automated_insights_organization_id'), table_name='automated_insights')
    op.drop_index(op.f('ix_automated_insights_insight_type'), table_name='automated_insights')
    op.drop_index(op.f('ix_automated_insights_id'), table_name='automated_insights')
    op.drop_index(op.f('ix_automated_insights_generated_at'), table_name='automated_insights')
    op.drop_index('idx_insight_status_generated', table_name='automated_insights')
    op.drop_index('idx_insight_org_type', table_name='automated_insights')
    op.drop_index('idx_insight_importance', table_name='automated_insights')
    op.drop_table('automated_insights')
    op.drop_index(op.f('ix_audit_logs_organization_id'), table_name='audit_logs')
    op.drop_index(op.f('ix_audit_logs_id'), table_name='audit_logs')
    op.drop_index('idx_audit_org_timestamp', table_name='audit_logs')
    op.drop_index('idx_audit_org_table_action', table_name='audit_logs')
    op.drop_table('audit_logs')
    op.drop_index(op.f('ix_api_keys_organization_id'), table_name='api_keys')
    op.drop_index(op.f('ix_api_keys_key_prefix'), table_name='api_keys')
    op.drop_index(op.f('ix_api_keys_key_name'), table_name='api_keys')
    op.drop_index(op.f('ix_api_keys_id'), table_name='api_keys')
    op.drop_index(op.f('ix_api_keys_company_id'), table_name='api_keys')
    op.drop_index(op.f('ix_api_keys_api_key'), table_name='api_keys')
    op.drop_index('idx_api_key_prefix', table_name='api_keys')
    op.drop_index('idx_api_key_org_status', table_name='api_keys')
    op.drop_index('idx_api_key_org_access_level', table_name='api_keys')
    op.drop_table('api_keys')
    op.drop_index(op.f('ix_analytics_integrations_organization_id'), table_name='analytics_integrations')
    op.drop_index(op.f('ix_analytics_integrations_id'), table_name='analytics_integrations')
    op.drop_index('idx_analytics_org_provider', table_name='analytics_integrations')
    op.drop_index('idx_analytics_active', table_name='analytics_integrations')
    op.drop_table('analytics_integrations')
    op.drop_index(op.f('ix_ai_models_organization_id'), table_name='ai_models')
    op.drop_index(op.f('ix_ai_models_model_type'), table_name='ai_models')
    op.drop_index(op.f('ix_ai_models_model_name'), table_name='ai_models')
    op.drop_index(op.f('ix_ai_models_id'), table_name='ai_models')
    op.drop_index('idx_ai_model_org_type', table_name='ai_models')
    op.drop_index('idx_ai_model_org_status', table_name='ai_models')
    op.drop_table('ai_models')
    op.drop_index(op.f('ix_warehouses_warehouse_code'), table_name='warehouses')
    op.drop_index(op.f('ix_warehouses_organization_id'), table_name='warehouses')
    op.drop_index(op.f('ix_warehouses_id'), table_name='warehouses')
    op.drop_index('idx_warehouse_type', table_name='warehouses')
    op.drop_table('warehouses')
    op.drop_index(op.f('ix_users_supabase_uuid'), table_name='users')
    op.drop_index(op.f('ix_users_reporting_manager_id'), table_name='users')
    op.drop_index(op.f('ix_users_organization_id'), table_name='users')
    op.drop_index(op.f('ix_users_id'), table_name='users')
    op.drop_index(op.f('ix_users_email'), table_name='users')
    op.drop_index('idx_user_reporting_manager', table_name='users')
    op.drop_index('idx_user_org_email', table_name='users')
    op.drop_index('idx_user_org_active', table_name='users')
    op.drop_table('users')
    op.drop_index(op.f('ix_tax_slabs_organization_id'), table_name='tax_slabs')
    op.drop_index(op.f('ix_tax_slabs_id'), table_name='tax_slabs')
    op.drop_index('idx_tax_slab_regime', table_name='tax_slabs')
    op.drop_index('idx_tax_slab_org_year', table_name='tax_slabs')
    op.drop_table('tax_slabs')
    op.drop_index(op.f('ix_tally_error_logs_severity'), table_name='tally_error_logs')
    op.drop_index(op.f('ix_tally_error_logs_organization_id'), table_name='tally_error_logs')
    op.drop_index(op.f('ix_tally_error_logs_occurred_at'), table_name='tally_error_logs')
    op.drop_index(op.f('ix_tally_error_logs_id'), table_name='tally_error_logs')
    op.drop_index(op.f('ix_tally_error_logs_error_type'), table_name='tally_error_logs')
    op.drop_index(op.f('ix_tally_error_logs_error_code'), table_name='tally_error_logs')
    op.drop_index('idx_tally_error_type_severity', table_name='tally_error_logs')
    op.drop_index('idx_tally_error_resolved', table_name='tally_error_logs')
    op.drop_table('tally_error_logs')
    op.drop_index(op.f('ix_tally_data_cache_organization_id'), table_name='tally_data_cache')
    op.drop_index(op.f('ix_tally_data_cache_id'), table_name='tally_data_cache')
    op.drop_index(op.f('ix_tally_data_cache_expires_at'), table_name='tally_data_cache')
    op.drop_index(op.f('ix_tally_data_cache_data_type'), table_name='tally_data_cache')
    op.drop_index(op.f('ix_tally_data_cache_data_key'), table_name='tally_data_cache')
    op.drop_index(op.f('ix_tally_data_cache_data_hash'), table_name='tally_data_cache')
    op.drop_index(op.f('ix_tally_data_cache_cached_at'), table_name='tally_data_cache')
    op.drop_index('idx_tally_cache_hash', table_name='tally_data_cache')
    op.drop_index('idx_tally_cache_expires', table_name='tally_data_cache')
    op.drop_table('tally_data_cache')
    op.drop_index(op.f('ix_tally_configuration_organization_id'), table_name='tally_configuration')
    op.drop_index(op.f('ix_tally_configuration_id'), table_name='tally_configuration')
    op.drop_table('tally_configuration')
    op.drop_index(op.f('ix_stock_adjustments_status'), table_name='stock_adjustments')
    op.drop_index(op.f('ix_stock_adjustments_organization_id'), table_name='stock_adjustments')
    op.drop_index(op.f('ix_stock_adjustments_id'), table_name='stock_adjustments')
    op.drop_index(op.f('ix_stock_adjustments_adjustment_type'), table_name='stock_adjustments')
    op.drop_index(op.f('ix_stock_adjustments_adjustment_number'), table_name='stock_adjustments')
    op.drop_index(op.f('ix_stock_adjustments_adjustment_date'), table_name='stock_adjustments')
    op.drop_index('idx_stock_adj_org_status', table_name='stock_adjustments')
    op.drop_table('stock_adjustments')
    op.drop_index(op.f('ix_skill_categories_organization_id'), table_name='skill_categories')
    op.drop_index(op.f('ix_skill_categories_id'), table_name='skill_categories')
    op.drop_index('idx_skill_category_org_active', table_name='skill_categories')
    op.drop_table('skill_categories')
    op.drop_index(op.f('ix_sitemap_entries_url'), table_name='sitemap_entries')
    op.drop_index(op.f('ix_sitemap_entries_organization_id'), table_name='sitemap_entries')
    op.drop_index(op.f('ix_sitemap_entries_id'), table_name='sitemap_entries')
    op.drop_index('idx_sitemap_org_url', table_name='sitemap_entries')
    op.drop_index('idx_sitemap_active', table_name='sitemap_entries')
    op.drop_table('sitemap_entries')
    op.drop_index(op.f('ix_service_roles_organization_id'), table_name='service_roles')
    op.drop_index(op.f('ix_service_roles_id'), table_name='service_roles')
    op.drop_index('idx_service_role_org_active', table_name='service_roles')
    op.drop_table('service_roles')
    op.drop_index(op.f('ix_service_analytics_summary_date'), table_name='service_analytics')
    op.drop_index(op.f('ix_service_analytics_organization_id'), table_name='service_analytics')
    op.drop_index(op.f('ix_service_analytics_id'), table_name='service_analytics')
    op.drop_index('idx_service_analytics_org_date', table_name='service_analytics')
    op.drop_table('service_analytics')
    op.drop_index(op.f('ix_sales_analytics_summary_date'), table_name='sales_analytics')
    op.drop_index(op.f('ix_sales_analytics_organization_id'), table_name='sales_analytics')
    op.drop_index(op.f('ix_sales_analytics_id'), table_name='sales_analytics')
    op.drop_index('idx_sales_analytics_org_date', table_name='sales_analytics')
    op.drop_table('sales_analytics')
    op.drop_index(op.f('ix_request_for_quotations_submission_deadline'), table_name='request_for_quotations')
    op.drop_index(op.f('ix_request_for_quotations_status'), table_name='request_for_quotations')
    op.drop_index(op.f('ix_request_for_quotations_rfq_number'), table_name='request_for_quotations')
    op.drop_index(op.f('ix_request_for_quotations_organization_id'), table_name='request_for_quotations')
    op.drop_index(op.f('ix_request_for_quotations_issue_date'), table_name='request_for_quotations')
    op.drop_index(op.f('ix_request_for_quotations_id'), table_name='request_for_quotations')
    op.drop_index('idx_rfq_org_status', table_name='request_for_quotations')
    op.drop_index('idx_rfq_deadline', table_name='request_for_quotations')
    op.drop_table('request_for_quotations')
    op.drop_index(op.f('ix_recruitment_pipelines_organization_id'), table_name='recruitment_pipelines')
    op.drop_index(op.f('ix_recruitment_pipelines_id'), table_name='recruitment_pipelines')
    op.drop_index('idx_recruitment_pipeline_org_active', table_name='recruitment_pipelines')
    op.drop_index('idx_recruitment_pipeline_order', table_name='recruitment_pipelines')
    op.drop_table('recruitment_pipelines')
    op.drop_index(op.f('ix_purchase_analytics_summary_date'), table_name='purchase_analytics')
    op.drop_index(op.f('ix_purchase_analytics_organization_id'), table_name='purchase_analytics')
    op.drop_index(op.f('ix_purchase_analytics_id'), table_name='purchase_analytics')
    op.drop_index('idx_purchase_analytics_org_date', table_name='purchase_analytics')
    op.drop_table('purchase_analytics')
    op.drop_index(op.f('ix_payment_terms_organization_id'), table_name='payment_terms')
    op.drop_index(op.f('ix_payment_terms_id'), table_name='payment_terms')
    op.drop_index('idx_payment_term_org_name', table_name='payment_terms')
    op.drop_table('payment_terms')
    op.drop_index(op.f('ix_otp_verifications_organization_id'), table_name='otp_verifications')
    op.drop_index(op.f('ix_otp_verifications_id'), table_name='otp_verifications')
    op.drop_index(op.f('ix_otp_verifications_email'), table_name='otp_verifications')
    op.drop_index('idx_otp_expires', table_name='otp_verifications')
    op.drop_index('idx_otp_email_purpose', table_name='otp_verifications')
    op.drop_table('otp_verifications')
    op.drop_index(op.f('ix_notification_preferences_organization_id'), table_name='notification_preferences')
    op.drop_index(op.f('ix_notification_preferences_id'), table_name='notification_preferences')
    op.drop_index('idx_notification_pref_org_subject', table_name='notification_preferences')
    op.drop_table('notification_preferences')
    op.drop_index(op.f('ix_leave_types_organization_id'), table_name='leave_types')
    op.drop_index(op.f('ix_leave_types_id'), table_name='leave_types')
    op.drop_index('idx_leave_type_org_active', table_name='leave_types')
    op.drop_table('leave_types')
    op.drop_index(op.f('ix_gst_configuration_organization_id'), table_name='gst_configuration')
    op.drop_index(op.f('ix_gst_configuration_id'), table_name='gst_configuration')
    op.drop_index(op.f('ix_gst_configuration_gstin'), table_name='gst_configuration')
    op.drop_table('gst_configuration')
    op.drop_index(op.f('ix_financial_statements_statement_type'), table_name='financial_statements')
    op.drop_index(op.f('ix_financial_statements_period_start'), table_name='financial_statements')
    op.drop_index(op.f('ix_financial_statements_period_end'), table_name='financial_statements')
    op.drop_index(op.f('ix_financial_statements_organization_id'), table_name='financial_statements')
    op.drop_index(op.f('ix_financial_statements_id'), table_name='financial_statements')
    op.drop_index('idx_fs_period', table_name='financial_statements')
    op.drop_index('idx_fs_org_type_period', table_name='financial_statements')
    op.drop_table('financial_statements')
    op.drop_index(op.f('ix_financial_kpis_period_start'), table_name='financial_kpis')
    op.drop_index(op.f('ix_financial_kpis_period_end'), table_name='financial_kpis')
    op.drop_index(op.f('ix_financial_kpis_organization_id'), table_name='financial_kpis')
    op.drop_index(op.f('ix_financial_kpis_kpi_code'), table_name='financial_kpis')
    op.drop_index(op.f('ix_financial_kpis_kpi_category'), table_name='financial_kpis')
    op.drop_index(op.f('ix_financial_kpis_id'), table_name='financial_kpis')
    op.drop_index('idx_kpi_org_category_period', table_name='financial_kpis')
    op.drop_index('idx_kpi_code_period', table_name='financial_kpis')
    op.drop_table('financial_kpis')
    op.drop_index(op.f('ix_encrypted_customer_profiles_organization_id'), table_name='encrypted_customer_profiles')
    op.drop_index(op.f('ix_encrypted_customer_profiles_id'), table_name='encrypted_customer_profiles')
    op.drop_index(op.f('ix_encrypted_customer_profiles_customer_id'), table_name='encrypted_customer_profiles')
    op.drop_table('encrypted_customer_profiles')
    op.drop_index(op.f('ix_email_notifications_organization_id'), table_name='email_notifications')
    op.drop_index(op.f('ix_email_notifications_id'), table_name='email_notifications')
    op.drop_index('idx_email_org_status', table_name='email_notifications')
    op.drop_table('email_notifications')
    op.drop_index(op.f('ix_cost_centers_parent_cost_center_id'), table_name='cost_centers')
    op.drop_index(op.f('ix_cost_centers_organization_id'), table_name='cost_centers')
    op.drop_index(op.f('ix_cost_centers_id'), table_name='cost_centers')
    op.drop_index(op.f('ix_cost_centers_cost_center_code'), table_name='cost_centers')
    op.drop_index('idx_cc_org_active', table_name='cost_centers')
    op.drop_table('cost_centers')
    op.drop_index(op.f('ix_companies_organization_id'), table_name='companies')
    op.drop_index(op.f('ix_companies_id'), table_name='companies')
    op.drop_index('idx_company_org_name', table_name='companies')
    op.drop_table('companies')
    op.drop_index(op.f('ix_chart_of_accounts_parent_account_id'), table_name='chart_of_accounts')
    op.drop_index(op.f('ix_chart_of_accounts_organization_id'), table_name='chart_of_accounts')
    op.drop_index(op.f('ix_chart_of_accounts_id'), table_name='chart_of_accounts')
    op.drop_index(op.f('ix_chart_of_accounts_account_type'), table_name='chart_of_accounts')
    op.drop_index(op.f('ix_chart_of_accounts_account_name'), table_name='chart_of_accounts')
    op.drop_index(op.f('ix_chart_of_accounts_account_code'), table_name='chart_of_accounts')
    op.drop_index('idx_coa_parent', table_name='chart_of_accounts')
    op.drop_index('idx_coa_org_type', table_name='chart_of_accounts')
    op.drop_table('chart_of_accounts')
    op.drop_index(op.f('ix_api_endpoints_path'), table_name='api_endpoints')
    op.drop_index(op.f('ix_api_endpoints_organization_id'), table_name='api_endpoints')
    op.drop_index(op.f('ix_api_endpoints_id'), table_name='api_endpoints')
    op.drop_index('idx_api_endpoint_org_version', table_name='api_endpoints')
    op.drop_index('idx_api_endpoint_org_public', table_name='api_endpoints')
    op.drop_index('idx_api_endpoint_org_deprecated', table_name='api_endpoints')
    op.drop_table('api_endpoints')
    op.drop_index(op.f('ix_service_permissions_name'), table_name='service_permissions')
    op.drop_index(op.f('ix_service_permissions_module'), table_name='service_permissions')
    op.drop_index(op.f('ix_service_permissions_id'), table_name='service_permissions')
    op.drop_index(op.f('ix_service_permissions_action'), table_name='service_permissions')
    op.drop_index('idx_service_permission_module_action', table_name='service_permissions')
    op.drop_table('service_permissions')
    op.drop_index(op.f('ix_platform_users_id'), table_name='platform_users')
    op.drop_index(op.f('ix_platform_users_email'), table_name='platform_users')
    op.drop_index('idx_platform_user_email', table_name='platform_users')
    op.drop_index('idx_platform_user_active', table_name='platform_users')
    op.drop_table('platform_users')
    op.drop_index(op.f('ix_organizations_subdomain'), table_name='organizations')
    op.drop_index(op.f('ix_organizations_org_code'), table_name='organizations')
    op.drop_index(op.f('ix_organizations_name'), table_name='organizations')
    op.drop_index(op.f('ix_organizations_id'), table_name='organizations')
    op.drop_index('idx_org_status_subdomain', table_name='organizations')
    op.drop_table('organizations')
    op.drop_index(op.f('ix_migration_templates_id'), table_name='migration_templates')
    op.drop_index('idx_migration_template_source_data', table_name='migration_templates')
    op.drop_index('idx_migration_template_active', table_name='migration_templates')
    op.drop_table('migration_templates')
    # ### end Alembic commands ###