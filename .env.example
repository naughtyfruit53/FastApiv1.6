# =============================================================================
# FastAPI BOS Application Environment Configuration
# =============================================================================
# This file contains all environment variables needed for the application.
# Copy this file to .env and update the values for your environment.
# NEVER commit your actual .env file to version control!
# =============================================================================

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# PostgreSQL database connection string
# Format: postgresql://username:password@host:port/database_name
DATABASE_URL=postgresql://user:password@localhost:5432/fastapi_bos

# =============================================================================
# SUPABASE CONFIGURATION (Required for Auth Integration)
# =============================================================================
# Supabase project URL (found in project settings)
SUPABASE_URL=https://your-project.supabase.co

# Supabase anonymous/public key (for client-side operations)
SUPABASE_KEY=your-anon-public-key

# Supabase service role key (for server-side operations - KEEP SECRET!)
SUPABASE_SERVICE_KEY=your-service-role-key

# Supabase JWT secret (for token verification)
SUPABASE_JWT_SECRET=your-supabase-jwt-secret

# =============================================================================
# SECURITY & AUTHENTICATION
# =============================================================================
# Secret key for JWT token generation (MUST be changed in production!)
# Generate using: python -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_KEY=your-secret-key-here-change-in-production

# JWT algorithm (HS256 recommended)
ALGORITHM=HS256

# Access token expiration time in minutes (default: 3 hours)
ACCESS_TOKEN_EXPIRE_MINUTES=180

# Refresh token expiration time in minutes (default: 24 hours)
REFRESH_TOKEN_EXPIRE_MINUTES=1440

# Auth transport mode for development (default: false)
# When true, login endpoint sets cookies in addition to returning JSON tokens
# Development: Secure=False, SameSite=Lax
# Production: Secure=True, SameSite=None (requires HTTPS)
# Recommended: Keep false and use Authorization: Bearer {token} header
AUTH_COOKIE_DEV=false

# =============================================================================
# EMAIL CONFIGURATION
# =============================================================================

# --- Primary SMTP Configuration ---
# SMTP server hostname (e.g., smtp.gmail.com for Gmail)
SMTP_HOST=smtp.gmail.com

# SMTP server port (587 for TLS, 465 for SSL)
SMTP_PORT=587

# SMTP authentication username (usually your email address)
SMTP_USERNAME=your-email@gmail.com

# SMTP authentication password or app-specific password
SMTP_PASSWORD=your-app-password

# Email address to use as sender
EMAILS_FROM_EMAIL=your-email@gmail.com

# Display name for email sender
EMAILS_FROM_NAME=TRITIQ BOS

# --- Alternative Email Services (Optional) ---
# SendGrid API key (optional alternative email provider)
SENDGRID_API_KEY=your-sendgrid-api-key

# Brevo (formerly Sendinblue) API key (optional alternative email provider)
BREVO_API_KEY=your-brevo-api-key
BREVO_FROM_EMAIL=your-email@domain.com
BREVO_FROM_NAME=TRITIQ BOS

# --- Email Feature Flags ---
# Enable Brevo email service (true/false)
ENABLE_BREVO_EMAIL=true

# Enable email fallback to alternative providers on failure (true/false)
EMAIL_FALLBACK_ENABLED=true

# Number of retry attempts for failed email sends
EMAIL_RETRY_ATTEMPTS=3

# Delay between email retry attempts (in seconds)
EMAIL_RETRY_DELAY_SECONDS=5

# =============================================================================
# WHATSAPP OTP CONFIGURATION (Optional)
# =============================================================================
# WhatsApp provider (brevo/twilio)
WHATSAPP_PROVIDER=brevo

# WhatsApp sender phone number (with country code)
WHATSAPP_SENDER_NUMBER=+1234567890

# WhatsApp OTP template ID (provider-specific)
WHATSAPP_OTP_TEMPLATE_ID=123

# =============================================================================
# OAUTH2 CONFIGURATION
# =============================================================================

# --- Google OAuth2 (Gmail Integration) ---
# Google Cloud Console OAuth2 client ID
GOOGLE_CLIENT_ID=your-google-client-id

# Google Cloud Console OAuth2 client secret
GOOGLE_CLIENT_SECRET=your-google-client-secret

# --- Microsoft OAuth2 (Outlook/Office365 Integration) ---
# Microsoft Azure AD application (client) ID
MICROSOFT_CLIENT_ID=your-microsoft-client-id

# Microsoft Azure AD application client secret
MICROSOFT_CLIENT_SECRET=your-microsoft-client-secret

# Microsoft tenant ID (use 'common' for multi-tenant apps)
MICROSOFT_TENANT_ID=common

# --- OAuth2 Redirect URI ---
# Redirect URI for OAuth2 callbacks (must match OAuth2 app configuration)
OAUTH_REDIRECT_URI=http://localhost:3000/auth/callback

# =============================================================================
# DATA ENCRYPTION KEYS
# =============================================================================
# Encryption keys for sensitive data storage (MUST be base64-encoded Fernet keys)
# Generate using: python -c "from cryptography.fernet import Fernet; import base64; print(base64.urlsafe_b64encode(Fernet.generate_key()).decode())"

# Default encryption key for general encrypted data
ENCRYPTION_KEY_DEFAULT=your-base64-encoded-encryption-key

# Encryption key for PII (Personally Identifiable Information)
ENCRYPTION_KEY_PII=your-base64-encoded-pii-encryption-key

# Encryption key for financial data
ENCRYPTION_KEY_FINANCIAL=your-base64-encoded-financial-encryption-key

# =============================================================================
# AI & MACHINE LEARNING CONFIGURATION
# =============================================================================

# --- OpenAI Configuration ---
# OpenAI API key for GPT models (chatbot, text generation, embeddings)
# Get from: https://platform.openai.com/api-keys
OPENAI_API_KEY=your-openai-api-key

# OpenAI organization ID (optional)
OPENAI_ORG_ID=your-openai-org-id

# OpenAI model to use for chat completions (gpt-4, gpt-3.5-turbo, etc.)
OPENAI_MODEL=gpt-3.5-turbo

# OpenAI temperature (0.0-2.0, controls randomness)
OPENAI_TEMPERATURE=0.7

# OpenAI max tokens per request
OPENAI_MAX_TOKENS=1000

# --- AI Feature Toggles ---
# Enable AI chatbot features (true/false)
ENABLE_AI_CHATBOT=true

# Enable AI analytics features (true/false)
ENABLE_AI_ANALYTICS=true

# Enable AI-powered PDF extraction (true/false)
ENABLE_AI_PDF_EXTRACTION=true

# Enable AI business advisor (true/false)
ENABLE_AI_BUSINESS_ADVISOR=true

# Enable AI intent classification (true/false)
ENABLE_AI_INTENT_CLASSIFICATION=true

# Enable streaming analytics (true/false)
ENABLE_STREAMING_ANALYTICS=false

# Enable AutoML features (true/false)
ENABLE_AUTOML=false

# Enable AI explainability features (true/false)
ENABLE_AI_EXPLAINABILITY=false

# --- AI Service Configuration ---
# AI service timeout (in seconds)
AI_SERVICE_TIMEOUT=30

# AI cache TTL (time to live in seconds)
AI_CACHE_TTL=3600

# AI rate limit (requests per minute)
AI_RATE_LIMIT=60

# =============================================================================
# REDIS CONFIGURATION (Optional - for caching and session storage)
# =============================================================================
# Redis connection URL
# Format: redis://[username:password@]host:port[/database]
REDIS_URL=redis://localhost:6379

# Redis cache TTL in seconds (default: 1 hour)
REDIS_CACHE_TTL=3600

# =============================================================================
# FILE STORAGE & UPLOADS
# =============================================================================
# Directory for uploaded files (relative to project root)
UPLOAD_FOLDER=uploads

# Maximum file size for uploads in bytes (default: 10MB)
MAX_FILE_SIZE=10485760

# Allowed file extensions (comma-separated)
ALLOWED_EXTENSIONS=pdf,jpg,jpeg,png,gif,xlsx,xls,csv,doc,docx

# =============================================================================
# CORS CONFIGURATION
# =============================================================================
# Comma-separated list of allowed origins for CORS
# Add all frontend URLs that will access the backend API
BACKEND_CORS_ORIGINS=http://localhost:3000,http://localhost:8080,http://127.0.0.1:3000,http://127.0.0.1:8000,http://127.0.0.1:8080

# =============================================================================
# APPLICATION URLs
# =============================================================================
# Frontend application URL (used in email templates and redirects)
FRONTEND_URL=https://naughtyfruit.in

# Backend API URL (used for webhooks and callbacks)
BACKEND_URL=http://localhost:8000

# =============================================================================
# ADMIN & SUPERUSER CONFIGURATION
# =============================================================================
# Comma-separated list of super admin email addresses
SUPER_ADMIN_EMAILS=admin@tritiq.com,superadmin@tritiq.com

# Default admin password (used for initial setup - CHANGE IMMEDIATELY!)
DEFAULT_ADMIN_PASSWORD=changeme

# =============================================================================
# ENVIRONMENT & DEBUGGING
# =============================================================================
# Application environment (development/staging/production)
ENVIRONMENT=development

# Enable debug mode (true/false) - MUST be false in production!
DEBUG=true

# Log level (DEBUG/INFO/WARNING/ERROR/CRITICAL)
LOG_LEVEL=INFO

# =============================================================================
# THIRD-PARTY INTEGRATIONS (Optional)
# =============================================================================

# --- Tally Integration ---
# Tally server URL
TALLY_URL=http://localhost:9000

# Tally company name
TALLY_COMPANY=your-company-name

# --- AfterShip Integration (Shipment Tracking) ---
# AfterShip API key
AFTERSHIP_API_KEY=your-aftership-api-key

# --- SMS Provider (Twilio) ---
# Twilio account SID
TWILIO_ACCOUNT_SID=your-twilio-account-sid

# Twilio auth token
TWILIO_AUTH_TOKEN=your-twilio-auth-token

# Twilio phone number
TWILIO_PHONE_NUMBER=+1234567890

# --- Payment Gateway (Stripe) ---
# Stripe API key
STRIPE_API_KEY=your-stripe-api-key

# Stripe publishable key
STRIPE_PUBLISHABLE_KEY=your-stripe-publishable-key

# Stripe webhook secret
STRIPE_WEBHOOK_SECRET=your-stripe-webhook-secret

# --- Payment Gateway (Razorpay) ---
# Razorpay API key
RAZORPAY_API_KEY=your-razorpay-api-key

# Razorpay API secret
RAZORPAY_API_SECRET=your-razorpay-api-secret

# =============================================================================
# FEATURE FLAGS
# =============================================================================
# Enable demo mode (true/false)
ENABLE_DEMO_MODE=false

# Enable mobile app support (true/false)
ENABLE_MOBILE_SUPPORT=true

# Enable multi-tenant support (true/false)
ENABLE_MULTI_TENANT=true

# Enable audit logging (true/false)
ENABLE_AUDIT_LOGGING=true

# Enable notification system (true/false)
ENABLE_NOTIFICATIONS=true

# Enable WebSocket support (true/false)
ENABLE_WEBSOCKETS=true

# =============================================================================
# PERFORMANCE & SCALING
# =============================================================================
# Number of worker processes for Uvicorn
WORKERS=4

# Maximum concurrent requests
MAX_CONCURRENT_REQUESTS=1000

# Request timeout (in seconds)
REQUEST_TIMEOUT=60

# Database connection pool size
DB_POOL_SIZE=20

# Database connection pool overflow
DB_POOL_OVERFLOW=10

# =============================================================================
# MONITORING & OBSERVABILITY (Optional)
# =============================================================================
# Sentry DSN for error tracking
SENTRY_DSN=your-sentry-dsn

# Application Insights instrumentation key (Azure)
APPINSIGHTS_INSTRUMENTATION_KEY=your-app-insights-key

# New Relic license key
NEW_RELIC_LICENSE_KEY=your-new-relic-license-key

# =============================================================================
# END OF CONFIGURATION
# =============================================================================